@page "/"
@inherits BaseOrionsComponent
@using Orions.Systems.CrossModules.Components.Components.PropertyGrid;

<h5>Property Grid Test Page using Hyper Mission Phase</h5>

<p>Mission Id is : @MissionId</p>
<p>Phase Id is : @PhaseId</p>

<hr />

<PropertyGrid 
            Source="Data" 
            HyperStore="DataContext.Instance.NetStore" 
            OKVisible="true"
            CancelVisible="true">
</PropertyGrid>

@code{

    public string MissionId { get; set; } = "e8d88c8a-b82d-4911-9639-3080ef877653";

    public string PhaseId { get; set; } = "701544ad-e73b-4854-86ab-b0f8e3e91376";

    public object Data { get; set; }

    protected override async Task OnInitializedAsync()
    {
        Data = await GetMissionPhaseAsync();

        StateHasChanged();

        await base.OnInitializedAsync();
    }

    private async Task<object> GetMissionPhaseAsync()
    {
        return await DataContext.Instance.GetMissionPhaseAsync(MissionId, PhaseId);
    }

    private async Task<object> GetMissionAsync()
    {
        return await DataContext.Instance.GetMissionAsync(MissionId);
    }
}
