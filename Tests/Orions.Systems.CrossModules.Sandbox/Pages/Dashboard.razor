@namespace Orions.Systems.CrossModules.Pages
@page "/"

@inherits BaseOrionsComponent

@inject IMatToaster Toaster

<DashboardLayout 
                 Data="Data" 
                 EnableSplitter="false" 
                 Title="Dashboard Prototype"
                 OnSave="SaveChanges">
    
</DashboardLayout>

@code{

    private DashboardData Data { get; set; }

    protected override async Task OnInitializedAsync()
    {
        InitDashboard(); // load init data

        await base.OnInitializedAsync();
    }

    private void SaveChanges() {
        // Save dashboard data here

        ShowToaster(MatToastType.Success, "", "Save changes");
    }

    private void InitDashboard()
    {
        Data = new DashboardData();

        var row_1 = new DashboardRow();
        row_1.Columns.AddLast(new DashboardColumn { Size = 6 });
        row_1.Columns.AddLast(new DashboardColumn { Size = 6 });
        Data.Rows.Add(row_1);

        var row_2 = new DashboardRow();
        row_2.Columns.AddLast(new DashboardColumn { Size = 4 });
        row_2.Columns.AddLast(new DashboardColumn { Size = 4 });
        row_2.Columns.AddLast(new DashboardColumn { Size = 4 });
        Data.Rows.Add(row_2);
    }

    private void ShowToaster(MatToastType type, string title, string message)
    {
        Toaster.Add(message, type, title, "", config =>
        {
            config.ShowCloseButton = false;
            config.ShowProgressBar = false;
            config.MaximumOpacity = 100;
        });
    }
}

<style>
    

</style>
