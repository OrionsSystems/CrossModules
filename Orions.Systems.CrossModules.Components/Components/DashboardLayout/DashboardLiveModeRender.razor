@namespace Orions.Systems.CrossModules.Components

@using Orions.Node.Common

@inherits BaseBlazorComponent

@if (DashboardVm.Source.Rows.Any())
{
    var firstRowId = DashboardVm.Source.Rows.FirstOrDefault()?.Id;

    @foreach (var row in DashboardVm.Source.Rows)
    {
        <div class="row mb-4">
            @foreach (var column in row.Columns)
            {
                <div @key="column.Id" class="col-lg-@column.Size">

                    <div class="dashboard-element-container-live">
                        <div class="dashboard-content-live">
                            @if (column.Widget != null)
                            {
                                <WidgetDynamicComponent @key="column.Widget.Id" 
                                    DataContext="@DashboardVm.GetWidgetVm(column.Widget)" 
                                    DashboardVm="DashboardVm" />
                            }
                        </div>
                    </div>
                </div>
            }
        </div>
    }
}

@code{

    [Parameter]
    public DashboardVm DashboardVm { get; set; }

    [Parameter]
    public IHyperArgsSink HyperStore { get; set; }

}

<style>
    .dashboard-element-container-live {
        width: 100%;
    }
</style>