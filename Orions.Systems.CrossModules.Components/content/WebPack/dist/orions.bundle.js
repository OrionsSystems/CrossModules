!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=22)}([function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return Ta})),n.d(e,"c",(function(){return ja})),n.d(e,"d",(function(){return hu})),n.d(e,"e",(function(){return Ca})),n.d(e,"g",(function(){return ya})),n.d(e,"h",(function(){return wu})),n.d(e,"i",(function(){return Ir})),n.d(e,"j",(function(){return Eo})),n.d(e,"k",(function(){return To}));var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function r(t,e){return t(e={exports:{}},e.exports),e.exports}var o,a,s,u=function(t){return t&&t.Math==Math&&t},c=u("object"==typeof globalThis&&globalThis)||u("object"==typeof window&&window)||u("object"==typeof self&&self)||u("object"==typeof i&&i)||Function("return this")(),l=function(t){try{return!!t()}catch(t){return!0}},f=!l((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),h={}.propertyIsEnumerable,d=Object.getOwnPropertyDescriptor,p={f:d&&!h.call({1:2},1)?function(t){var e=d(this,t);return!!e&&e.enumerable}:h},m=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},v={}.toString,g=function(t){return v.call(t).slice(8,-1)},y="".split,b=l((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==g(t)?y.call(t,""):Object(t)}:Object,w=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},x=function(t){return b(w(t))},S=function(t){return"object"==typeof t?null!==t:"function"==typeof t},T=function(t,e){if(!S(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!S(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!S(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!S(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},E={}.hasOwnProperty,k=function(t,e){return E.call(t,e)},C=c.document,M=S(C)&&S(C.createElement),A=function(t){return M?C.createElement(t):{}},_=!f&&!l((function(){return 7!=Object.defineProperty(A("div"),"a",{get:function(){return 7}}).a})),P=Object.getOwnPropertyDescriptor,N={f:f?P:function(t,e){if(t=x(t),e=T(e,!0),_)try{return P(t,e)}catch(t){}if(k(t,e))return m(!p.f.call(t,e),t[e])}},O=function(t){if(!S(t))throw TypeError(String(t)+" is not an object");return t},I=Object.defineProperty,D={f:f?I:function(t,e,n){if(O(t),e=T(e,!0),O(n),_)try{return I(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},R=f?function(t,e,n){return D.f(t,e,m(1,n))}:function(t,e,n){return t[e]=n,t},L=function(t,e){try{R(c,t,e)}catch(n){c[t]=e}return e},j=c["__core-js_shared__"]||L("__core-js_shared__",{}),U=r((function(t){(t.exports=function(t,e){return j[t]||(j[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.3.6",mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})})),z=U("native-function-to-string",Function.toString),B=c.WeakMap,F="function"==typeof B&&/native code/.test(z.call(B)),H=0,q=Math.random(),K=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++H+q).toString(36)},$=U("keys"),V=function(t){return $[t]||($[t]=K(t))},W={},G=c.WeakMap;if(F){var X=new G,Y=X.get,Z=X.has,J=X.set;o=function(t,e){return J.call(X,t,e),e},a=function(t){return Y.call(X,t)||{}},s=function(t){return Z.call(X,t)}}else{var Q=V("state");W[Q]=!0,o=function(t,e){return R(t,Q,e),e},a=function(t){return k(t,Q)?t[Q]:{}},s=function(t){return k(t,Q)}}var tt,et,nt={set:o,get:a,has:s,enforce:function(t){return s(t)?a(t):o(t,{})},getterFor:function(t){return function(e){var n;if(!S(e)||(n=a(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},it=r((function(t){var e=nt.get,n=nt.enforce,i=String(z).split("toString");U("inspectSource",(function(t){return z.call(t)})),(t.exports=function(t,e,r,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable,u=!!o&&!!o.noTargetGet;"function"==typeof r&&("string"!=typeof e||k(r,"name")||R(r,"name",e),n(r).source=i.join("string"==typeof e?e:"")),t!==c?(a?!u&&t[e]&&(s=!0):delete t[e],s?t[e]=r:R(t,e,r)):s?t[e]=r:L(e,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||z.call(this)}))})),rt=c,ot=function(t){return"function"==typeof t?t:void 0},at=function(t,e){return arguments.length<2?ot(rt[t])||ot(c[t]):rt[t]&&rt[t][e]||c[t]&&c[t][e]},st=Math.ceil,ut=Math.floor,ct=function(t){return isNaN(t=+t)?0:(t>0?ut:st)(t)},lt=Math.min,ft=function(t){return t>0?lt(ct(t),9007199254740991):0},ht=Math.max,dt=Math.min,pt=function(t,e){var n=ct(t);return n<0?ht(n+e,0):dt(n,e)},mt=function(t){return function(e,n,i){var r,o=x(e),a=ft(o.length),s=pt(i,a);if(t&&n!=n){for(;a>s;)if((r=o[s++])!=r)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},vt={includes:mt(!0),indexOf:mt(!1)},gt=vt.indexOf,yt=function(t,e){var n,i=x(t),r=0,o=[];for(n in i)!k(W,n)&&k(i,n)&&o.push(n);for(;e.length>r;)k(i,n=e[r++])&&(~gt(o,n)||o.push(n));return o},bt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],wt=bt.concat("length","prototype"),xt={f:Object.getOwnPropertyNames||function(t){return yt(t,wt)}},St={f:Object.getOwnPropertySymbols},Tt=at("Reflect","ownKeys")||function(t){var e=xt.f(O(t)),n=St.f;return n?e.concat(n(t)):e},Et=function(t,e){for(var n=Tt(e),i=D.f,r=N.f,o=0;o<n.length;o++){var a=n[o];k(t,a)||i(t,a,r(e,a))}},kt=/#|\.prototype\./,Ct=function(t,e){var n=At[Mt(t)];return n==Pt||n!=_t&&("function"==typeof e?l(e):!!e)},Mt=Ct.normalize=function(t){return String(t).replace(kt,".").toLowerCase()},At=Ct.data={},_t=Ct.NATIVE="N",Pt=Ct.POLYFILL="P",Nt=Ct,Ot=N.f,It=function(t,e){var n,i,r,o,a,s=t.target,u=t.global,l=t.stat;if(n=u?c:l?c[s]||L(s,{}):(c[s]||{}).prototype)for(i in e){if(o=e[i],r=t.noTargetGet?(a=Ot(n,i))&&a.value:n[i],!Nt(u?i:s+(l?".":"#")+i,t.forced)&&void 0!==r){if(typeof o==typeof r)continue;Et(o,r)}(t.sham||r&&r.sham)&&R(o,"sham",!0),it(n,i,o,t)}},Dt=Array.isArray||function(t){return"Array"==g(t)},Rt=function(t,e,n){var i=T(e);i in t?D.f(t,i,m(0,n)):t[i]=n},Lt=!!Object.getOwnPropertySymbols&&!l((function(){return!String(Symbol())})),jt=c.Symbol,Ut=U("wks"),zt=function(t){return Ut[t]||(Ut[t]=Lt&&jt[t]||(Lt?jt:K)("Symbol."+t))},Bt=at("navigator","userAgent")||"",Ft=c.process,Ht=Ft&&Ft.versions,qt=Ht&&Ht.v8;qt?et=(tt=qt.split("."))[0]+tt[1]:Bt&&(!(tt=Bt.match(/Edge\/(\d+)/))||tt[1]>=74)&&(tt=Bt.match(/Chrome\/(\d+)/))&&(et=tt[1]);var Kt=et&&+et,$t=zt("species"),Vt=function(t){return Kt>=51||!l((function(){var e=[];return(e.constructor={})[$t]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Wt=zt("species"),Gt=[].slice,Xt=Math.max;It({target:"Array",proto:!0,forced:!Vt("slice")},{slice:function(t,e){var n,i,r,o=x(this),a=ft(o.length),s=pt(t,a),u=pt(void 0===e?a:e,a);if(Dt(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!Dt(n.prototype)?S(n)&&null===(n=n[Wt])&&(n=void 0):n=void 0,n===Array||void 0===n))return Gt.call(o,s,u);for(i=new(void 0===n?Array:n)(Xt(u-s,0)),r=0;s<u;s++,r++)s in o&&Rt(i,r,o[s]);return i.length=r,i}});var Yt=D.f,Zt=Function.prototype,Jt=Zt.toString,Qt=/^\s*function ([^ (]*)/;f&&!("name"in Zt)&&Yt(Zt,"name",{configurable:!0,get:function(){try{return Jt.call(this).match(Qt)[1]}catch(t){return""}}});var te=xt.f,ee={}.toString,ne="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ie={f:function(t){return ne&&"[object Window]"==ee.call(t)?function(t){try{return te(t)}catch(t){return ne.slice()}}(t):te(x(t))}},re=ie.f,oe=l((function(){return!Object.getOwnPropertyNames(1)}));function ae(t){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function se(t){return(se="function"==typeof Symbol&&"symbol"===ae(Symbol.iterator)?function(t){return ae(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":ae(t)})(t)}It({target:"Object",stat:!0,forced:oe},{getOwnPropertyNames:re});var ue=function(t){return Object(w(t))},ce=Object.keys||function(t){return yt(t,bt)},le=f?Object.defineProperties:function(t,e){O(t);for(var n,i=ce(e),r=i.length,o=0;r>o;)D.f(t,n=i[o++],e[n]);return t},fe=at("document","documentElement"),he=V("IE_PROTO"),de=function(){},pe=function(){var t,e=A("iframe"),n=bt.length;for(e.style.display="none",fe.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),pe=t.F;n--;)delete pe.prototype[bt[n]];return pe()},me=Object.create||function(t,e){var n;return null!==t?(de.prototype=O(t),n=new de,de.prototype=null,n[he]=t):n=pe(),void 0===e?n:le(n,e)};W[he]=!0;var ve={f:zt},ge=D.f,ye=function(t){var e=rt.Symbol||(rt.Symbol={});k(e,t)||ge(e,t,{value:ve.f(t)})},be=D.f,we=zt("toStringTag"),xe=function(t,e,n){t&&!k(t=n?t:t.prototype,we)&&be(t,we,{configurable:!0,value:e})},Se=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Te=function(t,e,n){if(Se(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}},Ee=zt("species"),ke=function(t,e){var n;return Dt(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Dt(n.prototype)?S(n)&&null===(n=n[Ee])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Ce=[].push,Me=function(t){var e=1==t,n=2==t,i=3==t,r=4==t,o=6==t,a=5==t||o;return function(s,u,c,l){for(var f,h,d=ue(s),p=b(d),m=Te(u,c,3),v=ft(p.length),g=0,y=l||ke,w=e?y(s,v):n?y(s,0):void 0;v>g;g++)if((a||g in p)&&(h=m(f=p[g],g,d),t))if(e)w[g]=h;else if(h)switch(t){case 3:return!0;case 5:return f;case 6:return g;case 2:Ce.call(w,f)}else if(r)return!1;return o?-1:i||r?r:w}},Ae={forEach:Me(0),map:Me(1),filter:Me(2),some:Me(3),every:Me(4),find:Me(5),findIndex:Me(6)},_e=Ae.forEach,Pe=V("hidden"),Ne=zt("toPrimitive"),Oe=nt.set,Ie=nt.getterFor("Symbol"),De=Object.prototype,Re=c.Symbol,Le=c.JSON,je=Le&&Le.stringify,Ue=N.f,ze=D.f,Be=ie.f,Fe=p.f,He=U("symbols"),qe=U("op-symbols"),Ke=U("string-to-symbol-registry"),$e=U("symbol-to-string-registry"),Ve=U("wks"),We=c.QObject,Ge=!We||!We.prototype||!We.prototype.findChild,Xe=f&&l((function(){return 7!=me(ze({},"a",{get:function(){return ze(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=Ue(De,e);i&&delete De[e],ze(t,e,n),i&&t!==De&&ze(De,e,i)}:ze,Ye=function(t,e){var n=He[t]=me(Re.prototype);return Oe(n,{type:"Symbol",tag:t,description:e}),f||(n.description=e),n},Ze=Lt&&"symbol"==typeof Re.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Re},Je=function(t,e,n){t===De&&Je(qe,e,n),O(t);var i=T(e,!0);return O(n),k(He,i)?(n.enumerable?(k(t,Pe)&&t[Pe][i]&&(t[Pe][i]=!1),n=me(n,{enumerable:m(0,!1)})):(k(t,Pe)||ze(t,Pe,m(1,{})),t[Pe][i]=!0),Xe(t,i,n)):ze(t,i,n)},Qe=function(t,e){O(t);var n=x(e),i=ce(n).concat(rn(n));return _e(i,(function(e){f&&!tn.call(n,e)||Je(t,e,n[e])})),t},tn=function(t){var e=T(t,!0),n=Fe.call(this,e);return!(this===De&&k(He,e)&&!k(qe,e))&&(!(n||!k(this,e)||!k(He,e)||k(this,Pe)&&this[Pe][e])||n)},en=function(t,e){var n=x(t),i=T(e,!0);if(n!==De||!k(He,i)||k(qe,i)){var r=Ue(n,i);return!r||!k(He,i)||k(n,Pe)&&n[Pe][i]||(r.enumerable=!0),r}},nn=function(t){var e=Be(x(t)),n=[];return _e(e,(function(t){k(He,t)||k(W,t)||n.push(t)})),n},rn=function(t){var e=t===De,n=Be(e?qe:x(t)),i=[];return _e(n,(function(t){!k(He,t)||e&&!k(De,t)||i.push(He[t])})),i};Lt||(it((Re=function(){if(this instanceof Re)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=K(t),n=function(t){this===De&&n.call(qe,t),k(this,Pe)&&k(this[Pe],e)&&(this[Pe][e]=!1),Xe(this,e,m(1,t))};return f&&Ge&&Xe(De,e,{configurable:!0,set:n}),Ye(e,t)}).prototype,"toString",(function(){return Ie(this).tag})),p.f=tn,D.f=Je,N.f=en,xt.f=ie.f=nn,St.f=rn,f&&(ze(Re.prototype,"description",{configurable:!0,get:function(){return Ie(this).description}}),it(De,"propertyIsEnumerable",tn,{unsafe:!0})),ve.f=function(t){return Ye(zt(t),t)}),It({global:!0,wrap:!0,forced:!Lt,sham:!Lt},{Symbol:Re}),_e(ce(Ve),(function(t){ye(t)})),It({target:"Symbol",stat:!0,forced:!Lt},{for:function(t){var e=String(t);if(k(Ke,e))return Ke[e];var n=Re(e);return Ke[e]=n,$e[n]=e,n},keyFor:function(t){if(!Ze(t))throw TypeError(t+" is not a symbol");if(k($e,t))return $e[t]},useSetter:function(){Ge=!0},useSimple:function(){Ge=!1}}),It({target:"Object",stat:!0,forced:!Lt,sham:!f},{create:function(t,e){return void 0===e?me(t):Qe(me(t),e)},defineProperty:Je,defineProperties:Qe,getOwnPropertyDescriptor:en}),It({target:"Object",stat:!0,forced:!Lt},{getOwnPropertyNames:nn,getOwnPropertySymbols:rn}),It({target:"Object",stat:!0,forced:l((function(){St.f(1)}))},{getOwnPropertySymbols:function(t){return St.f(ue(t))}}),Le&&It({target:"JSON",stat:!0,forced:!Lt||l((function(){var t=Re();return"[null]"!=je([t])||"{}"!=je({a:t})||"{}"!=je(Object(t))}))},{stringify:function(t){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=e=i[1],(S(e)||void 0!==t)&&!Ze(t))return Dt(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Ze(e))return e}),i[1]=e,je.apply(Le,i)}}),Re.prototype[Ne]||R(Re.prototype,Ne,Re.prototype.valueOf),xe(Re,"Symbol"),W[Pe]=!0;var on=D.f,an=c.Symbol;if(f&&"function"==typeof an&&(!("description"in an.prototype)||void 0!==an().description)){var sn={},un=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof un?new an(t):void 0===t?an():an(t);return""===t&&(sn[e]=!0),e};Et(un,an);var cn=un.prototype=an.prototype;cn.constructor=un;var ln=cn.toString,fn="Symbol(test)"==String(an("test")),hn=/^Symbol\((.*)\)[^)]+$/;on(cn,"description",{configurable:!0,get:function(){var t=S(this)?this.valueOf():this,e=ln.call(t);if(k(sn,t))return"";var n=fn?e.slice(7,-1):e.replace(hn,"$1");return""===n?void 0:n}}),It({global:!0,forced:!0},{Symbol:un})}ye("iterator");var dn=zt("unscopables"),pn=Array.prototype;null==pn[dn]&&R(pn,dn,me(null));var mn,vn,gn,yn=function(t){pn[dn][t]=!0},bn={},wn=!l((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),xn=V("IE_PROTO"),Sn=Object.prototype,Tn=wn?Object.getPrototypeOf:function(t){return t=ue(t),k(t,xn)?t[xn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Sn:null},En=zt("iterator"),kn=!1;[].keys&&("next"in(gn=[].keys())?(vn=Tn(Tn(gn)))!==Object.prototype&&(mn=vn):kn=!0),null==mn&&(mn={}),k(mn,En)||R(mn,En,(function(){return this}));var Cn={IteratorPrototype:mn,BUGGY_SAFARI_ITERATORS:kn},Mn=Cn.IteratorPrototype,An=function(){return this},_n=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,i){return O(n),function(t){if(!S(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(i),e?t.call(n,i):n.__proto__=i,n}}():void 0),Pn=Cn.IteratorPrototype,Nn=Cn.BUGGY_SAFARI_ITERATORS,On=zt("iterator"),In=function(){return this},Dn=function(t,e,n,i,r,o,a){!function(t,e,n){var i=e+" Iterator";t.prototype=me(Mn,{next:m(1,n)}),xe(t,i,!1),bn[i]=An}(n,e,i);var s,u,c,l=function(t){if(t===r&&v)return v;if(!Nn&&t in d)return d[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},f=e+" Iterator",h=!1,d=t.prototype,p=d[On]||d["@@iterator"]||r&&d[r],v=!Nn&&p||l(r),g="Array"==e&&d.entries||p;if(g&&(s=Tn(g.call(new t)),Pn!==Object.prototype&&s.next&&(Tn(s)!==Pn&&(_n?_n(s,Pn):"function"!=typeof s[On]&&R(s,On,In)),xe(s,f,!0))),"values"==r&&p&&"values"!==p.name&&(h=!0,v=function(){return p.call(this)}),d[On]!==v&&R(d,On,v),bn[e]=v,r)if(u={values:l("values"),keys:o?v:l("keys"),entries:l("entries")},a)for(c in u)(Nn||h||!(c in d))&&it(d,c,u[c]);else It({target:e,proto:!0,forced:Nn||h},u);return u},Rn=nt.set,Ln=nt.getterFor("Array Iterator"),jn=Dn(Array,"Array",(function(t,e){Rn(this,{type:"Array Iterator",target:x(t),index:0,kind:e})}),(function(){var t=Ln(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:e[i],done:!1}:{value:[i,e[i]],done:!1}}),"values");bn.Arguments=bn.Array,yn("keys"),yn("values"),yn("entries");var Un=Object.assign,zn=!Un||l((function(){var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=Un({},t)[n]||"abcdefghijklmnopqrst"!=ce(Un({},e)).join("")}))?function(t,e){for(var n=ue(t),i=arguments.length,r=1,o=St.f,a=p.f;i>r;)for(var s,u=b(arguments[r++]),c=o?ce(u).concat(o(u)):ce(u),l=c.length,h=0;l>h;)s=c[h++],f&&!a.call(u,s)||(n[s]=u[s]);return n}:Un;It({target:"Object",stat:!0,forced:Object.assign!==zn},{assign:zn});var Bn=zt("toStringTag"),Fn="Arguments"==g(function(){return arguments}()),Hn=function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Bn))?n:Fn?g(e):"Object"==(i=g(e))&&"function"==typeof e.callee?"Arguments":i},qn={};qn[zt("toStringTag")]="z";var Kn="[object z]"!==String(qn)?function(){return"[object "+Hn(this)+"]"}:qn.toString,$n=Object.prototype;Kn!==$n.toString&&it($n,"toString",Kn,{unsafe:!0});var Vn=!l((function(){return Object.isExtensible(Object.preventExtensions({}))})),Wn=r((function(t){var e=D.f,n=K("meta"),i=0,r=Object.isExtensible||function(){return!0},o=function(t){e(t,n,{value:{objectID:"O"+ ++i,weakData:{}}})},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!S(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!k(t,n)){if(!r(t))return"F";if(!e)return"E";o(t)}return t[n].objectID},getWeakData:function(t,e){if(!k(t,n)){if(!r(t))return!0;if(!e)return!1;o(t)}return t[n].weakData},onFreeze:function(t){return Vn&&a.REQUIRED&&r(t)&&!k(t,n)&&o(t),t}};W[n]=!0})),Gn=zt("iterator"),Xn=Array.prototype,Yn=zt("iterator"),Zn=function(t,e,n,i){try{return i?e(O(n)[0],n[1]):e(n)}catch(e){var r=t.return;throw void 0!==r&&O(r.call(t)),e}},Jn=r((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,n,i,r,o){var a,s,u,c,l,f,h,d,p=Te(n,i,r?2:1);if(o)a=t;else{if("function"!=typeof(s=function(t){if(null!=t)return t[Yn]||t["@@iterator"]||bn[Hn(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(d=s)&&(bn.Array===d||Xn[Gn]===d)){for(u=0,c=ft(t.length);c>u;u++)if((l=r?p(O(h=t[u])[0],h[1]):p(t[u]))&&l instanceof e)return l;return new e(!1)}a=s.call(t)}for(f=a.next;!(h=f.call(a)).done;)if("object"==typeof(l=Zn(a,p,h.value,r))&&l&&l instanceof e)return l;return new e(!1)}).stop=function(t){return new e(!0,t)}})),Qn=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},ti=zt("iterator"),ei=!1;try{var ni=0,ii={next:function(){return{done:!!ni++}},return:function(){ei=!0}};ii[ti]=function(){return this},Array.from(ii,(function(){throw 2}))}catch(t){}var ri=function(t,e,n){var i,r;return _n&&"function"==typeof(i=e.constructor)&&i!==n&&S(r=i.prototype)&&r!==n.prototype&&_n(t,r),t},oi=function(t,e,n){for(var i in e)it(t,i,e[i],n);return t},ai=zt("species"),si=D.f,ui=Wn.fastKey,ci=nt.set,li=nt.getterFor,fi=(function(t,e,n,i,r){var o=c[t],a=o&&o.prototype,s=o,u=i?"set":"add",f={},h=function(t){var e=a[t];it(a,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(r&&!S(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return r&&!S(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(r&&!S(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(Nt(t,"function"!=typeof o||!(r||a.forEach&&!l((function(){(new o).entries().next()})))))s=n.getConstructor(e,t,i,u),Wn.REQUIRED=!0;else if(Nt(t,!0)){var d=new s,p=d[u](r?{}:-0,1)!=d,m=l((function(){d.has(1)})),v=function(t,e){if(!e&&!ei)return!1;var n=!1;try{var i={};i[ti]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n}((function(t){new o(t)})),g=!r&&l((function(){for(var t=new o,e=5;e--;)t[u](e,e);return!t.has(-0)}));v||((s=e((function(e,n){Qn(e,s,t);var r=ri(new o,e,s);return null!=n&&Jn(n,r[u],r,i),r}))).prototype=a,a.constructor=s),(m||g)&&(h("delete"),h("has"),i&&h("get")),(g||p)&&h(u),r&&a.clear&&delete a.clear}f[t]=s,It({global:!0,forced:s!=o},f),xe(s,t),r||n.setStrong(s,t,i)}("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,n,i){var r=t((function(t,o){Qn(t,r,e),ci(t,{type:e,index:me(null),first:void 0,last:void 0,size:0}),f||(t.size=0),null!=o&&Jn(o,t[i],t,n)})),o=li(e),a=function(t,e,n){var i,r,a=o(t),u=s(t,e);return u?u.value=n:(a.last=u={index:r=ui(e,!0),key:e,value:n,previous:i=a.last,next:void 0,removed:!1},a.first||(a.first=u),i&&(i.next=u),f?a.size++:t.size++,"F"!==r&&(a.index[r]=u)),t},s=function(t,e){var n,i=o(t),r=ui(e);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==e)return n};return oi(r.prototype,{clear:function(){for(var t=o(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,f?t.size=0:this.size=0},delete:function(t){var e=o(this),n=s(this,t);if(n){var i=n.next,r=n.previous;delete e.index[n.index],n.removed=!0,r&&(r.next=i),i&&(i.previous=r),e.first==n&&(e.first=i),e.last==n&&(e.last=r),f?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=o(this),i=Te(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(i(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),oi(r.prototype,n?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),f&&si(r.prototype,"size",{get:function(){return o(this).size}}),r},setStrong:function(t,e,n){var i=e+" Iterator",r=li(e),o=li(i);Dn(t,e,(function(t,e){ci(this,{type:i,target:t,state:r(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),function(t){var e=at(t),n=D.f;f&&e&&!e[ai]&&n(e,ai,{configurable:!0,get:function(){return this}})}(e)}}),function(t){return function(e,n){var i,r,o=String(w(e)),a=ct(n),s=o.length;return a<0||a>=s?t?"":void 0:(i=o.charCodeAt(a))<55296||i>56319||a+1===s||(r=o.charCodeAt(a+1))<56320||r>57343?t?o.charAt(a):i:t?o.slice(a,a+2):r-56320+(i-55296<<10)+65536}}),hi={codeAt:fi(!1),charAt:fi(!0)},di=hi.charAt,pi=nt.set,mi=nt.getterFor("String Iterator");Dn(String,"String",(function(t){pi(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=mi(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=di(n,i),e.index+=t.length,{value:t,done:!1})}));var vi={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},gi=zt("iterator"),yi=zt("toStringTag"),bi=jn.values;for(var wi in vi){var xi=c[wi],Si=xi&&xi.prototype;if(Si){if(Si[gi]!==bi)try{R(Si,gi,bi)}catch(t){Si[gi]=bi}if(Si[yi]||R(Si,yi,wi),vi[wi])for(var Ti in jn)if(Si[Ti]!==jn[Ti])try{R(Si,Ti,jn[Ti])}catch(t){Si[Ti]=jn[Ti]}}}function Ei(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ki={},Ci=[];function Mi(t,e){if(Array.isArray(t)){var n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){Mi(o.value,e)}}catch(t){i=!0,r=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}else if("object"!==se(t))_i(Object.getOwnPropertyNames(e)),ki[t]=Object.assign(ki[t]||{},e);else for(var s in t)Mi(s,t[s])}function Ai(t){return ki[t]||{}}function _i(t){Ci.push.apply(Ci,Ei(t))}var Pi=vt.includes;It({target:"Array",proto:!0},{includes:function(t){return Pi(this,t,arguments.length>1?arguments[1]:void 0)}}),yn("includes");var Ni,Oi,Ii=function(){var t=O(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Di=RegExp.prototype.exec,Ri=String.prototype.replace,Li=Di,ji=(Ni=/a/,Oi=/b*/g,Di.call(Ni,"a"),Di.call(Oi,"a"),0!==Ni.lastIndex||0!==Oi.lastIndex),Ui=void 0!==/()??/.exec("")[1];(ji||Ui)&&(Li=function(t){var e,n,i,r,o=this;return Ui&&(n=new RegExp("^"+o.source+"$(?!\\s)",Ii.call(o))),ji&&(e=o.lastIndex),i=Di.call(o,t),ji&&i&&(o.lastIndex=o.global?i.index+i[0].length:e),Ui&&i&&i.length>1&&Ri.call(i[0],n,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)})),i});var zi=Li;It({target:"RegExp",proto:!0,forced:/./.exec!==zi},{exec:zi});var Bi=zt("match"),Fi=function(t){var e;return S(t)&&(void 0!==(e=t[Bi])?!!e:"RegExp"==g(t))},Hi=function(t){if(Fi(t))throw TypeError("The method doesn't accept regular expressions");return t},qi=zt("match");It({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[qi]=!1,"/./"[t](e)}catch(t){}}return!1}("includes")},{includes:function(t){return!!~String(w(this)).indexOf(Hi(t),arguments.length>1?arguments[1]:void 0)}});var Ki=zt("species"),$i=!l((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),Vi=!l((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Wi=function(t,e,n,i){var r=zt(t),o=!l((function(){var e={};return e[r]=function(){return 7},7!=""[t](e)})),a=o&&!l((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Ki]=function(){return n},n.flags="",n[r]=/./[r]),n.exec=function(){return e=!0,null},n[r](""),!e}));if(!o||!a||"replace"===t&&!$i||"split"===t&&!Vi){var s=/./[r],u=n(r,""[t],(function(t,e,n,i,r){return e.exec===zi?o&&!r?{done:!0,value:s.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}})),c=u[0],f=u[1];it(String.prototype,t,c),it(RegExp.prototype,r,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)}),i&&R(RegExp.prototype[r],"sham",!0)}},Gi=hi.charAt,Xi=function(t,e,n){return e+(n?Gi(t,e).length:1)},Yi=function(t,e){var n=t.exec;if("function"==typeof n){var i=n.call(t,e);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==g(t))throw TypeError("RegExp#exec called on incompatible receiver");return zi.call(t,e)},Zi=Math.max,Ji=Math.min,Qi=Math.floor,tr=/\$([$&'`]|\d\d?|<[^>]*>)/g,er=/\$([$&'`]|\d\d?)/g;Wi("replace",2,(function(t,e,n){return[function(n,i){var r=w(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r,i):e.call(String(r),n,i)},function(t,r){var o=n(e,t,this,r);if(o.done)return o.value;var a=O(t),s=String(this),u="function"==typeof r;u||(r=String(r));var c=a.global;if(c){var l=a.unicode;a.lastIndex=0}for(var f=[];;){var h=Yi(a,s);if(null===h)break;if(f.push(h),!c)break;""===String(h[0])&&(a.lastIndex=Xi(s,ft(a.lastIndex),l))}for(var d,p="",m=0,v=0;v<f.length;v++){h=f[v];for(var g=String(h[0]),y=Zi(Ji(ct(h.index),s.length),0),b=[],w=1;w<h.length;w++)b.push(void 0===(d=h[w])?d:String(d));var x=h.groups;if(u){var S=[g].concat(b,y,s);void 0!==x&&S.push(x);var T=String(r.apply(void 0,S))}else T=i(g,s,y,b,x,r);y>=m&&(p+=s.slice(m,y)+T,m=y+g.length)}return p+s.slice(m)}];function i(t,n,i,r,o,a){var s=i+t.length,u=r.length,c=er;return void 0!==o&&(o=ue(o),c=tr),e.call(a,c,(function(e,a){var c;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,i);case"'":return n.slice(s);case"<":c=o[a.slice(1,-1)];break;default:var l=+a;if(0===l)return e;if(l>u){var f=Qi(l/10);return 0===f?e:f<=u?void 0===r[f-1]?a.charAt(1):r[f-1]+a.charAt(1):e}c=r[l-1]}return void 0===c?"":c}))}}));var nr="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",ir="["+nr+"]",rr=RegExp("^"+ir+ir+"*"),or=RegExp(ir+ir+"*$"),ar=function(t){return function(e){var n=String(w(e));return 1&t&&(n=n.replace(rr,"")),2&t&&(n=n.replace(or,"")),n}},sr={start:ar(1),end:ar(2),trim:ar(3)},ur=sr.trim;function cr(t,e){var n,i=t.length,r=[];for(n=0;n<i;n++)r.push(e(t[n]));return r}function lr(t){return t%360*Math.PI/180}function fr(t){return t.toLowerCase().replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))}function hr(t){return t.replace(/([A-Z])/g,(function(t,e){return"-"+e.toLowerCase()}))}function dr(t){return t.charAt(0).toUpperCase()+t.slice(1)}function pr(t,e,n,i){return null!=e&&null!=n||(i=i||t.bbox(),null==e?e=i.width/i.height*n:null==n&&(n=i.height/i.width*e)),{width:e,height:n}}function mr(t,e){var n,i,r=t.origin;if("string"==typeof r||null==r){var o=(r||"center").toLowerCase().trim(),a=e.bbox(),s=a.height,u=a.width,c=a.x,l=a.y,f=o.includes("left")?c:o.includes("right")?c+u:c+u/2,h=o.includes("top")?l:o.includes("bottom")?l+s:l+s/2;n=null!=t.ox?t.ox:f,i=null!=t.oy?t.oy:h}else n=r[0],i=r[1];return[n,i]}It({target:"String",proto:!0,forced:function(t){return l((function(){return!!nr[t]()||"âÂá "!="âÂá "[t]()||nr[t].name!==t}))}("trim")},{trim:function(){return ur(this)}});var vr="http://www.w3.org/2000/svg",gr="http://www.w3.org/2000/xmlns/",yr="http://www.w3.org/1999/xlink",br="http://svgjs.com/svgjs",wr={window:"undefined"==typeof window?null:window,document:"undefined"==typeof document?null:document};function xr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Sr=function t(){xr(this,t)},Tr={},Er="___SYMBOL___ROOT___";function kr(t){return wr.document.createElementNS(vr,t)}function Cr(t){if(t instanceof Sr)return t;if("object"===se(t))return _r(t);if(null==t)return new Tr[Er];if("string"==typeof t&&"<"!==t.charAt(0))return _r(wr.document.querySelector(t));var e=kr("svg");return e.innerHTML=t,t=_r(e.firstChild)}function Mr(t,e){return e instanceof wr.window.Node?e:kr(t)}function Ar(t){if(!t)return null;if(t.instance instanceof Sr)return t.instance;var e=dr(t.nodeName||"Dom");return"LinearGradient"===e||"RadialGradient"===e?e="Gradient":Tr[e]||(e="Dom"),new Tr[e](t)}var _r=Ar;function Pr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.name,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Tr[e]=t,n&&(Tr[Er]=t),_i(Object.getOwnPropertyNames(t.prototype)),t}var Nr=1e3;function Or(t){return"Svgjs"+dr(t)+Nr++}function Ir(t,e,n){var i,r;for(r=(t=Array.isArray(t)?t:[t]).length-1;r>=0;r--)for(i in e){var o=e[i];n&&(o=Dr(e[i])),t[r].prototype[i]=o}}function Dr(t){return function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=n[n.length-1];return!r||r.constructor!==Object||r instanceof Array?t.apply(this,n):t.apply(this,n.slice(0,-1)).attr(r)}}Mi("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position()+1,e=this.parent();return e.removeElement(this).add(this,t),"function"==typeof e.isRoot&&e.isRoot()&&e.node.appendChild(e.defs().node),this},backward:function(){var t=this.position();return t>0&&this.parent().removeElement(this).add(this,t-1),this},front:function(){var t=this.parent();return t.node.appendChild(this.node),"function"==typeof t.isRoot&&t.isRoot()&&t.node.appendChild(t.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(t){(t=Cr(t)).remove();var e=this.position();return this.parent().add(t,e),this},after:function(t){(t=Cr(t)).remove();var e=this.position();return this.parent().add(t,e+1),this},insertBefore:function(t){return(t=Cr(t)).before(this),this},insertAfter:function(t){return(t=Cr(t)).after(this),this}});var Rr=Ae.filter;It({target:"Array",proto:!0,forced:!Vt("filter")},{filter:function(t){return Rr(this,t,arguments.length>1?arguments[1]:void 0)}});var Lr=function(t,e){var n=[][t];return!n||!l((function(){n.call(null,e||function(){throw 1},1)}))},jr=vt.indexOf,Ur=[].indexOf,zr=!!Ur&&1/[1].indexOf(1,-0)<0,Br=Lr("indexOf");It({target:"Array",proto:!0,forced:zr||Br},{indexOf:function(t){return zr?Ur.apply(this,arguments)||0:jr(this,t,arguments.length>1?arguments[1]:void 0)}});var Fr=[].join,Hr=b!=Object,qr=Lr("join",",");It({target:"Array",proto:!0,forced:Hr||qr},{join:function(t){return Fr.call(x(this),void 0===t?",":t)}});var Kr=zt("species"),$r=[].push,Vr=Math.min,Wr=!l((function(){return!RegExp(4294967295,"y")}));Wi("split",2,(function(t,e,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var i=String(w(this)),r=void 0===n?4294967295:n>>>0;if(0===r)return[];if(void 0===t)return[i];if(!Fi(t))return e.call(i,t,r);for(var o,a,s,u=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,f=new RegExp(t.source,c+"g");(o=zi.call(f,i))&&!((a=f.lastIndex)>l&&(u.push(i.slice(l,o.index)),o.length>1&&o.index<i.length&&$r.apply(u,o.slice(1)),s=o[0].length,l=a,u.length>=r));)f.lastIndex===o.index&&f.lastIndex++;return l===i.length?!s&&f.test("")||u.push(""):u.push(i.slice(l)),u.length>r?u.slice(0,r):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var r=w(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,r,n):i.call(String(r),e,n)},function(t,r){var o=n(i,t,this,r,i!==e);if(o.done)return o.value;var a=O(t),s=String(this),u=function(t,e){var n,i=O(t).constructor;return void 0===i||null==(n=O(i)[Kr])?e:Se(n)}(a,RegExp),c=a.unicode,l=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(Wr?"y":"g"),f=new u(Wr?a:"^(?:"+a.source+")",l),h=void 0===r?4294967295:r>>>0;if(0===h)return[];if(0===s.length)return null===Yi(f,s)?[s]:[];for(var d=0,p=0,m=[];p<s.length;){f.lastIndex=Wr?p:0;var v,g=Yi(f,Wr?s:s.slice(p));if(null===g||(v=Vr(ft(f.lastIndex+(Wr?0:p)),s.length))===d)p=Xi(s,p,c);else{if(m.push(s.slice(d,p)),m.length===h)return m;for(var y=1;y<=g.length-1;y++)if(m.push(g[y]),m.length===h)return m;p=d=v}}return m.push(s.slice(d)),m}]}),!Wr);var Gr=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,Xr=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Yr=/rgb\((\d+),(\d+),(\d+)\)/,Zr=/(#[a-z0-9\-_]+)/i,Jr=/\)\s*,?\s*/,Qr=/\s/g,to=/^#[a-f0-9]{3,6}$/i,eo=/^rgb\(/,no=/^(\s+)?$/,io=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ro=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,oo=/[\s,]+/,ao=/([^e])-/gi,so=/[MLHVCSQTAZ]/gi,uo=/[MLHVCSQTAZ]/i,co=/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,lo=/\./g;Mi("Dom",{classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(oo)},hasClass:function(t){return-1!==this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter((function(e){return e!==t})).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)}});var fo=Ae.forEach,ho=Lr("forEach")?function(t){return fo(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach;for(var po in It({target:"Array",proto:!0,forced:[].forEach!=ho},{forEach:ho}),vi){var mo=c[po],vo=mo&&mo.prototype;if(vo&&vo.forEach!==ho)try{R(vo,"forEach",ho)}catch(t){vo.forEach=ho}}Mi("Dom",{css:function(t,e){var n={};if(0===arguments.length)return this.node.style.cssText.split(/\s*;\s*/).filter((function(t){return!!t.length})).forEach((function(t){var e=t.split(/\s*:\s*/);n[e[0]]=e[1]})),n;if(arguments.length<2){if(Array.isArray(t)){var i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var u=a.value,c=fr(u);n[c]=this.node.style[c]}}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}if("string"==typeof t)return this.node.style[fr(t)];if("object"===se(t))for(var l in t)this.node.style[fr(l)]=null==t[l]||no.test(t[l])?"":t[l]}return 2===arguments.length&&(this.node.style[fr(t)]=null==e||no.test(e)?"":e),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return"none"!==this.css("display")}}),Mi("Dom",{data:function(t,e,n){if("object"===se(t))for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(e){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:!0===n||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),Mi("Dom",{remember:function(t,e){if("object"===se(arguments[0]))for(var n in t)this.remember(n,t[n]);else{if(1===arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0===arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory=this._memory||{}}});var go=function(t){return function(e,n,i,r){Se(n);var o=ue(e),a=b(o),s=ft(o.length),u=t?s-1:0,c=t?-1:1;if(i<2)for(;;){if(u in a){r=a[u],u+=c;break}if(u+=c,t?u<0:s<=u)throw TypeError("Reduce of empty array with no initial value")}for(;t?u>=0:s>u;u+=c)u in a&&(r=n(r,a[u],u,o));return r}},yo={left:go(!1),right:go(!0)}.left;It({target:"Array",proto:!0,forced:Lr("reduce")},{reduce:function(t){return yo(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var bo=0,wo={};function xo(t){var e=t.getEventHolder();return e===wr.window&&(e=wo),e.events||(e.events={}),e.events}function So(t){return t.getEventTarget()}function To(t,e,n,i,r){var o=n.bind(i||t),a=Cr(t),s=xo(a),u=So(a);e=Array.isArray(e)?e:e.split(oo),n._svgjsListenerId||(n._svgjsListenerId=++bo),e.forEach((function(t){var e=t.split(".")[0],i=t.split(".")[1]||"*";s[e]=s[e]||{},s[e][i]=s[e][i]||{},s[e][i][n._svgjsListenerId]=o,u.addEventListener(e,o,r||!1)}))}function Eo(t,e,n,i){var r=Cr(t),o=xo(r),a=So(r);("function"!=typeof n||(n=n._svgjsListenerId))&&(e=Array.isArray(e)?e:(e||"").split(oo)).forEach((function(t){var e,s,u=t&&t.split(".")[0],c=t&&t.split(".")[1];if(n)o[u]&&o[u][c||"*"]&&(a.removeEventListener(u,o[u][c||"*"][n],i||!1),delete o[u][c||"*"][n]);else if(u&&c){if(o[u]&&o[u][c]){for(s in o[u][c])Eo(a,[u,c].join("."),s);delete o[u][c]}}else if(c)for(t in o)for(e in o[t])c===e&&Eo(a,[t,c].join("."));else if(u){if(o[u]){for(e in o[u])Eo(a,[u,e].join("."));delete o[u]}}else{for(t in o)Eo(a,t);!function(t){var e=t.getEventHolder();e.events&&(e.events={})}(r)}}))}var ko=zt("isConcatSpreadable"),Co=Kt>=51||!l((function(){var t=[];return t[ko]=!1,t.concat()[0]!==t})),Mo=Vt("concat"),Ao=function(t){if(!S(t))return!1;var e=t[ko];return void 0!==e?!!e:Dt(t)};It({target:"Array",proto:!0,forced:!Co||!Mo},{concat:function(t){var e,n,i,r,o,a=ue(this),s=ke(a,0),u=0;for(e=-1,i=arguments.length;e<i;e++)if(o=-1===e?a:arguments[e],Ao(o)){if(u+(r=ft(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<r;n++,u++)n in o&&Rt(s,u,o[n])}else{if(u>=9007199254740991)throw TypeError("Maximum allowed index exceeded");Rt(s,u++,o)}return s.length=u,s}});var _o=Ae.map;It({target:"Array",proto:!0,forced:!Vt("map")},{map:function(t){return _o(this,t,arguments.length>1?arguments[1]:void 0)}});var Po=Date.prototype,No=Po.toString,Oo=Po.getTime;new Date(NaN)+""!="Invalid Date"&&it(Po,"toString",(function(){var t=Oo.call(this);return t==t?No.call(this):"Invalid Date"}));var Io=sr.trim,Do=c.parseInt,Ro=/^[+-]?0[Xx]/,Lo=8!==Do(nr+"08")||22!==Do(nr+"0x16")?function(t,e){var n=Io(String(t));return Do(n,e>>>0||(Ro.test(n)?16:10))}:Do;It({global:!0,forced:parseInt!=Lo},{parseInt:Lo});var jo=RegExp.prototype,Uo=jo.toString,zo=l((function(){return"/a/b"!=Uo.call({source:"a",flags:"b"})})),Bo="toString"!=Uo.name;function Fo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ho(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function qo(t,e,n){return e&&Ho(t.prototype,e),n&&Ho(t,n),t}function Ko(t){return 4===t.length?["#",t.substring(1,2),t.substring(1,2),t.substring(2,3),t.substring(2,3),t.substring(3,4),t.substring(3,4)].join(""):t}function $o(t){var e=Math.round(t),n=Math.max(0,Math.min(255,e)).toString(16);return 1===n.length?"0"+n:n}function Vo(t,e){for(var n=e.length;n--;)if(null==t[e[n]])return!1;return!0}function Wo(t,e){var n=Vo(t,"rgb")?{_a:t.r,_b:t.g,_c:t.b,space:"rgb"}:Vo(t,"xyz")?{_a:t.x,_b:t.y,_c:t.z,_d:0,space:"xyz"}:Vo(t,"hsl")?{_a:t.h,_b:t.s,_c:t.l,_d:0,space:"hsl"}:Vo(t,"lab")?{_a:t.l,_b:t.a,_c:t.b,_d:0,space:"lab"}:Vo(t,"lch")?{_a:t.l,_b:t.c,_c:t.h,_d:0,space:"lch"}:Vo(t,"cmyk")?{_a:t.c,_b:t.m,_c:t.y,_d:t.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return n.space=e||n.space,n}function Go(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}(zo||Bo)&&it(RegExp.prototype,"toString",(function(){var t=O(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in jo)?Ii.call(t):n)}),{unsafe:!0});var Xo=function(){function t(){xr(this,t),this.init.apply(this,arguments)}return qo(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"rgb";if(t=t||0,this.space)for(var o in this.space)delete this[this.space[o]];if("number"==typeof t)r="string"==typeof i?i:r,i="string"==typeof i?0:i,Object.assign(this,{_a:t,_b:e,_c:n,_d:i,space:r});else if(t instanceof Array)this.space=e||("string"==typeof t[3]?t[3]:t[4])||"rgb",Object.assign(this,{_a:t[0],_b:t[1],_c:t[2],_d:t[3]||0});else if(t instanceof Object){var a=Wo(t,e);Object.assign(this,a)}else if("string"==typeof t)if(eo.test(t)){var s=t.replace(Qr,""),u=Yr.exec(s).slice(1,4).map((function(t){return parseInt(t)})),c=Fo(u,3),l=c[0],f=c[1],h=c[2];Object.assign(this,{_a:l,_b:f,_c:h,_d:0,space:"rgb"})}else{if(!to.test(t))throw Error("Unsupported string format, can't construct Color");var d=function(t){return parseInt(t,16)},p=Xr.exec(Ko(t)).map(d),m=Fo(p,4),v=m[1],g=m[2],y=m[3];Object.assign(this,{_a:v,_b:g,_c:y,_d:0,space:"rgb"})}var b=this._a,w=this._b,x=this._c,S=this._d,T="rgb"===this.space?{r:b,g:w,b:x}:"xyz"===this.space?{x:b,y:w,z:x}:"hsl"===this.space?{h:b,s:w,l:x}:"lab"===this.space?{l:b,a:w,b:x}:"lch"===this.space?{l:b,c:w,h:x}:"cmyk"===this.space?{c:b,m:w,y:x,k:S}:{};Object.assign(this,T)}},{key:"rgb",value:function(){if("rgb"===this.space)return this;if("lab"===(_=this.space)||"xyz"===_||"lch"===_){var e=this.x,n=this.y,i=this.z;if("lab"===this.space||"lch"===this.space){var r=this.l,o=this.a,a=this.b;if("lch"===this.space){var s=this.c,u=this.h,c=Math.PI/180;o=s*Math.cos(c*u),a=s*Math.sin(c*u)}var l=(r+16)/116,f=o/500+l,h=l-a/200,d=16/116,p=.008856;e=.95047*(Math.pow(f,3)>p?Math.pow(f,3):(f-d)/7.787),n=1*(Math.pow(l,3)>p?Math.pow(l,3):(l-d)/7.787),i=1.08883*(Math.pow(h,3)>p?Math.pow(h,3):(h-d)/7.787)}var m=3.2406*e+-1.5372*n+-.4986*i,v=-.9689*e+1.8758*n+.0415*i,g=.0557*e+-.204*n+1.057*i,y=Math.pow,b=.0031308;return new t(255*(m>b?1.055*y(m,1/2.4)-.055:12.92*m),255*(v>b?1.055*y(v,1/2.4)-.055:12.92*v),255*(g>b?1.055*y(g,1/2.4)-.055:12.92*g))}if("hsl"===this.space){var w=this.h,x=this.s,S=this.l;if(w/=360,S/=100,0===(x/=100))return new t(S*=255,S,S);var T=S<.5?S*(1+x):S+x-S*x,E=2*S-T;return new t(255*Go(E,T,w+1/3),255*Go(E,T,w),255*Go(E,T,w-1/3))}if("cmyk"===this.space){var k=this.c,C=this.m,M=this.y,A=this.k;return new t(255*(1-Math.min(1,k*(1-A)+A)),255*(1-Math.min(1,C*(1-A)+A)),255*(1-Math.min(1,M*(1-A)+A)))}return this;var _}},{key:"lab",value:function(){var e=this.xyz(),n=e.x,i=e.y;return new t(116*i-16,500*(n-i),200*(i-e.z),"lab")}},{key:"xyz",value:function(){var e=this.rgb(),n=Fo([e._a,e._b,e._c].map((function(t){return t/255})),3),i=n[0],r=n[1],o=n[2],a=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,s=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,u=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,c=(.4124*a+.3576*s+.1805*u)/.95047,l=(.2126*a+.7152*s+.0722*u)/1,f=(.0193*a+.1192*s+.9505*u)/1.08883;return new t(c>.008856?Math.pow(c,1/3):7.787*c+16/116,l>.008856?Math.pow(l,1/3):7.787*l+16/116,f>.008856?Math.pow(f,1/3):7.787*f+16/116,"xyz")}},{key:"lch",value:function(){var e=this.lab(),n=e.l,i=e.a,r=e.b,o=Math.sqrt(Math.pow(i,2)+Math.pow(r,2)),a=180*Math.atan2(r,i)/Math.PI;return a<0&&(a=360-(a*=-1)),new t(n,o,a,"lch")}},{key:"hsl",value:function(){var e=this.rgb(),n=Fo([e._a,e._b,e._c].map((function(t){return t/255})),3),i=n[0],r=n[1],o=n[2],a=Math.max(i,r,o),s=Math.min(i,r,o),u=(a+s)/2,c=a===s,l=a-s;return new t(360*(c?0:a===i?((r-o)/l+(r<o?6:0))/6:a===r?((o-i)/l+2)/6:a===o?((i-r)/l+4)/6:0),100*(c?0:u>.5?l/(2-a-s):l/(a+s)),100*u,"hsl")}},{key:"cmyk",value:function(){var e=this.rgb(),n=Fo([e._a,e._b,e._c].map((function(t){return t/255})),3),i=n[0],r=n[1],o=n[2],a=Math.min(1-i,1-r,1-o);return 1===a?new t(0,0,0,1,"cmyk"):new t((1-i-a)/(1-a),(1-r-a)/(1-a),(1-o-a)/(1-a),a,"cmyk")}},{key:"_clamped",value:function(){var t=this.rgb(),e=t._a,n=t._b,i=t._c,r=Math.max,o=Math.min,a=Math.round;return[e,n,i].map((function(t){return r(0,o(a(t),255))}))}},{key:"toHex",value:function(){var t=Fo(this._clamped().map($o),3),e=t[0],n=t[1],i=t[2];return"#".concat(e).concat(n).concat(i)}},{key:"toString",value:function(){return this.toHex()}},{key:"toRgb",value:function(){var t=Fo(this._clamped(),3),e=t[0],n=t[1],i=t[2];return"rgb(".concat(e,",").concat(n,",").concat(i,")")}},{key:"toArray",value:function(){return[this._a,this._b,this._c,this._d,this.space]}}],[{key:"random",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vibrant",n=arguments.length>1?arguments[1]:void 0,i=Math.random,r=Math.round,o=Math.sin,a=Math.PI;if("vibrant"===e){var s=24*i()+57,u=38*i()+45,c=360*i(),l=new t(s,u,c,"lch");return l}if("sine"===e){var f=r(80*o(2*a*(n=null==n?i():n)/.5+.01)+150),h=r(50*o(2*a*n/.5+4.6)+200),d=r(100*o(2*a*n/.5+2.3)+150),p=new t(f,h,d);return p}if("pastel"===e){var m=8*i()+86,v=17*i()+9,g=360*i(),y=new t(m,v,g,"lch");return y}if("dark"===e){var b=10+10*i(),w=50*i()+86,x=360*i(),S=new t(b,w,x,"lch");return S}if("rgb"===e){var T=255*i(),E=255*i(),k=255*i(),C=new t(T,E,k);return C}if("lab"===e){var M=100*i(),A=256*i()-128,_=256*i()-128,P=new t(M,A,_,"lab");return P}if("grey"===e){var N=255*i(),O=new t(N,N,N);return O}}},{key:"test",value:function(t){return"string"==typeof t&&(to.test(t)||eo.test(t))}},{key:"isRgb",value:function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b}},{key:"isColor",value:function(e){return e&&(e instanceof t||this.isRgb(e)||this.test(e))}}]),t}(),Yo=l((function(){ce(1)}));function Zo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jo(t,e){return!e||"object"!==se(e)&&"function"!=typeof e?Zo(t):e}function Qo(t){return(Qo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ta(t,e,n){return(ta="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qo(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ea(t,e){return(ea=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function na(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ea(t,e)}It({target:"Object",stat:!0,forced:Yo},{keys:function(t){return ce(ue(t))}}),Wi("match",1,(function(t,e,n){return[function(e){var n=w(this),i=null==e?void 0:e[t];return void 0!==i?i.call(e,n):new RegExp(e)[t](String(n))},function(t){var i=n(e,t,this);if(i.done)return i.value;var r=O(t),o=String(this);if(!r.global)return Yi(r,o);var a=r.unicode;r.lastIndex=0;for(var s,u=[],c=0;null!==(s=Yi(r,o));){var l=String(s[0]);u[c]=l,""===l&&(r.lastIndex=Xi(o,ft(r.lastIndex),a)),c++}return 0===c?null:u}]}));var ia=xt.f,ra=N.f,oa=D.f,aa=sr.trim,sa=c.Number,ua=sa.prototype,ca="Number"==g(me(ua)),la=function(t){var e,n,i,r,o,a,s,u,c=T(t,!1);if("string"==typeof c&&c.length>2)if(43===(e=(c=aa(c)).charCodeAt(0))||45===e){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+c}for(a=(o=c.slice(2)).length,s=0;s<a;s++)if((u=o.charCodeAt(s))<48||u>r)return NaN;return parseInt(o,i)}return+c};if(Nt("Number",!sa(" 0o1")||!sa("0b1")||sa("+0x1"))){for(var fa,ha=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof ha&&(ca?l((function(){ua.valueOf.call(n)})):"Number"!=g(n))?ri(new sa(la(e)),n,ha):la(e)},da=f?ia(sa):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),pa=0;da.length>pa;pa++)k(sa,fa=da[pa])&&!k(ha,fa)&&oa(ha,fa,ra(sa,fa));ha.prototype=ua,ua.constructor=ha,it(c,"Number",ha)}var ma=sr.trim,va=c.parseFloat,ga=1/va(nr+"-0")!=-1/0?function(t){var e=ma(String(t)),n=va(e);return 0===n&&"-"==e.charAt(0)?-0:n}:va;It({global:!0,forced:parseFloat!=ga},{parseFloat:ga});var ya=function(){function t(){xr(this,t),this.init.apply(this,arguments)}return qo(t,[{key:"init",value:function(t,e){var n=0,i=0,r=Array.isArray(t)?{x:t[0],y:t[1]}:"object"===se(t)?{x:t.x,y:t.y}:{x:t,y:e};return this.x=null==r.x?n:r.x,this.y=null==r.y?i:r.y,this}},{key:"clone",value:function(){return new t(this)}},{key:"transform",value:function(t){return this.clone().transformO(t)}},{key:"transformO",value:function(t){wa.isMatrixLike(t)||(t=new wa(t));var e=this.x,n=this.y;return this.x=t.a*e+t.c*n+t.e,this.y=t.b*e+t.d*n+t.f,this}},{key:"toArray",value:function(){return[this.x,this.y]}}]),t}();function ba(t,e,n){return Math.abs(e-t)<(n||1e-6)}var wa=function(){function t(){xr(this,t),this.init.apply(this,arguments)}return qo(t,[{key:"init",value:function(e){var n=t.fromArray([1,0,0,1,0,0]);return e=e instanceof ja?e.matrixify():"string"==typeof e?t.fromArray(e.split(oo).map(parseFloat)):Array.isArray(e)?t.fromArray(e):"object"===se(e)&&t.isMatrixLike(e)?e:"object"===se(e)?(new t).transform(e):6===arguments.length?t.fromArray([].slice.call(arguments)):n,this.a=null!=e.a?e.a:n.a,this.b=null!=e.b?e.b:n.b,this.c=null!=e.c?e.c:n.c,this.d=null!=e.d?e.d:n.d,this.e=null!=e.e?e.e:n.e,this.f=null!=e.f?e.f:n.f,this}},{key:"clone",value:function(){return new t(this)}},{key:"transform",value:function(e){if(t.isMatrixLike(e))return new t(e).multiplyO(this);var n=t.formatTransforms(e),i=new ya(n.ox,n.oy).transform(this),r=i.x,o=i.y,a=(new t).translateO(n.rx,n.ry).lmultiplyO(this).translateO(-r,-o).scaleO(n.scaleX,n.scaleY).skewO(n.skewX,n.skewY).shearO(n.shear).rotateO(n.theta).translateO(r,o);if(isFinite(n.px)||isFinite(n.py)){var s=new ya(r,o).transform(a),u=n.px?n.px-s.x:0,c=n.py?n.py-s.y:0;a.translateO(u,c)}return a.translateO(n.tx,n.ty),a}},{key:"compose",value:function(e){e.origin&&(e.originX=e.origin[0],e.originY=e.origin[1]);var n=e.originX||0,i=e.originY||0,r=e.scaleX||1,o=e.scaleY||1,a=e.shear||0,s=e.rotate||0,u=e.translateX||0,c=e.translateY||0;return(new t).translateO(-n,-i).scaleO(r,o).shearO(a).rotateO(s).translateO(u,c).lmultiplyO(this).translateO(n,i)}},{key:"decompose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.a,i=this.b,r=this.c,o=this.d,a=this.e,s=this.f,u=n*o-i*r,c=u>0?1:-1,l=c*Math.sqrt(n*n+i*i),f=Math.atan2(c*i,c*n),h=180/Math.PI*f,d=Math.cos(f),p=Math.sin(f),m=(n*r+i*o)/u,v=r*l/(m*n-i)||o*l/(m*i+n),g=a-t+t*d*l+e*(m*d*l-p*v),y=s-e+t*p*l+e*(m*p*l+d*v);return{scaleX:l,scaleY:v,shear:m,rotate:h,translateX:g,translateY:y,originX:t,originY:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}},{key:"multiply",value:function(t){return this.clone().multiplyO(t)}},{key:"multiplyO",value:function(e){var n=e instanceof t?e:new t(e);return t.matrixMultiply(this,n,this)}},{key:"lmultiply",value:function(t){return this.clone().lmultiplyO(t)}},{key:"lmultiplyO",value:function(e){var n=e instanceof t?e:new t(e);return t.matrixMultiply(n,this,this)}},{key:"inverseO",value:function(){var t=this.a,e=this.b,n=this.c,i=this.d,r=this.e,o=this.f,a=t*i-e*n;if(!a)throw new Error("Cannot invert "+this);var s=i/a,u=-e/a,c=-n/a,l=t/a,f=-(s*r+c*o),h=-(u*r+l*o);return this.a=s,this.b=u,this.c=c,this.d=l,this.e=f,this.f=h,this}},{key:"inverse",value:function(){return this.clone().inverseO()}},{key:"translate",value:function(t,e){return this.clone().translateO(t,e)}},{key:"translateO",value:function(t,e){return this.e+=t||0,this.f+=e||0,this}},{key:"scale",value:function(t,e,n,i){var r;return(r=this.clone()).scaleO.apply(r,arguments)}},{key:"scaleO",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;3===arguments.length&&(i=n,n=e,e=t);var r=this.a,o=this.b,a=this.c,s=this.d,u=this.e,c=this.f;return this.a=r*t,this.b=o*e,this.c=a*t,this.d=s*e,this.e=u*t-n*t+n,this.f=c*e-i*e+i,this}},{key:"rotate",value:function(t,e,n){return this.clone().rotateO(t,e,n)}},{key:"rotateO",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=lr(t);var i=Math.cos(t),r=Math.sin(t),o=this.a,a=this.b,s=this.c,u=this.d,c=this.e,l=this.f;return this.a=o*i-a*r,this.b=a*i+o*r,this.c=s*i-u*r,this.d=u*i+s*r,this.e=c*i-l*r+n*r-e*i+e,this.f=l*i+c*r-e*r-n*i+n,this}},{key:"flip",value:function(t,e){return this.clone().flipO(t,e)}},{key:"flipO",value:function(t,e){return"x"===t?this.scaleO(-1,1,e,0):"y"===t?this.scaleO(1,-1,0,e):this.scaleO(-1,-1,t,e||t)}},{key:"shear",value:function(t,e,n){return this.clone().shearO(t,e,n)}},{key:"shearO",value:function(t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this.a,i=this.b,r=this.c,o=this.d,a=this.e,s=this.f;return this.a=n+i*t,this.c=r+o*t,this.e=a+s*t-e*t,this}},{key:"skew",value:function(t,e,n,i){var r;return(r=this.clone()).skewO.apply(r,arguments)}},{key:"skewO",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;3===arguments.length&&(i=n,n=e,e=t),t=lr(t),e=lr(e);var r=Math.tan(t),o=Math.tan(e),a=this.a,s=this.b,u=this.c,c=this.d,l=this.e,f=this.f;return this.a=a+s*r,this.b=s+a*o,this.c=u+c*r,this.d=c+u*o,this.e=l+f*r-i*r,this.f=f+l*o-n*o,this}},{key:"skewX",value:function(t,e,n){return this.skew(t,0,e,n)}},{key:"skewXO",value:function(t,e,n){return this.skewO(t,0,e,n)}},{key:"skewY",value:function(t,e,n){return this.skew(0,t,e,n)}},{key:"skewYO",value:function(t,e,n){return this.skewO(0,t,e,n)}},{key:"aroundO",value:function(t,e,n){var i=t||0,r=e||0;return this.translateO(-i,-r).lmultiplyO(n).translateO(i,r)}},{key:"around",value:function(t,e,n){return this.clone().aroundO(t,e,n)}},{key:"equals",value:function(e){var n=new t(e);return ba(this.a,n.a)&&ba(this.b,n.b)&&ba(this.c,n.c)&&ba(this.d,n.d)&&ba(this.e,n.e)&&ba(this.f,n.f)}},{key:"toString",value:function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}},{key:"toArray",value:function(){return[this.a,this.b,this.c,this.d,this.e,this.f]}},{key:"valueOf",value:function(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}],[{key:"fromArray",value:function(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}},{key:"isMatrixLike",value:function(t){return null!=t.a||null!=t.b||null!=t.c||null!=t.d||null!=t.e||null!=t.f}},{key:"formatTransforms",value:function(t){var e="both"===t.flip||!0===t.flip,n=t.flip&&(e||"x"===t.flip)?-1:1,i=t.flip&&(e||"y"===t.flip)?-1:1,r=t.skew&&t.skew.length?t.skew[0]:isFinite(t.skew)?t.skew:isFinite(t.skewX)?t.skewX:0,o=t.skew&&t.skew.length?t.skew[1]:isFinite(t.skew)?t.skew:isFinite(t.skewY)?t.skewY:0,a=t.scale&&t.scale.length?t.scale[0]*n:isFinite(t.scale)?t.scale*n:isFinite(t.scaleX)?t.scaleX*n:n,s=t.scale&&t.scale.length?t.scale[1]*i:isFinite(t.scale)?t.scale*i:isFinite(t.scaleY)?t.scaleY*i:i,u=t.shear||0,c=t.rotate||t.theta||0,l=new ya(t.origin||t.around||t.ox||t.originX,t.oy||t.originY),f=l.x,h=l.y,d=new ya(t.position||t.px||t.positionX,t.py||t.positionY),p=d.x,m=d.y,v=new ya(t.translate||t.tx||t.translateX,t.ty||t.translateY),g=v.x,y=v.y,b=new ya(t.relative||t.rx||t.relativeX,t.ry||t.relativeY);return{scaleX:a,scaleY:s,skewX:r,skewY:o,shear:u,theta:c,rx:b.x,ry:b.y,tx:g,ty:y,ox:f,oy:h,px:p,py:m}}},{key:"matrixMultiply",value:function(t,e,n){var i=t.a*e.a+t.c*e.b,r=t.b*e.a+t.d*e.b,o=t.a*e.c+t.c*e.d,a=t.b*e.c+t.d*e.d,s=t.e+t.a*e.e+t.c*e.f,u=t.f+t.b*e.e+t.d*e.f;return n.a=i,n.b=r,n.c=o,n.d=a,n.e=s,n.f=u,n}}]),t}();function xa(){if(!xa.nodes){var t=Cr().size(2,0);t.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),t.attr("focusable","false"),t.attr("aria-hidden","true");var e=t.path().node;xa.nodes={svg:t,path:e}}if(!xa.nodes.svg.node.parentNode){var n=wr.document.body||wr.document.documentElement;xa.nodes.svg.addTo(n)}return xa.nodes}function Sa(t){return!(t.width||t.height||t.x||t.y)}Pr(wa,"Matrix");var Ta=function(){function t(){xr(this,t),this.init.apply(this,arguments)}return qo(t,[{key:"init",value:function(t){var e=[0,0,0,0];return t="string"==typeof t?t.split(oo).map(parseFloat):Array.isArray(t)?t:"object"===se(t)?[null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height]:4===arguments.length?[].slice.call(arguments):e,this.x=t[0]||0,this.y=t[1]||0,this.width=this.w=t[2]||0,this.height=this.h=t[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}},{key:"merge",value:function(e){var n=Math.min(this.x,e.x),i=Math.min(this.y,e.y);return new t(n,i,Math.max(this.x+this.width,e.x+e.width)-n,Math.max(this.y+this.height,e.y+e.height)-i)}},{key:"transform",value:function(e){e instanceof wa||(e=new wa(e));var n=1/0,i=-1/0,r=1/0,o=-1/0;return[new ya(this.x,this.y),new ya(this.x2,this.y),new ya(this.x,this.y2),new ya(this.x2,this.y2)].forEach((function(t){t=t.transform(e),n=Math.min(n,t.x),i=Math.max(i,t.x),r=Math.min(r,t.y),o=Math.max(o,t.y)})),new t(n,r,i-n,o-r)}},{key:"addOffset",value:function(){return this.x+=wr.window.pageXOffset,this.y+=wr.window.pageYOffset,this}},{key:"toString",value:function(){return this.x+" "+this.y+" "+this.width+" "+this.height}},{key:"toArray",value:function(){return[this.x,this.y,this.width,this.height]}},{key:"isNulled",value:function(){return Sa(this)}}]),t}();function Ea(t,e){var n,i;try{if(Sa(n=t(this.node))&&((i=this.node)!==wr.document&&!(wr.document.documentElement.contains||function(t){for(;t.parentNode;)t=t.parentNode;return t===wr.document}).call(wr.document.documentElement,i)))throw new Error("Element not in the dom")}catch(t){n=e(this)}return n}Mi({viewbox:{viewbox:function(t,e,n,i){return null==t?new Ta(this.attr("viewBox")):this.attr("viewBox",new Ta(t,e,n,i))},zoom:function(t,e){var n=this.node.clientWidth,i=this.node.clientHeight,r=this.viewbox();if(!n&&!i){var o=window.getComputedStyle(this.node);n=parseFloat(o.getPropertyValue("width")),i=parseFloat(o.getPropertyValue("height"))}var a=n/r.width,s=i/r.height,u=Math.min(a,s);if(null==t)return u;var c=u/t;c===1/0&&(c=Number.MIN_VALUE),e=e||new ya(n/2/a+r.x,i/2/s+r.y);var l=new Ta(r).transform(new wa({scale:c,origin:e}));return this.viewbox(l)}}}),Pr(Ta,"Box");var ka=function(){try{return Function("name","baseClass","_constructor",["baseClass = baseClass || Array","return {","  [name]: class extends baseClass {","    constructor (...args) {","      super(...args)","      _constructor && _constructor.apply(this, args)","    }","  }","}[name]"].join("\n"))}catch(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Array,n=arguments.length>2?arguments[2]:void 0,i=function(){e.apply(this,arguments),n&&n.apply(this,arguments)};return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype.map=function(t){var e=new i;return e.push.apply(e,Array.prototype.map.call(this,t)),e},i}}}(),Ca=ka("List",Array,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("number"==typeof t)return this;this.length=0,this.push.apply(this,Ei(t))}));Ir(Ca,{each:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return"function"==typeof t?this.map((function(e){return t.call(e,e)})):this.map((function(e){return e[t].apply(e,n)}))},toArray:function(){return Array.prototype.concat.apply([],this)}});var Ma=["toArray","constructor","each"];function Aa(t,e){return new Ca(cr((e||wr.document).querySelectorAll(t),(function(t){return Ar(t)})))}Ca.extend=function(t){t=t.reduce((function(t,e){return Ma.includes(e)||"_"===e[0]||(t[e]=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.each.apply(this,[e].concat(n))}),t}),{}),Ir(Ca,t)};var _a=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.events,r=void 0===i?{}:i;return xr(this,e),(t=Jo(this,Qo(e).call(this))).events=r,t}return na(e,t),qo(e,[{key:"addEventListener",value:function(){}},{key:"dispatch",value:function(t,e){return function(t,e,n){var i=So(t);return e instanceof wr.window.Event||(e=new wr.window.CustomEvent(e,{detail:n,cancelable:!0})),i.dispatchEvent(e),e}(this,t,e)}},{key:"dispatchEvent",value:function(t){var e=this.getEventHolder().events;if(!e)return!0;var n=e[t.type];for(var i in n)for(var r in n[i])n[i][r](t);return!t.defaultPrevented}},{key:"fire",value:function(t,e){return this.dispatch(t,e),this}},{key:"getEventHolder",value:function(){return this}},{key:"getEventTarget",value:function(){return this}},{key:"off",value:function(t,e){return Eo(this,t,e),this}},{key:"on",value:function(t,e,n,i){return To(this,t,e,n,i),this}},{key:"removeEventListener",value:function(){}}]),e}(Sr);function Pa(){}Pr(_a,"EventTarget");var Na={duration:400,ease:">",delay:0},Oa={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"},Ia=ka("SVGArray",Array,(function(t){this.init(t)}));Ir(Ia,{init:function(t){return"number"==typeof t||(this.length=0,this.push.apply(this,Ei(this.parse(t)))),this},toArray:function(){return Array.prototype.concat.apply([],this)},toString:function(){return this.join(" ")},valueOf:function(){var t=[];return t.push.apply(t,Ei(this)),t},parse:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t instanceof Array?t:t.trim().split(oo).map(parseFloat)},clone:function(){return new this.constructor(this)},toSet:function(){return new Set(this)}});var Da=function(){function t(){xr(this,t),this.init.apply(this,arguments)}return qo(t,[{key:"init",value:function(e,n){return n=Array.isArray(e)?e[1]:n,e=Array.isArray(e)?e[0]:e,this.value=0,this.unit=n||"","number"==typeof e?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-34e37:34e37:"string"==typeof e?(n=e.match(Gr))&&(this.value=parseFloat(n[1]),"%"===n[5]?this.value/=100:"s"===n[5]&&(this.value*=1e3),this.unit=n[5]):e instanceof t&&(this.value=e.valueOf(),this.unit=e.unit),this}},{key:"toString",value:function(){return("%"===this.unit?~~(1e8*this.value)/1e6:"s"===this.unit?this.value/1e3:this.value)+this.unit}},{key:"toJSON",value:function(){return this.toString()}},{key:"toArray",value:function(){return[this.value,this.unit]}},{key:"valueOf",value:function(){return this.value}},{key:"plus",value:function(e){return e=new t(e),new t(this+e,this.unit||e.unit)}},{key:"minus",value:function(e){return e=new t(e),new t(this-e,this.unit||e.unit)}},{key:"times",value:function(e){return e=new t(e),new t(this*e,this.unit||e.unit)}},{key:"divide",value:function(e){return e=new t(e),new t(this/e,this.unit||e.unit)}},{key:"convert",value:function(e){return new t(this.value,e)}}]),t}(),Ra=[];var La=function(t){function e(t,n){var i;return xr(this,e),(i=Jo(this,Qo(e).call(this,t))).node=t,i.type=t.nodeName,n&&t!==n&&i.attr(n),i}return na(e,t),qo(e,[{key:"add",value:function(t,e){return t=Cr(t),null==e?this.node.appendChild(t.node):t.node!==this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this}},{key:"addTo",value:function(t){return Cr(t).put(this)}},{key:"children",value:function(){return new Ca(cr(this.node.children,(function(t){return Ar(t)})))}},{key:"clear",value:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}},{key:"clone",value:function(){return this.writeDataToDom(),function t(e){for(var n=e.children.length-1;n>=0;n--)t(e.children[n]);return e.id?Ar(e).id(Or(e.nodeName)):Ar(e)}(this.node.cloneNode(!0))}},{key:"each",value:function(t,e){var n,i,r=this.children();for(n=0,i=r.length;n<i;n++)t.apply(r[n],[n,r]),e&&r[n].each(t,e);return this}},{key:"element",value:function(t){return this.put(new e(kr(t)))}},{key:"first",value:function(){return Ar(this.node.firstChild)}},{key:"get",value:function(t){return Ar(this.node.childNodes[t])}},{key:"getEventHolder",value:function(){return this.node}},{key:"getEventTarget",value:function(){return this.node}},{key:"has",value:function(t){return this.index(t)>=0}},{key:"id",value:function(t){return void 0!==t||this.node.id||(this.node.id=Or(this.type)),this.attr("id",t)}},{key:"index",value:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)}},{key:"last",value:function(){return Ar(this.node.lastChild)}},{key:"matches",value:function(t){var e=this.node;return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}},{key:"parent",value:function(t){var e=this;if(!e.node.parentNode)return null;if(e=Ar(e.node.parentNode),!t)return e;for(;e;){if("string"==typeof t?e.matches(t):e instanceof t)return e;if(!e.node.parentNode||"#document"===e.node.parentNode.nodeName||"#document-fragment"===e.node.parentNode.nodeName)return null;e=Ar(e.node.parentNode)}}},{key:"put",value:function(t,e){return this.add(t,e),t}},{key:"putIn",value:function(t){return Cr(t).add(this)}},{key:"remove",value:function(){return this.parent()&&this.parent().removeElement(this),this}},{key:"removeElement",value:function(t){return this.node.removeChild(t.node),this}},{key:"replace",value:function(t){return t=Cr(t),this.node.parentNode.replaceChild(t.node,this.node),t}},{key:"round",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,e=arguments.length>1?arguments[1]:void 0,n=Math.pow(10,t),i=this.attr();e||(e=Object.keys(i));var r={};return e.forEach((function(t){r[t]=Math.round(i[t]*n)/n})),this.attr(r),this}},{key:"toString",value:function(){return this.id()}},{key:"svg",value:function(t,e){var n,i,r;if(!1===t&&(e=!1,t=null),null==t||"function"==typeof t){e=null==e||e,this.writeDataToDom();var o=this;if(null!=t){if(o=Ar(o.node.cloneNode(!0)),e){var a=t(o);if(o=a||o,!1===a)return""}o.each((function(){var e=t(this),n=e||this;!1===e?this.remove():e&&this!==n&&this.replace(n)}),!0)}return e?o.node.outerHTML:o.node.innerHTML}for(e=null!=e&&e,n=wr.document.createElementNS(vr,"svg"),r=wr.document.createDocumentFragment(),n.innerHTML=t,i=n.children.length;i--;)r.appendChild(n.firstElementChild);var s=this.parent();return e?this.replace(r)&&s:this.add(r)}},{key:"words",value:function(t){return this.node.textContent=t,this}},{key:"writeDataToDom",value:function(){return this.each((function(){this.writeDataToDom()})),this}}]),e}(_a);Ir(La,{attr:function(t,e,n){var i=this;if(null==t){t={},e=this.node.attributes;var r=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value;t[c.nodeName]=io.test(c.nodeValue)?parseFloat(c.nodeValue):c.nodeValue}}catch(t){o=!0,a=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return t}if(t instanceof Array)return t.reduce((function(t,e){return t[e]=i.attr(e),t}),{});if("object"===se(t)&&t.constructor===Object)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?Oa[t]:io.test(e)?parseFloat(e):e;"number"==typeof(e=Ra.reduce((function(e,n){return n(t,e,i)}),e))?e=new Da(e):Xo.isColor(e)?e=new Xo(e):e.constructor===Array&&(e=new Ia(e)),"leading"===t?this.leading&&this.leading(e):"string"==typeof n?this.node.setAttributeNS(n,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!==t&&"x"!==t||this.rebuild()}return this},find:function(t){return Aa(t,this.node)},findOne:function(t){return Ar(this.node.querySelector(t))}}),Pr(La,"Dom");var ja=function(t){function e(t,n){var i;return xr(this,e),(i=Jo(this,Qo(e).call(this,t,n))).dom={},i.node.instance=Zo(i),t.hasAttribute("svgjs:data")&&i.setData(JSON.parse(t.getAttribute("svgjs:data"))||{}),i}return na(e,t),qo(e,[{key:"center",value:function(t,e){return this.cx(t).cy(e)}},{key:"cx",value:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)}},{key:"cy",value:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)}},{key:"defs",value:function(){return this.root().defs()}},{key:"dmove",value:function(t,e){return this.dx(t).dy(e)}},{key:"dx",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.x(new Da(t).plus(this.x()))}},{key:"dy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.y(new Da(t).plus(this.y()))}},{key:"root",value:function(){var t=this.parent(Tr[Er]);return t&&t.root()}},{key:"getEventHolder",value:function(){return this}},{key:"height",value:function(t){return this.attr("height",t)}},{key:"inside",value:function(t,e){var n=this.bbox();return t>n.x&&e>n.y&&t<n.x+n.width&&e<n.y+n.height}},{key:"move",value:function(t,e){return this.x(t).y(e)}},{key:"parents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wr.document;t=Cr(t);for(var e=new Ca,n=this;(n=n.parent())&&n.node!==t.node&&n.node!==wr.document;)e.push(n);return e}},{key:"reference",value:function(t){if(!(t=this.attr(t)))return null;var e=t.match(Zr);return e?Cr(e[1]):null}},{key:"setData",value:function(t){return this.dom=t,this}},{key:"size",value:function(t,e){var n=pr(this,t,e);return this.width(new Da(n.width)).height(new Da(n.height))}},{key:"width",value:function(t){return this.attr("width",t)}},{key:"writeDataToDom",value:function(){return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),ta(Qo(e.prototype),"writeDataToDom",this).call(this)}},{key:"x",value:function(t){return this.attr("x",t)}},{key:"y",value:function(t){return this.attr("y",t)}}]),e}(La);Ir(ja,{bbox:function(){return new Ta(Ea.call(this,(function(t){return t.getBBox()}),(function(t){try{var e=t.clone().addTo(xa().svg).show(),n=e.node.getBBox();return e.remove(),n}catch(e){throw new Error('Getting bbox of element "'+t.node.nodeName+'" is not possible. '+e.toString())}})))},rbox:function(t){var e=new Ta(Ea.call(this,(function(t){return t.getBoundingClientRect()}),(function(t){throw new Error('Getting rbox of element "'+t.node.nodeName+'" is not possible')})));return t?e.transform(t.screenCTM().inverse()):e.addOffset()},point:function(t,e){return new ya(t,e).transform(this.screenCTM().inverse())},ctm:function(){return new wa(this.node.getCTM())},screenCTM:function(){if("function"==typeof this.isRoot&&!this.isRoot()){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new wa(e)}return new wa(this.node.getScreenCTM())}}),Pr(ja,"Element");var Ua={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"===e?t:t+"-"+e}};["fill","stroke"].forEach((function(t){var e,n={};n[t]=function(n){if(void 0===n)return this.attr(t);if("string"==typeof n||n instanceof Xo||Xo.isRgb(n)||n instanceof ja)this.attr(t,n);else for(e=Ua[t].length-1;e>=0;e--)null!=n[Ua[t][e]]&&this.attr(Ua.prefix(t,Ua[t][e]),n[Ua[t][e]]);return this},Mi(["Element","Runner"],n)})),Mi(["Element","Runner"],{matrix:function(t,e,n,i,r,o){return null==t?new wa(this):this.attr("transform",new wa(t,e,n,i,r,o))},rotate:function(t,e,n){return this.transform({rotate:t,ox:e,oy:n},!0)},skew:function(t,e,n,i){return 1===arguments.length||3===arguments.length?this.transform({skew:t,ox:e,oy:n},!0):this.transform({skew:[t,e],ox:n,oy:i},!0)},shear:function(t,e,n){return this.transform({shear:t,ox:e,oy:n},!0)},scale:function(t,e,n,i){return 1===arguments.length||3===arguments.length?this.transform({scale:t,ox:e,oy:n},!0):this.transform({scale:[t,e],ox:n,oy:i},!0)},translate:function(t,e){return this.transform({translate:[t,e]},!0)},relative:function(t,e){return this.transform({relative:[t,e]},!0)},flip:function(t,e){var n="string"==typeof t?t:(isFinite(t),"both"),i="both"===t&&isFinite(e)?[e,e]:"x"===t?[e,0]:"y"===t?[0,e]:isFinite(t)?[t,t]:[0,0];return this.transform({flip:n,origin:i},!0)},opacity:function(t){return this.attr("opacity",t)}}),Mi("radius",{radius:function(t,e){var n=(this._element||this).type;return"radialGradient"===n||"radialGradient"===n?this.attr("r",new Da(t)):this.rx(t).ry(null==e?t:e)}}),Mi("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(t){return new ya(this.node.getPointAtLength(t))}}),Mi(["Element","Runner"],{font:function(t,e){if("object"===se(t)){for(e in t)this.font(e,t[e]);return this}return"leading"===t?this.leading(e):"anchor"===t?this.attr("text-anchor",e):"size"===t||"family"===t||"weight"===t||"stretch"===t||"variant"===t||"style"===t?this.attr("font-"+t,e):this.attr(t,e)}}),Mi("Text",{ax:function(t){return this.attr("x",t)},ay:function(t){return this.attr("y",t)},amove:function(t,e){return this.ax(t).ay(e)}}),Mi("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].reduce((function(t,e){return t[e]=function(t){return null===t?Eo(this,e):To(this,e,t),this},t}),{}));var za=[].reverse,Ba=[1,2];It({target:"Array",proto:!0,forced:String(Ba)===String(Ba.reverse())},{reverse:function(){return Dt(this)&&(this.length=this.length),za.call(this)}}),It({target:"Object",stat:!0,forced:!f,sham:!f},{defineProperties:le}),It({target:"Object",stat:!0,forced:!f,sham:!f},{defineProperty:D.f});var Fa=N.f,Ha=l((function(){Fa(1)}));function qa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ka(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function $a(t){return this.attr("rx",t)}function Va(t){return this.attr("ry",t)}function Wa(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())}function Ga(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())}function Xa(t){return null==t?this.attr("cx"):this.attr("cx",t)}function Ya(t){return null==t?this.attr("cy"):this.attr("cy",t)}function Za(t){return null==t?2*this.rx():this.rx(new Da(t).divide(2))}function Ja(t){return null==t?2*this.ry():this.ry(new Da(t).divide(2))}It({target:"Object",stat:!0,forced:!f||Ha,sham:!f},{getOwnPropertyDescriptor:function(t,e){return Fa(x(t),e)}}),It({target:"Object",stat:!0,sham:!f},{getOwnPropertyDescriptors:function(t){for(var e,n,i=x(t),r=N.f,o=Tt(i),a={},s=0;o.length>s;)void 0!==(n=r(i,e=o[s++]))&&Rt(a,e,n);return a}}),Mi("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(Jr).slice(0,-1).map((function(t){var e=t.trim().split("(");return[e[0],e[1].split(oo).map((function(t){return parseFloat(t)}))]})).reverse().reduce((function(t,e){return"matrix"===e[0]?t.lmultiply(wa.fromArray(e[1])):t[e[0]].apply(t,e[1])}),new wa)},toParent:function(t){if(this===t)return this;var e=this.screenCTM(),n=t.screenCTM().inverse();return this.addTo(t).untransform().transform(n.multiply(e)),this},toRoot:function(){return this.toParent(this.root())},transform:function(t,e){if(null==t||"string"==typeof t){var n=new wa(this).decompose();return null==t?n:n[t]}wa.isMatrixLike(t)||(t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ka(n,!0).forEach((function(e){qa(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ka(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{origin:mr(t,this)}));var i=new wa(!0===e?this:e||!1).transform(t);return this.attr("transform",i)}});var Qa={__proto__:null,rx:$a,ry:Va,x:Wa,y:Ga,cx:Xa,cy:Ya,width:Za,height:Ja},ts=function(t){function e(){return xr(this,e),Jo(this,Qo(e).apply(this,arguments))}return na(e,t),e}(ja);Pr(ts,"Shape");var es=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("circle",t),t))}return na(e,t),qo(e,[{key:"radius",value:function(t){return this.attr("r",t)}},{key:"rx",value:function(t){return this.attr("r",t)}},{key:"ry",value:function(t){return this.rx(t)}},{key:"size",value:function(t){return this.radius(new Da(t).divide(2))}}]),e}(ts);Ir(es,{x:Wa,y:Ga,cx:Xa,cy:Ya,width:Za,height:Ja}),Mi({Container:{circle:Dr((function(t){return this.put(new es).size(t).move(0,0)}))}}),Pr(es,"Circle");var ns=function(t){function e(){return xr(this,e),Jo(this,Qo(e).apply(this,arguments))}return na(e,t),qo(e,[{key:"flatten",value:function(t){return this.each((function(){return this instanceof e?this.flatten(t).ungroup(t):this.toParent(t)})),this.node.firstElementChild||this.remove(),this}},{key:"ungroup",value:function(t){return t=t||this.parent(),this.each((function(){return this.toParent(t)})),this.remove(),this}}]),e}(ja);Pr(ns,"Container");var is=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("defs",t),t))}return na(e,t),qo(e,[{key:"flatten",value:function(){return this}},{key:"ungroup",value:function(){return this}}]),e}(ns);Pr(is,"Defs");var rs=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("ellipse",t),t))}return na(e,t),qo(e,[{key:"size",value:function(t,e){var n=pr(this,t,e);return this.rx(new Da(n.width).divide(2)).ry(new Da(n.height).divide(2))}}]),e}(ts);Ir(rs,Qa),Mi("Container",{ellipse:Dr((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this.put(new rs).size(t,e).move(0,0)}))}),Pr(rs,"Ellipse");var os=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("stop",t),t))}return na(e,t),qo(e,[{key:"update",value:function(t){return("number"==typeof t||t instanceof Da)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new Da(t.offset)),this}}]),e}(ja);function as(t,e){return"radialGradient"===(this._element||this).type?this.attr({fx:new Da(t),fy:new Da(e)}):this.attr({x1:new Da(t),y1:new Da(e)})}function ss(t,e){return"radialGradient"===(this._element||this).type?this.attr({cx:new Da(t),cy:new Da(e)}):this.attr({x2:new Da(t),y2:new Da(e)})}Pr(os,"Stop");var us={__proto__:null,from:as,to:ss},cs=function(t){function e(t,n){return xr(this,e),Jo(this,Qo(e).call(this,Mr(t+"Gradient","string"==typeof t?null:t),n))}return na(e,t),qo(e,[{key:"stop",value:function(t,e,n){return this.put(new os).update(t,e,n)}},{key:"update",value:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}},{key:"url",value:function(){return"url(#"+this.id()+")"}},{key:"toString",value:function(){return this.url()}},{key:"attr",value:function(t,n,i){return"transform"===t&&(t="gradientTransform"),ta(Qo(e.prototype),"attr",this).call(this,t,n,i)}},{key:"targets",value:function(){return Aa('svg [fill*="'+this.id()+'"]')}},{key:"bbox",value:function(){return new Ta}}]),e}(ns);Ir(cs,us),Mi({Container:{gradient:Dr((function(t,e){return this.defs().gradient(t,e)}))},Defs:{gradient:Dr((function(t,e){return this.put(new cs(t)).update(e)}))}}),Pr(cs,"Gradient");var ls=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("pattern",t),t))}return na(e,t),qo(e,[{key:"url",value:function(){return"url(#"+this.id()+")"}},{key:"update",value:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}},{key:"toString",value:function(){return this.url()}},{key:"attr",value:function(t,n,i){return"transform"===t&&(t="patternTransform"),ta(Qo(e.prototype),"attr",this).call(this,t,n,i)}},{key:"targets",value:function(){return Aa('svg [fill*="'+this.id()+'"]')}},{key:"bbox",value:function(){return new Ta}}]),e}(ns);Mi({Container:{pattern:function(){var t;return(t=this.defs()).pattern.apply(t,arguments)}},Defs:{pattern:Dr((function(t,e,n){return this.put(new ls).update(n).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}))}}),Pr(ls,"Pattern");var fs,hs=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("image",t),t))}return na(e,t),qo(e,[{key:"load",value:function(t,e){if(!t)return this;var n=new wr.window.Image;return To(n,"load",(function(t){var i=this.parent(ls);0===this.width()&&0===this.height()&&this.size(n.width,n.height),i instanceof ls&&0===i.width()&&0===i.height()&&i.size(this.width(),this.height()),"function"==typeof e&&e.call(this,t)}),this),To(n,"load error",(function(){Eo(n)})),this.attr("href",n.src=t,yr)}}]),e}(ts);fs=function(t,e,n){return"fill"!==t&&"stroke"!==t||ro.test(e)&&(e=n.root().defs().image(e)),e instanceof hs&&(e=n.root().defs().pattern(0,0,(function(t){t.add(e)}))),e},Ra.push(fs),Mi({Container:{image:Dr((function(t,e){return this.put(new hs).size(0,0).load(t,e)}))}}),Pr(hs,"Image");var ds=ka("PointArray",Ia);Ir(ds,{toString:function(){for(var t=0,e=this.length,n=[];t<e;t++)n.push(this[t].join(","));return n.join(" ")},toLine:function(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}},at:function(t){if(!this.destination)return this;for(var e=0,n=this.length,i=[];e<n;e++)i.push([this[e][0]+(this.destination[e][0]-this[e][0])*t,this[e][1]+(this.destination[e][1]-this[e][1])*t]);return new ds(i)},parse:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[0,0]],e=[];if(t instanceof Array){if(t[0]instanceof Array)return t}else t=t.trim().split(oo).map(parseFloat);t.length%2!=0&&t.pop();for(var n=0,i=t.length;n<i;n+=2)e.push([t[n],t[n+1]]);return e},transform:function(t){for(var e=[],n=0;n<this.length;n++){var i=this[n];e.push([t.a*i[0]+t.c*i[1]+t.e,t.b*i[0]+t.d*i[1]+t.f])}return new ds(e)},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var i=this.length-1;i>=0;i--)this[i]=[this[i][0]+t,this[i][1]+e];return this},size:function(t,e){var n,i=this.bbox();for(n=this.length-1;n>=0;n--)i.width&&(this[n][0]=(this[n][0]-i.x)*t/i.width+i.x),i.height&&(this[n][1]=(this[n][1]-i.y)*e/i.height+i.y);return this},bbox:function(){var t=-1/0,e=-1/0,n=1/0,i=1/0;return this.forEach((function(r){t=Math.max(r[0],t),e=Math.max(r[1],e),n=Math.min(r[0],n),i=Math.min(r[1],i)})),{x:n,y:i,width:t-n,height:e-i}}});var ps={__proto__:null,MorphArray:ds,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}},ms=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("line",t),t))}return na(e,t),qo(e,[{key:"array",value:function(){return new ds([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}},{key:"plot",value:function(t,e,n,i){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:n,y2:i}:new ds(t).toLine(),this.attr(t))}},{key:"move",value:function(t,e){return this.attr(this.array().move(t,e).toLine())}},{key:"size",value:function(t,e){var n=pr(this,t,e);return this.attr(this.array().size(n.width,n.height).toLine())}}]),e}(ts);Ir(ms,ps),Mi({Container:{line:Dr((function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return ms.prototype.plot.apply(this.put(new ms),null!=e[0]?e:[0,0,0,0])}))}}),Pr(ms,"Line");var vs=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("marker",t),t))}return na(e,t),qo(e,[{key:"width",value:function(t){return this.attr("markerWidth",t)}},{key:"height",value:function(t){return this.attr("markerHeight",t)}},{key:"ref",value:function(t,e){return this.attr("refX",t).attr("refY",e)}},{key:"update",value:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}},{key:"toString",value:function(){return"url(#"+this.id()+")"}}]),e}(ns);Mi({Container:{marker:function(){var t;return(t=this.defs()).marker.apply(t,arguments)}},Defs:{marker:Dr((function(t,e,n){return this.put(new vs).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(n)}))},marker:{marker:function(t,e,n,i){var r=["marker"];return"all"!==t&&r.push(t),r=r.join("-"),t=arguments[1]instanceof vs?arguments[1]:this.defs().marker(e,n,i),this.attr(r,t)}}}),Pr(vs,"Marker");var gs=[].sort,ys=[1,2,3],bs=l((function(){ys.sort(void 0)})),ws=l((function(){ys.sort(null)})),xs=Lr("sort");function Ss(t,e){return function(n){return null==n?this[n]:(this[t]=n,e&&e.call(this),this)}}It({target:"Array",proto:!0,forced:bs||!ws||xs},{sort:function(t){return void 0===t?gs.call(ue(this)):gs.call(ue(this),Se(t))}});var Ts={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)},bezier:function(t,e,n,i){return function(r){return r<0?t>0?e/t*r:n>0?i/n*r:0:r>1?n<1?(1-i)/(1-n)*r+(i-n)/(1-n):t<1?(1-e)/(1-t)*r+(e-t)/(1-t):1:3*r*Math.pow(1-r,2)*e+3*Math.pow(r,2)*(1-r)*i+Math.pow(r,3)}},steps:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"end";e=e.split("-").reverse()[0];var n=t;return"none"===e?--n:"both"===e&&++n,function(i){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=Math.floor(i*t),a=i*o%1==0;return"start"!==e&&"both"!==e||++o,r&&a&&--o,i>=0&&o<0&&(o=0),i<=1&&o>n&&(o=n),o/n}}},Es=function(){function t(){xr(this,t)}return qo(t,[{key:"done",value:function(){return!1}}]),t}(),ks=function(t){function e(t){var n;return xr(this,e),(n=Jo(this,Qo(e).call(this))).ease=Ts[t||Na.ease]||t,n}return na(e,t),qo(e,[{key:"step",value:function(t,e,n){return"number"!=typeof t?n<1?t:e:t+(e-t)*this.ease(n)}}]),e}(Es),Cs=function(t){function e(t){var n;return xr(this,e),(n=Jo(this,Qo(e).call(this))).stepper=t,n}return na(e,t),qo(e,[{key:"step",value:function(t,e,n,i){return this.stepper(t,e,n,i)}},{key:"done",value:function(t){return t.done}}]),e}(Es);function Ms(){var t=(this._duration||500)/1e3,e=this._overshoot||0,n=Math.PI,i=Math.log(e/100+1e-10),r=-i/Math.sqrt(n*n+i*i),o=3.9/(r*t);this.d=2*r*o,this.k=o*o}Ir(function(t){function e(t,n){var i;return xr(this,e),(i=Jo(this,Qo(e).call(this))).duration(t||500).overshoot(n||0),i}return na(e,t),qo(e,[{key:"step",value:function(t,e,n,i){if("string"==typeof t)return t;if(i.done=n===1/0,n===1/0)return e;if(0===n)return t;n>100&&(n=16),n/=1e3;var r=i.velocity||0,o=-this.d*r-this.k*(t-e),a=t+r*n+o*n*n/2;return i.velocity=r+o*n,i.done=Math.abs(e-a)+Math.abs(r)<.002,i.done?e:a}}]),e}(Cs),{duration:Ss("_duration",Ms),overshoot:Ss("_overshoot",Ms)}),Ir(function(t){function e(t,n,i,r){var o;return xr(this,e),t=null==t?.1:t,n=null==n?.01:n,i=null==i?0:i,r=null==r?1e3:r,(o=Jo(this,Qo(e).call(this))).p(t).i(n).d(i).windup(r),o}return na(e,t),qo(e,[{key:"step",value:function(t,e,n,i){if("string"==typeof t)return t;if(i.done=n===1/0,n===1/0)return e;if(0===n)return t;var r=e-t,o=(i.integral||0)+r*n,a=(r-(i.error||0))/n,s=this.windup;return!1!==s&&(o=Math.max(-s,Math.min(o,s))),i.error=r,i.integral=o,i.done=Math.abs(r)<.001,i.done?e:t+(this.P*r+this.I*o+this.D*a)}}]),e}(Cs),{windup:Ss("windup"),p:Ss("P"),i:Ss("I"),d:Ss("D")});var As=ka("PathArray",Ia);function _s(t,e,n,i){return n+i.replace(lo," .")}for(var Ps={M:function(t,e,n){return e.x=n.x=t[0],e.y=n.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,n){return e.x=n.x,e.y=n.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},Ns="mlhvqtcsaz".split(""),Os=0,Is=Ns.length;Os<Is;++Os)Ps[Ns[Os]]=function(t){return function(e,n,i){if("H"===t)e[0]=e[0]+n.x;else if("V"===t)e[0]=e[0]+n.y;else if("A"===t)e[5]=e[5]+n.x,e[6]=e[6]+n.y;else for(var r=0,o=e.length;r<o;++r)e[r]=e[r]+(r%2?n.y:n.x);return Ps[t](e,n,i)}}(Ns[Os].toUpperCase());Ir(As,{toString:function(){return function(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e][0],null!=t[e][1]&&(i+=t[e][1],null!=t[e][2]&&(i+=" ",i+=t[e][2],null!=t[e][3]&&(i+=" ",i+=t[e][3],i+=" ",i+=t[e][4],null!=t[e][5]&&(i+=" ",i+=t[e][5],i+=" ",i+=t[e][6],null!=t[e][7]&&(i+=" ",i+=t[e][7])))));return i+" "}(this)},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var i,r=this.length-1;r>=0;r--)"M"===(i=this[r][0])||"L"===i||"T"===i?(this[r][1]+=t,this[r][2]+=e):"H"===i?this[r][1]+=t:"V"===i?this[r][1]+=e:"C"===i||"S"===i||"Q"===i?(this[r][1]+=t,this[r][2]+=e,this[r][3]+=t,this[r][4]+=e,"C"===i&&(this[r][5]+=t,this[r][6]+=e)):"A"===i&&(this[r][6]+=t,this[r][7]+=e);return this},size:function(t,e){var n,i,r=this.bbox();for(r.width=0===r.width?1:r.width,r.height=0===r.height?1:r.height,n=this.length-1;n>=0;n--)"M"===(i=this[n][0])||"L"===i||"T"===i?(this[n][1]=(this[n][1]-r.x)*t/r.width+r.x,this[n][2]=(this[n][2]-r.y)*e/r.height+r.y):"H"===i?this[n][1]=(this[n][1]-r.x)*t/r.width+r.x:"V"===i?this[n][1]=(this[n][1]-r.y)*e/r.height+r.y:"C"===i||"S"===i||"Q"===i?(this[n][1]=(this[n][1]-r.x)*t/r.width+r.x,this[n][2]=(this[n][2]-r.y)*e/r.height+r.y,this[n][3]=(this[n][3]-r.x)*t/r.width+r.x,this[n][4]=(this[n][4]-r.y)*e/r.height+r.y,"C"===i&&(this[n][5]=(this[n][5]-r.x)*t/r.width+r.x,this[n][6]=(this[n][6]-r.y)*e/r.height+r.y)):"A"===i&&(this[n][1]=this[n][1]*t/r.width,this[n][2]=this[n][2]*e/r.height,this[n][6]=(this[n][6]-r.x)*t/r.width+r.x,this[n][7]=(this[n][7]-r.y)*e/r.height+r.y);return this},equalCommands:function(t){var e,n,i;for(t=new As(t),i=this.length===t.length,e=0,n=this.length;i&&e<n;e++)i=this[e][0]===t[e][0];return i},morph:function(t){return t=new As(t),this.equalCommands(t)?this.destination=t:this.destination=null,this},at:function(t){if(!this.destination)return this;var e,n,i,r,o=this.destination.value,a=[],s=new As;for(e=0,n=this.length;e<n;e++){for(a[e]=[this[e][0]],i=1,r=this[e].length;i<r;i++)a[e][i]=this[e][i]+(o[e][i]-this[e][i])*t;"A"===a[e][0]&&(a[e][4]=+(0!==a[e][4]),a[e][5]=+(0!==a[e][5]))}return s.value=a,s},parse:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[["M",0,0]];if(e instanceof As)return e;var n={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};e="string"==typeof e?e.replace(co,_s).replace(so," $& ").replace(ao,"$1 -").trim().split(oo):e.reduce((function(t,e){return[].concat.call(t,e)}),[]);var i=[],r=new ya,o=new ya,a=0,s=e.length;do{uo.test(e[a])?(t=e[a],++a):"M"===t?t="L":"m"===t&&(t="l"),i.push(Ps[t].call(null,e.slice(a,a+=n[t.toUpperCase()]).map(parseFloat),r,o))}while(s>a);return i},bbox:function(){return xa().path.setAttribute("d",this.toString()),xa.nodes.path.getBBox()}});var Ds=function(){function t(e){xr(this,t),this._stepper=e||new ks("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}return qo(t,[{key:"from",value:function(t){return null==t?this._from:(this._from=this._set(t),this)}},{key:"to",value:function(t){return null==t?this._to:(this._to=this._set(t),this)}},{key:"type",value:function(t){return null==t?this._type:(this._type=t,this)}},{key:"_set",value:function(t){if(!this._type){var e=se(t);"number"===e?this.type(Da):"string"===e?Xo.isColor(t)?this.type(Xo):oo.test(t)?this.type(so.test(t)?As:Ia):Gr.test(t)?this.type(Da):this.type(Rs):Us.indexOf(t.constructor)>-1?this.type(t.constructor):Array.isArray(t)?this.type(Ia):"object"===e?this.type(js):this.type(Rs)}var n=new this._type(t);return this._type===Xo&&(n=this._to?n[this._to[4]]():this._from?n[this._from[4]]():n),n=n.toArray(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(n.length)).map(Object).map((function(t){return t.done=!0,t})),n}},{key:"stepper",value:function(t){return null==t?this._stepper:(this._stepper=t,this)}},{key:"done",value:function(){return this._context.map(this._stepper.done).reduce((function(t,e){return t&&e}),!0)}},{key:"at",value:function(t){var e=this;return this._morphObj.fromArray(this._from.map((function(n,i){return e._stepper.step(n,e._to[i],t,e._context[i],e._context)})))}}]),t}(),Rs=function(){function t(){xr(this,t),this.init.apply(this,arguments)}return qo(t,[{key:"init",value:function(t){return t=Array.isArray(t)?t[0]:t,this.value=t,this}},{key:"valueOf",value:function(){return this.value}},{key:"toArray",value:function(){return[this.value]}}]),t}(),Ls=function(){function t(){xr(this,t),this.init.apply(this,arguments)}return qo(t,[{key:"init",value:function(e){return Array.isArray(e)&&(e={scaleX:e[0],scaleY:e[1],shear:e[2],rotate:e[3],translateX:e[4],translateY:e[5],originX:e[6],originY:e[7]}),Object.assign(this,t.defaults,e),this}},{key:"toArray",value:function(){var t=this;return[t.scaleX,t.scaleY,t.shear,t.rotate,t.translateX,t.translateY,t.originX,t.originY]}}]),t}();Ls.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};var js=function(){function t(){xr(this,t),this.init.apply(this,arguments)}return qo(t,[{key:"init",value:function(t){if(this.values=[],!Array.isArray(t)){t=t||{};var e=[];for(var n in t)e.push([n,t[n]]);return e.sort((function(t,e){return t[0]-e[0]})),this.values=e.reduce((function(t,e){return t.concat(e)}),[]),this}this.values=t}},{key:"valueOf",value:function(){for(var t={},e=this.values,n=0,i=e.length;n<i;n+=2)t[e[n]]=e[n+1];return t}},{key:"toArray",value:function(){return this.values}}]),t}(),Us=[Rs,Ls,js];var zs=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("path",t),t))}return na(e,t),qo(e,[{key:"array",value:function(){return this._array||(this._array=new As(this.attr("d")))}},{key:"plot",value:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new As(t))}},{key:"clear",value:function(){return delete this._array,this}},{key:"move",value:function(t,e){return this.attr("d",this.array().move(t,e))}},{key:"x",value:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)}},{key:"y",value:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)}},{key:"size",value:function(t,e){var n=pr(this,t,e);return this.attr("d",this.array().size(n.width,n.height))}},{key:"width",value:function(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)}},{key:"height",value:function(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}},{key:"targets",value:function(){return Aa('svg textpath [href*="'+this.id()+'"]')}}]),e}(ts);zs.prototype.MorphArray=As,Mi({Container:{path:Dr((function(t){return this.put(new zs).plot(t||new As)}))}}),Pr(zs,"Path");var Bs={__proto__:null,array:function(){return this._array||(this._array=new ds(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new ds(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var n=pr(this,t,e);return this.attr("points",this.array().size(n.width,n.height))}},Fs=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("polygon",t),t))}return na(e,t),e}(ts);Mi({Container:{polygon:Dr((function(t){return this.put(new Fs).plot(t||new ds)}))}}),Ir(Fs,ps),Ir(Fs,Bs),Pr(Fs,"Polygon");var Hs=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("polyline",t),t))}return na(e,t),e}(ts);Mi({Container:{polyline:Dr((function(t){return this.put(new Hs).plot(t||new ds)}))}}),Ir(Hs,ps),Ir(Hs,Bs),Pr(Hs,"Polyline");var qs=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("rect",t),t))}return na(e,t),e}(ts);Ir(qs,{rx:$a,ry:Va}),Mi({Container:{rect:Dr((function(t,e){return this.put(new qs).size(t,e)}))}}),Pr(qs,"Rect");var Ks=Math.max,$s=Math.min;It({target:"Array",proto:!0,forced:!Vt("splice")},{splice:function(t,e){var n,i,r,o,a,s,u=ue(this),c=ft(u.length),l=pt(t,c),f=arguments.length;if(0===f?n=i=0:1===f?(n=0,i=c-l):(n=f-2,i=$s(Ks(ct(e),0),c-l)),c+n-i>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(r=ke(u,i),o=0;o<i;o++)(a=l+o)in u&&Rt(r,o,u[a]);if(r.length=i,n<i){for(o=l;o<c-i;o++)s=o+n,(a=o+i)in u?u[s]=u[a]:delete u[s];for(o=c;o>c-i+n;o--)delete u[o-1]}else if(n>i)for(o=c-i;o>l;o--)s=o+n-1,(a=o+i-1)in u?u[s]=u[a]:delete u[s];for(o=0;o<n;o++)u[o+l]=arguments[o+2];return u.length=c-i+n,r}});var Vs=function(){function t(){xr(this,t),this._first=null,this._last=null}return qo(t,[{key:"push",value:function(t){var e=t.next?t:{value:t,next:null,prev:null};return this._last?(e.prev=this._last,this._last.next=e,this._last=e):(this._last=e,this._first=e),e}},{key:"shift",value:function(){var t=this._first;return t?(this._first=t.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,t.value):null}},{key:"first",value:function(){return this._first&&this._first.value}},{key:"last",value:function(){return this._last&&this._last.value}},{key:"remove",value:function(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this._last&&(this._last=t.prev),t===this._first&&(this._first=t.next),t.prev=null,t.next=null}}]),t}(),Ws={nextDraw:null,frames:new Vs,timeouts:new Vs,immediates:new Vs,timer:function(){return wr.window.performance||wr.window.Date},transforms:[],frame:function(t){var e=Ws.frames.push({run:t});return null===Ws.nextDraw&&(Ws.nextDraw=wr.window.requestAnimationFrame(Ws._draw)),e},timeout:function(t,e){e=e||0;var n=Ws.timer().now()+e,i=Ws.timeouts.push({run:t,time:n});return null===Ws.nextDraw&&(Ws.nextDraw=wr.window.requestAnimationFrame(Ws._draw)),i},immediate:function(t){var e=Ws.immediates.push(t);return null===Ws.nextDraw&&(Ws.nextDraw=wr.window.requestAnimationFrame(Ws._draw)),e},cancelFrame:function(t){null!=t&&Ws.frames.remove(t)},clearTimeout:function(t){null!=t&&Ws.timeouts.remove(t)},cancelImmediate:function(t){null!=t&&Ws.immediates.remove(t)},_draw:function(t){for(var e=null,n=Ws.timeouts.last();(e=Ws.timeouts.shift())&&(t>=e.time?e.run():Ws.timeouts.push(e),e!==n););for(var i=null,r=Ws.frames.last();i!==r&&(i=Ws.frames.shift());)i.run(t);for(var o=null;o=Ws.immediates.shift();)o();Ws.nextDraw=Ws.timeouts.first()||Ws.frames.first()?wr.window.requestAnimationFrame(Ws._draw):null}},Gs=function(t){var e=t.start,n=t.runner.duration();return{start:e,duration:n,end:e+n,runner:t.runner}},Xs=function(){var t=wr.window;return(t.performance||t.Date).now()},Ys=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xs;return xr(this,e),(t=Jo(this,Qo(e).call(this)))._timeSource=n,t._startTime=0,t._speed=1,t._persist=0,t._nextFrame=null,t._paused=!0,t._runners=[],t._runnerIds=[],t._lastRunnerId=-1,t._time=0,t._lastSourceTime=0,t._lastStepTime=0,t._step=t._stepFn.bind(Zo(t),!1),t._stepImmediate=t._stepFn.bind(Zo(t),!0),t}return na(e,t),qo(e,[{key:"schedule",value:function(t,e,n){if(null==t)return this._runners.map(Gs);var i=0,r=this.getEndTime();if(e=e||0,null==n||"last"===n||"after"===n)i=r;else if("absolute"===n||"start"===n)i=e,e=0;else if("now"===n)i=this._time;else{if("relative"!==n)throw new Error('Invalid value for the "when" parameter');var o=this._runners[t.id];o&&(i=o.start+e,e=0)}t.unschedule(),t.timeline(this);var a=t.persist(),s={persist:null===a?this._persist:a,start:i+e,runner:t};return this._lastRunnerId=t.id,this._runners.push(s),this._runners.sort((function(t,e){return t.start-e.start})),this._runnerIds=this._runners.map((function(t){return t.runner.id})),this.updateTime()._continue(),this}},{key:"unschedule",value:function(t){var e=this._runnerIds.indexOf(t.id);return e<0||(this._runners.splice(e,1),this._runnerIds.splice(e,1),t.timeline(null)),this}},{key:"getEndTime",value:function(){var t=this._runners[this._runnerIds.indexOf(this._lastRunnerId)],e=t?t.runner.duration():0;return(t?t.start:0)+e}},{key:"getEndTimeOfTimeline",value:function(){for(var t=0,e=0;e<this._runners.length;e++){var n=this._runners[e],i=n?n.runner.duration():0,r=(n?n.start:0)+i;r>t&&(t=r)}return t}},{key:"updateTime",value:function(){return this.active()||(this._lastSourceTime=this._timeSource()),this}},{key:"play",value:function(){return this._paused=!1,this.updateTime()._continue()}},{key:"pause",value:function(){return this._paused=!0,this._continue()}},{key:"stop",value:function(){return this.time(0),this.pause()}},{key:"finish",value:function(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}},{key:"speed",value:function(t){return null==t?this._speed:(this._speed=t,this)}},{key:"reverse",value:function(t){var e=this.speed();if(null==t)return this.speed(-e);var n=Math.abs(e);return this.speed(t?n:-n)}},{key:"seek",value:function(t){return this.time(this._time+t)}},{key:"time",value:function(t){return null==t?this._time:(this._time=t,this._continue(!0))}},{key:"persist",value:function(t){return null==t?this._persist:(this._persist=t,this)}},{key:"source",value:function(t){return null==t?this._timeSource:(this._timeSource=t,this)}},{key:"_stepFn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._timeSource(),n=e-this._lastSourceTime;t&&(n=0);var i=this._speed*n+(this._time-this._lastStepTime);this._lastSourceTime=e,t||(this._time+=i,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(var r=this._runners.length;r--;){var o=this._runners[r],a=o.runner,s=this._time-o.start;s<=0&&a.reset()}for(var u=!1,c=0,l=this._runners.length;c<l;c++){var f=this._runners[c],h=f.runner,d=i,p=this._time-f.start;if(p<=0)u=!0;else if(p<d&&(d=p),h.active()){var m=h.step(d).done;if(m){if(!0!==f.persist){var v=h.duration()-h.time()+this._time;v+f.persist<this._time&&(h.unschedule(),--c,--l)}}else u=!0}}return u&&!(this._speed<0&&0===this._time)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}},{key:"_continue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ws.cancelFrame(this._nextFrame),this._nextFrame=null,t?this._stepImmediate():(this._paused||(this._nextFrame=Ws.frame(this._step)),this)}},{key:"active",value:function(){return!!this._nextFrame}}]),e}(_a);function Zs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Js(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zs(n,!0).forEach((function(e){qa(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zs(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Mi({Element:{timeline:function(t){return null==t?(this._timeline=this._timeline||new Ys,this._timeline):(this._timeline=t,this)}}});var Qs=function(t){function e(t){var n;return xr(this,e),(n=Jo(this,Qo(e).call(this))).id=e.id++,t="function"==typeof(t=null==t?Na.duration:t)?new Cs(t):t,n._element=null,n._timeline=null,n.done=!1,n._queue=[],n._duration="number"==typeof t&&t,n._isDeclarative=t instanceof Cs,n._stepper=n._isDeclarative?t:new ks,n._history={},n.enabled=!0,n._time=0,n._lastTime=0,n._reseted=!0,n.transforms=new wa,n.transformId=1,n._haveReversed=!1,n._reverse=!1,n._loopsDone=0,n._swing=!1,n._wait=0,n._times=1,n._frameId=null,n._persist=!!n._isDeclarative||null,n}return na(e,t),qo(e,[{key:"element",value:function(t){return null==t?this._element:(this._element=t,t._prepareRunner(),this)}},{key:"timeline",value:function(t){return void 0===t?this._timeline:(this._timeline=t,this)}},{key:"animate",value:function(t,n,i){var r=e.sanitise(t,n,i),o=new e(r.duration);return this._timeline&&o.timeline(this._timeline),this._element&&o.element(this._element),o.loop(r).schedule(r.delay,r.when)}},{key:"schedule",value:function(t,e,n){if(t instanceof Ys||(n=e,e=t,t=this.timeline()),!t)throw Error("Runner cannot be scheduled without timeline");return t.schedule(this,e,n),this}},{key:"unschedule",value:function(){var t=this.timeline();return t&&t.unschedule(this),this}},{key:"loop",value:function(t,e,n){return"object"===se(t)&&(e=t.swing,n=t.wait,t=t.times),this._times=t||1/0,this._swing=e||!1,this._wait=n||0,!0===this._times&&(this._times=1/0),this}},{key:"delay",value:function(t){return this.animate(0,t)}},{key:"queue",value:function(t,e,n,i){return this._queue.push({initialiser:t||Pa,runner:e||Pa,retarget:n,isTransform:i,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}},{key:"during",value:function(t){return this.queue(null,t)}},{key:"after",value:function(t){return this.on("finished",t)}},{key:"time",value:function(t){if(null==t)return this._time;var e=t-this._time;return this.step(e),this}},{key:"duration",value:function(){return this._times*(this._wait+this._duration)-this._wait}},{key:"loops",value:function(t){var e=this._duration+this._wait;if(null==t){var n=Math.floor(this._time/e),i=(this._time-n*e)/this._duration;return Math.min(n+i,this._times)}var r=t%1,o=e*Math.floor(t)+this._duration*r;return this.time(o)}},{key:"persist",value:function(t){return null==t?this._persist:(this._persist=t,this)}},{key:"position",value:function(t){var e,n=this._time,i=this._duration,r=this._wait,o=this._times,a=this._swing,s=this._reverse;if(null==t){var u=function(t){var e=a*Math.floor(t%(2*(r+i))/(r+i)),n=e&&!s||!e&&s,o=Math.pow(-1,n)*(t%(r+i))/i+n;return Math.max(Math.min(o,1),0)},c=o*(r+i)-r;return e=n<=0?Math.round(u(1e-5)):n<c?u(n):Math.round(u(c-1e-5)),e}var l=Math.floor(this.loops()),f=a&&l%2==0;return e=l+(f&&!s||s&&f?t:1-t),this.loops(e)}},{key:"progress",value:function(t){return null==t?Math.min(1,this._time/this.duration()):this.time(t*this.duration())}},{key:"step",value:function(t){if(!this.enabled)return this;t=null==t?16:t,this._time+=t;var e=this.position(),n=this._lastPosition!==e&&this._time>=0;this._lastPosition=e;var i=this.duration(),r=this._lastTime<=0&&this._time>0,o=this._lastTime<i&&this._time>=i;this._lastTime=this._time,r&&this.fire("start",this);var a=this._isDeclarative;if(this.done=!a&&!o&&this._time>=i,this._reseted=!1,n||a){this._initialise(n),this.transforms=new wa;var s=this._run(a?t:e);this.fire("step",this)}return this.done=this.done||s&&a,o&&this.fire("finished",this),this}},{key:"reset",value:function(){return this._reseted||(this.time(0),this._reseted=!0),this}},{key:"finish",value:function(){return this.step(1/0)}},{key:"reverse",value:function(t){return this._reverse=null==t?!this._reverse:t,this}},{key:"ease",value:function(t){return this._stepper=new ks(t),this}},{key:"active",value:function(t){return null==t?this.enabled:(this.enabled=t,this)}},{key:"_rememberMorpher",value:function(t,e){if(this._history[t]={morpher:e,caller:this._queue[this._queue.length-1]},this._isDeclarative){var n=this.timeline();n&&n.play()}}},{key:"_tryRetarget",value:function(t,e,n){if(this._history[t]){if(!this._history[t].caller.initialised){var i=this._queue.indexOf(this._history[t].caller);return this._queue.splice(i,1),!1}this._history[t].caller.retarget?this._history[t].caller.retarget(e,n):this._history[t].morpher.to(e),this._history[t].caller.finished=!1;var r=this.timeline();return r&&r.play(),!0}return!1}},{key:"_initialise",value:function(t){if(t||this._isDeclarative)for(var e=0,n=this._queue.length;e<n;++e){var i=this._queue[e],r=this._isDeclarative||!i.initialised&&t;t=!i.finished,r&&t&&(i.initialiser.call(this),i.initialised=!0)}}},{key:"_run",value:function(t){for(var e=!0,n=0,i=this._queue.length;n<i;++n){var r=this._queue[n],o=r.runner.call(this,t);r.finished=r.finished||!0===o,e=e&&r.finished}return e}},{key:"addTransform",value:function(t,e){return this.transforms.lmultiplyO(t),this}},{key:"clearTransform",value:function(){return this.transforms=new wa,this}},{key:"clearTransformsFromQueue",value:function(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter((function(t){return!t.isTransform})))}}],[{key:"sanitise",value:function(t,e,n){var i=1,r=!1,o=0;return e=e||Na.delay,n=n||"last","object"!==se(t=t||Na.duration)||t instanceof Es||(e=t.delay||e,n=t.when||n,r=t.swing||r,i=t.times||i,o=t.wait||o,t=t.duration||Na.duration),{duration:t,delay:e,swing:r,times:i,wait:o,when:n}}}]),e}(_a);Qs.id=0;var tu=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wa,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];xr(this,t),this.transforms=e,this.id=n,this.done=i}return qo(t,[{key:"clearTransformsFromQueue",value:function(){}}]),t}();Ir([Qs,tu],{mergeWith:function(t){return new tu(t.transforms.lmultiply(this.transforms),t.id)}});var eu=function(t,e){return t.lmultiplyO(e)},nu=function(t){return t.transforms};function iu(){var t=this._transformationRunners.runners.map(nu).reduce(eu,new wa);this.transform(t),this._transformationRunners.merge(),1===this._transformationRunners.length()&&(this._frameId=null)}var ru=function(){function t(){xr(this,t),this.runners=[],this.ids=[]}return qo(t,[{key:"add",value:function(t){if(!this.runners.includes(t)){var e=t.id+1;return this.runners.push(t),this.ids.push(e),this}}},{key:"getByID",value:function(t){return this.runners[this.ids.indexOf(t+1)]}},{key:"remove",value:function(t){var e=this.ids.indexOf(t+1);return this.ids.splice(e,1),this.runners.splice(e,1),this}},{key:"merge",value:function(){var t=this,e=null;return this.runners.forEach((function(n,i){e&&n.done&&e.done&&(!n._timeline||!n._timeline._runnerIds.includes(n.id))&&(!e._timeline||!e._timeline._runnerIds.includes(e.id))&&(t.remove(n.id),t.edit(e.id,n.mergeWith(e))),e=n})),this}},{key:"edit",value:function(t,e){var n=this.ids.indexOf(t+1);return this.ids.splice(n,1,t+1),this.runners.splice(n,1,e),this}},{key:"length",value:function(){return this.ids.length}},{key:"clearBefore",value:function(t){var e=this.ids.indexOf(t+1)||1;return this.ids.splice(0,e,0),this.runners.splice(0,e,new tu).forEach((function(t){return t.clearTransformsFromQueue()})),this}}]),t}();Mi({Element:{animate:function(t,e,n){var i=Qs.sanitise(t,e,n),r=this.timeline();return new Qs(i.duration).loop(i).element(this).timeline(r.play()).schedule(i.delay,i.when)},delay:function(t,e){return this.animate(0,t,e)},_clearTransformRunnersBefore:function(t){this._transformationRunners.clearBefore(t.id)},_currentTransform:function(t){return this._transformationRunners.runners.filter((function(e){return e.id<=t.id})).map(nu).reduce(eu,new wa)},_addRunner:function(t){this._transformationRunners.add(t),Ws.cancelImmediate(this._frameId),this._frameId=Ws.immediate(iu.bind(this))},_prepareRunner:function(){null==this._frameId&&(this._transformationRunners=(new ru).add(new tu(new wa(this))))}}}),Ir(Qs,{attr:function(t,e){return this.styleAttr("attr",t,e)},css:function(t,e){return this.styleAttr("css",t,e)},styleAttr:function(t,e,n){if("object"===se(e)){for(var i in e)this.styleAttr(t,i,e[i]);return this}var r=new Ds(this._stepper).to(n);return this.queue((function(){r=r.from(this.element()[t](e))}),(function(n){return this.element()[t](e,r.at(n)),r.done()})),this},zoom:function(t,e){if(this._tryRetarget("zoom",ss,e))return this;var n=new Ds(this._stepper).to(new Da(t));return this.queue((function(){n=n.from(this.element().zoom())}),(function(t){return this.element().zoom(n.at(t),e),n.done()}),(function(t,i){e=i,n.to(t)})),this._rememberMorpher("zoom",n),this},transform:function(t,e,n){if(e=t.relative||e,this._isDeclarative&&!e&&this._tryRetarget("transform",t))return this;var i=wa.isMatrixLike(t);n=null!=t.affine?t.affine:null!=n?n:!i;var r,o,a,s,u,c=new Ds(this._stepper).type(n?Ls:wa);return this.queue((function(){o=o||this.element(),r=r||mr(t,o),u=new wa(e?void 0:o),o._addRunner(this),e||o._clearTransformRunnersBefore(this)}),(function(l){e||this.clearTransform();var f=new ya(r).transform(o._currentTransform(this)),h=f.x,d=f.y,p=new wa(Js({},t,{origin:[h,d]})),m=this._isDeclarative&&a?a:u;if(n){p=p.decompose(h,d),m=m.decompose(h,d);var v=p.rotate,g=m.rotate,y=[v-360,v,v+360],b=y.map((function(t){return Math.abs(t-g)})),w=Math.min.apply(Math,Ei(b)),x=b.indexOf(w);p.rotate=y[x]}e&&(i||(p.rotate=t.rotate||0),this._isDeclarative&&s&&(m.rotate=s)),c.from(m),c.to(p);var S=c.at(l);return s=S.rotate,a=new wa(S),this.addTransform(a),o._addRunner(this),c.done()}),(function(e){(e.origin||"center").toString()!==(t.origin||"center").toString()&&(r=mr(t,o)),t=Js({},e,{origin:r})}),!0),this._isDeclarative&&this._rememberMorpher("transform",c),this},x:function(t,e){return this._queueNumber("x",t)},y:function(t){return this._queueNumber("y",t)},dx:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._queueNumberDelta("x",t)},dy:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._queueNumberDelta("y",t)},dmove:function(t,e){return this.dx(t).dy(e)},_queueNumberDelta:function(t,e){if(e=new Da(e),this._tryRetarget(t,e))return this;var n=new Ds(this._stepper).to(e),i=null;return this.queue((function(){i=this.element()[t](),n.from(i),n.to(i+e)}),(function(e){return this.element()[t](n.at(e)),n.done()}),(function(t){n.to(i+new Da(t))})),this._rememberMorpher(t,n),this},_queueObject:function(t,e){if(this._tryRetarget(t,e))return this;var n=new Ds(this._stepper).to(e);return this.queue((function(){n.from(this.element()[t]())}),(function(e){return this.element()[t](n.at(e)),n.done()})),this._rememberMorpher(t,n),this},_queueNumber:function(t,e){return this._queueObject(t,new Da(e))},cx:function(t){return this._queueNumber("cx",t)},cy:function(t){return this._queueNumber("cy",t)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){var n;return t&&e||(n=this._element.bbox()),t||(t=n.width/n.height*e),e||(e=n.height/n.width*t),this.width(t).height(e)},width:function(t){return this._queueNumber("width",t)},height:function(t){return this._queueNumber("height",t)},plot:function(t,e,n,i){if(4===arguments.length)return this.plot([t,e,n,i]);if(this._tryRetarget("plot",t))return this;var r=new Ds(this._stepper).type(this._element.MorphArray).to(t);return this.queue((function(){r.from(this._element.array())}),(function(t){return this._element.plot(r.at(t)),r.done()})),this._rememberMorpher("plot",r),this},leading:function(t){return this._queueNumber("leading",t)},viewbox:function(t,e,n,i){return this._queueObject("viewbox",new Ta(t,e,n,i))},update:function(t){return"object"!==se(t)?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset),this)}}),Ir(Qs,{rx:$a,ry:Va,from:as,to:ss}),Pr(Qs,"Runner");var ou=function(t){function e(t){var n;return xr(this,e),(n=Jo(this,Qo(e).call(this,Mr("svg",t),t))).namespace(),n}return na(e,t),qo(e,[{key:"isRoot",value:function(){return!(this.node.parentNode&&this.node.parentNode instanceof wr.window.SVGElement&&"#document"!==this.node.parentNode.nodeName)}},{key:"root",value:function(){return this.isRoot()?this:ta(Qo(e.prototype),"root",this).call(this)}},{key:"namespace",value:function(){return this.isRoot()?this.attr({xmlns:vr,version:"1.1"}).attr("xmlns:xlink",yr,gr).attr("xmlns:svgjs",br,gr):this.root().namespace()}},{key:"defs",value:function(){return this.isRoot()?Ar(this.node.querySelector("defs"))||this.put(new is):this.root().defs()}},{key:"parent",value:function(t){return this.isRoot()?"#document"===this.node.parentNode.nodeName?null:Ar(this.node.parentNode):ta(Qo(e.prototype),"parent",this).call(this,t)}},{key:"clear",value:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this}}]),e}(ns);Mi({Container:{nested:Dr((function(){return this.put(new ou)}))}}),Pr(ou,"Svg",!0);var au=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("symbol",t),t))}return na(e,t),e}(ns);Mi({Container:{symbol:Dr((function(){return this.put(new au)}))}}),Pr(au,"Symbol");var su={__proto__:null,plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(wr.document.createTextNode(t)),this},length:function(){return this.node.getComputedTextLength()}},uu=function(t){function e(t){var n;return xr(this,e),(n=Jo(this,Qo(e).call(this,Mr("text",t),t))).dom.leading=new Da(1.3),n._rebuild=!0,n._build=!1,n}return na(e,t),qo(e,[{key:"x",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.x:this.attr("x",this.attr("x")+t-e.x)}},{key:"y",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.y:this.attr("y",this.attr("y")+t-e.y)}},{key:"move",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.bbox();return this.x(t,n).y(e,n)}},{key:"cx",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.cx:this.attr("x",this.attr("x")+t-e.cx)}},{key:"cy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.cy:this.attr("y",this.attr("y")+t-e.cy)}},{key:"center",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.bbox();return this.cx(t,n).cy(e,n)}},{key:"text",value:function(t){if(void 0===t){var e=this.node.childNodes,n=0;t="";for(var i=0,r=e.length;i<r;++i)"textPath"!==e[i].nodeName?(i!==n&&3!==e[i].nodeType&&!0===Ar(e[i]).dom.newLined&&(t+="\n"),t+=e[i].textContent):0===i&&(n=1);return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else for(var o=0,a=(t=t.split("\n")).length;o<a;o++)this.tspan(t[o]).newLine();return this.build(!1).rebuild()}},{key:"leading",value:function(t){return null==t?this.dom.leading:(this.dom.leading=new Da(t),this.rebuild())}},{key:"rebuild",value:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,n=0,i=this.dom.leading;this.each((function(){var t=wr.window.getComputedStyle(this.node).getPropertyValue("font-size"),r=i*new Da(t);this.dom.newLined&&(this.attr("x",e.attr("x")),"\n"===this.text()?n+=r:(this.attr("dy",r+n),n=0))})),this.fire("rebuild")}return this}},{key:"build",value:function(t){return this._build=!!t,this}},{key:"setData",value:function(t){return this.dom=t,this.dom.leading=new Da(t.leading||1.3),this}}]),e}(ts);Ir(uu,su),Mi({Container:{text:Dr((function(t){return this.put(new uu).text(t)})),plain:Dr((function(t){return this.put(new uu).plain(t)}))}}),Pr(uu,"Text");var cu=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("tspan",t),t))}return na(e,t),qo(e,[{key:"text",value:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)}},{key:"dx",value:function(t){return this.attr("dx",t)}},{key:"dy",value:function(t){return this.attr("dy",t)}},{key:"x",value:function(t){return this.attr("x",t)}},{key:"y",value:function(t){return this.attr("x",t)}},{key:"move",value:function(t,e){return this.x(t).y(e)}},{key:"newLine",value:function(){var t=this.parent(uu);this.dom.newLined=!0;var e=wr.window.getComputedStyle(this.node).getPropertyValue("font-size"),n=t.dom.leading*new Da(e);return this.dy(n).attr("x",t.x())}}]),e}(uu);Ir(cu,su),Mi({Tspan:{tspan:Dr((function(t){var e=new cu;return this._build||this.clear(),this.node.appendChild(e.node),e.text(t)}))}}),Pr(cu,"Tspan");var lu=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("clipPath",t),t))}return na(e,t),qo(e,[{key:"remove",value:function(){return this.targets().forEach((function(t){t.unclip()})),ta(Qo(e.prototype),"remove",this).call(this)}},{key:"targets",value:function(){return Aa('svg [clip-path*="'+this.id()+'"]')}}]),e}(ns);Mi({Container:{clip:Dr((function(){return this.defs().put(new lu)}))},Element:{clipWith:function(t){var e=t instanceof lu?t:this.parent().clip().add(t);return this.attr("clip-path",'url("#'+e.id()+'")')},unclip:function(){return this.attr("clip-path",null)},clipper:function(){return this.reference("clip-path")}}}),Pr(lu,"ClipPath");var fu=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("foreignObject",t),t))}return na(e,t),e}(ja);Mi({Container:{foreignObject:Dr((function(t,e){return this.put(new fu).size(t,e)}))}}),Pr(fu,"ForeignObject");var hu=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("g",t),t))}return na(e,t),qo(e,[{key:"x",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.x:this.move(t,e.y,e)}},{key:"y",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.y:this.move(e.x,t,e)}},{key:"move",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.bbox(),i=t-n.x,r=e-n.y;return this.dmove(i,r)}},{key:"dx",value:function(t){return this.dmove(t,0)}},{key:"dy",value:function(t){return this.dmove(0,t)}},{key:"dmove",value:function(t,e){return this.children().forEach((function(n,i){var r=n.bbox(),o=new wa(n),a=o.translate(t,e).transform(o.inverse()),s=new ya(r.x,r.y).transform(a);n.move(s.x,s.y)})),this}},{key:"width",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.width:this.size(t,e.height,e)}},{key:"height",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.height:this.size(e.width,t,e)}},{key:"size",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.bbox(),i=pr(this,t,e,n),r=i.width/n.width,o=i.height/n.height;return this.children().forEach((function(t,e){var i=new ya(n).transform(new wa(t).inverse());t.scale(r,o,i.x,i.y)})),this}}]),e}(ns);Mi({Container:{group:Dr((function(){return this.put(new hu)}))}}),Pr(hu,"G");var du=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("a",t),t))}return na(e,t),qo(e,[{key:"to",value:function(t){return this.attr("href",t,yr)}},{key:"target",value:function(t){return this.attr("target",t)}}]),e}(ns);Mi({Container:{link:Dr((function(t){return this.put(new du).to(t)}))},Element:{linkTo:function(t){var e=new du;return"function"==typeof t?t.call(e,e):e.to(t),this.parent().put(e).put(this)}}}),Pr(du,"A");var pu=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("mask",t),t))}return na(e,t),qo(e,[{key:"remove",value:function(){return this.targets().forEach((function(t){t.unmask()})),ta(Qo(e.prototype),"remove",this).call(this)}},{key:"targets",value:function(){return Aa('svg [mask*="'+this.id()+'"]')}}]),e}(ns);function mu(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function vu(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mu(n,!0).forEach((function(e){qa(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mu(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Mi({Container:{mask:Dr((function(){return this.defs().put(new pu)}))},Element:{maskWith:function(t){var e=t instanceof pu?t:this.parent().mask().add(t);return this.attr("mask",'url("#'+e.id()+'")')},unmask:function(){return this.attr("mask",null)},masker:function(){return this.reference("mask")}}}),Pr(pu,"Mask");var gu=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("style",t),t))}return na(e,t),qo(e,[{key:"addText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.node.textContent+=t,this}},{key:"font",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rule("@font-face",vu({fontFamily:t,src:e},n))}},{key:"rule",value:function(t,e){return this.addText(function(t,e){if(!t)return"";if(!e)return t;var n=t+"{";for(var i in e)n+=hr(i)+":"+e[i]+";";return n+="}"}(t,e))}}]),e}(ja);Mi("Dom",{style:Dr((function(t,e){return this.put(new gu).rule(t,e)})),fontface:Dr((function(t,e,n){return this.put(new gu).font(t,e,n)}))}),Pr(gu,"Style");var yu=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("textPath",t),t))}return na(e,t),qo(e,[{key:"array",value:function(){var t=this.track();return t?t.array():null}},{key:"plot",value:function(t){var e=this.track(),n=null;return e&&(n=e.plot(t)),null==t?n:this}},{key:"track",value:function(){return this.reference("href")}}]),e}(uu);Mi({Container:{textPath:Dr((function(t,e){return t instanceof uu||(t=this.text(t)),t.path(e)}))},Text:{path:Dr((function(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=new yu;if(t instanceof zs||(t=this.defs().path(t)),i.attr("href","#"+t,yr),n)for(;e=this.node.firstChild;)i.node.appendChild(e);return this.put(i)})),textPath:function(){return this.findOne("textPath")}},Path:{text:Dr((function(t){return t instanceof uu||(t=(new uu).addTo(this.parent()).text(t)),t.path(this)})),targets:function(){return Aa('svg [href*="'+this.id()+'"]')}}}),yu.prototype.MorphArray=As,Pr(yu,"TextPath");var bu=function(t){function e(t){return xr(this,e),Jo(this,Qo(e).call(this,Mr("use",t),t))}return na(e,t),qo(e,[{key:"element",value:function(t,e){return this.attr("href",(e||"")+"#"+t,yr)}}]),e}(ts);Mi({Container:{use:Dr((function(t,e){return this.put(new bu).element(t,e)}))}}),Pr(bu,"Use");var wu=Cr;Ir([ou,au,hs,ls,vs],Ai("viewbox")),Ir([ms,Hs,Fs,zs],Ai("marker")),Ir(uu,Ai("Text")),Ir(zs,Ai("Path")),Ir(is,Ai("Defs")),Ir([uu,cu],Ai("Tspan")),Ir([qs,rs,es,cs],Ai("radius")),Ir(_a,Ai("EventTarget")),Ir(La,Ai("Dom")),Ir(ja,Ai("Element")),Ir(ts,Ai("Shape")),Ir(ns,Ai("Container")),Ir(Qs,Ai("Runner")),Ca.extend(Ei(new Set(Ci))),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Us.push.apply(Us,Ei([].concat(t)))}([Da,Xo,Ta,wa,Ia,ds,As]),Ir(Us,{to:function(t){return(new Ds).type(this.constructor).from(this.valueOf()).to(t)},fromArray:function(t){return this.init(t),this}})}).call(this,n(5))},function(t,e,n){var i;
/*!
 * jQuery JavaScript Library v3.4.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2019-05-01T21:04Z
 */!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(n,r){"use strict";var o=[],a=n.document,s=Object.getPrototypeOf,u=o.slice,c=o.concat,l=o.push,f=o.indexOf,h={},d=h.toString,p=h.hasOwnProperty,m=p.toString,v=m.call(Object),g={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},b=function(t){return null!=t&&t===t.window},w={type:!0,src:!0,nonce:!0,noModule:!0};function x(t,e,n){var i,r,o=(n=n||a).createElement("script");if(o.text=t,e)for(i in w)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&o.setAttribute(i,r);n.head.appendChild(o).parentNode.removeChild(o)}function S(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[d.call(t)]||"object":typeof t}var T=function(t,e){return new T.fn.init(t,e)},E=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function k(t){var e=!!t&&"length"in t&&t.length,n=S(t);return!y(t)&&!b(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}T.fn=T.prototype={jquery:"3.4.1",constructor:T,length:0,toArray:function(){return u.call(this)},get:function(t){return null==t?u.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=T.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return T.each(this,t)},map:function(t){return this.pushStack(T.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:o.sort,splice:o.splice},T.extend=T.fn.extend=function(){var t,e,n,i,r,o,a=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||y(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(t=arguments[s]))for(e in t)i=t[e],"__proto__"!==e&&a!==i&&(c&&i&&(T.isPlainObject(i)||(r=Array.isArray(i)))?(n=a[e],o=r&&!Array.isArray(n)?[]:r||T.isPlainObject(n)?n:{},r=!1,a[e]=T.extend(c,o,i)):void 0!==i&&(a[e]=i));return a},T.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==d.call(t))&&(!(e=s(t))||"function"==typeof(n=p.call(e,"constructor")&&e.constructor)&&m.call(n)===v)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e){x(t,{nonce:e&&e.nonce})},each:function(t,e){var n,i=0;if(k(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(E,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(k(Object(t))?T.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:f.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,o=t.length,a=!n;r<o;r++)!e(t[r],r)!==a&&i.push(t[r]);return i},map:function(t,e,n){var i,r,o=0,a=[];if(k(t))for(i=t.length;o<i;o++)null!=(r=e(t[o],o,n))&&a.push(r);else for(o in t)null!=(r=e(t[o],o,n))&&a.push(r);return c.apply([],a)},guid:1,support:g}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=o[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){h["[object "+e+"]"]=e.toLowerCase()}));var C=
/*!
 * Sizzle CSS Selector Engine v2.3.4
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2019-04-08
 */
function(t){var e,n,i,r,o,a,s,u,c,l,f,h,d,p,m,v,g,y,b,w="sizzle"+1*new Date,x=t.document,S=0,T=0,E=ut(),k=ut(),C=ut(),M=ut(),A=function(t,e){return t===e&&(f=!0),0},_={}.hasOwnProperty,P=[],N=P.pop,O=P.push,I=P.push,D=P.slice,R=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",U="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",z="\\["+j+"*("+U+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+U+"))|)"+j+"*\\]",B=":("+U+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|.*)\\)|)",F=new RegExp(j+"+","g"),H=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),q=new RegExp("^"+j+"*,"+j+"*"),K=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),$=new RegExp(j+"|>"),V=new RegExp(B),W=new RegExp("^"+U+"$"),G={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),TAG:new RegExp("^("+U+"|[*])"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),nt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},it=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,rt=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},ot=function(){h()},at=wt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{I.apply(P=D.call(x.childNodes),x.childNodes),P[x.childNodes.length].nodeType}catch(t){I={apply:P.length?function(t,e){O.apply(t,D.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function st(t,e,i,r){var o,s,c,l,f,p,g,y=e&&e.ownerDocument,S=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==S&&9!==S&&11!==S)return i;if(!r&&((e?e.ownerDocument||e:x)!==d&&h(e),e=e||d,m)){if(11!==S&&(f=Q.exec(t)))if(o=f[1]){if(9===S){if(!(c=e.getElementById(o)))return i;if(c.id===o)return i.push(c),i}else if(y&&(c=y.getElementById(o))&&b(e,c)&&c.id===o)return i.push(c),i}else{if(f[2])return I.apply(i,e.getElementsByTagName(t)),i;if((o=f[3])&&n.getElementsByClassName&&e.getElementsByClassName)return I.apply(i,e.getElementsByClassName(o)),i}if(n.qsa&&!M[t+" "]&&(!v||!v.test(t))&&(1!==S||"object"!==e.nodeName.toLowerCase())){if(g=t,y=e,1===S&&$.test(t)){for((l=e.getAttribute("id"))?l=l.replace(it,rt):e.setAttribute("id",l=w),s=(p=a(t)).length;s--;)p[s]="#"+l+" "+bt(p[s]);g=p.join(","),y=tt.test(t)&&gt(e.parentNode)||e}try{return I.apply(i,y.querySelectorAll(g)),i}catch(e){M(t,!0)}finally{l===w&&e.removeAttribute("id")}}}return u(t.replace(H,"$1"),e,i,r)}function ut(){var t=[];return function e(n,r){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=r}}function ct(t){return t[w]=!0,t}function lt(t){var e=d.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ft(t,e){for(var n=t.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=e}function ht(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function dt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function mt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&at(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function vt(t){return ct((function(e){return e=+e,ct((function(n,i){for(var r,o=t([],n.length,e),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))}))}))}function gt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=st.support={},o=st.isXML=function(t){var e=t.namespaceURI,n=(t.ownerDocument||t).documentElement;return!X.test(e||n&&n.nodeName||"HTML")},h=st.setDocument=function(t){var e,r,a=t?t.ownerDocument||t:x;return a!==d&&9===a.nodeType&&a.documentElement?(p=(d=a).documentElement,m=!o(d),x!==d&&(r=d.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",ot,!1):r.attachEvent&&r.attachEvent("onunload",ot)),n.attributes=lt((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=lt((function(t){return t.appendChild(d.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=J.test(d.getElementsByClassName),n.getById=lt((function(t){return p.appendChild(t).id=w,!d.getElementsByName||!d.getElementsByName(w).length})),n.getById?(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n=e.getElementById(t);return n?[n]:[]}}):(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n,i,r,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(r=e.getElementsByName(t),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&m)return e.getElementsByClassName(t)},g=[],v=[],(n.qsa=J.test(d.querySelectorAll))&&(lt((function(t){p.appendChild(t).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+j+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||v.push("\\["+j+"*(?:value|"+L+")"),t.querySelectorAll("[id~="+w+"-]").length||v.push("~="),t.querySelectorAll(":checked").length||v.push(":checked"),t.querySelectorAll("a#"+w+"+*").length||v.push(".#.+[+~]")})),lt((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=d.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&v.push("name"+j+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),v.push(",.*:")}))),(n.matchesSelector=J.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&lt((function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),g.push("!=",B)})),v=v.length&&new RegExp(v.join("|")),g=g.length&&new RegExp(g.join("|")),e=J.test(p.compareDocumentPosition),b=e||J.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},A=e?function(t,e){if(t===e)return f=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t===d||t.ownerDocument===x&&b(x,t)?-1:e===d||e.ownerDocument===x&&b(x,e)?1:l?R(l,t)-R(l,e):0:4&i?-1:1)}:function(t,e){if(t===e)return f=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!r||!o)return t===d?-1:e===d?1:r?-1:o?1:l?R(l,t)-R(l,e):0;if(r===o)return ht(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?ht(a[i],s[i]):a[i]===x?-1:s[i]===x?1:0},d):d},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if((t.ownerDocument||t)!==d&&h(t),n.matchesSelector&&m&&!M[e+" "]&&(!g||!g.test(e))&&(!v||!v.test(e)))try{var i=y.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){M(e,!0)}return st(e,d,null,[t]).length>0},st.contains=function(t,e){return(t.ownerDocument||t)!==d&&h(t),b(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!==d&&h(t);var r=i.attrHandle[e.toLowerCase()],o=r&&_.call(i.attrHandle,e.toLowerCase())?r(t,e,!m):void 0;return void 0!==o?o:n.attributes||!m?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},st.escape=function(t){return(t+"").replace(it,rt)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,i=[],r=0,o=0;if(f=!n.detectDuplicates,l=!n.sortStable&&t.slice(0),t.sort(A),f){for(;e=t[o++];)e===t[o]&&(r=i.push(o));for(;r--;)t.splice(i[r],1)}return l=null,t},r=st.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=r(e);return n},(i=st.selectors={cacheLength:50,createPseudo:ct,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return G.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&V.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=E[t+" "];return e||(e=new RegExp("(^|"+j+")"+t+"("+j+"|$)"))&&E(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(i){var r=st.attr(i,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r.replace(F," ")+" ").indexOf(n)>-1:"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,u){var c,l,f,h,d,p,m=o!==a?"nextSibling":"previousSibling",v=e.parentNode,g=s&&e.nodeName.toLowerCase(),y=!u&&!s,b=!1;if(v){if(o){for(;m;){for(h=e;h=h[m];)if(s?h.nodeName.toLowerCase()===g:1===h.nodeType)return!1;p=m="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?v.firstChild:v.lastChild],a&&y){for(b=(d=(c=(l=(f=(h=v)[w]||(h[w]={}))[h.uniqueID]||(f[h.uniqueID]={}))[t]||[])[0]===S&&c[1])&&c[2],h=d&&v.childNodes[d];h=++d&&h&&h[m]||(b=d=0)||p.pop();)if(1===h.nodeType&&++b&&h===e){l[t]=[S,d,b];break}}else if(y&&(b=d=(c=(l=(f=(h=e)[w]||(h[w]={}))[h.uniqueID]||(f[h.uniqueID]={}))[t]||[])[0]===S&&c[1]),!1===b)for(;(h=++d&&h&&h[m]||(b=d=0)||p.pop())&&((s?h.nodeName.toLowerCase()!==g:1!==h.nodeType)||!++b||(y&&((l=(f=h[w]||(h[w]={}))[h.uniqueID]||(f[h.uniqueID]={}))[t]=[S,b]),h!==e)););return(b-=r)===i||b%i==0&&b/i>=0}}},PSEUDO:function(t,e){var n,r=i.pseudos[t]||i.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return r[w]?r(e):r.length>1?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?ct((function(t,n){for(var i,o=r(t,e),a=o.length;a--;)t[i=R(t,o[a])]=!(n[i]=o[a])})):function(t){return r(t,0,n)}):r}},pseudos:{not:ct((function(t){var e=[],n=[],i=s(t.replace(H,"$1"));return i[w]?ct((function(t,e,n,r){for(var o,a=i(t,null,r,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))})):function(t,r,o){return e[0]=t,i(e,null,o,n),e[0]=null,!n.pop()}})),has:ct((function(t){return function(e){return st(t,e).length>0}})),contains:ct((function(t){return t=t.replace(et,nt),function(e){return(e.textContent||r(e)).indexOf(t)>-1}})),lang:ct((function(t){return W.test(t||"")||st.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=m?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:mt(!1),disabled:mt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return Z.test(t.nodeName)},input:function(t){return Y.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:vt((function(){return[0]})),last:vt((function(t,e){return[e-1]})),eq:vt((function(t,e,n){return[n<0?n+e:n]})),even:vt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:vt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:vt((function(t,e,n){for(var i=n<0?n+e:n>e?e:n;--i>=0;)t.push(i);return t})),gt:vt((function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=dt(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=pt(e);function yt(){}function bt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function wt(t,e,n){var i=e.dir,r=e.next,o=r||i,a=n&&"parentNode"===o,s=T++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||a)return t(e,n,r);return!1}:function(e,n,u){var c,l,f,h=[S,s];if(u){for(;e=e[i];)if((1===e.nodeType||a)&&t(e,n,u))return!0}else for(;e=e[i];)if(1===e.nodeType||a)if(l=(f=e[w]||(e[w]={}))[e.uniqueID]||(f[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((c=l[o])&&c[0]===S&&c[1]===s)return h[2]=c[2];if(l[o]=h,h[2]=t(e,n,u))return!0}return!1}}function xt(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function St(t,e,n,i,r){for(var o,a=[],s=0,u=t.length,c=null!=e;s<u;s++)(o=t[s])&&(n&&!n(o,i,r)||(a.push(o),c&&e.push(s)));return a}function Tt(t,e,n,i,r,o){return i&&!i[w]&&(i=Tt(i)),r&&!r[w]&&(r=Tt(r,o)),ct((function(o,a,s,u){var c,l,f,h=[],d=[],p=a.length,m=o||function(t,e,n){for(var i=0,r=e.length;i<r;i++)st(t,e[i],n);return n}(e||"*",s.nodeType?[s]:s,[]),v=!t||!o&&e?m:St(m,h,t,s,u),g=n?r||(o?t:p||i)?[]:a:v;if(n&&n(v,g,s,u),i)for(c=St(g,d),i(c,[],s,u),l=c.length;l--;)(f=c[l])&&(g[d[l]]=!(v[d[l]]=f));if(o){if(r||t){if(r){for(c=[],l=g.length;l--;)(f=g[l])&&c.push(v[l]=f);r(null,g=[],c,u)}for(l=g.length;l--;)(f=g[l])&&(c=r?R(o,f):h[l])>-1&&(o[c]=!(a[c]=f))}}else g=St(g===a?g.splice(p,g.length):g),r?r(null,a,g,u):I.apply(a,g)}))}function Et(t){for(var e,n,r,o=t.length,a=i.relative[t[0].type],s=a||i.relative[" "],u=a?1:0,l=wt((function(t){return t===e}),s,!0),f=wt((function(t){return R(e,t)>-1}),s,!0),h=[function(t,n,i){var r=!a&&(i||n!==c)||((e=n).nodeType?l(t,n,i):f(t,n,i));return e=null,r}];u<o;u++)if(n=i.relative[t[u].type])h=[wt(xt(h),n)];else{if((n=i.filter[t[u].type].apply(null,t[u].matches))[w]){for(r=++u;r<o&&!i.relative[t[r].type];r++);return Tt(u>1&&xt(h),u>1&&bt(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(H,"$1"),n,u<r&&Et(t.slice(u,r)),r<o&&Et(t=t.slice(r)),r<o&&bt(t))}h.push(n)}return xt(h)}return yt.prototype=i.filters=i.pseudos,i.setFilters=new yt,a=st.tokenize=function(t,e){var n,r,o,a,s,u,c,l=k[t+" "];if(l)return e?0:l.slice(0);for(s=t,u=[],c=i.preFilter;s;){for(a in n&&!(r=q.exec(s))||(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),n=!1,(r=K.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(H," ")}),s=s.slice(n.length)),i.filter)!(r=G[a].exec(s))||c[a]&&!(r=c[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return e?s.length:s?st.error(t):k(t,u).slice(0)},s=st.compile=function(t,e){var n,r=[],o=[],s=C[t+" "];if(!s){for(e||(e=a(t)),n=e.length;n--;)(s=Et(e[n]))[w]?r.push(s):o.push(s);(s=C(t,function(t,e){var n=e.length>0,r=t.length>0,o=function(o,a,s,u,l){var f,p,v,g=0,y="0",b=o&&[],w=[],x=c,T=o||r&&i.find.TAG("*",l),E=S+=null==x?1:Math.random()||.1,k=T.length;for(l&&(c=a===d||a||l);y!==k&&null!=(f=T[y]);y++){if(r&&f){for(p=0,a||f.ownerDocument===d||(h(f),s=!m);v=t[p++];)if(v(f,a||d,s)){u.push(f);break}l&&(S=E)}n&&((f=!v&&f)&&g--,o&&b.push(f))}if(g+=y,n&&y!==g){for(p=0;v=e[p++];)v(b,w,a,s);if(o){if(g>0)for(;y--;)b[y]||w[y]||(w[y]=N.call(u));w=St(w)}I.apply(u,w),l&&!o&&w.length>0&&g+e.length>1&&st.uniqueSort(u)}return l&&(S=E,c=x),b};return n?ct(o):o}(o,r))).selector=t}return s},u=st.select=function(t,e,n,r){var o,u,c,l,f,h="function"==typeof t&&t,d=!r&&a(t=h.selector||t);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&9===e.nodeType&&m&&i.relative[u[1].type]){if(!(e=(i.find.ID(c.matches[0].replace(et,nt),e)||[])[0]))return n;h&&(e=e.parentNode),t=t.slice(u.shift().value.length)}for(o=G.needsContext.test(t)?0:u.length;o--&&(c=u[o],!i.relative[l=c.type]);)if((f=i.find[l])&&(r=f(c.matches[0].replace(et,nt),tt.test(u[0].type)&&gt(e.parentNode)||e))){if(u.splice(o,1),!(t=r.length&&bt(u)))return I.apply(n,r),n;break}}return(h||s(t,d))(r,e,!m,n,!e||tt.test(t)&&gt(e.parentNode)||e),n},n.sortStable=w.split("").sort(A).join("")===w,n.detectDuplicates=!!f,h(),n.sortDetached=lt((function(t){return 1&t.compareDocumentPosition(d.createElement("fieldset"))})),lt((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ft("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&lt((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ft("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),lt((function(t){return null==t.getAttribute("disabled")}))||ft(L,(function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null})),st}(n);T.find=C,T.expr=C.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=C.uniqueSort,T.text=C.getText,T.isXMLDoc=C.isXML,T.contains=C.contains,T.escapeSelector=C.escape;var M=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&T(t).is(n))break;i.push(t)}return i},A=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},_=T.expr.match.needsContext;function P(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(t,e,n){return y(e)?T.grep(t,(function(t,i){return!!e.call(t,i,t)!==n})):e.nodeType?T.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?T.grep(t,(function(t){return f.call(e,t)>-1!==n})):T.filter(e,t,n)}T.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?T.find.matchesSelector(i,t)?[i]:[]:T.find.matches(t,T.grep(e,(function(t){return 1===t.nodeType})))},T.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(T(t).filter((function(){for(e=0;e<i;e++)if(T.contains(r[e],this))return!0})));for(n=this.pushStack([]),e=0;e<i;e++)T.find(t,r[e],n);return i>1?T.uniqueSort(n):n},filter:function(t){return this.pushStack(O(this,t||[],!1))},not:function(t){return this.pushStack(O(this,t||[],!0))},is:function(t){return!!O(this,"string"==typeof t&&_.test(t)?T(t):t||[],!1).length}});var I,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||I,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:D.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof T?e[0]:e,T.merge(this,T.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:a,!0)),N.test(i[1])&&T.isPlainObject(e))for(i in e)y(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=a.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(T):T.makeArray(t,this)}).prototype=T.fn,I=T(a);var R=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function j(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}T.fn.extend({has:function(t){var e=T(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(T.contains(this,e[t]))return!0}))},closest:function(t,e){var n,i=0,r=this.length,o=[],a="string"!=typeof t&&T(t);if(!_.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&T.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?T.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?f.call(T(t),this[0]):f.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),T.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return M(t,"parentNode")},parentsUntil:function(t,e,n){return M(t,"parentNode",n)},next:function(t){return j(t,"nextSibling")},prev:function(t){return j(t,"previousSibling")},nextAll:function(t){return M(t,"nextSibling")},prevAll:function(t){return M(t,"previousSibling")},nextUntil:function(t,e,n){return M(t,"nextSibling",n)},prevUntil:function(t,e,n){return M(t,"previousSibling",n)},siblings:function(t){return A((t.parentNode||{}).firstChild,t)},children:function(t){return A(t.firstChild)},contents:function(t){return void 0!==t.contentDocument?t.contentDocument:(P(t,"template")&&(t=t.content||t),T.merge([],t.childNodes))}},(function(t,e){T.fn[t]=function(n,i){var r=T.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=T.filter(i,r)),this.length>1&&(L[t]||T.uniqueSort(r),R.test(t)&&r.reverse()),this.pushStack(r)}}));var U=/[^\x20\t\r\n\f]+/g;function z(t){return t}function B(t){throw t}function F(t,e,n,i){var r;try{t&&y(r=t.promise)?r.call(t).done(e).fail(n):t&&y(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}T.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return T.each(t.match(U)||[],(function(t,n){e[n]=!0})),e}(t):T.extend({},t);var e,n,i,r,o=[],a=[],s=-1,u=function(){for(r=r||t.once,i=e=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=o.length,n=!1);t.memory||(n=!1),e=!1,r&&(o=n?[]:"")},c={add:function(){return o&&(n&&!e&&(s=o.length-1,a.push(n)),function e(n){T.each(n,(function(n,i){y(i)?t.unique&&c.has(i)||o.push(i):i&&i.length&&"string"!==S(i)&&e(i)}))}(arguments),n&&!e&&u()),this},remove:function(){return T.each(arguments,(function(t,e){for(var n;(n=T.inArray(e,o,n))>-1;)o.splice(n,1),n<=s&&s--})),this},has:function(t){return t?T.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=a=[],n||e||(o=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},T.extend({Deferred:function(t){var e=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return T.Deferred((function(n){T.each(e,(function(e,i){var r=y(t[i[4]])&&t[i[4]];o[i[1]]((function(){var t=r&&r.apply(this,arguments);t&&y(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[t]:arguments)}))})),t=null})).promise()},then:function(t,i,r){var o=0;function a(t,e,i,r){return function(){var s=this,u=arguments,c=function(){var n,c;if(!(t<o)){if((n=i.apply(s,u))===e.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,y(c)?r?c.call(n,a(o,e,z,r),a(o,e,B,r)):(o++,c.call(n,a(o,e,z,r),a(o,e,B,r),a(o,e,z,e.notifyWith))):(i!==z&&(s=void 0,u=[n]),(r||e.resolveWith)(s,u))}},l=r?c:function(){try{c()}catch(n){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(n,l.stackTrace),t+1>=o&&(i!==B&&(s=void 0,u=[n]),e.rejectWith(s,u))}};t?l():(T.Deferred.getStackHook&&(l.stackTrace=T.Deferred.getStackHook()),n.setTimeout(l))}}return T.Deferred((function(n){e[0][3].add(a(0,n,y(r)?r:z,n.notifyWith)),e[1][3].add(a(0,n,y(t)?t:z)),e[2][3].add(a(0,n,y(i)?i:B))})).promise()},promise:function(t){return null!=t?T.extend(t,r):r}},o={};return T.each(e,(function(t,n){var a=n[2],s=n[5];r[n[1]]=a.add,s&&a.add((function(){i=s}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),a.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=a.fireWith})),r.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,i=Array(n),r=u.call(arguments),o=T.Deferred(),a=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?u.call(arguments):n,--e||o.resolveWith(i,r)}};if(e<=1&&(F(t,o.done(a(n)).resolve,o.reject,!e),"pending"===o.state()||y(r[n]&&r[n].then)))return o.then();for(;n--;)F(r[n],a(n),o.reject);return o.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(t,e){n.console&&n.console.warn&&t&&H.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},T.readyException=function(t){n.setTimeout((function(){throw t}))};var q=T.Deferred();function K(){a.removeEventListener("DOMContentLoaded",K),n.removeEventListener("load",K),T.ready()}T.fn.ready=function(t){return q.then(t).catch((function(t){T.readyException(t)})),this},T.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--T.readyWait:T.isReady)||(T.isReady=!0,!0!==t&&--T.readyWait>0||q.resolveWith(a,[T]))}}),T.ready.then=q.then,"complete"===a.readyState||"loading"!==a.readyState&&!a.documentElement.doScroll?n.setTimeout(T.ready):(a.addEventListener("DOMContentLoaded",K),n.addEventListener("load",K));var $=function(t,e,n,i,r,o,a){var s=0,u=t.length,c=null==n;if("object"===S(n))for(s in r=!0,n)$(t,e,s,n[s],!0,o,a);else if(void 0!==i&&(r=!0,y(i)||(a=!0),c&&(a?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(T(t),n)})),e))for(;s<u;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return r?t:c?e.call(t):u?e(t[0],n):o},V=/^-ms-/,W=/-([a-z])/g;function G(t,e){return e.toUpperCase()}function X(t){return t.replace(V,"ms-").replace(W,G)}var Y=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Z(){this.expando=T.expando+Z.uid++}Z.uid=1,Z.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Y(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[X(e)]=n;else for(i in e)r[X(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][X(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(X):(e=X(e))in i?[e]:e.match(U)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||T.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!T.isEmptyObject(e)}};var J=new Z,Q=new Z,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function nt(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(n)}catch(t){}Q.set(t,e,n)}else n=void 0;return n}T.extend({hasData:function(t){return Q.hasData(t)||J.hasData(t)},data:function(t,e,n){return Q.access(t,e,n)},removeData:function(t,e){Q.remove(t,e)},_data:function(t,e,n){return J.access(t,e,n)},_removeData:function(t,e){J.remove(t,e)}}),T.fn.extend({data:function(t,e){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(r=Q.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&(i=X(i.slice(5)),nt(o,i,r[i]));J.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each((function(){Q.set(this,t)})):$(this,(function(e){var n;if(o&&void 0===e)return void 0!==(n=Q.get(o,t))||void 0!==(n=nt(o,t))?n:void 0;this.each((function(){Q.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){Q.remove(this,t)}))}}),T.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=J.get(t,e),n&&(!i||Array.isArray(n)?i=J.access(t,e,T.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=T.queue(t,e),i=n.length,r=n.shift(),o=T._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,(function(){T.dequeue(t,e)}),o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return J.get(t,n)||J.access(t,n,{empty:T.Callbacks("once memory").add((function(){J.remove(t,[e+"queue",n])}))})}}),T.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?T.queue(this[0],t):void 0===e?this:this.each((function(){var n=T.queue(this,t,e);T._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&T.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){T.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=T.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=J.get(o[a],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(e)}});var it=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rt=new RegExp("^(?:([+-])=|)("+it+")([a-z%]*)$","i"),ot=["Top","Right","Bottom","Left"],at=a.documentElement,st=function(t){return T.contains(t.ownerDocument,t)},ut={composed:!0};at.getRootNode&&(st=function(t){return T.contains(t.ownerDocument,t)||t.getRootNode(ut)===t.ownerDocument});var ct=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&st(t)&&"none"===T.css(t,"display")},lt=function(t,e,n,i){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in r=n.apply(t,i||[]),e)t.style[o]=a[o];return r};function ft(t,e,n,i){var r,o,a=20,s=i?function(){return i.cur()}:function(){return T.css(t,e,"")},u=s(),c=n&&n[3]||(T.cssNumber[e]?"":"px"),l=t.nodeType&&(T.cssNumber[e]||"px"!==c&&+u)&&rt.exec(T.css(t,e));if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;a--;)T.style(t,e,l+c),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),l/=o;l*=2,T.style(t,e,l+c),n=n||[]}return n&&(l=+l||+u||0,r=n[1]?l+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=l,i.end=r)),r}var ht={};function dt(t){var e,n=t.ownerDocument,i=t.nodeName,r=ht[i];return r||(e=n.body.appendChild(n.createElement(i)),r=T.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),ht[i]=r,r)}function pt(t,e){for(var n,i,r=[],o=0,a=t.length;o<a;o++)(i=t[o]).style&&(n=i.style.display,e?("none"===n&&(r[o]=J.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&ct(i)&&(r[o]=dt(i))):"none"!==n&&(r[o]="none",J.set(i,"display",n)));for(o=0;o<a;o++)null!=r[o]&&(t[o].style.display=r[o]);return t}T.fn.extend({show:function(){return pt(this,!0)},hide:function(){return pt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){ct(this)?T(this).show():T(this).hide()}))}});var mt=/^(?:checkbox|radio)$/i,vt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,gt=/^$|^module$|\/(?:java|ecma)script/i,yt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function bt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&P(t,e)?T.merge([t],n):n}function wt(t,e){for(var n=0,i=t.length;n<i;n++)J.set(t[n],"globalEval",!e||J.get(e[n],"globalEval"))}yt.optgroup=yt.option,yt.tbody=yt.tfoot=yt.colgroup=yt.caption=yt.thead,yt.th=yt.td;var xt,St,Tt=/<|&#?\w+;/;function Et(t,e,n,i,r){for(var o,a,s,u,c,l,f=e.createDocumentFragment(),h=[],d=0,p=t.length;d<p;d++)if((o=t[d])||0===o)if("object"===S(o))T.merge(h,o.nodeType?[o]:o);else if(Tt.test(o)){for(a=a||f.appendChild(e.createElement("div")),s=(vt.exec(o)||["",""])[1].toLowerCase(),u=yt[s]||yt._default,a.innerHTML=u[1]+T.htmlPrefilter(o)+u[2],l=u[0];l--;)a=a.lastChild;T.merge(h,a.childNodes),(a=f.firstChild).textContent=""}else h.push(e.createTextNode(o));for(f.textContent="",d=0;o=h[d++];)if(i&&T.inArray(o,i)>-1)r&&r.push(o);else if(c=st(o),a=bt(f.appendChild(o),"script"),c&&wt(a),n)for(l=0;o=a[l++];)gt.test(o.type||"")&&n.push(o);return f}xt=a.createDocumentFragment().appendChild(a.createElement("div")),(St=a.createElement("input")).setAttribute("type","radio"),St.setAttribute("checked","checked"),St.setAttribute("name","t"),xt.appendChild(St),g.checkClone=xt.cloneNode(!0).cloneNode(!0).lastChild.checked,xt.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!xt.cloneNode(!0).lastChild.defaultValue;var kt=/^key/,Ct=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Mt=/^([^.]*)(?:\.(.+)|)/;function At(){return!0}function _t(){return!1}function Pt(t,e){return t===function(){try{return a.activeElement}catch(t){}}()==("focus"===e)}function Nt(t,e,n,i,r,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(i=i||n,n=void 0),e)Nt(t,s,n,i,e[s],o);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=_t;else if(!r)return t;return 1===o&&(a=r,(r=function(t){return T().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=T.guid++)),t.each((function(){T.event.add(this,e,r,i,n)}))}function Ot(t,e,n){n?(J.set(t,e,!1),T.event.add(t,e,{namespace:!1,handler:function(t){var i,r,o=J.get(this,e);if(1&t.isTrigger&&this[e]){if(o.length)(T.event.special[e]||{}).delegateType&&t.stopPropagation();else if(o=u.call(arguments),J.set(this,e,o),i=n(this,e),this[e](),o!==(r=J.get(this,e))||i?J.set(this,e,!1):r={},o!==r)return t.stopImmediatePropagation(),t.preventDefault(),r.value}else o.length&&(J.set(this,e,{value:T.event.trigger(T.extend(o[0],T.Event.prototype),o.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===J.get(t,e)&&T.event.add(t,e,At)}T.event={global:{},add:function(t,e,n,i,r){var o,a,s,u,c,l,f,h,d,p,m,v=J.get(t);if(v)for(n.handler&&(n=(o=n).handler,r=o.selector),r&&T.find.matchesSelector(at,r),n.guid||(n.guid=T.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(e){return void 0!==T&&T.event.triggered!==e.type?T.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(U)||[""]).length;c--;)d=m=(s=Mt.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),d&&(f=T.event.special[d]||{},d=(r?f.delegateType:f.bindType)||d,f=T.event.special[d]||{},l=T.extend({type:d,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&T.expr.match.needsContext.test(r),namespace:p.join(".")},o),(h=u[d])||((h=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,i,p,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,l):h.push(l),T.event.global[d]=!0)},remove:function(t,e,n,i,r){var o,a,s,u,c,l,f,h,d,p,m,v=J.hasData(t)&&J.get(t);if(v&&(u=v.events)){for(c=(e=(e||"").match(U)||[""]).length;c--;)if(d=m=(s=Mt.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),d){for(f=T.event.special[d]||{},h=u[d=(i?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)l=h[o],!r&&m!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||i&&i!==l.selector&&("**"!==i||!l.selector)||(h.splice(o,1),l.selector&&h.delegateCount--,f.remove&&f.remove.call(t,l));a&&!h.length&&(f.teardown&&!1!==f.teardown.call(t,p,v.handle)||T.removeEvent(t,d,v.handle),delete u[d])}else for(d in u)T.event.remove(t,d+e[c],n,i,!0);T.isEmptyObject(u)&&J.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,o,a,s=T.event.fix(t),u=new Array(arguments.length),c=(J.get(this,"events")||{})[s.type]||[],l=T.event.special[s.type]||{};for(u[0]=s,e=1;e<arguments.length;e++)u[e]=arguments[e];if(s.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,s)){for(a=T.event.handlers.call(this,s,c),e=0;(r=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==o.namespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(i=((T.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,u))&&!1===(s.result=i)&&(s.preventDefault(),s.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(t,e){var n,i,r,o,a,s=[],u=e.delegateCount,c=t.target;if(u&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[r=(i=e[n]).selector+" "]&&(a[r]=i.needsContext?T(r,this).index(c)>-1:T.find(r,this,null,[c]).length),a[r]&&o.push(i);o.length&&s.push({elem:c,handlers:o})}return c=this,u<e.length&&s.push({elem:c,handlers:e.slice(u)}),s},addProp:function(t,e){Object.defineProperty(T.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[T.expando]?t:new T.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return mt.test(e.type)&&e.click&&P(e,"input")&&Ot(e,"click",At),!1},trigger:function(t){var e=this||t;return mt.test(e.type)&&e.click&&P(e,"input")&&Ot(e,"click"),!0},_default:function(t){var e=t.target;return mt.test(e.type)&&e.click&&P(e,"input")&&J.get(e,"click")||P(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},T.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},T.Event=function(t,e){if(!(this instanceof T.Event))return new T.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?At:_t,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&T.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:_t,isPropagationStopped:_t,isImmediatePropagationStopped:_t,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=At,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=At,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=At,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&kt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Ct.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},(function(t,e){T.event.special[t]={setup:function(){return Ot(this,t,Pt),!1},trigger:function(){return Ot(this,t),!0},delegateType:e}})),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){T.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;return r&&(r===i||T.contains(i,r))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}})),T.fn.extend({on:function(t,e,n,i){return Nt(this,t,e,n,i)},one:function(t,e,n,i){return Nt(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,T(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=_t),this.each((function(){T.event.remove(this,t,n,e)}))}});var It=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Dt=/<script|<style|<link/i,Rt=/checked\s*(?:[^=]|=\s*.checked.)/i,Lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function jt(t,e){return P(t,"table")&&P(11!==e.nodeType?e:e.firstChild,"tr")&&T(t).children("tbody")[0]||t}function Ut(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function zt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Bt(t,e){var n,i,r,o,a,s,u,c;if(1===e.nodeType){if(J.hasData(t)&&(o=J.access(t),a=J.set(e,o),c=o.events))for(r in delete a.handle,a.events={},c)for(n=0,i=c[r].length;n<i;n++)T.event.add(e,r,c[r][n]);Q.hasData(t)&&(s=Q.access(t),u=T.extend({},s),Q.set(e,u))}}function Ft(t,e){var n=e.nodeName.toLowerCase();"input"===n&&mt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Ht(t,e,n,i){e=c.apply([],e);var r,o,a,s,u,l,f=0,h=t.length,d=h-1,p=e[0],m=y(p);if(m||h>1&&"string"==typeof p&&!g.checkClone&&Rt.test(p))return t.each((function(r){var o=t.eq(r);m&&(e[0]=p.call(this,r,o.html())),Ht(o,e,n,i)}));if(h&&(o=(r=Et(e,t[0].ownerDocument,!1,t,i)).firstChild,1===r.childNodes.length&&(r=o),o||i)){for(s=(a=T.map(bt(r,"script"),Ut)).length;f<h;f++)u=r,f!==d&&(u=T.clone(u,!0,!0),s&&T.merge(a,bt(u,"script"))),n.call(t[f],u,f);if(s)for(l=a[a.length-1].ownerDocument,T.map(a,zt),f=0;f<s;f++)u=a[f],gt.test(u.type||"")&&!J.access(u,"globalEval")&&T.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?T._evalUrl&&!u.noModule&&T._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")}):x(u.textContent.replace(Lt,""),u,l))}return t}function qt(t,e,n){for(var i,r=e?T.filter(e,t):t,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||T.cleanData(bt(i)),i.parentNode&&(n&&st(i)&&wt(bt(i,"script")),i.parentNode.removeChild(i));return t}T.extend({htmlPrefilter:function(t){return t.replace(It,"<$1></$2>")},clone:function(t,e,n){var i,r,o,a,s=t.cloneNode(!0),u=st(t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||T.isXMLDoc(t)))for(a=bt(s),i=0,r=(o=bt(t)).length;i<r;i++)Ft(o[i],a[i]);if(e)if(n)for(o=o||bt(t),a=a||bt(s),i=0,r=o.length;i<r;i++)Bt(o[i],a[i]);else Bt(t,s);return(a=bt(s,"script")).length>0&&wt(a,!u&&bt(t,"script")),s},cleanData:function(t){for(var e,n,i,r=T.event.special,o=0;void 0!==(n=t[o]);o++)if(Y(n)){if(e=n[J.expando]){if(e.events)for(i in e.events)r[i]?T.event.remove(n,i):T.removeEvent(n,i,e.handle);n[J.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),T.fn.extend({detach:function(t){return qt(this,t,!0)},remove:function(t){return qt(this,t)},text:function(t){return $(this,(function(t){return void 0===t?T.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Ht(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||jt(this,t).appendChild(t)}))},prepend:function(){return Ht(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=jt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Ht(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Ht(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(T.cleanData(bt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return T.clone(this,t,e)}))},html:function(t){return $(this,(function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Dt.test(t)&&!yt[(vt.exec(t)||["",""])[1].toLowerCase()]){t=T.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(T.cleanData(bt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Ht(this,arguments,(function(e){var n=this.parentNode;T.inArray(this,t)<0&&(T.cleanData(bt(this)),n&&n.replaceChild(e,this))}),t)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){T.fn[t]=function(t){for(var n,i=[],r=T(t),o=r.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),T(r[a])[e](n),l.apply(i,n.get());return this.pushStack(i)}}));var Kt=new RegExp("^("+it+")(?!px)[a-z%]+$","i"),$t=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},Vt=new RegExp(ot.join("|"),"i");function Wt(t,e,n){var i,r,o,a,s=t.style;return(n=n||$t(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||st(t)||(a=T.style(t,e)),!g.pixelBoxStyles()&&Kt.test(a)&&Vt.test(e)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function Gt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",at.appendChild(c).appendChild(l);var t=n.getComputedStyle(l);i="1%"!==t.top,u=12===e(t.marginLeft),l.style.right="60%",s=36===e(t.right),r=36===e(t.width),l.style.position="absolute",o=12===e(l.offsetWidth/3),at.removeChild(c),l=null}}function e(t){return Math.round(parseFloat(t))}var i,r,o,s,u,c=a.createElement("div"),l=a.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===l.style.backgroundClip,T.extend(g,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),o}}))}();var Xt=["Webkit","Moz","ms"],Yt=a.createElement("div").style,Zt={};function Jt(t){var e=T.cssProps[t]||Zt[t];return e||(t in Yt?t:Zt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Xt.length;n--;)if((t=Xt[n]+e)in Yt)return t}(t)||t)}var Qt=/^(none|table(?!-c[ea]).+)/,te=/^--/,ee={position:"absolute",visibility:"hidden",display:"block"},ne={letterSpacing:"0",fontWeight:"400"};function ie(t,e,n){var i=rt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function re(t,e,n,i,r,o){var a="width"===e?1:0,s=0,u=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=T.css(t,n+ot[a],!0,r)),i?("content"===n&&(u-=T.css(t,"padding"+ot[a],!0,r)),"margin"!==n&&(u-=T.css(t,"border"+ot[a]+"Width",!0,r))):(u+=T.css(t,"padding"+ot[a],!0,r),"padding"!==n?u+=T.css(t,"border"+ot[a]+"Width",!0,r):s+=T.css(t,"border"+ot[a]+"Width",!0,r));return!i&&o>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-u-s-.5))||0),u}function oe(t,e,n){var i=$t(t),r=(!g.boxSizingReliable()||n)&&"border-box"===T.css(t,"boxSizing",!1,i),o=r,a=Wt(t,e,i),s="offset"+e[0].toUpperCase()+e.slice(1);if(Kt.test(a)){if(!n)return a;a="auto"}return(!g.boxSizingReliable()&&r||"auto"===a||!parseFloat(a)&&"inline"===T.css(t,"display",!1,i))&&t.getClientRects().length&&(r="border-box"===T.css(t,"boxSizing",!1,i),(o=s in t)&&(a=t[s])),(a=parseFloat(a)||0)+re(t,e,n||(r?"border":"content"),o,i,a)+"px"}function ae(t,e,n,i,r){return new ae.prototype.init(t,e,n,i,r)}T.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Wt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=X(e),u=te.test(e),c=t.style;if(u||(e=Jt(s)),a=T.cssHooks[e]||T.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(t,!1,i))?r:c[e];"string"===(o=typeof n)&&(r=rt.exec(n))&&r[1]&&(n=ft(t,e,r),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=r&&r[3]||(T.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,i))||(u?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,i){var r,o,a,s=X(e);return te.test(e)||(e=Jt(s)),(a=T.cssHooks[e]||T.cssHooks[s])&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=Wt(t,e,i)),"normal"===r&&e in ne&&(r=ne[e]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),T.each(["height","width"],(function(t,e){T.cssHooks[e]={get:function(t,n,i){if(n)return!Qt.test(T.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?oe(t,e,i):lt(t,ee,(function(){return oe(t,e,i)}))},set:function(t,n,i){var r,o=$t(t),a=!g.scrollboxSize()&&"absolute"===o.position,s=(a||i)&&"border-box"===T.css(t,"boxSizing",!1,o),u=i?re(t,e,i,s,o):0;return s&&a&&(u-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-re(t,e,"border",!1,o)-.5)),u&&(r=rt.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=T.css(t,e)),ie(0,n,u)}}})),T.cssHooks.marginLeft=Gt(g.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Wt(t,"marginLeft"))||t.getBoundingClientRect().left-lt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),T.each({margin:"",padding:"",border:"Width"},(function(t,e){T.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+ot[i]+e]=o[i]||o[i-2]||o[0];return r}},"margin"!==t&&(T.cssHooks[t+e].set=ie)})),T.fn.extend({css:function(t,e){return $(this,(function(t,e,n){var i,r,o={},a=0;if(Array.isArray(e)){for(i=$t(t),r=e.length;a<r;a++)o[e[a]]=T.css(t,e[a],!1,i);return o}return void 0!==n?T.style(t,e,n):T.css(t,e)}),t,e,arguments.length>1)}}),T.Tween=ae,ae.prototype={constructor:ae,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||T.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(T.cssNumber[n]?"":"px")},cur:function(){var t=ae.propHooks[this.prop];return t&&t.get?t.get(this):ae.propHooks._default.get(this)},run:function(t){var e,n=ae.propHooks[this.prop];return this.options.duration?this.pos=e=T.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ae.propHooks._default.set(this),this}},ae.prototype.init.prototype=ae.prototype,ae.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=T.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){T.fx.step[t.prop]?T.fx.step[t.prop](t):1!==t.elem.nodeType||!T.cssHooks[t.prop]&&null==t.elem.style[Jt(t.prop)]?t.elem[t.prop]=t.now:T.style(t.elem,t.prop,t.now+t.unit)}}},ae.propHooks.scrollTop=ae.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},T.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},T.fx=ae.prototype.init,T.fx.step={};var se,ue,ce=/^(?:toggle|show|hide)$/,le=/queueHooks$/;function fe(){ue&&(!1===a.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(fe):n.setTimeout(fe,T.fx.interval),T.fx.tick())}function he(){return n.setTimeout((function(){se=void 0})),se=Date.now()}function de(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=ot[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function pe(t,e,n){for(var i,r=(me.tweeners[e]||[]).concat(me.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,e,t))return i}function me(t,e,n){var i,r,o=0,a=me.prefilters.length,s=T.Deferred().always((function(){delete u.elem})),u=function(){if(r)return!1;for(var e=se||he(),n=Math.max(0,c.startTime+c.duration-e),i=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(i);return s.notifyWith(t,[c,i,n]),i<1&&a?n:(a||s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c]),!1)},c=s.promise({elem:t,props:T.extend({},e),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},n),originalProperties:e,originalOptions:n,startTime:se||he(),duration:n.duration,tweens:[],createTween:function(e,n){var i=T.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)c.tweens[n].run(1);return e?(s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c,e])):s.rejectWith(t,[c,e]),this}}),l=c.props;for(!function(t,e){var n,i,r,o,a;for(n in t)if(r=e[i=X(n)],o=t[n],Array.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),(a=T.cssHooks[i])&&"expand"in a)for(n in o=a.expand(o),delete t[i],o)n in t||(t[n]=o[n],e[n]=r);else e[i]=r}(l,c.opts.specialEasing);o<a;o++)if(i=me.prefilters[o].call(c,t,l,c.opts))return y(i.stop)&&(T._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return T.map(l,pe,c),y(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),T.fx.timer(T.extend(u,{elem:t,anim:c,queue:c.opts.queue})),c}T.Animation=T.extend(me,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ft(n.elem,t,rt.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(U);for(var n,i=0,r=t.length;i<r;i++)n=t[i],me.tweeners[n]=me.tweeners[n]||[],me.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,r,o,a,s,u,c,l,f="width"in e||"height"in e,h=this,d={},p=t.style,m=t.nodeType&&ct(t),v=J.get(t,"fxshow");for(i in n.queue||(null==(a=T._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,h.always((function(){h.always((function(){a.unqueued--,T.queue(t,"fx").length||a.empty.fire()}))}))),e)if(r=e[i],ce.test(r)){if(delete e[i],o=o||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!v||void 0===v[i])continue;m=!0}d[i]=v&&v[i]||T.style(t,i)}if((u=!T.isEmptyObject(e))||!T.isEmptyObject(d))for(i in f&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=v&&v.display)&&(c=J.get(t,"display")),"none"===(l=T.css(t,"display"))&&(c?l=c:(pt([t],!0),c=t.style.display||c,l=T.css(t,"display"),pt([t]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===T.css(t,"float")&&(u||(h.done((function(){p.display=c})),null==c&&(l=p.display,c="none"===l?"":l)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),u=!1,d)u||(v?"hidden"in v&&(m=v.hidden):v=J.access(t,"fxshow",{display:c}),o&&(v.hidden=!m),m&&pt([t],!0),h.done((function(){for(i in m||pt([t]),J.remove(t,"fxshow"),d)T.style(t,i,d[i])}))),u=pe(m?v[i]:0,i,h),i in v||(v[i]=u.start,m&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?me.prefilters.unshift(t):me.prefilters.push(t)}}),T.speed=function(t,e,n){var i=t&&"object"==typeof t?T.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return T.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in T.fx.speeds?i.duration=T.fx.speeds[i.duration]:i.duration=T.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){y(i.old)&&i.old.call(this),i.queue&&T.dequeue(this,i.queue)},i},T.fn.extend({fadeTo:function(t,e,n,i){return this.filter(ct).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=T.isEmptyObject(t),o=T.speed(e,n,i),a=function(){var e=me(this,T.extend({},t),o);(r||J.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each((function(){var e=!0,r=null!=t&&t+"queueHooks",o=T.timers,a=J.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&le.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(n),e=!1,o.splice(r,1));!e&&n||T.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=J.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=T.timers,a=i?i.length:0;for(n.finish=!0,T.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish}))}}),T.each(["toggle","show","hide"],(function(t,e){var n=T.fn[e];T.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(de(e,!0),t,i,r)}})),T.each({slideDown:de("show"),slideUp:de("hide"),slideToggle:de("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){T.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}})),T.timers=[],T.fx.tick=function(){var t,e=0,n=T.timers;for(se=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||T.fx.stop(),se=void 0},T.fx.timer=function(t){T.timers.push(t),T.fx.start()},T.fx.interval=13,T.fx.start=function(){ue||(ue=!0,fe())},T.fx.stop=function(){ue=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(t,e){return t=T.fx&&T.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,i){var r=n.setTimeout(e,t);i.stop=function(){n.clearTimeout(r)}}))},function(){var t=a.createElement("input"),e=a.createElement("select").appendChild(a.createElement("option"));t.type="checkbox",g.checkOn=""!==t.value,g.optSelected=e.selected,(t=a.createElement("input")).value="t",t.type="radio",g.radioValue="t"===t.value}();var ve,ge=T.expr.attrHandle;T.fn.extend({attr:function(t,e){return $(this,T.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){T.removeAttr(this,t)}))}}),T.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?T.prop(t,e,n):(1===o&&T.isXMLDoc(t)||(r=T.attrHooks[e.toLowerCase()]||(T.expr.match.bool.test(e)?ve:void 0)),void 0!==n?null===n?void T.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=T.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!g.radioValue&&"radio"===e&&P(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(U);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),ve={set:function(t,e,n){return!1===e?T.removeAttr(t,n):t.setAttribute(n,n),n}},T.each(T.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=ge[e]||T.find.attr;ge[e]=function(t,e,i){var r,o,a=e.toLowerCase();return i||(o=ge[a],ge[a]=r,r=null!=n(t,e,i)?a:null,ge[a]=o),r}}));var ye=/^(?:input|select|textarea|button)$/i,be=/^(?:a|area)$/i;function we(t){return(t.match(U)||[]).join(" ")}function xe(t){return t.getAttribute&&t.getAttribute("class")||""}function Se(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(U)||[]}T.fn.extend({prop:function(t,e){return $(this,T.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[T.propFix[t]||t]}))}}),T.extend({prop:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&T.isXMLDoc(t)||(e=T.propFix[e]||e,r=T.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=T.find.attr(t,"tabindex");return e?parseInt(e,10):ye.test(t.nodeName)||be.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(T.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){T.propFix[this.toLowerCase()]=this})),T.fn.extend({addClass:function(t){var e,n,i,r,o,a,s,u=0;if(y(t))return this.each((function(e){T(this).addClass(t.call(this,e,xe(this)))}));if((e=Se(t)).length)for(;n=this[u++];)if(r=xe(n),i=1===n.nodeType&&" "+we(r)+" "){for(a=0;o=e[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(s=we(i))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,i,r,o,a,s,u=0;if(y(t))return this.each((function(e){T(this).removeClass(t.call(this,e,xe(this)))}));if(!arguments.length)return this.attr("class","");if((e=Se(t)).length)for(;n=this[u++];)if(r=xe(n),i=1===n.nodeType&&" "+we(r)+" "){for(a=0;o=e[a++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");r!==(s=we(i))&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):y(t)?this.each((function(n){T(this).toggleClass(t.call(this,n,xe(this),e),e)})):this.each((function(){var e,r,o,a;if(i)for(r=0,o=T(this),a=Se(t);e=a[r++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||((e=xe(this))&&J.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":J.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+we(xe(n))+" ").indexOf(e)>-1)return!0;return!1}});var Te=/\r/g;T.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=y(t),this.each((function(n){var r;1===this.nodeType&&(null==(r=i?t.call(this,n,T(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=T.map(r,(function(t){return null==t?"":t+""}))),(e=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))}))):r?(e=T.valHooks[r.type]||T.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(Te,""):null==n?"":n:void 0}}),T.extend({valHooks:{option:{get:function(t){var e=T.find.attr(t,"value");return null!=e?e:we(T.text(t))}},select:{get:function(t){var e,n,i,r=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],u=a?o+1:r.length;for(i=o<0?u:a?o:0;i<u;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!P(n.parentNode,"optgroup"))){if(e=T(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,i,r=t.options,o=T.makeArray(e),a=r.length;a--;)((i=r[a]).selected=T.inArray(T.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),T.each(["radio","checkbox"],(function(){T.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=T.inArray(T(t).val(),e)>-1}},g.checkOn||(T.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),g.focusin="onfocusin"in n;var Ee=/^(?:focusinfocus|focusoutblur)$/,ke=function(t){t.stopPropagation()};T.extend(T.event,{trigger:function(t,e,i,r){var o,s,u,c,l,f,h,d,m=[i||a],v=p.call(t,"type")?t.type:t,g=p.call(t,"namespace")?t.namespace.split("."):[];if(s=d=u=i=i||a,3!==i.nodeType&&8!==i.nodeType&&!Ee.test(v+T.event.triggered)&&(v.indexOf(".")>-1&&(g=v.split("."),v=g.shift(),g.sort()),l=v.indexOf(":")<0&&"on"+v,(t=t[T.expando]?t:new T.Event(v,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:T.makeArray(e,[t]),h=T.event.special[v]||{},r||!h.trigger||!1!==h.trigger.apply(i,e))){if(!r&&!h.noBubble&&!b(i)){for(c=h.delegateType||v,Ee.test(c+v)||(s=s.parentNode);s;s=s.parentNode)m.push(s),u=s;u===(i.ownerDocument||a)&&m.push(u.defaultView||u.parentWindow||n)}for(o=0;(s=m[o++])&&!t.isPropagationStopped();)d=s,t.type=o>1?c:h.bindType||v,(f=(J.get(s,"events")||{})[t.type]&&J.get(s,"handle"))&&f.apply(s,e),(f=l&&s[l])&&f.apply&&Y(s)&&(t.result=f.apply(s,e),!1===t.result&&t.preventDefault());return t.type=v,r||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(m.pop(),e)||!Y(i)||l&&y(i[v])&&!b(i)&&((u=i[l])&&(i[l]=null),T.event.triggered=v,t.isPropagationStopped()&&d.addEventListener(v,ke),i[v](),t.isPropagationStopped()&&d.removeEventListener(v,ke),T.event.triggered=void 0,u&&(i[l]=u)),t.result}},simulate:function(t,e,n){var i=T.extend(new T.Event,n,{type:t,isSimulated:!0});T.event.trigger(i,null,e)}}),T.fn.extend({trigger:function(t,e){return this.each((function(){T.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return T.event.trigger(t,e,n,!0)}}),g.focusin||T.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){T.event.simulate(e,t.target,T.event.fix(t))};T.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=J.access(i,e);r||i.addEventListener(t,n,!0),J.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=J.access(i,e)-1;r?J.access(i,e,r):(i.removeEventListener(t,n,!0),J.remove(i,e))}}}));var Ce=n.location,Me=Date.now(),Ae=/\?/;T.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||T.error("Invalid XML: "+t),e};var _e=/\[\]$/,Pe=/\r?\n/g,Ne=/^(?:submit|button|image|reset|file)$/i,Oe=/^(?:input|select|textarea|keygen)/i;function Ie(t,e,n,i){var r;if(Array.isArray(e))T.each(e,(function(e,r){n||_e.test(t)?i(t,r):Ie(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)}));else if(n||"object"!==S(e))i(t,e);else for(r in e)Ie(t+"["+r+"]",e[r],n,i)}T.param=function(t,e){var n,i=[],r=function(t,e){var n=y(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!T.isPlainObject(t))T.each(t,(function(){r(this.name,this.value)}));else for(n in t)Ie(n,t[n],e,r);return i.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=T.prop(this,"elements");return t?T.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!T(this).is(":disabled")&&Oe.test(this.nodeName)&&!Ne.test(t)&&(this.checked||!mt.test(t))})).map((function(t,e){var n=T(this).val();return null==n?null:Array.isArray(n)?T.map(n,(function(t){return{name:e.name,value:t.replace(Pe,"\r\n")}})):{name:e.name,value:n.replace(Pe,"\r\n")}})).get()}});var De=/%20/g,Re=/#.*$/,Le=/([?&])_=[^&]*/,je=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ue=/^(?:GET|HEAD)$/,ze=/^\/\//,Be={},Fe={},He="*/".concat("*"),qe=a.createElement("a");function Ke(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(U)||[];if(y(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function $e(t,e,n,i){var r={},o=t===Fe;function a(s){var u;return r[s]=!0,T.each(t[s]||[],(function(t,s){var c=s(e,n,i);return"string"!=typeof c||o||r[c]?o?!(u=c):void 0:(e.dataTypes.unshift(c),a(c),!1)})),u}return a(e.dataTypes[0])||!r["*"]&&a("*")}function Ve(t,e){var n,i,r=T.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&T.extend(!0,t,i),t}qe.href=Ce.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ce.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ce.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":He,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ve(Ve(t,T.ajaxSettings),e):Ve(T.ajaxSettings,t)},ajaxPrefilter:Ke(Be),ajaxTransport:Ke(Fe),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,r,o,s,u,c,l,f,h,d,p=T.ajaxSetup({},e),m=p.context||p,v=p.context&&(m.nodeType||m.jquery)?T(m):T.event,g=T.Deferred(),y=T.Callbacks("once memory"),b=p.statusCode||{},w={},x={},S="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(l){if(!s)for(s={};e=je.exec(o);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return l?o:null},setRequestHeader:function(t,e){return null==l&&(t=x[t.toLowerCase()]=x[t.toLowerCase()]||t,w[t]=e),this},overrideMimeType:function(t){return null==l&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)E.always(t[E.status]);else for(e in t)b[e]=[b[e],t[e]];return this},abort:function(t){var e=t||S;return i&&i.abort(e),k(0,e),this}};if(g.promise(E),p.url=((t||p.url||Ce.href)+"").replace(ze,Ce.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(U)||[""],null==p.crossDomain){c=a.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=qe.protocol+"//"+qe.host!=c.protocol+"//"+c.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=T.param(p.data,p.traditional)),$e(Be,p,e,E),l)return E;for(h in(f=T.event&&p.global)&&0==T.active++&&T.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ue.test(p.type),r=p.url.replace(Re,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(De,"+")):(d=p.url.slice(r.length),p.data&&(p.processData||"string"==typeof p.data)&&(r+=(Ae.test(r)?"&":"?")+p.data,delete p.data),!1===p.cache&&(r=r.replace(Le,"$1"),d=(Ae.test(r)?"&":"?")+"_="+Me+++d),p.url=r+d),p.ifModified&&(T.lastModified[r]&&E.setRequestHeader("If-Modified-Since",T.lastModified[r]),T.etag[r]&&E.setRequestHeader("If-None-Match",T.etag[r])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&E.setRequestHeader("Content-Type",p.contentType),E.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+He+"; q=0.01":""):p.accepts["*"]),p.headers)E.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(!1===p.beforeSend.call(m,E,p)||l))return E.abort();if(S="abort",y.add(p.complete),E.done(p.success),E.fail(p.error),i=$e(Fe,p,e,E)){if(E.readyState=1,f&&v.trigger("ajaxSend",[E,p]),l)return E;p.async&&p.timeout>0&&(u=n.setTimeout((function(){E.abort("timeout")}),p.timeout));try{l=!1,i.send(w,k)}catch(t){if(l)throw t;k(-1,t)}}else k(-1,"No Transport");function k(t,e,a,s){var c,h,d,w,x,S=e;l||(l=!0,u&&n.clearTimeout(u),i=void 0,o=s||"",E.readyState=t>0?4:0,c=t>=200&&t<300||304===t,a&&(w=function(t,e,n){for(var i,r,o,a,s=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){u.unshift(r);break}if(u[0]in n)o=u[0];else{for(r in n){if(!u[0]||t.converters[r+" "+u[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(p,E,a)),w=function(t,e,n,i){var r,o,a,s,u,c={},l=t.dataTypes.slice();if(l[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(o=l.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=c[u+" "+o]||c["* "+o]))for(r in c)if((s=r.split(" "))[1]===o&&(a=c[u+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[r]:!0!==c[r]&&(o=s[0],l.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}(p,w,E,c),c?(p.ifModified&&((x=E.getResponseHeader("Last-Modified"))&&(T.lastModified[r]=x),(x=E.getResponseHeader("etag"))&&(T.etag[r]=x)),204===t||"HEAD"===p.type?S="nocontent":304===t?S="notmodified":(S=w.state,h=w.data,c=!(d=w.error))):(d=S,!t&&S||(S="error",t<0&&(t=0))),E.status=t,E.statusText=(e||S)+"",c?g.resolveWith(m,[h,S,E]):g.rejectWith(m,[E,S,d]),E.statusCode(b),b=void 0,f&&v.trigger(c?"ajaxSuccess":"ajaxError",[E,p,c?h:d]),y.fireWith(m,[E,S]),f&&(v.trigger("ajaxComplete",[E,p]),--T.active||T.event.trigger("ajaxStop")))}return E},getJSON:function(t,e,n){return T.get(t,e,n,"json")},getScript:function(t,e){return T.get(t,void 0,e,"script")}}),T.each(["get","post"],(function(t,e){T[e]=function(t,n,i,r){return y(n)&&(r=r||i,i=n,n=void 0),T.ajax(T.extend({url:t,type:e,dataType:r,data:n,success:i},T.isPlainObject(t)&&t))}})),T._evalUrl=function(t,e){return T.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){T.globalEval(t,e)}})},T.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=T(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return y(t)?this.each((function(e){T(this).wrapInner(t.call(this,e))})):this.each((function(){var e=T(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=y(t);return this.each((function(n){T(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){T(this).replaceWith(this.childNodes)})),this}}),T.expr.pseudos.hidden=function(t){return!T.expr.pseudos.visible(t)},T.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var We={0:200,1223:204},Ge=T.ajaxSettings.xhr();g.cors=!!Ge&&"withCredentials"in Ge,g.ajax=Ge=!!Ge,T.ajaxTransport((function(t){var e,i;if(g.cors||Ge&&!t.crossDomain)return{send:function(r,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)s.setRequestHeader(a,r[a]);e=function(t){return function(){e&&(e=i=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(We[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),i=s.onerror=s.ontimeout=e("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout((function(){e&&i()}))},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),T.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return T.globalEval(t),t}}}),T.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),T.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(i,r){e=T("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),a.head.appendChild(e[0])},abort:function(){n&&n()}}}));var Xe,Ye=[],Ze=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ye.pop()||T.expando+"_"+Me++;return this[t]=!0,t}}),T.ajaxPrefilter("json jsonp",(function(t,e,i){var r,o,a,s=!1!==t.jsonp&&(Ze.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ze.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Ze,"$1"+r):!1!==t.jsonp&&(t.url+=(Ae.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||T.error(r+" was not called"),a[0]},t.dataTypes[0]="json",o=n[r],n[r]=function(){a=arguments},i.always((function(){void 0===o?T(n).removeProp(r):n[r]=o,t[r]&&(t.jsonpCallback=e.jsonpCallback,Ye.push(r)),a&&y(o)&&o(a[0]),a=o=void 0})),"script"})),g.createHTMLDocument=((Xe=a.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Xe.childNodes.length),T.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(g.createHTMLDocument?((i=(e=a.implementation.createHTMLDocument("")).createElement("base")).href=a.location.href,e.head.appendChild(i)):e=a),o=!n&&[],(r=N.exec(t))?[e.createElement(r[1])]:(r=Et([t],e,o),o&&o.length&&T(o).remove(),T.merge([],r.childNodes)));var i,r,o},T.fn.load=function(t,e,n){var i,r,o,a=this,s=t.indexOf(" ");return s>-1&&(i=we(t.slice(s)),t=t.slice(0,s)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),a.length>0&&T.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done((function(t){o=arguments,a.html(i?T("<div>").append(T.parseHTML(t)).find(i):t)})).always(n&&function(t,e){a.each((function(){n.apply(this,o||[t.responseText,e,t])}))}),this},T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){T.fn[e]=function(t){return this.on(e,t)}})),T.expr.pseudos.animated=function(t){return T.grep(T.timers,(function(e){return t===e.elem})).length},T.offset={setOffset:function(t,e,n){var i,r,o,a,s,u,c=T.css(t,"position"),l=T(t),f={};"static"===c&&(t.style.position="relative"),s=l.offset(),o=T.css(t,"top"),u=T.css(t,"left"),("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1?(a=(i=l.position()).top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(u)||0),y(e)&&(e=e.call(t,n,T.extend({},s))),null!=e.top&&(f.top=e.top-s.top+a),null!=e.left&&(f.left=e.left-s.left+r),"using"in e?e.using.call(t,f):l.css(f)}},T.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){T.offset.setOffset(this,t,e)}));var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===T.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===T.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=T(t).offset()).top+=T.css(t,"borderTopWidth",!0),r.left+=T.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-T.css(i,"marginTop",!0),left:e.left-r.left-T.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===T.css(t,"position");)t=t.offsetParent;return t||at}))}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;T.fn[t]=function(i){return $(this,(function(t,i,r){var o;if(b(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===r)return o?o[e]:t[i];o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):t[i]=r}),t,i,arguments.length)}})),T.each(["top","left"],(function(t,e){T.cssHooks[e]=Gt(g.pixelPosition,(function(t,n){if(n)return n=Wt(t,e),Kt.test(n)?T(t).position()[e]+"px":n}))})),T.each({Height:"height",Width:"width"},(function(t,e){T.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,i){T.fn[i]=function(r,o){var a=arguments.length&&(n||"boolean"!=typeof r),s=n||(!0===r||!0===o?"margin":"border");return $(this,(function(e,n,r){var o;return b(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===r?T.css(e,n,s):T.style(e,n,r,s)}),e,a?r:void 0,a)}}))})),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){T.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}})),T.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),T.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),T.proxy=function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return i=u.call(arguments,2),(r=function(){return t.apply(e||this,i.concat(u.call(arguments)))}).guid=t.guid=t.guid||T.guid++,r},T.holdReady=function(t){t?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=P,T.isFunction=y,T.isWindow=b,T.camelCase=X,T.type=S,T.now=Date.now,T.isNumeric=function(t){var e=T.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},void 0===(i=function(){return T}.apply(e,[]))||(t.exports=i);var Je=n.jQuery,Qe=n.$;return T.noConflict=function(t){return n.$===T&&(n.$=Qe),t&&n.jQuery===T&&(n.jQuery=Je),T},r||(n.jQuery=n.$=T),T}))},function(t,e,n){var i,r,o;r=[n(1)],void 0===(o="function"==typeof(i=function(t){return t.ui=t.ui||{},t.ui.version="1.12.1"})?i.apply(e,r):i)||(t.exports=o)},function(t,e,n){var i=n(4),r="unknown";document.documentMode&&(r="ie"),t.exports={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(t){if(t.clientWidth&&t.clientHeight)return{width:t.clientWidth,height:t.clientHeight};if(t.getBoundingClientRect())return t.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(t,e){var n=null;if(!(n=i.isElement(e)?e:t.querySelector(e))){var r=Array.prototype.slice.call(t.childNodes||t.children).filter((function(t){return"defs"!==t.nodeName&&"#text"!==t.nodeName}));1===r.length&&"g"===r[0].nodeName&&null===r[0].getAttribute("transform")&&(n=r[0])}if(!n){var o="viewport-"+(new Date).toISOString().replace(/\D/g,"");(n=document.createElementNS(this.svgNS,"g")).setAttribute("id",o);var a=t.childNodes||t.children;if(a&&a.length>0)for(var s=a.length;s>0;s--)"defs"!==a[a.length-s].nodeName&&n.appendChild(a[a.length-s]);t.appendChild(n)}var u=[];return n.getAttribute("class")&&(u=n.getAttribute("class").split(" ")),~u.indexOf("svg-pan-zoom_viewport")||(u.push("svg-pan-zoom_viewport"),n.setAttribute("class",u.join(" "))),n},setupSvgAttributes:function(t){if(t.setAttribute("xmlns",this.svgNS),t.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),t.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),null!==t.parentNode){var e=t.getAttribute("style")||"";-1===e.toLowerCase().indexOf("overflow")&&t.setAttribute("style","overflow: hidden; "+e)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:i.throttle((function(){for(var t=document.querySelectorAll("defs"),e=t.length,n=0;n<e;n++){var i=t[n];i.parentNode.insertBefore(i,i)}}),this?this.internetExplorerRedisplayInterval:null),setCTM:function(t,e,n){var i=this,o="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")";t.setAttributeNS(null,"transform",o),"transform"in t.style?t.style.transform=o:"-ms-transform"in t.style?t.style["-ms-transform"]=o:"-webkit-transform"in t.style&&(t.style["-webkit-transform"]=o),"ie"===r&&n&&(n.parentNode.insertBefore(n,n),window.setTimeout((function(){i.refreshDefsGlobal()}),i.internetExplorerRedisplayInterval))},getEventPoint:function(t,e){var n=e.createSVGPoint();return i.mouseAndTouchNormalize(t,e),n.x=t.clientX,n.y=t.clientY,n},getSvgCenterPoint:function(t,e,n){return this.createSVGPoint(t,e/2,n/2)},createSVGPoint:function(t,e,n){var i=t.createSVGPoint();return i.x=e,i.y=n,i}}},function(t,e){function n(t){return function(e){window.setTimeout(e,t)}}t.exports={extend:function(t,e){for(var n in t=t||{},e)this.isObject(e[n])?t[n]=this.extend(t[n],e[n]):t[n]=e[n];return t},isElement:function(t){return t instanceof HTMLElement||t instanceof SVGElement||t instanceof SVGSVGElement||t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},getSvg:function(t){var e,n;if(this.isElement(t))e=t;else{if(!("string"==typeof t||t instanceof String))throw new Error("Provided selector is not an HTML object nor String");if(!(e=document.querySelector(t)))throw new Error("Provided selector did not find any elements. Selector: "+t)}if("svg"===e.tagName.toLowerCase())n=e;else if("object"===e.tagName.toLowerCase())n=e.contentDocument.documentElement;else{if("embed"!==e.tagName.toLowerCase())throw"img"===e.tagName.toLowerCase()?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");n=e.getSVGDocument().documentElement}return n},proxy:function(t,e){return function(){return t.apply(e,arguments)}},getType:function(t){return Object.prototype.toString.apply(t).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(t,e){if(void 0===t.clientX||null===t.clientX)if(t.clientX=0,t.clientY=0,void 0!==t.touches&&t.touches.length){if(void 0!==t.touches[0].clientX)t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY;else if(void 0!==t.touches[0].pageX){var n=e.getBoundingClientRect();t.clientX=t.touches[0].pageX-n.left,t.clientY=t.touches[0].pageY-n.top}}else void 0!==t.originalEvent&&void 0!==t.originalEvent.clientX&&(t.clientX=t.originalEvent.clientX,t.clientY=t.originalEvent.clientY)},isDblClick:function(t,e){if(2===t.detail)return!0;if(null!=e){var n=t.timeStamp-e.timeStamp,i=Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2));return n<250&&i<10}return!1},now:Date.now||function(){return(new Date).getTime()},throttle:function(t,e,n){var i,r,o,a=this,s=null,u=0;n||(n={});var c=function(){u=!1===n.leading?0:a.now(),s=null,o=t.apply(i,r),s||(i=r=null)};return function(){var l=a.now();u||!1!==n.leading||(u=l);var f=e-(l-u);return i=this,r=arguments,f<=0||f>e?(clearTimeout(s),s=null,u=l,o=t.apply(i,r),s||(i=r=null)):s||!1===n.trailing||(s=setTimeout(c,f)),o}},createRequestAnimationFrame:function(t){var e=null;return"auto"!==t&&t<60&&t>1&&(e=Math.floor(1e3/t)),null===e?window.requestAnimationFrame||n(33):n(e)}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var i,r,o;
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(1),n(2)],void 0===(o="function"==typeof(i=function(t){var e,n=0,i=Array.prototype.slice;return t.cleanData=(e=t.cleanData,function(n){var i,r,o;for(o=0;null!=(r=n[o]);o++)try{(i=t._data(r,"events"))&&i.remove&&t(r).triggerHandler("remove")}catch(t){}e(n)}),t.widget=function(e,n,i){var r,o,a,s={},u=e.split(".")[0],c=u+"-"+(e=e.split(".")[1]);return i||(i=n,n=t.Widget),t.isArray(i)&&(i=t.extend.apply(null,[{}].concat(i))),t.expr[":"][c.toLowerCase()]=function(e){return!!t.data(e,c)},t[u]=t[u]||{},r=t[u][e],o=t[u][e]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},t.extend(o,r,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),(a=new n).options=t.widget.extend({},a.options),t.each(i,(function(e,i){t.isFunction(i)?s[e]=function(){function t(){return n.prototype[e].apply(this,arguments)}function r(t){return n.prototype[e].apply(this,t)}return function(){var e,n=this._super,o=this._superApply;return this._super=t,this._superApply=r,e=i.apply(this,arguments),this._super=n,this._superApply=o,e}}():s[e]=i})),o.prototype=t.widget.extend(a,{widgetEventPrefix:r&&a.widgetEventPrefix||e},s,{constructor:o,namespace:u,widgetName:e,widgetFullName:c}),r?(t.each(r._childConstructors,(function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,o,n._proto)})),delete r._childConstructors):n._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var n,r,o=i.call(arguments,1),a=0,s=o.length;a<s;a++)for(n in o[a])r=o[a][n],o[a].hasOwnProperty(n)&&void 0!==r&&(t.isPlainObject(r)?e[n]=t.isPlainObject(e[n])?t.widget.extend({},e[n],r):t.widget.extend({},r):e[n]=r);return e},t.widget.bridge=function(e,n){var r=n.prototype.widgetFullName||e;t.fn[e]=function(o){var a="string"==typeof o,s=i.call(arguments,1),u=this;return a?this.length||"instance"!==o?this.each((function(){var n,i=t.data(this,r);return"instance"===o?(u=i,!1):i?t.isFunction(i[o])&&"_"!==o.charAt(0)?(n=i[o].apply(i,s))!==i&&void 0!==n?(u=n&&n.jquery?u.pushStack(n.get()):n,!1):void 0:t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")})):u=void 0:(s.length&&(o=t.widget.extend.apply(null,[o].concat(s))),this.each((function(){var e=t.data(this,r);e?(e.option(o||{}),e._init&&e._init()):t.data(this,r,new n(o,this))}))),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,(function(t,n){e._removeClass(n,t)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var i,r,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},i=e.split("."),e=i.shift(),i.length){for(r=a[e]=t.widget.extend({},this.options[e]),o=0;o<i.length-1;o++)r[i[o]]=r[i[o]]||{},r=r[i[o]];if(e=i.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var n,i,r;for(n in e)r=this.classesElementLookup[n],e[n]!==this.options.classes[n]&&r&&r.length&&(i=t(r.get()),this._removeClass(r,n),i.addClass(this._classes({element:i,keys:n,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var n=[],i=this;function r(r,o){var a,s;for(s=0;s<r.length;s++)a=i.classesElementLookup[r[s]]||t(),a=e.add?t(t.unique(a.get().concat(e.element.get()))):t(a.not(e.element).get()),i.classesElementLookup[r[s]]=a,n.push(r[s]),o&&e.classes[r[s]]&&n.push(e.classes[r[s]])}return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&r(e.keys.match(/\S+/g)||[],!0),e.extra&&r(e.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(e){var n=this;t.each(n.classesElementLookup,(function(i,r){-1!==t.inArray(e.target,r)&&(n.classesElementLookup[i]=t(r.not(e.target).get()))}))},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,!1)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,!0)},_toggleClass:function(t,e,n,i){i="boolean"==typeof i?i:n;var r="string"==typeof t||null===t,o={extra:r?e:n,keys:r?t:e,element:r?this.element:t,add:i};return o.element.toggleClass(this._classes(o),i),this},_on:function(e,n,i){var r,o=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=r=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),t.each(i,(function(i,a){function s(){if(e||!0!==o.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||t.guid++);var u=i.match(/^([\w:-]*)\s*(.*)$/),c=u[1]+o.eventNamespace,l=u[2];l?r.on(c,l,s):n.on(c,s)}))},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(n).off(n),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var n=this;return setTimeout((function(){return("string"==typeof t?n[t]:t).apply(n,arguments)}),e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,n,i){var r,o,a=this.options[e];if(i=i||{},(n=t.Event(n)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(t.isFunction(a)&&!1===a.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,n){t.Widget.prototype["_"+e]=function(i,r,o){var a;"string"==typeof r&&(r={effect:r});var s=r?!0===r||"number"==typeof r?n:r.effect||n:e;"number"==typeof(r=r||{})&&(r={duration:r}),a=!t.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&t.effects&&t.effects.effect[s]?i[e](r):s!==e&&i[s]?i[s](r.duration,r.easing,o):i.queue((function(n){t(this)[e](),o&&o.call(i[0]),n()}))}})),t.widget})?i.apply(e,r):i)||(t.exports=o)},function(t,e){window.Orions.TagReviewComponent={init:function(){document.querySelector(".metadatareview-page-controls .page-number-input").addEventListener("keypress",(function(t){(8!=t.which&&0!=t.which&&t.which<48||t.which>57)&&t.preventDefault()})),document.querySelector(".metadatareview-page-controls .page-number-input").addEventListener("blur",(function(t){var e=t.target.value-0,n=t.target.min-0,i=t.target.max-0;e<n&&(t.target.value=t.target.min),e>i&&(t.target.value=t.target.max)}))}}},function(t,e){window.Orions.Carousel={},window.Orions.Carousel.initializeCarousel=function(t){$("#carouselExampleIndicators").carousel({interval:0}),$("#carouselExampleIndicators-prev").click((function(){$("#carouselExampleIndicators").carousel("prev")})),$("#carouselExampleIndicators-next").click((function(){$("#carouselExampleIndicators").carousel("next")}))}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){var t={touches:!1,components:[],theme:"dark",callbacks:{},statics:{},changes:{},changedtabs:!1},e={components:[],connections:[],designer:[],loaded:!1,isReadOnly:1},i=[],r=!1,o={},a={},s={};function u(e){t.touches=!0,$(document).off("touchstart",u)}function c(t,e){return t.find((function(t){return t.id===e}))}function l(t,e,n,i){return"M"+t+","+e+"C"+(t+n)/2+","+e+" "+(t+n)/2+","+i+" "+n+","+i}function f(t){t instanceof jQuery&&(t=t.attr("transform"));var e=t.substring(10,t.length-1).split(/\s|,/);return{x:parseInt(e[0]),y:parseInt(e[1])}}function h(t){var e;$("#designerstate").html(t),n(e=!!t)==n(!0)&&$(".mainmenu").find(".highlight").toggleClass("blink",e)}function d(t){var e={x:0,y:0};if(!t)return e;t.touches?(e.x=t.touches[0].pageX,e.y=t.touches[0].pageY):(e.x=t.pageX,e.y=t.pageY);for(var n=t.target;n.offsetParent;)e.x-=n.offsetLeft,e.y-=n.offsetTop,n=n.offsetParent;return e}function p(t){var e={};if(t&&t instanceof Array){$.each(t,(function(t,n){n.group=n.group||"Default Group";var i=[];e[n.group]&&(i=e[n.group]),i.push(n),e[n.group]=i}))}var n=$(".components");$.each(e,(function(t,e){n.append('<li class="group" data-search=""><i class="fa fa-folder-open"></i> '+t+"</li>"),e.sort((function(t,e){var n=t.title.toLowerCase(),i=e.title.toLowerCase();return n<i?-1:n>i?1:0})),$.each(e,(function(t,e){e.icon=e.icon||"fa fa-square",e.color=e.color||"#e3e3e8",n.append('<li draggable="true" class="component" data-id="'+e.id+'"><div><i class="'+e.icon+'" style="color:'+e.color+'"></i> '+e.title+"</div></li>")}))}))}function m(){$(document.body).toggleClass("mainmenu-hidden",a.isMinimizeMainMenu.get()),1==a.isMinimizeMainMenu.get()?v():g(),a.isMinimizeMainMenu.toggle()}function v(){$("#mainMenuBtnId i").removeClass("fa-chevron-left"),$("#mainMenuBtnId i").addClass("fa-chevron-right"),$(document.body).addClass("mainmenu-hidden"),a.isMinimizeMainMenu.set(!0)}function g(){$("#mainMenuBtnId i").removeClass("fa-chevron-right"),$("#mainMenuBtnId i").addClass("fa-chevron-left"),$(document.body).removeClass("mainmenu-hidden"),a.isMinimizeMainMenu.set(!1)}function y(){1==a.isCommonMinimized.get()?w():b()}function b(){$(".panel").css("margin-right",-$(".panel").width()),$(".body").css("margin-right",0),$("#commonMenuBtnId i").removeClass("fa-chevron-right"),$("#commonMenuBtnId i").addClass("fa-chevron-left"),a.isCommonMinimized.set(!0)}function w(){$(".panel").css("margin-right",0),$(".body").css("margin-right",$(".panel").width()),$("#commonMenuBtnId i").removeClass("fa-chevron-left"),$("#commonMenuBtnId i").addClass("fa-chevron-right"),a.isCommonMinimized.set(!1)}s.designer={},window.Orions.FlowDesigner={},window.Orions.FlowDesigner.ToggleMainMenu=m,window.Orions.FlowDesigner.HideMainMenu=v,window.Orions.FlowDesigner.ShowMainMenu=g,window.Orions.FlowDesigner.ToggleCommonMenu=y,window.Orions.FlowDesigner.HideCommonMenu=b,window.Orions.FlowDesigner.ShowCommonMenu=w,window.Orions.FlowDesigner.Settings=function(t){s.designer.settings(t)},window.Orions.FlowDesigner.Copy=function(t){s.designer.copy(t)},window.Orions.FlowDesigner.Paste=function(t){s.designer.paste(t)},window.Orions.FlowDesigner.Duplicate=function(t){s.designer.duplicate(t)},window.Orions.FlowDesigner.Remove=function(t){s.designer.remove(t)},window.Orions.FlowDesigner.ZoomIn=function(){s.designer.zoomin()},window.Orions.FlowDesigner.ZoomReset=function(){s.designer.zoomreset()},window.Orions.FlowDesigner.ZoomOut=function(){s.designer.zoomout()},window.Orions.FlowDesigner.Init=function(v,g){var b={},w=$(".panel"),x=0,S=(w.find(".noscrollbar"),$(".body")),T=0;function E(t){t!==T&&(T=t,t<340&&(t=340),w.width(t),S.css("margin-right",t))}b.mup=function(t){t.stopPropagation(),t.preventDefault();var e=$(window);e.off("mousemove",b.mm),e.off("touchmove",b.tm),e.off("mouseup",b.mup),e.off("touchend",b.mup),E(w.width())},b.mm=function(t){t.stopPropagation(),t.preventDefault(),b.resize(t.pageX)},b.tm=function(t){t.stopPropagation(),t.preventDefault(),b.resize(t.touches[0].pageX)},b.resize=function(t,e){var n=window.innerWidth-t-x>>0;n<340&&(n=340),E(n)},$(".panel-resize-handle").on("mousedown touchstart",(function(t){t.preventDefault(),t.stopPropagation();var e=$(window);e.on("mousemove",b.mm),e.on("touchmove",b.tm),e.on("touchend",b.mup),e.on("mouseup",b.mup),x=t.touches&&t.touches[0]?$(this).offset().left-t.touches[0].pageX:t.offsetX})),$(document).on("click","#panel-notification",(function(){!function t(e){var n=$("#panel-notification");if(e){var o=i.shift();o?(n.find("div").html(o),setTimeout((function(){t(!0)}),3e3),r||(n.aclass("panel-notified"),r=!0)):r&&(n.rclass("panel-notified"),r=!1)}else n.hclass("panel-notified")||t(!0)}(!0)})),$(document).on("touchstart",u),Array.prototype.flowConnection=function(t,e){for(var n=0;n<this.length;n++)if(this[n].index===t&&this[n].id===e)return this[n]},$.fn.FIND=function(t,e,n,i){"function"==typeof e&&(i=n,n=e,e=void 0);var r=this,o=findcomponent(r,t);return"function"==typeof n?o.length?(n.call(o,o),r):(W.WAIT((function(){var n=r.FIND(t,e);return n instanceof Array?n.length>0:!!n}),(function(i){if(!i){var o=r.FIND(t,e);n.call(o||W,o)}}),500,i),r):e?o:o[0]},$.fn.SETTER=function(t,e){for(var n=this,i=[],r=!0===t?3:2,o=r;o<arguments.length;o++)i.push(arguments[o]);if(3===r)t=e,e=arguments[2],n.FIND(t,!0,(function(t){for(var n=0,r=t.length;n<r;n++){var o=t[n];"function"==typeof o[e]?o[e].apply(o,i):o[e]=i[0]}}));else for(var a=n.FIND(t,!0),s=(o=0,a.length);o<s;o++){var u=a[o];"function"==typeof u[e]?u[e].apply(u,i):u[e]=i[0]}return n},$.fn.scope=function(){if(!this.length)return null;var t=this.get(0).$scopedata;if(t)return t;var e=this.closest("[data-jc-scope]");return e.length&&(t=e.get(0).$scopedata)?t:null},$.fn.rclass=function(t){return null==t?this.removeClass():this.removeClass(t)},$.fn.rclass2=function(t){for(var e=(this.attr("class")||"").split(" "),i="object"===n(t),r=0,o=e.length;r<o;r++){var a=e[r];a&&(i?t.test(a)&&this.rclass(a):-1!==a.indexOf(t)&&this.rclass(a))}return this},$.fn.rattr=function(t){return this.removeAttr(t)},$.fn.rattrd=function(t){return this.removeAttr("data-"+t)},$.fn.hclass=function(t){return this.hasClass(t)},$.fn.tclass=function(t,e){return this.toggleClass(t,e)},$.fn.attrd=function(t,e){return t="data-"+t,null==e?this.attr(t):this.attr(t,e)},$.fn.aclass=function(t){return this.addClass(t)},$.fn.asvg=function(t){if(-1===t.indexOf("<")){var e=document.createElementNS("http://www.w3.org/2000/svg",t);return this.append(e),$(e)}var n=document.createElementNS("http://www.w3.org/1999/xhtml","div");n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t+"</svg>";for(var i=document.createDocumentFragment();n.firstChild.firstChild;)i.appendChild(n.firstChild.firstChild);return i=$(i),this.append(i),i},$.fn.psvg=function(t){if(-1===t.indexOf("<")){var e=document.createElementNS("http://www.w3.org/2000/svg",t);return this.prepend(e),$(e)}var n=document.createElementNS("http://www.w3.org/1999/xhtml","div");n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t+"</svg>";for(var i=document.createDocumentFragment();n.firstChild.firstChild;)i.appendChild(n.firstChild.firstChild);return i=$(i),this.prepend(i),i},$.fn.rescroll=function(t,e){return this.each((function(){var n=this;if(n.scrollIntoView(!0),t)for(var i=0;n&&0==n.scrollTop&&i++<25;)if((n=n.parentNode)&&n.scrollTop){var r=n.scrollTop+t;return 0!=e&&n.scrollTop+n.getBoundingClientRect().height>=n.scrollHeight?void(n.scrollTop=n.scrollHeight):void(n.scrollTop=r)}})),this},$(window).on("keydown",(function(n){if("BODY"===n.target.tagName&&!t.form){if(13===n.keyCode&&(n.ctrlKey||n.metaKey)&&s.flow.apply(),e.selected&&e.selected.length){if(68===n.keyCode&&(n.ctrlKey||n.metaKey))return n.preventDefault(),void designer.duplicate();if(67===n.keyCode&&(n.ctrlKey||n.metaKey))return n.preventDefault(),void designer.copy(n.shiftKey)}e.clipboard&&86===n.keyCode&&(n.ctrlKey||n.metaKey)&&(n.preventDefault(),designer.paste())}}));function k(){var t=$(".flowRefreshTrafic");t.removeClass("hidden"),v.invokeMethodAsync("LoadStatuses").then((function(e){statuses=JSON.parse(e),setTimeout((function(){t.addClass("hidden")}),500),statuses&&$(".node_traffic").each((function(){var t=$(this),e=t.attr("data-id"),n=statuses.find((function(t){return t.nodeId===e}));if(n){t.toggleClass("m1",!0).toggleClass("m2",!1).toggleClass("m3",!1).toggleClass("m4",!1),null!=n&&(t.find("text.node_traffic_operational_status").html(n.state),t.find("text.node_traffic_system_status").html(n.systemStatusMessage),t.find("text.node_traffic_label_status").html(n.statusMessage));var i=t.find("rect"),r=+i.attr("data-width")/100*0;i.attr("width",r)}}))}),(function(e){t.addClass("hidden")}))}$(document).on("click",".ui-form-button-close",(function(){})),$(document).on("click",".ui-form-container",(function(t){var e=$(t.target);if(e.hclass("ui-form-container-padding")||e.hclass("ui-form-container")){var n=$(this).find(".ui-form"),i="ui-form-animate-click";n.aclass(i),setTimeout((function(){n.rclass(i)}),300)}})),$(document).on("click","#saveNodeUpdateChanges",(function(t){$(t.target);var n=$("input[name=nodeConfigId]").val(),i=$("input[name=nodeConfigOriginalName]").val(),r=$("#nodeUpdateNameId").val(),o=$("#mycp input").val(),a=$(".node_status_"+n);if(a){var s=$(".node_"+n);if(s){var u=c(e.components,n);i!==r&&(a.html(r),u.state.text=r),u.state.color=o,s.find("rect").attr("fill",o),s.find("text").attr("fill",o)}}})),$(document).on("click","#saveGeneralDesignerSettings",(function(t){$(t.target);var e=$("#refreshNodeStatuses").val(),n=$("#isClosedLeftMenu").is(":checked"),i=$("#isClosedRightMenu").is(":checked"),r=parseInt(e);if("number"!=typeof r&&!r)return Error("Refresh status value is not number");it.createCookie(it.names.refreshNodeStatusesCookieName,r),it.createCookie(it.names.isClosedLeftMenuCookieName,n),it.createCookie(it.names.isClosedRightMenuCookieName,i),$("#workflowDesignerSettings").modal("hide")}));var C={apply:'<i class="fa fa-info-circle blue mr5"></i>You have to click the &quot;<b>APPLY</b>&quot; button to apply all changes.'};$(document).on("click dblclick",".component",(function(e){var n,i=$(e.target).parent();if(i.length){var r=i.data("id");n=t.components.find((function(t){return t.id===r}))}var o="No info!";n&&n.html&&n.html.length>0&&(o=n.html),_.show(o,["OK"],(function(t){}))})),$(document).on("touchstart","[draggable]",(function(e){if(t.touches){var n=$(e.target),i=n.hasClass("component")?n:n.closest(".component"),r=i.length?t.components.findItem("id",i.attr("data-id")):null;r&&((r=CLONE(r)).tab=t.tab.id),o.drag=!0,o.component=r,$("#tmpclone").empty();var a=n.clone();a.appendTo("#tmpclone");var s=e.originalEvent.touches[0];a.css({position:"absolute",left:s.pageX,top:s.pageY,"z-index":5}),o.el=a,r&&designer.dragdrop(r),e.stopPropagation()}})),$(document).on("touchmove","[draggable]",(function(e){if(t.touches&&o.drag){var n=e.originalEvent.touches[0];o.x=n.pageX,o.y=n.pageY,o.el.css({left:n.pageX,top:n.pageY}),e.stopPropagation(),e.preventDefault()}})),$(document).on("touchend","[draggable]",(function(e){if(t.touches&&o.drag&&(e.stopPropagation(),o.drag=!1,$("#tmpclone").empty(),!(o.x<280))){var n=K,i=n.element,r=i.offset(),a=o.x-r.left,s=o.y-r.top;a+=i.prop("scrollLeft"),s+=i.prop("scrollTop");var u=n.getZoom();Q.designer.add(o.component,(a-50)/u,(s-30)/u,!1)}})),$(document).on("dragstart",(function(e){if(!t.touches){var n,i=$(e.target);if((i.hasClass("component")?i:i.closest(".component")).length){var r=i.data("id");n=t.components.find((function(t){return t.id===r}))}n&&(n=Object.assign({},n)),n&&(e.originalEvent.dataTransfer.setData("text","1"),designer.dragdrop(n))}}));var M,A=!1,_={make:function(){M=$("#confirm"),self=M,self.aclass("ui-confirm hidden"),self.on("click","button",(function(){var t=parseInt($(this).attrd("index"));_.hide(t)})),self.click((function(t){if("DIV"===t.target.tagName){var e=self.find(".ui-confirm-body");e.aclass("ui-confirm-click"),setTimeout((function(){e.rclass("ui-confirm-click")}),300)}})),$(window).on("keydown",(function(t){if(A){var e=13===t.which?0:27===t.which?1:null;null!=e&&(self.find('button[data-index="{0}"]'.format(e)).trigger("click"),t.preventDefault())}}))},show:function(t,e,n){self=M,self.callback=n;for(var i=[],r=0;r<e.length;r++){var o=e[r],a=o.match(/"[a-z0-9-]+"/);a?(o=o.replace(a,"").trim(),a='<i class="fa fa-'+a.toString().replace(/"/g,"")+'"></i>'):a="",i.push('<button data-index="'+r+'">'+a+o+"</button>")}_.content("ui-confirm-warning",'<div class="ui-confirm-message">'+t.replace(/\n/g,"<br />")+"</div>"+i.join(""))},hide:function(t){self=M,self.callback&&self.callback(t),self.rclass("ui-confirm-visible"),A=!1,setTimeout((function(){$("html").rclass("noscrollconfirm"),self.aclass("hidden")}),1e3)},content:function(t,e){self=M,$("html").aclass("noscrollconfirm"),function(t,e){var i=t;if(void 0===e)return i.html();e instanceof Array&&(e=e.join(""));var r=n(e);e||"number"===r||"boolean"===r?i.empty().append(e):i.empty()}(self,'<div><div class="ui-confirm-body"></div></div>'),self.find(".ui-confirm-body").empty().append(e),self.rclass("hidden"),A=!0,setTimeout((function(){self.aclass("ui-confirm-visible")}),5)}};_.confirm=_.show;var P,N,O,I,D=!1,R=!1;a={jsonConfiguration:{get:function(){return P},set:function(t){P=t}},refreshNodeStatusInMilisecond:{get:function(){var t=it.getCookie(it.names.refreshNodeStatusesCookieName);return t?(N=t,t):N||3e4},set:function(t){if("number"!=typeof t)return Error("Values is not number");N=t}},isMinimizeMainMenu:{get:function(){var t=it.getCookie(it.names.isClosedLeftMenuCookieName);return t&&(D=t),D},set:function(t){D=t},toggle:function(){D=!D}},isCommonMinimized:{get:function(){var t=it.getCookie(it.names.isClosedRightMenuCookieName);return t&&(R=t),R},set:function(t){R=t},toggle:function(){R=!R}}};var L,j,U,z,B,F,H,q,K,V={},G=!1,X={x:0,y:0,drag:!1,node:null,offsetX:0,offsetY:0,type:0,scrollX:0,scrollY:0,moveby:{x:0,y:0}},Y={x:0,y:0,active:!1,origin:{x:0,y:0},items:[]},Z=1;function J(t,e,n){for(var i=t,r=[],o="function"==typeof e,a=void 0!==n,s=0,u=i.length;s<u;s++)o?!e.call(i,i[s],s)&&r.push(i[s]):a?i[s][e]!==n&&r.push(i[s]):i[s]!==e&&r.push(i[s]);return r}designer={findPoint:function(t,e,n){var i=O.find(t),r=O.offset();e+=r.left,n+=r.top;for(var o=0,a=i.length;o<a;o++){var s=i[o],u=s.getBoundingClientRect(),c=e-u.width,l=n-u.height;if(u.left>=c&&e<=u.right&&u.top>=l&&n<=u.bottom)return s}return O.get(0)},make:function(){K={};var i=K=$(".ui-designer");H=i.parent(),i.aclass("ui-designer"),i.append('<div class="ui-designer-grid"><svg width="3000" height="3000"></svg></div>');var r=i.find("svg");O=$(r.get(0)),F=O.asvg("g"),I=F.asvg("path").attr("class","connection"),B=F.asvg("g"),z=F.asvg("g"),i.resize(),r.on("mouseleave",(function(e){!t.touches&&X.drag&&i.mup(e.pageX,e.pageY,0,0,e)})),r.on("mousedown mousemove mouseup",(function(e){if(!t.touches){if(Y.active&&!e.ctrlKey&&!e.metaKey)return Y.active=!1,void(void 0).attr("height",0).attr("width",0).attr("opacity",0);var n;if("mousemove"===e.type)X.drag&&(n=d(e),i.mmove(e.pageX,e.pageY,n.x,n.y,e)),(e.ctrlKey||e.metaKey)&&Y.active&&i.selectormove(e);else if(n=d(e),"mouseup"===e.type){if((e.ctrlKey||e.metaKey)&&Y.active)return i.selectorup(e);i.mup(e.pageX,e.pageY,n.x,n.y,e)}else i.mdown(e.pageX,e.pageY,n.x,n.y,e)}})),r.on("touchstart touchmove touchend",(function(e){if(t.touches){var n,r=e.touches[0];"touchmove"===e.type?(n=d(e),q=e,X.drag&&(2!==X.type&&3!==X.type||(n.x+=X.scrollX,n.y+=X.scrollY),i.mmove(r.pageX,r.pageY,n.x,n.y,e),e.preventDefault())):"touchend"===e.type?(n=d(q),r=q.touches[0],2!==X.type&&3!==X.type||(n.x+=X.scrollX,n.y+=X.scrollY),q.target=X.node?findPoint(X.node.hasClass("output")?".input":".output",X.tx,X.ty):O.get(0),i.mup(r.pageX,r.pageY,n.x,n.y,q)):(n=d(e),X.scrollX=+H.prop("scrollLeft"),X.scrollY=+H.prop("scrollTop"),i.mdown(r.pageX,r.pageY,n.x,n.y,e))}})),$(window).on("keydown",(function(t){if(68===t.keyCode&&(t.ctrlKey||t.metaKey)&&j)return t.preventDefault(),void i.duplicate();if("BODY"===t.target.tagName){var e=t.shiftKey?100:0;38===t.keyCode?designer.move(0,-20-e,t):40===t.keyCode?designer.move(0,20+e,t):39===t.keyCode?designer.move(20+e,0,t):37===t.keyCode&&designer.move(-20-e,0,t)}8!==t.keyCode&&46!==t.keyCode||!j||i.disabled||"BODY"!==t.target.tagName||(i.remove(),t.preventDefault())})),i.on("dragover dragenter drag drop",(function(e){if(!t.touches&&U){switch(e.type){case"dragenter":if(!U.input||!U.output)return;V.conn&&(V.conn.removeClass("dropselection"),V.conn=null),V.conn=$(e.target).addClass("dropselection");break;case"drop":$(e.target),V.conn;V.conn&&(V.conn.removeClass("dropselection"),V.conn=null);var r=i.offset(),o=e.pageX-r.left,a=e.pageY-r.top;o+=i.prop("scrollLeft"),a+=i.prop("scrollTop"),nt.show(),U.x=(o-50)/Z,U.y=(a-30)/Z;var s=JSON.stringify(U);v.invokeMethodAsync("CreateNode",s).then((function(t){res=JSON.parse(t),res.$component=U,res.title=res.title||U.title,res.output=res.output||U.output,res.input=res.input||U.input,"object"===n(res.state)&&res.state?res.state={text:res.state.text||U.title,color:res.state.color||U.color}:res.state={text:res.title||"",color:U.color},Q.designer.add(res,res.x,res.y,!1),nt.hide()}),(function(t){nt.hide()}))}e.preventDefault()}})),i.mmove=function(t,e,n,i,r){switch(X.type){case 1:return void H.prop("scrollLeft",X.x-t).prop("scrollTop",X.y-e);case 2:case 3:var o=O.offset(),a=t-o.left,s=e-o.top;1!==Z&&(a/=Z,s/=Z),I.attr("d",l(X.x,X.y,a,s)),X.tx=a,X.ty=s;break;case 5:return void designer.moveselected(n+X.offsetX,i+X.offsetY,r)}},i.mup=function(n,i,r,o,a){var s=$(a.target);switch(X.type){case 2:if(I.attr("d",""),s.hasClass("input")){var u=+X.node.attr("data-index"),l=X.node.closest(".node"),f=s.closest(".node"),d=s.attr("data-index");if(v=c(e.components,l.attr("data-id"))){var p=f.attr("data-id"),m=!1;if(v.connections[u])v.connections.find((function(t){return t.id===p}))?m=!0:v.connections.push({index:d,id:p});else v.connections=[{index:d,id:p}],h(C.apply);!m&&designer.connect(+d,u,l,f)}}break;case 3:if(I.attr("d",""),s.hasClass("output")){var v;u=+s.attr("data-index"),l=s.closest(".node"),f=X.node.closest(".node"),d=X.node.attr("data-index");if(v=e.components.findItem("id",l.attr("data-id"))){p=f.attr("data-id"),m=!1;if(v.connections[u])v.connections.find((function(t){return t.id===p}))?m=!0:v.connections.push({index:d,id:p});else v.connections[u]=[{index:d,id:p}];!m&&designer.connect(+d,u,l,f)}}}1===X.type&&function(){if(t.tab){var e=$(".designer-scrollbar"),n=t.tabscroll["tab"+t.tab.id],i={x:e.prop("scrollLeft"),y:e.prop("scrollTop")};!n||n.x!==i.x&&n.y}}(),X.type=0,X.drag=!1},i.mdown=function(t,e,n,r,o){var a,s=$(o.target);X.drag=!0,X.moved=!1;var u=d(o),c=O.offset();if(X.mposx=u.x-c.left,X.mposy=u.y-c.top,"svg"===o.target.tagName)return X.x=t+H.prop("scrollLeft"),X.y=e+H.prop("scrollTop"),X.type=1,X.node=null,void i.select(null);if(s.hasClass("output")){X.type=2,X.node=s;t=(a=f(s.closest(".node"))).x+ +s.attr("cx"),e=a.y+ +s.attr("cy");X.x=t,X.y=e}else if(s.hasClass("input")){X.type=3,X.node=s;t=(a=f(s.closest(".node"))).x+ +s.attr("cx"),e=a.y+ +s.attr("cy");X.x=t,X.y=e}else if(s.hasClass("node_connection"))X.type=4,X.node=s,X.drag=!1,i.select(s);else if(s.hasClass("click")){if(a=s.closest(".node").attr("data-id"),X.drag=!1,BLOCKED("click."+a,1e3))return;designer.click(a),EMIT("designer.click",a)}else{a=s.closest(".node");var l=Date.now(),h=!1;if(X.node&&a.get(0)===X.node.get(0)){if(l-X.ticks<300)return void Q.designer.settings(X.node.attr("data-id"));h=!0}if(X.node=a,X.ticks=l,!X.node.length)return void(X.drag=!1);var p=f(X.node);X.offsetX=p.x-n,X.offsetY=p.y-r,X.type=5,!h&&i.select(X.node)}},i.remove=function(){var t;Q.designer.selectable(null),j.hasClass("node")?(t=j.attr("data-id"),Q.designer.rem(t)):(Q.designer.remConnection(j.attr("data-from"),j.attr("data-to"),j.attr("data-fromindex"),j.attr("data-toindex")),j.remove()),h(C.apply)},i.select=function(t){if(j&&!t||j&&j.get(0)===t.get(0))return j.removeClass("selected"),j=null,void Q.designer.selectable(null);j&&j.removeClass("selected"),t?(t.addClass("selected",!0),j=t,Q.designer.selectable(j),Q.designer.select(j.attr("data-id"))):j=null},i.duplicate=function(){Q.designer.selectable(null);var t=c(e.components,e.selected.attr("data-id"));if(t){nt.show();var n=Object.assign({},t);n.x+=50,n.y+=50,n.connections=[];var i=JSON.stringify(n);v.invokeMethodAsync("DuplicateNode",n.id,i).then((function(e){dupCompoment=JSON.parse(e),dupCompoment.$component=n,dupCompoment.output=dupCompoment.output||n.output||n.$component.output,dupCompoment.input=dupCompoment.input||n.input||n.$component.input,dupCompoment.$component=t.$component,Q.designer.add(dupCompoment,dupCompoment.x,dupCompoment.y,!1),nt.hide()}),(function(t){nt.hide()}))}}},dragdrop:function(t){U=t},resize:function(){var t=K,e=$(".body"),n={width:e.width(),height:e.height()};n.height-=t.offset().top,t.css(n)},add:function(n){var i=K;if(n.component){i.find(".node_"+n.id).remove();var r=z.asvg("g"),o=n.errors?Object.keys(n.errors):[];r.attr("class","node node_unbinded selectable"+(o.length?" node_errors":"")+" node_"+n.id+(n.isnew?" node_new":"")),r.attr("data-id",n.id);var a=r.asvg("rect"),s=r.asvg("g"),u=n.name||n.reference?s.asvg("text").html((n.reference?"<tspan>{0}</tspan> | ".format(n.reference):"")+n.name||"").attr("class","node_label"):null,c=u?14:5,l=s.asvg("text").text(n.$component.name).attr("class","node_name").attr("transform","translate(0, "+c+")"),f=null,h=0,d=null,p=0;h=null!=n.input?n.input instanceof Array?(f=n.input).length:n.input:n.$component.input instanceof Array?(f=n.$component.input).length:n.$component.input,p=null!=n.output?n.output instanceof Array?(d=n.output).length:n.output:n.$component.output instanceof Array?(d=n.$component.output).length:n.$component.output;var m=Math.max(p||1,h||1),v=(m>1?16:30)+22*m,g=Math.max(u?u.get(0).getComputedTextLength():0,l.get(0).getComputedTextLength())+30>>0;s.attr("transform","translate(15, "+(v/2-2)+")"),a.attr("width",g).attr("height",v).attr("rx",4).attr("ry",4).attr("fill",(n.state?n.state.color:"")||"gray").attr("class","rect"),r.attr("data-width",g),r.attr("data-height",v);var y=r.asvg("g"),b=v/2-18*n.$component.input/2+10;b=v/2-22*h/2+10;for(var w=0;w<h;w++){var x=y.asvg("circle").attr("class","input").attr("data-index",w).attr("cx",0).attr("cy",b+22*w).attr("r",8);f?x.attr("fill",f[w]):x.attr("fill","dark"===t.theme?"white":"black")}b=v/2-22*p/2+10;for(w=0;w<p;w++){x=y.asvg("circle").attr("class","output").attr("data-index",w).attr("cx",g).attr("cy",b+22*w).attr("r",8);d?x.attr("fill",d[w]):x.attr("fill","dark"===t.theme?"white":"black")}if(0===e.isReadOnly){r.asvg("rect").attr("class","consumption").attr("width",g-5).attr("height",3).attr("transform","translate(2, "+(v+22)+")").attr("fill","dark"===t.theme?"#505050":"#E0E0E0");var S=r.asvg("g").attr("class","node_traffic").attr("data-id",n.id);S.asvg("rect").attr("data-width",g-5).attr("width",0).attr("height",3).attr("transform","translate(2, "+v+"8)"),S.asvg("text").attr("class","node_traffic_operational_status").attr("transform","translate(2,"+(v+16)+")").text("Status ...");var T=20;r.asvg("rect").attr("class","consumption").attr("width",g-5).attr("height",3).attr("transform","translate(2, "+(v+22+T)+")").attr("fill","dark"===t.theme?"#505050":"#E0E0E0"),S.asvg("rect").attr("data-width",g-5).attr("width",0).attr("height",3).attr("transform","translate(2, "+v+"8)"),S.asvg("text").attr("class","node_traffic_system_status").attr("transform","translate(2,"+(v+16+T)+")").text("Status ..."),T+=20,r.asvg("rect").attr("class","consumption").attr("width",g-5).attr("height",3).attr("transform","translate(2, "+(v+22+T)+")").attr("fill","dark"===t.theme?"#505050":"#E0E0E0"),S.asvg("rect").attr("data-width",g-5).attr("width",0).attr("height",3).attr("transform","translate(2, "+v+"8)"),S.asvg("text").attr("class","node_traffic_label_status").attr("transform","translate(2,"+(v+16+T)+")").text("Status ...")}if(r.attr("transform","translate("+n.x+","+n.y+")"),n.$component.click){var E=r.asvg("g").addClass("click");E.asvg("rect").addClass("click").attr("data-click","true").attr("transform","translate("+g/2-9+","+v-9+")").attr("width",18).attr("height",18).attr("rx",10).attr("ry",10),E.asvg("rect").addClass("click").attr("data-click","true").attr("transform","translate("+g/2-4+","+v-4+")").attr("width",8).attr("height",8).attr("rx",8).attr("ry",8)}L||(L=[]),L[n.id]=n}},moveselected:function(t,n,i){t=3*Math.round(t/3),n=3*Math.round(n/3),i.preventDefault(),X.node.each((function(){var i=$(this),r=i.attr("data-id");i.attr("transform","translate("+t+","+n+")");var o=$.map(e.components,(function(t){return t.id===r?t:null}))[0];o&&(o.x=t,o.y=n),B.find(".from_"+r).each((function(){var e=$(this),i=e.attr("data-offset").split(","),r=+i[0]+t,o=+i[1]+n,a=+i[6],s=+i[7];i[4]=r,i[5]=o,e.attr("data-offset",i[0]+","+i[1]+","+i[2]+","+i[3]+","+i[4]+","+i[5]+","+i[6]+","+i[7]),e.attr("d",l(r,o,a,s))})),B.find(".to_"+r).each((function(){var e=$(this),i=e.attr("data-offset").split(","),r=+i[4],o=+i[5],a=+i[2]+t,s=+i[3]+n;i[6]=a,i[7]=s,e.attr("data-offset",i[0]+","+i[1]+","+i[2]+","+i[3]+","+i[4]+","+i[5]+","+i[6]+","+i[7]),e.attr("d",l(r,o,a,s))}))}))},move:function(t,n,i){var r=K;if(i.preventDefault(),e.selected){if(e.selected.get(0)!==r.allowedselected){r.allowed={};!function t(n){n&&(r.allowed[n.id]=!0,Object.keys(n.connections).forEach((function(i){n.connections[i].forEach((function(n){r.allowed[n.id]=!0,t(findItemByid(e.components,n.id))}))})))}(findItemByid(e.components,e.selected.attr("data-id"))),r.allowedselected=e.selected.get(0)}}else r.allowed=null;r.find(".node_connection").each((function(){var e=$(this);if(!r.allowed||r.allowed[e.attr("data-to")]||r.allowed[e.attr("data-from")]){var i=e.attr("data-offset").split(",");r.allowed?(r.allowed[e.attr("data-from")]&&(i[4]=+i[4]+t,i[5]=+i[5]+n,i[6]=+i[6],i[7]=+i[7]),r.allowed[e.attr("data-to")]&&(i[4]=+i[4],i[5]=+i[5],i[6]=+i[6]+t,i[7]=+i[7]+n)):(i[4]=+i[4]+t,i[5]=+i[5]+n,i[6]=+i[6]+t,i[7]=+i[7]+n),this.setAttribute("data-offset",i[0]+","+i[1]+","+i[2]+","+i[3]+","+i[4]+","+i[5]+","+i[6]+","+i[7]),e.attr("d",l(i[4],i[5],i[6],i[7]))}})),r.find(".node").each((function(){var i=$(this);if(!r.allowed||r.allowed[i.attr("data-id")]){var o=i.attr("transform"),a=+(o=o.substring(10,o.length-1).split(","))[0]+t,s=+o[1]+n;i.attr("transform","translate("+a+","+s+")");var u=c(e.components,i.attr("data-id"));u&&(u.x=a,u.y=s)}}))},autoconnect:function(t){var n=K;t&&n.find(".node_connection").remove();for(var i=0,r=e.components.length;i<r;i++){var o=e.components[i],a=n.find(".node_"+o.id);a.length&&Object.keys(o.connections).forEach((function(t){var e=o.connections[t],i="c"+t+"_"+o.id+"x"+e.id;if(!B.find("."+i).length){var r=n.find(".node_"+e.id);r.length&&a.length&&designer.connect(+e.index,+t,a,r)}}))}},connect:function(t,n,i,r){var o=i.find('.output[data-index="0"]'),a=r.find('.input[data-index="0"]'),s=f(i),u=+o.attr("cx"),c=+o.attr("cy"),h=s.x+u,d=s.y+c;s=f(r);var p=+a.attr("cx"),m=+a.attr("cy"),v=s.x+p,g=s.y+m,y=i.attr("data-id"),b=r.attr("data-id"),w={};w.d=l(h,d,v,g),w["data-offset"]=u+","+c+","+p+","+m+","+h+","+d+","+v+","+g,w["stroke-width"]=3,w["data-fromindex"]=t,w["data-from"]=y,w["data-to"]=b,w["data-toindex"]=n,w.class="node_connection selectable from_"+y+" to_"+b+(e.connections[y+"#"+n+"#"+t+"#"+b]?"":" path_new"),B.asvg("path").attr(w)},setter:function(t){var e=K;G?G=!1:t&&(L={},j=null,B.empty(),z.empty(),$.each(t,(function(t,e){designer.add(e)})),t.length&&designer.autoconnect(!0),e.select(null))},getZoom:function(){return Z},zoom:function(t){switch(t){case 0:Z=1;break;case 1:Z+=.1;break;case-1:Z-=.1}F.attr("transform","scale("+Z+")")},animclear:function(){({}),{}}};var Q={designer:{refresh:function(){e.loaded},add:function(t,i,r,o,a,s,u,l,f){var d={};if(d.component=t.$component.id,d.$component=t,d.$component.name=t.title||t.$component.title,d.state=t.state||{},d.x=i,d.y=r,d.tab=t.tab,d.connections={},d.id=t.id,d.isnew=!0,d.typeFull=t.typeFull,"object"===n(t.state)&&t.state?d.state={text:t.state.text,color:t.state.color}:d.state={text:d.$component.name||"",color:""},o){d.connections[0]=[s];c(e.components,a).connections[u].findItemById(s)}l&&(d.options=l.options,d.name=l.name,d.output=l.output),e.components.push(d),e.designer.push(d),//!is && SETTER('designer', 'add', obj);
!o&&designer.add(d),h(C.apply)},rem:function(t){t&&_.show("Are you sure you want to remove selected component?",["Yes","Cancel"],(function(n){if(1!==n){e.components.find((function(e){return e.id===t}));e.components=J(e.components,"id",t),e.designer=J(e.designer,"id",t);var i=$(".node_"+t);$(".node_connection").each((function(){var e=$(this);(e.attr("data-from")===t||e.attr("data-to")===t)&&e.remove()})),i.remove(),h(C.apply),Q.designer.unselect()}}))},settings:function(t){var n=c(e.components,t),i=Object.assign({},n.$component.options);n.options&&$.extend(!0,i,n.options),i.comname=n.name,i.comcolor=n.color,i.comnotes=n.notes,i.comreference=n.reference,a.$output=n.output,a.$input=n.input,v.invokeMethodAsync("OpenPropertyGrid",t).then(null,(function(t){throw new Error(t)})),a.$id=t},selectable:function(t){t&&(e.selected=t,$("#designerbuttons button").each((function(n){var i=$(this),r=n?!t:!t||!t.hasClass("node");"paste"===this.name&&(r=null==e.clipboard),i.toggleClass("disabled",r)})))},select:function(t){if(t){var n=c(e.components,t);if(n){if(!n.id)return void toastr.error("Save configuration before edit it.");var i=n.state.text||n.$component.name;$("#nodeUpdateNameId").val(i);var r=n.id;$("#nodeConfigId").val(r),$("#nodeConfigOriginalName").val(i);var o=n.state.color||n.$component.color;$(".colorSp").removeAttr("Style"),$(".colorSp").attr("Style","background-color:"+o+";"),$("#mycp input").val(o),$(".nodeSettingsId>span").html(r);var a=n.$component.readme;$(".nodeSettingsReadme>p").html(a||"")}}},unselect:function(){Q.designer.select(null)},click:function(t){if(t){var n=e.components.findItem("id",t);EMIT("click."+n.component,n),SETTER("websocket","send",{target:t,event:"click"}),success()}},addConnection:function(t,e){h(C.apply)},remConnection:function(t,n,i,r){var o=c(e.components,t);if(o){var a=o.connections[r];a&&(a=$.grep(a,(function(t){return t.index===i&&t.id===n})),o.connections[r]=a,!a.length&&delete o.connections[r],h(C.apply),setTimeout((function(){Q.designer.unselect()}),1e3))}}},resize:function(){},changed:function(e,n){n&&(t.changes[n]=t.changes[n]||[]);var i=t.changes;switch(e){case"add":i[n].push(e);break;case"mov":~i[n].indexOf("add")||~i[n].indexOf("mov")||i[n].push(e),setTimeout2("change.move",(function(){saveMoved()}),1e3);break;case"rem":~i[n].indexOf("add")?i[n]=void 0:i[n].push(e);break;case"add.connection":case"rem.connection":~i[n].indexOf("add")||i[n].push("conn");break;case"tabs":case"flow.clear":t.changedtabs=!0}}};s={flow:{apply:function(){_.show("Are you sure you want to apply current workflow?",["Yes","Cancel"],(function(t){if(1!==t){$(".node_new").removeClass("node_new"),$(".path_new").removeClass("path_new"),h("");(function(){var t={tabs:[]};t.components=e.components.map((function(t){return Object.assign({},t)})),t.version=203,t.variables="",t.components&&t.components.forEach((function(t){var e=[];t.connections&&t.connections instanceof Array&&t.connections.forEach((function(t){e.push(t)}));var n=void 0===e[0]?e:e[0];n instanceof Array||(n=e),t.connections=n}));JSON.stringify(t,(function(t,e){return"$component"===t?void 0:e}))})();nt.show(),(void 0).then((function(t){location.reload(!0)}))}}))},settings:function(){var t=c(e.components,a.$id);t.options=a[t.component];var n=t.name,i=t.reference,r=t.color;t.name=t.options.comname,t.reference=t.options.comreference,t.color=t.options.comcolor,t.notes=t.options.comnotes,EMIT("save."+t.component,t,t.options);var o=r!==t.color||n!==t.name||n!==t.options.comname||i!==t.options.comreference||t.output!==a.$output||t.input!==a.$input;t.name!==t.options.comname&&(t.options.comname=t.name),t.reference!==t.options.comreference&&(t.options.comreference=t.reference),t.color!==t.options.comcolor&&(t.options.comcolor=t.color),t.notes!==t.options.comnotes&&(t.options.comnotes=t.notes);var s=!!o||STRINGIFY(t.options)!==a.$backup;if(t.options.comoutput=t.output,t.options.cominput=t.input,!t.isnew&&s&&success(),null!=t.output){var u=t.output instanceof Array?t.output.length:t.output;Object.keys(t.connections).forEach((function(e){+e>=u&&delete t.connections[e]}))}if(null!=t.input){u=t.input instanceof Array?t.input.length:t.input;e.components.forEach((function(e){t!==e&&Object.keys(e.connections).forEach((function(n){e.connections[n]=e.connections[n].remove((function(e){return e.id===t.id&&+e.index>=u})),!e.connections[n].length&&delete t.connections[n]}))}))}setTimeout((function(){t.options.comname=void 0,t.options.comreference=void 0,t.options.comoutput=void 0,t.options.cominput=void 0,t.options.comcolor=void 0,t.options.comnotes=void 0}),300)},restore:function(){_.show("Are you sure you want to refresh this page?",["Yes","Cancel"],(function(t){!t&&location.reload(!0)}))}},designer:{zoomin:function(){designer.zoom(1)},zoomout:function(){designer.zoom(-1)},zoomreset:function(){designer.zoom(0)},remove:function(t){(t=$(t)).hasClass("disabled")||K.remove()},unselect:function(){designer.select(null)},duplicate:function(t){(t=$(t)).hasClass("disabled")||K.duplicate()},copy:function(t){(t=$(t)).hasClass("disabled")||(e.clipboard=c(e.components,e.selected.attr("data-id")),t.addClass("animate"),setTimeout((function(){t.removeClass("animate")}),500),Q.designer.selectable(e.selected))},paste:function(t){if(!(t=$(t)).hasClass("disabled")){!function(t,e){var i=Object.assign({},t),r=t.$component;i.title=r.title,i.output=r.output,i.input=r.input,"object"===n(i.state)?i.state={text:i.state.text||r.title,color:i.state.color||r.color}:i.state={text:r.title||"",color:r.color},nt.show(),i.x+=50,i.y+=50,i.connections=[];var o=JSON.stringify(i);v.invokeMethodAsync("DuplicateNode",i.id,o).then((function(t){dupCompoment=JSON.parse(t),dupCompoment.$component=i,dupCompoment.output=dupCompoment.output||i.output||i.$component.output,dupCompoment.input=dupCompoment.input||i.input||i.$component.input,Q.designer.add(dupCompoment,dupCompoment.x,dupCompoment.y,!1),nt.hide()}),(function(t){nt.hide()}))}(e.clipboard)}},settings:function(t){if(!(t=$(t)).hasClass("disabled")){var e=j.attr("data-id");Q.designer.settings(e)}}}};var tt,et,nt={make:function(){var t=tt=$("#loading");t.aclass("ui-loading"),t.append("<div></div>")},show:function(){var t=tt;return clearTimeout(et),t.rclass("hidden"),t},hide:function(t){var e=tt;return clearTimeout(et),et=setTimeout((function(){e.aclass("hidden")}),t||1),e}},it={names:{refreshNodeStatusesCookieName:"Workbench.refreshNodeStatuses",isClosedLeftMenuCookieName:"Workbench.isClosedLeftMenu",isClosedRightMenuCookieName:"Workbench.isClosedRightMenu"},createCookie:function(t,e,n){n=n||30;var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r="; expires="+i.toGMTString();document.cookie=t+"="+e+r+"; path=/"},getCookie:function(t){for(var e=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return null},deleteCookie:function(t){createCookie(t,"",-1)}};$(document).ready((function(){nt.make(),_.make(),new Promise((function(n,i){jsonConfigurations=JSON.parse(g),e.isReadOnly=jsonConfigurations.isReadOnly,jsonConfigurations&&jsonConfigurations.defComponents&&jsonConfigurations.defComponents instanceof Array&&$.each(jsonConfigurations.defComponents,(function(e,n){t.components.push(n)})),jsonConfigurations&&jsonConfigurations.defComponents?p(jsonConfigurations.defComponents):p(),designer.make(),n(jsonConfigurations)})).then((function(n){if(n||(n={}),$(".flowTabName").html(n.flowName),"true"==a.isCommonMinimized.get()&&$("body").addClass("panel-minized"),"true"==a.isMinimizeMainMenu.get()&&$("body").addClass("mainmenu-hidden"),!n.components||!n.components.length)return nt.hide(),void $(".ui-loading").removeClass("ui-loading-firstload");$.each(n.components,(function(n,i){var r,o=$.map(t.components,(function(t){return t.id===i.component?t:null}));i.$component=o[0],i.$component?(i.$component.name=i.$component.title,i.$component.traffic=1!==e.isReadOnly):(i.$component={},i.$component.name=null!==(r=i.component)&&void 0!==r?r:"Test",i.$component.traffic=1!==e.isReadOnly),i.state=i.state||{},i.isnew=!1,Object.keys(i.connections).forEach((function(t){var n=i.connections[t];e.connections[i.id+"#"+t+"#"+n.index+"#"+n.id]=!0})),e.components.push(i)})),designer.setter(n.components),Q.resize(),e.loaded=!0,nt.hide(),$(".ui-loading").removeClass("ui-loading-firstload"),0===e.isReadOnly&&($("#saveNodeUpdateChanges").remove(),k(),window.setInterval(k,a.refreshNodeStatusInMilisecond.get()))})),$("body").attr("class","touch"),$("body").attr("class","themedark"),m(),y(),$("#nodeUpdateNameId").keypress((function(t){13==t.which&&$("#saveNodeUpdateChanges").click()})),$(window).resize((function(){Q.resize()}))}))}}()},function(t,e){window.Orions.FileSaveAs={init:function(t,e){var n=document.createElement("a");n.download=t,n.href="data:text/plain;charset=utf-8,"+encodeURIComponent(e),document.body.appendChild(n),n.click(),document.body.removeChild(n)}},window.Orions.FileArhiveAs={init:function(t,e){var n=document.createElement("a");n.download=t,n.href="data:application/zip;base64,"+e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}},function(t,e){!function(){function t(t,e){var n=t._blazorFilesById[e];if(!n)throw new Error("There is no file with ID "+e+". The file list may have changed");return n}function e(e,n){var i=t(e,n);return i.readPromise||(i.readPromise=new Promise((function(t,e){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=function(t){e(t)},n.readAsArrayBuffer(i.blob)}))),i.readPromise}window.BlazorInputFile={init:function(t,e){var n=0;t.addEventListener("change",(function(i){t._blazorFilesById={};var r=Array.prototype.map.call(t.files,(function(e){var i={id:++n,lastModified:new Date(e.lastModified).toISOString(),name:e.name,size:e.size,type:e.type};return t._blazorFilesById[i.id]=i,Object.defineProperty(i,"blob",{value:e}),i}));e.invokeMethodAsync("NotifyChange",r).then(null,(function(t){throw new Error(t)}))}))},readFileData:function(t,i,r,o){return e(t,i).then((function(t){var e=new Uint8Array(t,r,o);return n(e)}))},ensureArrayBufferReadyForSharedMemoryInterop:function(n,i){return e(n,i).then((function(e){t(n,i).arrayBuffer=e}))},readFileDataSharedMemory:function(e){var n=Blazor.platform.readStringField(e,0),i=document.querySelector("[_bl_"+n+"]"),r=Blazor.platform.readInt32Field(e,4),o=Blazor.platform.readUint64Field(e,8),a=Blazor.platform.readInt32Field(e,16),s=Blazor.platform.readInt32Field(e,20),u=Blazor.platform.readInt32Field(e,24),c=t(i,r).arrayBuffer,l=Math.min(u,c.byteLength-o),f=new Uint8Array(c,o,l);return Blazor.platform.toUint8Array(a).set(f,s),l}};var n=function(){for(var t=[],e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,i=e.length;n<i;++n)t[n]=e[n];function r(e,n,i){for(var r,o,a=[],s=n;s<i;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(t[(o=r)>>18&63]+t[o>>12&63]+t[o>>6&63]+t[63&o]);return a.join("")}return function(e){for(var n,i=e.length,o=i%3,a=[],s=0,u=i-o;s<u;s+=16383)a.push(r(e,s,s+16383>u?u:s+16383));return 1===o?(n=e[i-1],a.push(t[n>>2]+t[n<<4&63]+"==")):2===o&&(n=(e[i-2]<<8)+e[i-1],a.push(t[n>>10]+t[n>>4&63]+t[n<<2&63]+"=")),a.join("")}}()}()},function(t,e,n){"use strict";var i=n(21);function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}window.Orions.ShakaPlayer={players:{},init:function(t){var e=this.players[t.id];e&&e.remove(),(e=new o).init(t),this.players[t.id]=e},seek:function(t,e){var n=this.players[t];n&&n.seek(e)},remove:function(t){var e=this.players[t];e&&e.remove()}};var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,(n=[{key:"init",value:function(t){var e=this;this.playerVideoElement=document.getElementById(t.id);var n=new i.Player(this.playerVideoElement);n.load(t.file).then((function(){t.autostart&&e.playerVideoElement.play(),t.startAt&&(e.playerVideoElement.currentTime=t.startAt)})),this.shakaPlayer=n}},{key:"seek",value:function(t){this.playerVideoElement.currentTime=t}},{key:"remove",value:function(){this.shakaPlayer.destroy()}}])&&r(e.prototype,n),o&&r(e,o),t}()},function(t,e){window.Orions.KendoTreemap={init:function(t,e){var n="#"+t;function i(t,e){$(t).kendoTreeMap({dataSource:{data:e,schema:{model:{children:"items"}}},valueField:"value",textField:"name"}).on("click",".k-leaf, .k-treemap-title",(function(e){$(t).data("kendoTreeMap").dataItem($(this).closest(".k-treemap-tile"))}))}i(n,e),$(document).bind("kendo:skinChange",i),$(".options").bind("change",(function(){$("#treeMap").getKendoTreeMap().setOptions({type:$("input[name=type]:checked").val()})})),function(t){$(t).kendoTooltip({filter:".k-leaf,.k-treemap-title",position:"top",content:function(e){return $(t).data("kendoTreeMap").dataItem(e.target.closest(".k-treemap-tile")).value}})}(n)}}},function(t,e){window.Orions.KendoMediaPlayer={init:function(t){var e=t.id,n=t.title,i=t.source;$("#"+e).kendoMediaPlayer({autoPlay:t.autoPlay,navigatable:t.navigatable,mute:t.mute,media:{title:n,source:i},play:function(t){DotNet.invokeMethodAsync("Orions.Systems.CrossModules.Components","OnPlayAsync")},pause:function(t){DotNet.invokeMethodAsync("Orions.Systems.CrossModules.Components","OnPauseAsync")},timeChange:function(t){DotNet.invokeMethodAsync("Orions.Systems.CrossModules.Components","OnTimeChangeAsync")}})},getPlayer:function(t){return $("#"+t).getKendoMediaPlayer()}}},function(t,e){window.Orions.MapZone={Init:function(t,e,n){var i=document.querySelector("#"+t);i&&i.hasChildNodes()&&(NodeList.prototype.forEach=Array.prototype.forEach,i.childNodes.forEach((function(t){t.nodeType!==Node.TEXT_NODE&&(t.addEventListener("mouseover",(function(t){t.target.classList.add(e)})),t.addEventListener("mouseout",(function(t){t.target.classList.remove(e)})),t.addEventListener("click",(function(e){n.invokeMethodAsync("OnZoneClick",t.id).then(null,(function(t){throw new Error(t)}))})))})))},AddClassById:function(t,e){var n=document.querySelector("#"+t);n.className=e,n.classList.add(e)},RemoveClassById:function(t,e){var n=document.querySelector("#"+t);n.className=e,n.classList.remove(e)}}},function(t,e){function n(){DotNet.invokeMethodAsync("Orions.Systems.CrossModules.Components","RaiseWindowResizeEvent",Math.floor(window.innerWidth),Math.floor(window.innerHeight))}var i=!1;window.addEventListener("resize",(function(){!1!==i&&clearTimeout(i),i=setTimeout(n,200)}))},function(t,e){window.Orions.CodeMirror={init:function(t,e){return CodeMirror.fromTextArea(e.ref,{value:e.data,mode:e.mode,lineNumbers:!0,extraKeys:{"Ctrl-Space":"autocomplete"}}).on("change",(function(e){t.invokeMethodAsync("NotifyChange",e.getValue()).then(null,(function(t){throw new Error(t)}))})),new Promise((function(){}))}},function(t){var e=void 0!==e&&e,n={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},i={WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},r=function(){this.init()};function o(t){var e=[];for(var n in t)e.push(t[n]);return e.join(" ")}r.version="0.0.1",r.prototype.init=function(){this.buttonPressedEvent="touchstart click",this.transitionEndEventName=e?i[e.prefixed("transition")]:o(i),this.animationEndEventName=e?n[e.prefixed("animation")]:o(n),this.transitionAnimationEndEvent=this.animationEndEventName+" "+this.transitionEndEventName},r.prototype.getViewportHeight=function(){var e=document.documentElement.clientHeight,n=t.innerHeight;return e<n?n:e},t.Effeckt=new r}(this)},function(t,e,n){"use strict";function i(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left,x:e.left,y:e.top}}function r(t){if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e?e.defaultView:window}return t}function o(t){var e=r(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function a(t){return t instanceof r(t).Element||t instanceof Element}function s(t){return t instanceof r(t).HTMLElement||t instanceof HTMLElement}function u(t){return t?(t.nodeName||"").toLowerCase():null}function c(t){return(a(t)?t.ownerDocument:t.document).documentElement}function l(t){return i(c(t)).left+o(t).scrollLeft}function f(t){return r(t).getComputedStyle(t)}function h(t){var e=f(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function d(t,e,n){void 0===n&&(n=!1);var a,f,d=c(e),p=i(t),m={scrollLeft:0,scrollTop:0},v={x:0,y:0};return n||(("body"!==u(e)||h(d))&&(m=(a=e)!==r(a)&&s(a)?{scrollLeft:(f=a).scrollLeft,scrollTop:f.scrollTop}:o(a)),s(e)?((v=i(e)).x+=e.clientLeft,v.y+=e.clientTop):d&&(v.x=l(d))),{x:p.left+m.scrollLeft-v.x,y:p.top+m.scrollTop-v.y,width:p.width,height:p.height}}function p(t){return{x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}}function m(t){return"html"===u(t)?t:t.assignedSlot||t.parentNode||t.host||c(t)}function v(t,e){void 0===e&&(e=[]);var n=function t(e){return["html","body","#document"].indexOf(u(e))>=0?e.ownerDocument.body:s(e)&&h(e)?e:t(m(e))}(t),i="body"===u(n),o=r(n),a=i?[o].concat(o.visualViewport||[],h(n)?n:[]):n,c=e.concat(a);return i?c:c.concat(v(m(a)))}function g(t){return["table","td","th"].indexOf(u(t))>=0}function y(t){return s(t)&&"fixed"!==f(t).position?t.offsetParent:null}function b(t){for(var e=r(t),n=y(t);n&&g(n);)n=y(n);return n&&"body"===u(n)&&"static"===f(n).position?e:n||e}var w="top",x="bottom",S="right",T="left",E=[w,x,S,T],k=E.reduce((function(t,e){return t.concat([e+"-start",e+"-end"])}),[]),C=[].concat(E,["auto"]).reduce((function(t,e){return t.concat([e,e+"-start",e+"-end"])}),[]),M=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function A(t){var e=new Map,n=new Set,i=[];return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||function t(r){n.add(r.name),[].concat(r.requires||[],r.requiresIfExists||[]).forEach((function(i){if(!n.has(i)){var r=e.get(i);r&&t(r)}})),i.push(r)}(t)})),i}var _={placement:"bottom",modifiers:[],strategy:"absolute"};function P(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function N(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,r=e.defaultOptions,o=void 0===r?_:r;return function(t,e,n){void 0===n&&(n=o);var r,s,u={placement:"bottom",orderedModifiers:[],options:Object.assign({},_,{},o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},c=[],l=!1,f={state:u,setOptions:function(n){h(),u.options=Object.assign({},o,{},u.options,{},n),u.scrollParents={reference:a(t)?v(t):t.contextElement?v(t.contextElement):[],popper:v(e)};var r=function(t){var e=A(t);return M.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}(function(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,{},e,{options:Object.assign({},n.options,{},e.options),data:Object.assign({},n.data,{},e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}([].concat(i,u.options.modifiers)));return u.orderedModifiers=r.filter((function(t){return t.enabled})),u.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,r=t.effect;if("function"==typeof r){var o=r({state:u,name:e,instance:f,options:i});c.push(o||function(){})}})),f.update()},forceUpdate:function(){if(!l){var t=u.elements,e=t.reference,n=t.popper;if(P(e,n)){u.rects={reference:d(e,b(n),"fixed"===u.options.strategy),popper:p(n)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach((function(t){return u.modifiersData[t.name]=Object.assign({},t.data)}));for(var i=0;i<u.orderedModifiers.length;i++)if(!0!==u.reset){var r=u.orderedModifiers[i],o=r.fn,a=r.options,s=void 0===a?{}:a,c=r.name;"function"==typeof o&&(u=o({state:u,options:s,name:c,instance:f})||u)}else u.reset=!1,i=-1}}},update:(r=function(){return new Promise((function(t){f.forceUpdate(),t(u)}))},function(){return s||(s=new Promise((function(t){Promise.resolve().then((function(){s=void 0,t(r())}))}))),s}),destroy:function(){h(),l=!0}};if(!P(t,e))return f;function h(){c.forEach((function(t){return t()})),c=[]}return f.setOptions(n).then((function(t){!l&&n.onFirstUpdate&&n.onFirstUpdate(t)})),f}}var O={passive:!0};function I(t){return t.split("-")[0]}function D(t){return t.split("-")[1]}function R(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function L(t){var e,n=t.reference,i=t.element,r=t.placement,o=r?I(r):null,a=r?D(r):null,s=n.x+n.width/2-i.width/2,u=n.y+n.height/2-i.height/2;switch(o){case w:e={x:s,y:n.y-i.height};break;case x:e={x:s,y:n.y+n.height};break;case S:e={x:n.x+n.width,y:u};break;case T:e={x:n.x-i.width,y:u};break;default:e={x:n.x,y:n.y}}var c=o?R(o):null;if(null!=c){var l="y"===c?"height":"width";switch(a){case"start":e[c]=Math.floor(e[c])-Math.floor(n[l]/2-i[l]/2);break;case"end":e[c]=Math.floor(e[c])+Math.ceil(n[l]/2-i[l]/2)}}return e}var j={top:"auto",right:"auto",bottom:"auto",left:"auto"};function U(t){var e,n=t.popper,i=t.popperRect,o=t.placement,a=t.offsets,s=t.position,u=t.gpuAcceleration,l=t.adaptive,f=function(t){var e=t.x,n=t.y,i=window.devicePixelRatio||1;return{x:Math.round(e*i)/i||0,y:Math.round(n*i)/i||0}}(a),h=f.x,d=f.y,p=a.hasOwnProperty("x"),m=a.hasOwnProperty("y"),v=T,g=w,y=window;if(l){var E=b(n);E===r(n)&&(E=c(n)),o===w&&(g=x,d-=E.clientHeight-i.height,d*=u?1:-1),o===T&&(v=S,h-=E.clientWidth-i.width,h*=u?1:-1)}var k,C=Object.assign({position:s},l&&j);return u?Object.assign({},C,((k={})[g]=m?"0":"",k[v]=p?"0":"",k.transform=(y.devicePixelRatio||1)<2?"translate("+h+"px, "+d+"px)":"translate3d("+h+"px, "+d+"px, 0)",k)):Object.assign({},C,((e={})[g]=m?d+"px":"",e[v]=p?h+"px":"",e.transform="",e))}var z={left:"right",right:"left",bottom:"top",top:"bottom"};function B(t){return t.replace(/left|right|bottom|top/g,(function(t){return z[t]}))}var F={start:"end",end:"start"};function H(t){return t.replace(/start|end/g,(function(t){return F[t]}))}function q(t){return parseFloat(t)||0}function K(t){var e=r(t),n=function(t){var e=s(t)?f(t):{};return{top:q(e.borderTopWidth),right:q(e.borderRightWidth),bottom:q(e.borderBottomWidth),left:q(e.borderLeftWidth)}}(t),i="html"===u(t),o=l(t),a=t.clientWidth+n.right,c=t.clientHeight+n.bottom;return i&&e.innerHeight-t.clientHeight>50&&(c=e.innerHeight-n.bottom),{top:i?0:t.clientTop,right:t.clientLeft>n.left?n.right:i?e.innerWidth-a-o:t.offsetWidth-a,bottom:i?e.innerHeight-c:t.offsetHeight-c,left:i?o:t.clientLeft}}function V(t,e){var n=Boolean(e.getRootNode&&e.getRootNode().host);if(t.contains(e))return!0;if(n){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function W(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function G(t,e){return"viewport"===e?W(function(t){var e=r(t),n=e.visualViewport,i=e.innerWidth,o=e.innerHeight;return n&&/iPhone|iPod|iPad/.test(navigator.platform)&&(i=n.width,o=n.height),{width:i,height:o,x:0,y:0}}(t)):s(e)?i(e):W(function(t){var e=r(t),n=o(t),i=d(c(t),e);return i.height=Math.max(i.height,e.innerHeight),i.width=Math.max(i.width,e.innerWidth),i.x=-n.scrollLeft,i.y=-n.scrollTop,i}(c(t)))}function X(t,e,n){var i="clippingParents"===e?function(t){var e=v(t),n=["absolute","fixed"].indexOf(f(t).position)>=0&&s(t)?b(t):t;return a(n)?e.filter((function(t){return a(t)&&V(t,n)})):[]}(t):[].concat(e),r=[].concat(i,[n]),o=r[0],u=r.reduce((function(e,n){var i=G(t,n),r=K(s(n)?n:c(t));return e.top=Math.max(i.top+r.top,e.top),e.right=Math.min(i.right-r.right,e.right),e.bottom=Math.min(i.bottom-r.bottom,e.bottom),e.left=Math.max(i.left+r.left,e.left),e}),G(t,o));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function Y(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},{},t)}function Z(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function J(t,e){void 0===e&&(e={});var n=e,r=n.placement,o=void 0===r?t.placement:r,s=n.boundary,u=void 0===s?"clippingParents":s,l=n.rootBoundary,f=void 0===l?"viewport":l,h=n.elementContext,d=void 0===h?"popper":h,p=n.altBoundary,m=void 0!==p&&p,v=n.padding,g=void 0===v?0:v,y=Y("number"!=typeof g?g:Z(g,E)),b="popper"===d?"reference":"popper",T=t.elements.reference,k=t.rects.popper,C=t.elements[m?b:d],M=X(a(C)?C:C.contextElement||c(t.elements.popper),u,f),A=i(T),_=L({reference:A,element:k,strategy:"absolute",placement:o}),P=W(Object.assign({},k,{},_)),N="popper"===d?P:A,O={top:M.top-N.top+y.top,bottom:N.bottom-M.bottom+y.bottom,left:M.left-N.left+y.left,right:N.right-M.right+y.right},I=t.modifiersData.offset;if("popper"===d&&I){var D=I[o];Object.keys(O).forEach((function(t){var e=[S,x].indexOf(t)>=0?1:-1,n=[w,x].indexOf(t)>=0?"y":"x";O[t]+=D[n]*e}))}return O}function Q(t,e,n){return Math.max(t,Math.min(e,n))}function tt(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function et(t){return[w,S,x,T].some((function(e){return t[e]>=0}))}var nt=N({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,i=t.options,o=i.scroll,a=void 0===o||o,s=i.resize,u=void 0===s||s,c=r(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&l.forEach((function(t){t.addEventListener("scroll",n.update,O)})),u&&c.addEventListener("resize",n.update,O),function(){a&&l.forEach((function(t){t.removeEventListener("scroll",n.update,O)})),u&&c.removeEventListener("resize",n.update,O)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=L({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=void 0===i||i,o=n.adaptive,a=void 0===o||o,s={placement:I(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,{},U(Object.assign({},s,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,{},U(Object.assign({},s,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},r=e.elements[t];s(r)&&u(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(t){var e=i[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var i=e.elements[t],r=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});s(i)&&u(i)&&(Object.assign(i.style,o),Object.keys(r).forEach((function(t){i.removeAttribute(t)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.offset,o=void 0===r?[0,0]:r,a=C.reduce((function(t,n){return t[n]=function(t,e,n){var i=I(t),r=[T,w].indexOf(i)>=0?-1:1,o="function"==typeof n?n(Object.assign({},e,{placement:t})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*r,[T,S].indexOf(i)>=0?{x:s,y:a}:{x:a,y:s}}(n,e.rects,o),t}),{}),s=a[e.placement],u=s.x,c=s.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=a}},{name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,o=void 0===r||r,a=n.altAxis,s=void 0===a||a,u=n.fallbackPlacements,c=n.padding,l=n.boundary,f=n.rootBoundary,h=n.altBoundary,d=n.flipVariations,p=void 0===d||d,m=n.allowedAutoPlacements,v=e.options.placement,g=I(v),y=u||(g===v||!p?[B(v)]:function(t){if("auto"===I(t))return[];var e=B(t);return[H(t),e,H(e)]}(v)),b=[v].concat(y).reduce((function(t,n){return t.concat("auto"===I(n)?function(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,u=n.allowedAutoPlacements,c=void 0===u?C:u,l=D(i),f=(l?s?k:k.filter((function(t){return D(t)===l})):E).filter((function(t){return c.indexOf(t)>=0})).reduce((function(e,n){return e[n]=J(t,{placement:n,boundary:r,rootBoundary:o,padding:a})[I(n)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}(e,{placement:n,boundary:l,rootBoundary:f,padding:c,flipVariations:p,allowedAutoPlacements:m}):n)}),[]),M=e.rects.reference,A=e.rects.popper,_=new Map,P=!0,N=b[0],O=0;O<b.length;O++){var R=b[O],L=I(R),j="start"===D(R),U=[w,x].indexOf(L)>=0,z=U?"width":"height",F=J(e,{placement:R,boundary:l,rootBoundary:f,altBoundary:h,padding:c}),q=U?j?S:T:j?x:w;M[z]>A[z]&&(q=B(q));var K=B(q),$=[];if(o&&$.push(F[L]<=0),s&&$.push(F[q]<=0,F[K]<=0),$.every((function(t){return t}))){N=R,P=!1;break}_.set(R,$)}if(P)for(var V=function(t){var e=b.find((function(e){var n=_.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return N=e,"break"},W=p?3:1;W>0;W--){if("break"===V(W))break}e.placement!==N&&(e.modifiersData[i]._skip=!0,e.placement=N,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,o=void 0===r||r,a=n.altAxis,s=void 0!==a&&a,u=n.boundary,c=n.rootBoundary,l=n.altBoundary,f=n.padding,h=n.tether,d=void 0===h||h,m=n.tetherOffset,v=void 0===m?0:m,g=J(e,{boundary:u,rootBoundary:c,padding:f,altBoundary:l}),y=I(e.placement),E=D(e.placement),k=!E,C=R(y),M="x"===C?"y":"x",A=e.modifiersData.popperOffsets,_=e.rects.reference,P=e.rects.popper,N="function"==typeof v?v(Object.assign({},e.rects,{placement:e.placement})):v,O={x:0,y:0};if(A){if(o){var L="y"===C?w:T,j="y"===C?x:S,U="y"===C?"height":"width",z=A[C],B=A[C]+g[L],F=A[C]-g[j],H=d?-P[U]/2:0,q="start"===E?_[U]:P[U],K="start"===E?-P[U]:-_[U],$=e.elements.arrow,V=d&&$?p($):{width:0,height:0},W=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},G=W[L],X=W[j],Y=Q(0,_[U],V[U]),Z=k?_[U]/2-H-Y-G-N:q-Y-G-N,tt=k?-_[U]/2+H+Y+X+N:K+Y+X+N,et=e.elements.arrow&&b(e.elements.arrow),nt=et?"y"===C?et.clientTop||0:et.clientLeft||0:0,it=e.modifiersData.offset?e.modifiersData.offset[e.placement][C]:0,rt=A[C]+Z-it-nt,ot=A[C]+tt-it,at=Q(d?Math.min(B,rt):B,z,d?Math.max(F,ot):F);A[C]=at,O[C]=at-z}if(s){var st="x"===C?w:T,ut="x"===C?x:S,ct=A[M],lt=Q(ct+g[st],ct,ct-g[ut]);A[M]=lt,O[M]=lt-ct}e.modifiersData[i]=O}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,i=t.name,r=n.elements.arrow,o=n.modifiersData.popperOffsets,a=I(n.placement),s=R(a),u=[T,S].indexOf(a)>=0?"height":"width";if(r&&o){var c=n.modifiersData[i+"#persistent"].padding,l=p(r),f="y"===s?w:T,h="y"===s?x:S,d=n.rects.reference[u]+n.rects.reference[s]-o[s]-n.rects.popper[u],m=o[s]-n.rects.reference[s],v=b(r),g=v?"y"===s?v.clientHeight||0:v.clientWidth||0:0,y=d/2-m/2,E=c[f],k=g-l[u]-c[h],C=g/2-l[u]/2+y,M=Q(E,C,k),A=s;n.modifiersData[i]=((e={})[A]=M,e.centerOffset=M-C,e)}},effect:function(t){var e=t.state,n=t.options,i=t.name,r=n.element,o=void 0===r?"[data-popper-arrow]":r,a=n.padding,s=void 0===a?0:a;null!=o&&("string"!=typeof o||(o=e.elements.popper.querySelector(o)))&&V(e.elements.popper,o)&&(e.elements.arrow=o,e.modifiersData[i+"#persistent"]={padding:Y("number"!=typeof s?s:Z(s,E))})},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,a=J(e,{elementContext:"reference"}),s=J(e,{altBoundary:!0}),u=tt(a,i),c=tt(s,r,o),l=et(u),f=et(c);e.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:c,isReferenceHidden:l,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":f})}}]});function it(t){return null!=t}window.Orions.Vizlist={init:function(t){var e=$("#".concat(t));it(e)&&it(e.draggable)&&e.draggable()},initPopover:function(t,e){var n=document.querySelector("#".concat(t)),i=document.querySelector("#".concat(e)),r=document.querySelector("body");if(null!=n&&null!=i){var o=nt(n,i,{placement:"top",modifiers:[{name:"preventOverflow",options:{boundary:r}},{name:"flip",options:{fallbackPlacements:["top","right","left","bottom"]}}]});n.addEventListener("mouseenter",(function(t){i.style.display="block",o.update()})),n.addEventListener("mouseleave",(function(t){i.style.display="none"})),n.addEventListener("click",(function(t){i.style.display="none"}))}}}},function(t,e,n){"use strict";var i=n(0);
/*! svg.draw.js - v2.0.4 - 2019-11-28
* https://github.com/svgdotjs/svg.draw.js
* Copyright (c) 2019 Ulrich-Matthias SchÃ¤fer; Licensed MIT */(function(){function t(t,e,n){this.el=t,t.remember("_paintHandler",this);var r=this,o=this.getPlugin();for(var a in this.parent=t.parent(i.Nested)||t.parent(i.Doc),this.p=this.parent.node.nearestViewportElement.createSVGPoint(),this.m=null,this.startPoint=null,this.lastUpdateCall=null,this.options={},this.set=new i.e,this.el.draw.defaults)this.options[a]=this.el.draw.defaults[a],void 0!==n[a]&&(this.options[a]=n[a]);for(var a in o.point&&(o.pointPlugin=o.point,delete o.point),o)this[a]=o[a];e||this.parent.on("click.draw",(function(t){r.start(t)}))}t.prototype.transformPoint=function(t,e){return this.p.x=t-(this.offset.x-window.pageXOffset),this.p.y=e-(this.offset.y-window.pageYOffset),this.p.matrixTransform(this.m)},t.prototype.start=function(t){var e=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset},this.options.snapToGrid*=Math.sqrt(this.m.a*this.m.a+this.m.b*this.m.b),this.startPoint=this.snapToGrid(this.transformPoint(t.clientX,t.clientY)),this.init&&this.init(t),this.el.fire("drawstart",{event:t,p:this.p,m:this.m}),i.k(window,"mousemove.draw",(function(t){e.update(t)})),this.start=this.point},t.prototype.point=function(t){return this.point!=this.start?this.start(t):this.pointPlugin?this.pointPlugin(t):void this.stop(t)},t.prototype.stop=function(t){t&&this.update(t),this.clean&&this.clean(),i.j(window,"mousemove.draw"),this.parent.off("click.draw"),this.el.forget("_paintHandler"),this.el.draw=function(){},this.el.fire("drawstop")},t.prototype.update=function(t){!t&&this.lastUpdateCall&&(t=this.lastUpdateCall),this.lastUpdateCall=t,this.m=this.el.node.getScreenCTM().inverse(),this.calc(t),this.el.fire("drawupdate",{event:t,p:this.p,m:this.m})},t.prototype.done=function(){this.calc(),this.stop(),this.el.fire("drawdone")},t.prototype.cancel=function(){this.stop(),this.el.remove(),this.el.fire("drawcancel")},t.prototype.snapToGrid=function(t){var e=null;if(t.length)return e=[t[0]%this.options.snapToGrid,t[1]%this.options.snapToGrid],t[0]-=e[0]<this.options.snapToGrid/2?e[0]:e[0]-this.options.snapToGrid,t[1]-=e[1]<this.options.snapToGrid/2?e[1]:e[1]-this.options.snapToGrid,t;for(var n in t)e=t[n]%this.options.snapToGrid,t[n]-=(e<this.options.snapToGrid/2?e:e-this.options.snapToGrid)+(e<0?this.options.snapToGrid:0);return t},t.prototype.param=function(t,e){this.options[t]=null===e?this.el.draw.defaults[t]:e,this.update()},t.prototype.getPlugin=function(){return this.el.draw.plugins[this.el.type]},i.i(i.c,{draw:function(e,n,i){e instanceof Event||"string"==typeof e||(n=e,e=null);var r=this.remember("_paintHandler")||new t(this,e,n||{});return e instanceof Event&&r.start(e),r[e]&&r[e](n,i),this}}),i.c.prototype.draw.defaults={snapToGrid:1},i.c.prototype.draw.extend=function(t,e){var n={};for(var r in"string"==typeof t?n[t]=e:n=t,n){var o=r.trim().split(/\s+/);for(var a in o)i.c.prototype.draw.plugins[o[a]]=n[r]}},i.c.prototype.draw.plugins={},i.c.prototype.draw.extend("rect image",{init:function(t){var e=this.startPoint;this.el.attr({x:e.x,y:e.y,height:0,width:0})},calc:function(t){var e={x:this.startPoint.x,y:this.startPoint.y},n=this.transformPoint(t.clientX,t.clientY);e.width=n.x-e.x,e.height=n.y-e.y,this.snapToGrid(e),e.width<0&&(e.x=e.x+e.width,e.width=-e.width),e.height<0&&(e.y=e.y+e.height,e.height=-e.height),this.el.attr(e)}}),i.c.prototype.draw.extend("line polyline polygon",{init:function(t){this.set=new i.e;var e=this.startPoint,n=[[e.x,e.y],[e.x,e.y]];this.el.plot(n)},calc:function(t){var e=this.el.array().valueOf();if(e.pop(),t){var n=this.transformPoint(t.clientX,t.clientY);e.push(this.snapToGrid([n.x,n.y]))}this.el.plot(e)},point:function(t){if(this.el.type.indexOf("poly")>-1){var e=this.transformPoint(t.clientX,t.clientY),n=this.el.array().valueOf();return n.push(this.snapToGrid([e.x,e.y])),this.el.plot(n),void this.el.fire("drawpoint",{event:t,p:{x:e.x,y:e.y},m:this.m})}this.stop(t)},clean:function(){this.set.each((function(){this.remove()})),this.set.clear(),delete this.set},drawCircles:function(){var t=this.el.array().valueOf();this.set.each((function(){this.remove()})),this.set.clear();for(var e=0;e<t.length;++e){this.p.x=t[e][0],this.p.y=t[e][1];var n=this.p.matrixTransform(this.parent.node.getScreenCTM().inverse().multiply(this.el.node.getScreenCTM()));this.set.add(this.parent.circle(5).stroke({width:1}).fill("#ccc").center(n.x,n.y))}},undo:function(){this.set.length()&&(this.set.members.splice(-2,1)[0].remove(),this.el.array().value.splice(-2,1),this.el.plot(this.el.array()),this.el.fire("undopoint"))}}),i.c.prototype.draw.extend("circle",{init:function(t){var e=this.startPoint;this.el.attr({cx:e.x,cy:e.y,r:1})},calc:function(t){var e=this.transformPoint(t.clientX,t.clientY),n={cx:this.startPoint.x,cy:this.startPoint.y,r:Math.sqrt((e.x-this.startPoint.x)*(e.x-this.startPoint.x)+(e.y-this.startPoint.y)*(e.y-this.startPoint.y))};this.snapToGrid(n),this.el.attr(n)}}),i.c.prototype.draw.extend("ellipse",{init:function(t){var e=this.startPoint;this.el.attr({cx:e.x,cy:e.y,rx:1,ry:1})},calc:function(t){var e=this.transformPoint(t.clientX,t.clientY),n={cx:this.startPoint.x,cy:this.startPoint.y,rx:Math.abs(e.x-this.startPoint.x),ry:Math.abs(e.y-this.startPoint.y)};this.snapToGrid(n),this.el.attr(n)}})}).call(void 0);const r=t=>(t.changedTouches&&(t=t.changedTouches[0]),{x:t.clientX,y:t.clientY});class o{constructor(t){t.remember("_draggable",this),this.el=t,this.drag=this.drag.bind(this),this.startDrag=this.startDrag.bind(this),this.endDrag=this.endDrag.bind(this)}init(t){t?(this.el.on("mousedown.drag",this.startDrag),this.el.on("touchstart.drag",this.startDrag)):(this.el.off("mousedown.drag"),this.el.off("touchstart.drag"))}startDrag(t){const e=!t.type.indexOf("mouse");if(e&&1!==(t.which||t.buttons))return;if(this.el.dispatch("beforedrag",{event:t,handler:this}).defaultPrevented)return;t.preventDefault(),t.stopPropagation(),this.init(!1),this.box=this.el.bbox(),this.lastClick=this.el.point(r(t));const n=(e?"mousemove":"touchmove")+".drag",o=(e?"mouseup":"touchcancel.drag touchend")+".drag";Object(i.k)(window,n,this.drag),Object(i.k)(window,o,this.endDrag),this.el.fire("dragstart",{event:t,handler:this,box:this.box})}drag(t){const{box:e,lastClick:n}=this,o=this.el.point(r(t)),a=e.x+(o.x-n.x),s=e.y+(o.y-n.y),u=new i.a(a,s,e.w,e.h);if(!this.el.dispatch("dragmove",{event:t,handler:this,box:u}).defaultPrevented)return this.move(a,s),u}move(t,e){"svg"===this.el.type?i.d.prototype.move.call(this.el,t,e):this.el.move(t,e)}endDrag(t){const e=this.drag(t);this.el.fire("dragend",{event:t,handler:this,box:e}),Object(i.j)(window,"mousemove.drag"),Object(i.j)(window,"touchmove.drag"),Object(i.j)(window,"mouseup.drag"),Object(i.j)(window,"touchend.drag"),this.init(!0)}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=h(t);if(e){var r=h(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function l(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function y(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),t}function b(t,e,n){var i=T(t=S(t,n),e=S(e,n)),r=(t[0]-e[0])/(t[1]-e[1]),o=60/Math.sqrt(1+r*r),a=Math.sqrt(3600-o*o);return i[0]=i[0]+o*(r<0?1:-1)*(e[0]>t[0]?1:-1),i[1]=i[1]+a*(e[0]>t[0]?1:-1),i=function(t,e){return[t[0],e.height-t[1]]}(i,n)}function w(t,e,n){window.addEventListener("click",(function(i){i.target!=e.node&&0==function(t,e){var n=e.parentNode;for(;null!=n;){if(n==t)return!0;n=n.parentNode}return!1}(t.node,i.target)?n.select(!1):(n.select(!0),i.stopPropagation())}))}function x(t){document.addEventListener("keydown",(function(e){var n=!!t.isEditingName&&t.isEditingName.get();46==e.keyCode&&t.isSelected&&!n&&t.remove()}))}function S(t,e){return[t[0],e.height-t[1]]}function T(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function E(t,e,n){var i=n.nearestViewportElement.createSVGPoint();return i.x=t,i.y=e,i.matrixTransform(n.getScreenCTM().inverse())}Object(i.i)(i.c,{draggable(t=!0){return(this.remember("_draggable")||new o(this)).init(t),this}});var k=function(){function t(e){v(this,t),this.value=e,this.changeHandlers=[]}return y(t,[{key:"onChange",value:function(t){this.changeHandlers.push(t)}},{key:"set",value:function(t){var e=this.value;this.changeHandlers.forEach((function(n){n(e,t)})),this.value=t}},{key:"get",value:function(){return this.value}}]),t}(),C=function(){function t(e,n,i,r,o,a){v(this,t);var s=this;this.overlayEntry=i||{},this.shapeControlsLayer=a,this.isSelectable=r,this.isDraggable=null==o||o,this.onRemoveEventHandlers=[],this.onDblClickEventHandlers=[],this.onSelectEventHandlers=[],this.isReadOnly=e,this.svgNode=n,this.controlGroup=this.svgNode.group(),this.controlGroup.on("dblclick",(function(){s.onDblClickEventHandlers.forEach((function(t){return t(s)}))}))}return y(t,[{key:"draggable",value:function(t){var e=this;this.controlGroup.draggable(t&&!this.isReadOnly&&this.isDraggable);var n=0;this.controlGroup.on("dragmove",(function(){2==++n&&e.controlGroup.fire("zoneIsBeingDragged")})),this.controlGroup.on("dragend",(function(){n>=2&&e.controlGroup.fire("zoneHasBeenDragged"),n=0}))}},{key:"setAttr",value:function(t){this.attr=p(p({},this.attr),t),this.mainShape.attr(t)}},{key:"center",value:function(t,e,n){n?this.controlGroup.animate(500,0,"now").center(t,e):this.controlGroup.center(t,e)}},{key:"remove",value:function(){var t=this;this.controlGroup.remove(),this.resizeControls.forEach((function(t){return t.control.remove()})),this.onRemoveEventHandlers.forEach((function(e){return e(t)})),this.controlGroup.fire("controlDeleted")}},{key:"onRemove",value:function(t){this.onRemoveEventHandlers.push(t)}},{key:"onDblClick",value:function(t){this.onDblClickEventHandlers.push(t)}},{key:"onSelect",value:function(t){this.onSelectEventHandlers.push(t)}},{key:"raiseOnSelect",value:function(t){var e=this;this.onSelectEventHandlers.forEach((function(n){n(e.overlayEntry,t)}))}},{key:"select",value:function(t){var e=this.resizeControls;if(t){if(this.isSelectable){for(var n=0;n<e.length;n++)e[n].control.node.setAttribute("style","visibility: visible");this.isSelected||this.raiseOnSelect(!0),this.isSelected=!0}}else{for(var i=0;i<e.length;i++)e[i].control.node.setAttribute("style","visibility: collapse");this.isSelected&&this.raiseOnSelect(!1),this.isSelected=!1,this.isEditingName&&this.isEditingName.set(!1)}}}]),t}(),M=function(t){s(n,t);var e=c(n);function n(t){t.svgRoot;var r,o=t.svgNode,a=t.attr,s=t.isDefaultPosition,u=t.points,c=t.transformMatrix,l=t.isReadOnly,f=t.overlayEntry,h=t.isSelectable,d=t.isDraggable,p=t.shapeControlsLayer;if(v(this,n),(r=e.call(this,l,o,f,h,d,p)).attr=a||{},r.resizeControls=[],r.resizeControlWidth=6,s){var m=new i.g(100,100).transform(r.svgNode.node.getCTM().inverse());r.polygon=r.svgNode.polygon("5,25 10,55 35,55 40,25").x(m.x).y(m.y).attr(r.attr)}else r.polygon=r.svgNode.polygon().attr(r.attr),r.polygon.plot(u.map((function(t){return[t.x,t.y]})));return r.initCameraControls(),c&&r.transform(c),r}return y(n,[{key:"updateFromOverlayEntry",value:function(t){throw"Not implemented"}},{key:"move",value:function(t,e){this.cameraControlsGroup.dx(t).dy(e)}},{key:"rotate",value:function(t){var e=T(this.polygon.array()[1],this.polygon.array()[2]);this.cameraControlsGroup.rotate(t,e[0],e[1])}},{key:"transform",value:function(t){this.controlGroup.transform(t)}},{key:"initCameraControls",value:function(){var t=this,e=this.polygon,n=this.svgNode;this.controlGroup.add(e);var r,o,a=this;!function(){var t=b(e.array()[1],e.array()[2],n.bbox());(r=n.circle(6).move(t[0]-3,t[1]-3).fill("red").attr({class:"shape-control"})).attr({mapObjectType:"edit-control"});var s=T(e.array()[1],e.array()[2]);(o=n.circle(6).move(s[0]-3,s[1]-3).fill("red").attr({class:"shape-control"})).attr({mapObjectType:"edit-control"}),a.controlGroup.add(o),r.on("mousedown",(function(t){t.stopPropagation(),this.draggable(!1);var n=E(t.clientX,t.clientY,a.svgNode.node),r=function(t,r){var o=T(e.array()[1],e.array()[2]),s=new i.g(o[0],o[1]),u=[(s=s.transform(a.cameraControlsGroup.transform())).x,s.y],c=E(t.clientX,t.clientY,a.svgNode.node),l=S(n,a.svgNode.node.nearestViewportElement.viewBox.baseVal),f=S([c.x,c.y],a.svgNode.node.nearestViewportElement.viewBox.baseVal),h=S(u,a.svgNode.node.nearestViewportElement.viewBox.baseVal),d=Math.atan((f[0]-h[0])/(f[1]-h[1])),p=Math.atan((l[0]-h[0])/(l[1]-h[1]));p=180*p/Math.PI,d=180*d/Math.PI,f[1]<h[1]&&(d-=180),l[1]<h[1]&&(p-=180),a.controlGroup.rotate(d-p,o[0],o[1]),n=[c.x,c.y]};r(t),window.addEventListener("mousemove",r);window.addEventListener("mouseup",(function t(){window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",t),a.draggable(!0)}))}))}();for(var s=e.array(),u=function(i){var u=s[i],c=a.shapeControlsLayer.rect(a.resizeControlWidth,a.resizeControlWidth).move(u[0]-a.resizeControlWidth/2,u[1]-a.resizeControlWidth/2).attr({"stroke-width":.5,stroke:"#6e6e6e",fill:"white"});c.attr({mapObjectType:"edit-control"}),c.draggable(),t.resizeControls.push({vIndex:i,control:c}),c.on("dragmove",(function(t){var n=i,r=e.array();r[n]=[t.detail.box.x+2,t.detail.box.y+2],e.plot(r)})),c.on("dragend",(function(){var t=b(e.array()[1],e.array()[2],n.bbox());r.move(t[0]-3,t[1]-3);var i=T(e.array()[1],e.array()[2]);o.move(i[0]-3,i[1]-3)}))},c=0;c<s.length;c++)u(c);this.controlGroup.add(r),this.draggable(!0),this.polygon.on("dragmove",(function(){a.resizeControls.forEach((function(t){var e=t.control,n=a.polygon.array()[t.vIndex];e.move(n[0]-a.resizeControlWidth/2,n[1]-a.resizeControlWidth/2)}))})),this.cameraControlsGroup=this.controlGroup,this.mainShape=e,w(this.controlGroup,e,a),x(a)}}]),n}(C),A=function(t){s(n,t);var e=c(n);function n(t){var i,r=t.svgRoot,o=t.svgNode,a=t.attr,s=t.points,u=t.startUserDrawing,c=t.name,l=t.overlayEntry,h=t.isReadOnly,d=t.isDraggable,p=t.isSelectable,m=t.maxPointsNumber,g=t.shapeControlsLayer;v(this,n),(i=e.call(this,h,o,l,p,d,g)).maxPointsNumber=m,i.resizeControlWidth=6,i.resizeControlScaledWidth=i.resizeControlWidth,i.resizeControlStrokeWidth=.5,i.resizeControlStrokeScaledWidth=i.resizeControlStrokeWidth,i.resizeControls=[],i.attr=a||{},i.isEditingName=new k(!1),i.name=new k(null!=c?c:"Zone Name"),i.polygon=r.polygon().attr(i.attr);var y=f(i);if(u){var b=function(t){13==t.keyCode&&(y.polygon.draw("done"),y.polygon.off("drawstart"))};if(i.polygon.draw(),i.polygon.on("drawstart",(function(t){document.addEventListener("keydown",b)})),void 0!==i.maxPointsNumber){var w=1;i.polygon.on("drawpoint",(function(t){++w==y.maxPointsNumber&&(y.polygon.draw("done"),y.polygon.off("drawstart"))}))}i.polygon.on("drawstop",(function(){y.polygon.addTo(y.svgNode),document.removeEventListener("keydown",b),y.initZoneControls()}))}else s&&(y.polygon.addTo(y.svgNode),i.polygon.plot(s.map((function(t){return[t.x,t.y]})))),i.initZoneControls();return i.mainShape=i.polygon,i}return y(n,[{key:"cancelDraw",value:function(){this.polygon.draw("cancel"),this.controlGroup.remove()}},{key:"on",value:function(t,e,n){"startResize"==t?this.resizeControls.forEach((function(t){return t.control.on("dragstart",(function(t){e(t)}))})):"drawstop"==t?this.polygon.on("drawstop",e):"zoneSelected"==t?this.onSelect((function(t,n){n&&e({})})):"zoneLostSelection"==t?this.onSelect((function(t,n){n||e({})})):this.controlGroup.on(t,(function(t){n&&t.stopPropagation(),e(t)}))}},{key:"updateFromOverlayEntry",value:function(t){this.overlayEntry=t,this.name.set(t.name),this.attr.fill=t.color,this.polygon.attr(this.attr)}},{key:"initZoneControls",value:function(){var t=this,e=t.polygon;this.controlGroup.node.classList.add("zone-control-group"),this.controlGroup.node.classList.add("svg-control-group"),this.controlGroup.add(e),this.controlGroup.on("dragmove",(function(){t.overlayEntry.points=t.polygon.array().map((function(t){return{x:t[0],y:t[1]}})),t.resizeControls.forEach((function(e){var n=e.control,i=t.polygon.array()[e.vIndex];n.move(i[0]-t.resizeControlScaledWidth/2,i[1]-t.resizeControlScaledWidth/2)}))}));for(var n=e.array(),i=function(i){var r=n[i],o=t.shapeControlsLayer.rect(t.resizeControlWidth,t.resizeControlWidth).move(r[0]-t.resizeControlWidth/2,r[1]-t.resizeControlWidth/2).attr({"stroke-width":t.resizeControlStrokeWidth,stroke:"#6e6e6e",fill:"white"});o.attr({mapObjectType:"edit-control"}),t.isReadOnly||o.draggable(),t.resizeControls.push({vIndex:i,control:o}),t.isReadOnly||(o.on("dragmove",(function(n){var r=i,o=e.array();o[r]=[n.detail.box.x+t.resizeControlScaledWidth/2,n.detail.box.y+t.resizeControlScaledWidth/2],e.plot(o),t.overlayEntry.points=t.polygon.array().map((function(t){return{x:t[0],y:t[1]}})),e.fire("resize")})),o.on("dragend",(function(){t.controlGroup.fire("zoneHasBeenResized")})))},r=0;r<n.length;r++)i(r);!function(){var e=function(){return t.polygon.height()/8},n=function(){var t=e();return"".concat(t,"px")},i=t.name.get(),r=t.svgNode.text(i);r.node.style.fontSize=n();var o={x:t.polygon.cx(),y:t.polygon.cy()},a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("value",i),r.attr({x:o.x-r.node.textLength.baseVal.value/2,y:o.y-e()/2});var s=t.svgNode.foreignObject(r.bbox().width,r.bbox().height).move(o.x,o.y);s.node.style.fontSize=n(),s.node.style.visibility="collapse",s.add(a),t.name.onChange((function(t,e){r.text(e)})),a.addEventListener("change",(function(e){t.name.set(e.target.value)})),r.on("click",(function(){t.isEditingName.set(!0),r.node.style.visibility="collapse",s.node.style.visibility="visible",a.style.background="none",a.focus()})),t.isEditingName.onChange((function(t,e){!1===e&&(r.node.style.visibility="visible",s.node.style.visibility="collapse")})),t.name.onChange((function(e,n){t.overlayEntry.name=n,t.controlGroup.fire("zoneNameChanged")})),t.controlGroup.add(s),t.controlGroup.add(r),t.polygon.on("resize",(function(i){var o=t.polygon.cx(),a=t.polygon.cy();r.attr({x:o-r.node.textLength.baseVal.value/2,y:a-e()/2}),r.node.style.fontSize=n()}))}(),t.draggable(!0),w(t.controlGroup,e,t),x(t),t.select(!1)}},{key:"handleZoom",value:function(t){var e=this,n=e.resizeControlStrokeWidth/t,i=e.resizeControlWidth/t;this.resizeControls.forEach((function(t){t.control.width(i),t.control.height(i),t.control.attr({"stroke-width":n});var r=e.polygon.array()[t.vIndex];t.control.move(r[0]-i/2,r[1]-i/2)})),e.resizeControlScaledWidth=i,e.resizeControlStrokeScaledWidth=n}}]),n}(C),_=function(t){s(n,t);var e=c(n);function n(t){var i,r=t.svgRoot,o=t.svgNode,a=t.attr,s=t.center,u=t.size,c=t.startUserDrawing,l=t.overlayEntry,h=t.isReadOnly,d=t.isDraggable,p=t.isSelectable,m=t.shapeControlsLayer;v(this,n),(i=e.call(this,h,o,l,p,d,m)).attr=a||{},i.circle=r.circle().attr(i.attr),i.resizeControls=[],i.resizeControlWidth=6,i.mainShape=i.circle,i.size=u;var g=f(i);return c?(i.circle.draw(),i.circle.on("drawstop",(function(){g.circle.addTo(o),g.initializeControls()}))):(g.circle.addTo(o),i.circle.width(u),i.circle.center(s.x,s.y),i.initializeControls()),i}return y(n,[{key:"updateFromOverlayEntry",value:function(t){this.center(t.center.x,t.center.y,!0)}},{key:"cancelDraw",value:function(){this.circle.draw("cancel"),this.controlGroup.remove()}},{key:"on",value:function(t,e,n){this.circle.on(t,(function(t){n&&t.stopPropagation(),e(t)}))}},{key:"initializeControls",value:function(){var t=this,e=t.circle;t.isSelected=!0,t.controlGroup.add(e),t.circle.node.classList.add("svg-control-group"),t.circle.node.classList.add("cursor-pointer");for(var n=e.rx(),i=function(n){return[[e.cx()-n-t.resizeControlWidth/2,e.cy()-t.resizeControlWidth/2],[e.cx()-t.resizeControlWidth/2,e.cy()-n-t.resizeControlWidth/2],[e.cx()+n-t.resizeControlWidth/2,e.cy()-t.resizeControlWidth/2],[e.cx()-t.resizeControlWidth/2,e.cy()+n-t.resizeControlWidth/2]]},r=i(n),o=function(n){var o=r[n],a=t.shapeControlsLayer.rect(t.resizeControlWidth,t.resizeControlWidth).move(o[0],o[1]).attr({"stroke-width":.5,stroke:"#6e6e6e",fill:"white"});a.attr({mapObjectType:"edit-control"}),t.resizeControls.push({vIndex:n,control:a}),a.on("mousedown",(function(r){r.stopPropagation(),t.draggable(!1);var o=E(r.clientX,r.clientY,t.svgNode.node),a=function(r,a){var s,u=E(r.clientX,r.clientY,t.svgNode.node);s=0==n?o.x-u.x:2==n?u.x-o.x:3==n?u.y-o.y:o.y-u.y,e.radius(e.rx()+s),o=u;for(var c=i(e.rx()),l=0;l<4;l++)t.resizeControls[l].control.move(c[l][0],c[l][1])};window.addEventListener("mousemove",a);window.addEventListener("mouseup",(function e(){window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",e),t.draggable(!0)}))}))},a=0;a<r.length;a++)o(a);t.draggable(!0),t.controlGroup.on("dragmove",(function(n){for(var r=i(e.rx()),o=0;o<4;o++){var a=t.resizeControls[o].control,s=r[o];a.move(s[0],s[1])}})),w(t.controlGroup,e,t),x(t),t.select(!1)}},{key:"scaleSize",value:function(t){this.circle.width(this.size/t)}}]),n}(C),P=n(1),N=n.n(P),O=(n(23),n(20)),I=n.n(O);function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return U(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r,o=!0,a=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,r=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw r}}}}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}window.Orions.SvgMapEditor={layoutEditors:{},init:function(t,e,n,r,o){var a=function(t,e,n,r,o){var a=r.isReadOnly,s=r.zoneColor,u=r.circleColor,c=r.cameraColor,l="#"+t,f=document.querySelector(l+" .map-container svg"),h=(I()(f,{zoomScaleSensitivity:.4,controlIconsEnabled:!0,onZoom:function(t){x.forEach((function(e){return e.handleZoom(t)}))},dblClickZoomEnabled:!1}),Object(i.h)(l+" .svg-pan-zoom_viewport")),d=h.group(),p=h.group(),m=h.group(),v=h.group(),g=function(){document.querySelector(l+" .heatmapBtn").setAttribute("disabled","disabled"),e.invokeMethodAsync("CloseHyperTagInfoPopup")};document.addEventListener("click",g);var y,b,w,x=[],S=[],T=[],E={"fill-opacity":.5,"stroke-width":.5,stroke:"#6e6e6e"},k=function(t,n){var i,r,o,s=new _({svgRoot:h,svgNode:m,attr:(o=R(R({},E),{},{fill:u,"fill-opacity":1,"stroke-width":.1}),o),center:t.center,size:t.size,startUserDrawing:n,overlayEntry:t,isReadOnly:a,isDraggable:null===(i=t.isDraggable)||void 0===i||i,isSelectable:null===(r=t.isSelectable)||void 0===r||r,shapeControlsLayer:v});s.persist=t.persist,T.push(s);var c=function(){var n=t.eventHandlerMappings[l];s.on(l,(function(t){var i={clientX:t.clientX,clientY:t.clientY};e.invokeMethodAsync(n.componentMethodName,s.overlayEntry,i)}),n.stopPropagation)};for(var l in t.eventHandlerMappings)c();return s.onRemove((function(t){T.splice(T.findIndex((function(e){return e==t})),1)})),s},C=function(t,n){var i,r,o,u,c=new A({svgRoot:h,svgNode:d,attr:(o=t,u=R(R({},E),{},{fill:o.color?o.color:s}),u),points:t.points,startUserDrawing:n,name:t.name,overlayEntry:t,isReadOnly:a,isDraggable:null===(i=t.isDraggable)||void 0===i||i,isSelectable:null===(r=t.isSelectable)||void 0===r||r,maxPointsNumber:4,shapeControlsLayer:v});c.persist=t.persist,x.push(c),c.on("controlDeleted",(function(t){x.splice(x.findIndex((function(e){return e==t})),1)}));var l=function(){var n=f,i=t.eventHandlerMappings[f];c.on(n,(function(t){var n={clientX:t.clientX,clientY:t.clientY};e.invokeMethodAsync(i.componentMethodName,c.overlayEntry,n)}),i.stopPropagation)};for(var f in t.eventHandlerMappings)l();return c},P=function(t,e){var n,i,r=new M({svgRoot:h,svgNode:p,attr:R(R({},E),{},{fill:c}),points:t.points,transformMatrix:t.transformMatrix,isDefaultPosition:e,overlayEntry:t,isReadOnly:a,isDraggable:null===(n=t.isDraggable)||void 0===n||n,isSelectable:null===(i=t.isSelectable)||void 0===i||i,shapeControlsLayer:v});return r.persist=t.persist,S.push(r),r.onRemove((function(t){S.splice(S.findIndex((function(e){return e==t})),1)})),r},N=function(t){switch(t.entryType){case"circle":k(t,!1);break;case"zone":C(t,!1);break;case"camera":P(t,!1)}};function O(){for(var t=document.querySelectorAll(l+" .buttons-container .btn"),e=0;e<t.length;e++)t[e].classList.remove("active")}return function(t){t.zones&&t.zones.forEach((function(t){t.persist=!0,C(t)}));t.circles&&t.circles.forEach((function(t){t.persist=!0,k(t)}));t.cameras&&t.cameras.forEach((function(t){t.persist=!0,P(t)}))}(n),{update:function(t,e,n){"batch"==n?t.forEach((function(t){t.overlayEntry=JSON.parse(t.overlayEntry),t.overlayEntry.persist=e})):(t.overlayEntry=JSON.parse(t.overlayEntry),t.overlayEntry.persist=e);var i=[].concat(T,x,S),r=function(t){switch(t.type){case"addOrUpdate":var e=i.find((function(e){return e.overlayEntry.entryType==t.overlayEntry.entryType&&e.overlayEntry.id==t.overlayEntry.id&&null!=e.overlayEntry.id}));e?e.updateFromOverlayEntry(t.overlayEntry):N(t.overlayEntry);break;case"delete":var n=i.find((function(e){return e.overlayEntry.entryType==t.overlayEntry.entryType&&e.overlayEntry.id==t.overlayEntry.id&&null!=e.overlayEntry.id}));n&&n.remove()}};"batch"==n?t.forEach((function(t){r(t)})):r(t)},destroy:function(){document.removeEventListener("click",g)},addCircleTool:function(){y&&y.cancelDraw();O(),b=k({persist:!0},!0),y=b,document.querySelector(l+" .circleToolBtn").classList.add("active"),b.on("drawstop",(function(t){y=null,O()}))},addAreaTool:function(){y&&y.cancelDraw();O(),w=C({persist:!0},!0),y=w,document.querySelector(l+" .areaToolBtn").classList.add("active"),w.on("drawstop",(function(t){var n,i;y=null,O(),i={points:(n=w).polygon.array().map((function(t){return{x:t[0],y:t[1]}})),color:n.attr.fill,name:n.name.get()},e.invokeMethodAsync("AddNewZoneToVm",i).then((function(t){n.overlayEntry=t;var i=function(){var i=t.eventHandlerMappings[r],o=r;n.on(o,(function(t){var r={clientX:t.clientX,clientY:t.clientY};e.invokeMethodAsync(i.componentMethodName,n.overlayEntry,r)}),i.stopPropagation)};for(var r in t.eventHandlerMappings)i()}))}))},addCameraTool:function(){O(),P({persist:!0},!0)}}}(t,e,n,r);this.layoutEditors[t]=a},update:function(t,e,n,i){this.layoutEditors[t].update(e,n,i)},addCircleTool:function(t){this.layoutEditors[t].addCircleTool()},addAreaTool:function(t){this.layoutEditors[t].addAreaTool()},addCameraTool:function(t){this.layoutEditors[t].addCameraTool()},makePopupDraggable:function(t){var e=document.getElementById(t);new MutationObserver((function(t,e){var n,i=j(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;if("childList"===r.type){var o=Array.from(r.addedNodes);if(o.some((function(t){return t.matches&&t.matches(".draggable-popup")}))){var a=o.filter((function(t){return t.matches(".draggable-popup")}))[0];N()(a).draggable();break}}}}catch(t){i.e(t)}finally{i.f()}e.disconnect()})).observe(e,{childList:!0})},destroy:function(t){this.layoutEditors[t].destroy()}}},function(t,e,n){var i=n(31);t.exports=i},function(t,e,n){(function(t){!function(){var n="undefined"!=typeof window?window:t,i={};for(var r in function(t,e,n){var i,r="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},o=void 0!==t&&t===this?this:void 0!==e&&null!=e?e:this;function a(){a=function(){},o.Symbol||(o.Symbol=u)}var s,u=(s=0,function(t){return"jscomp_symbol_"+(t||"")+s++});function c(){a();var t=o.Symbol.iterator;t||(t=o.Symbol.iterator=o.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&r(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return l(this)}}),c=function(){}}function l(t){var e=0;return f((function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}))}function f(t){return c(),(t={next:t})[o.Symbol.iterator]=function(){return this},t}function h(t){c();var e=t[Symbol.iterator];return e?e.call(t):l(t)}function d(t,e){if(e){for(var n=o,i=t.split("."),a=0;a<i.length-1;a++){var s=i[a];s in n||(n[s]={}),n=n[s]}(s=e(a=n[i=i[i.length-1]]))!=a&&null!=s&&r(n,i,{configurable:!0,writable:!0,value:s})}}function p(t){return function(t){function e(e){return t.next(e)}function n(e){return t.throw(e)}return new Promise((function(i,r){!function t(o){o.done?i(o.value):Promise.resolve(o.value).then(e,n).then(t,r)}(t.next())}))}(t())}d("Promise",(function(t){function e(t){this.b=0,this.g=void 0,this.a=[];var e=this.c();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){null==this.a&&(this.a=[],this.f()),this.a.push(t)},n.prototype.f=function(){var t=this;this.c((function(){t.h()}))};var r=o.setTimeout;n.prototype.c=function(t){r(t,0)},n.prototype.h=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.g(t)}}}this.a=null},n.prototype.g=function(t){this.c((function(){throw t}))},e.prototype.c=function(){function t(t){return function(i){n||(n=!0,t.call(e,i))}}var e=this,n=!1;return{resolve:t(this.u),reject:t(this.f)}},e.prototype.u=function(t){if(t===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.v(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.o(t):this.h(t)}},e.prototype.o=function(t){var e=void 0;try{e=t.then}catch(t){return void this.f(t)}"function"==typeof e?this.F(e,t):this.h(t)},e.prototype.f=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.g=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new n;return e.prototype.v=function(t){var e=this.c();t.kc(e.resolve,e.reject)},e.prototype.F=function(t,e){var n=this.c();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function i(t,e){return"function"==typeof t?function(e){try{r(t(e))}catch(t){o(t)}}:e}var r,o,a=new e((function(t,e){r=t,o=e}));return this.kc(i(t,r),i(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.kc=function(t,e){function n(){switch(i.b){case 1:t(i.g);break;case 2:e(i.g);break;default:throw Error("Unexpected state: "+i.b)}}var i=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=h(t),o=r.next();!o.done;o=r.next())i(o.value).kc(e,n)}))},e.all=function(t){var n=h(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).kc(o(a.length-1),e),r=n.next()}while(!r.done)}))},e})),d("Promise.prototype.finally",(function(t){return t||function(t){return this.then((function(e){return Promise.resolve(t()).then((function(){return e}))}),(function(e){return Promise.resolve(t()).then((function(){throw e}))}))}}));var m,v="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)m=Object.setPrototypeOf;else{var g;t:{var y={};try{y.__proto__={Ne:!0},g=y.Ne;break t}catch(s){}g=!1}m=g?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var b=m;function w(t,e){if(t.prototype=v(e.prototype),t.prototype.constructor=t,b)b(t,e);else for(var n in e)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(e,n);i&&Object.defineProperty(t,n,i)}else t[n]=e[n];t.Dg=e.prototype}function x(){this.g=!1,this.c=null,this.s=void 0,this.j=1,this.b=this.f=0,this.i=this.a=null}function S(t){if(t.g)throw new TypeError("Generator is already running");t.g=!0}function T(t,e){t.a={Yd:e,ie:!0},t.j=t.f||t.b}function E(t,e,n){return t.j=n,{value:e}}function k(t){t.j=0}function C(t,e,n){t.f=e,null!=n&&(t.b=n)}function M(t,e){t.f=0,t.b=e||0}function A(t,e){t.j=e,t.f=0}function _(t){t.f=0;var e=t.a.Yd;return t.a=null,e}function P(t){t.i=[t.a],t.f=0,t.b=0}function N(t,e){var n=t.i.splice(0)[0];(n=t.a=t.a||n)?n.ie?t.j=t.f||t.b:null!=n.C&&t.b<n.C?(t.j=n.C,t.a=null):t.j=t.b:t.j=e}function O(t){this.a=new x,this.b=t}function I(t,e,n,i){try{var r=e.call(t.a.c,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return t.a.g=!1,r;var o=r.value}catch(e){return t.a.c=null,T(t.a,e),D(t)}return t.a.c=null,i.call(t.a,o),D(t)}function D(t){for(;t.a.j;)try{var e=t.b(t.a);if(e)return t.a.g=!1,{value:e.value,done:!1}}catch(e){t.a.s=void 0,T(t.a,e)}if(t.a.g=!1,t.a.a){if(e=t.a.a,t.a.a=null,e.ie)throw e.Yd;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function R(t){this.next=function(e){return S(t.a),t.a.c?e=I(t,t.a.c.next,e,t.a.h):(t.a.h(e),e=D(t)),e},this.throw=function(e){return S(t.a),t.a.c?e=I(t,t.a.c.throw,e,t.a.h):(T(t.a,e),e=D(t)),e},this.return=function(e){return function(t,e){S(t.a);var n=t.a.c;return n?I(t,"return"in n?n.return:function(t){return{value:t,done:!0}},e,t.a.return):(t.a.return(e),D(t))}(t,e)},c(),this[Symbol.iterator]=function(){return this}}function L(t,e){return R.prototype=t.prototype,new R(new O(e))}function j(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function U(t,e,n){t instanceof String&&(t=String(t));for(var i=t.length,r=0;r<i;r++){var o=t[r];if(e.call(n,o,r,t))return{fe:r,Ie:o}}return{fe:-1,Ie:void 0}}function z(t,e,n){if(null==t)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return t+""}x.prototype.h=function(t){this.s=t},x.prototype.return=function(t){this.a={return:t},this.j=this.b},x.prototype.C=function(t){this.j=t},d("WeakMap",(function(t){function e(t){if(this.a=(s+=Math.random()+1).toString(),t){a(),c(),t=h(t);for(var e;!(e=t.next()).done;)e=e.value,this.set(e[0],e[1])}}function n(t){j(t,o)||r(t,o,{value:{}})}function i(t){var e=Object[t];e&&(Object[t]=function(t){return n(t),e(t)})}if(function(){if(!t||!Object.seal)return!1;try{var e=Object.seal({}),n=Object.seal({}),i=new t([[e,2],[n,3]]);return 2==i.get(e)&&3==i.get(n)&&(i.delete(e),i.set(n,4),!i.has(e)&&4==i.get(n))}catch(t){return!1}}())return t;var o="$jscomp_hidden_"+Math.random();i("freeze"),i("preventExtensions"),i("seal");var s=0;return e.prototype.set=function(t,e){if(n(t),!j(t,o))throw Error("WeakMap key fail: "+t);return t[o][this.a]=e,this},e.prototype.get=function(t){return j(t,o)?t[o][this.a]:void 0},e.prototype.has=function(t){return j(t,o)&&j(t[o],this.a)},e.prototype.delete=function(t){return!(!j(t,o)||!j(t[o],this.a))&&delete t[o][this.a]},e})),d("Map",(function(t){function e(){var t={};return t.Ja=t.next=t.head=t}function n(t,e){var n=t.a;return f((function(){if(n){for(;n.head!=t.a;)n=n.Ja;for(;n.next!=n.head;)return n=n.next,{done:!1,value:e(n)};n=null}return{done:!0,value:void 0}}))}function i(t,e){var n=e&&typeof e;"object"==n||"function"==n?o.has(e)?n=o.get(e):(n=""+ ++s,o.set(e,n)):n="p_"+e;var i=t.b[n];if(i&&j(t.b,n))for(var r=0;r<i.length;r++){var a=i[r];if(e!=e&&a.key!=a.key||e===a.key)return{id:n,list:i,index:r,ba:a}}return{id:n,list:i,index:-1,ba:void 0}}function r(t){if(this.b={},this.a=e(),this.size=0,t){t=h(t);for(var n;!(n=t.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!t||"function"!=typeof t||!t.prototype.entries||"function"!=typeof Object.seal)return!1;try{var e=Object.seal({x:4}),n=new t(h([[e,"s"]]));if("s"!=n.get(e)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==e&&"s"==r.value[1]&&!((r=i.next()).done||4!=r.value[0].x||"t"!=r.value[1]||!i.next().done)}catch(t){return!1}}())return t;a(),c();var o=new WeakMap;r.prototype.set=function(t,e){var n=i(this,t);return n.list||(n.list=this.b[n.id]=[]),n.ba?n.ba.value=e:(n.ba={next:this.a,Ja:this.a.Ja,head:this.a,key:t,value:e},n.list.push(n.ba),this.a.Ja.next=n.ba,this.a.Ja=n.ba,this.size++),this},r.prototype.delete=function(t){return!(!(t=i(this,t)).ba||!t.list)&&(t.list.splice(t.index,1),t.list.length||delete this.b[t.id],t.ba.Ja.next=t.ba.next,t.ba.next.Ja=t.ba.Ja,t.ba.head=null,this.size--,!0)},r.prototype.clear=function(){this.b={},this.a=this.a.Ja=e(),this.size=0},r.prototype.has=function(t){return!!i(this,t).ba},r.prototype.get=function(t){return(t=i(this,t).ba)&&t.value},r.prototype.entries=function(){return n(this,(function(t){return[t.key,t.value]}))},r.prototype.keys=function(){return n(this,(function(t){return t.key}))},r.prototype.values=function(){return n(this,(function(t){return t.value}))},r.prototype.forEach=function(t,e){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,t.call(e,n[1],n[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var s=0;return r})),d("Set",(function(t){function e(t){if(this.a=new Map,t){t=h(t);for(var e;!(e=t.next()).done;)this.add(e.value)}this.size=this.a.size}return function(){if(!t||"function"!=typeof t||!t.prototype.entries||"function"!=typeof Object.seal)return!1;try{var e=Object.seal({x:4}),n=new t(h([e]));if(!n.has(e)||1!=n.size||n.add(e)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==e&&r.value[1]==e&&(!(r=i.next()).done&&r.value[0]!=e&&4==r.value[0].x&&r.value[1]==r.value[0]&&i.next().done)}catch(t){return!1}}()?t:(a(),c(),e.prototype.add=function(t){return this.a.set(t,t),this.size=this.a.size,this},e.prototype.delete=function(t){return t=this.a.delete(t),this.size=this.a.size,t},e.prototype.clear=function(){this.a.clear(),this.size=0},e.prototype.has=function(t){return this.a.has(t)},e.prototype.entries=function(){return this.a.entries()},e.prototype.values=function(){return this.a.values()},e.prototype.keys=e.prototype.values,e.prototype[Symbol.iterator]=e.prototype.values,e.prototype.forEach=function(t,e){var n=this;this.a.forEach((function(i){return t.call(e,i,i,n)}))},e)})),d("Array.prototype.findIndex",(function(t){return t||function(t,e){return U(this,t,e).fe}})),d("Array.prototype.keys",(function(t){return t||function(){return function(t,e){c(),t instanceof String&&(t+="");var n=0,i={next:function(){if(n<t.length){var r=n++;return{value:e(r,t[r]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i}(this,(function(t){return t}))}})),d("Object.is",(function(t){return t||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}})),d("Array.prototype.includes",(function(t){return t||function(t,e){var n=this;n instanceof String&&(n=String(n));var i=n.length,r=e||0;for(0>r&&(r=Math.max(r+i,0));r<i;r++){var o=n[r];if(o===t||Object.is(o,t))return!0}return!1}})),d("String.prototype.includes",(function(t){return t||function(t,e){return-1!==z(this,t,"includes").indexOf(t,e||0)}})),d("Array.from",(function(t){return t||function(t,e,n){c(),e=null!=e?e:function(t){return t};var i=[],r=t[Symbol.iterator];if("function"==typeof r)for(t=r.call(t);!(r=t.next()).done;)i.push(e.call(n,r.value));else{r=t.length;for(var o=0;o<r;o++)i.push(e.call(n,t[o]))}return i}})),d("String.prototype.startsWith",(function(t){return t||function(t,e){for(var n=z(this,t,"startsWith"),i=n.length,r=t.length,o=Math.max(0,Math.min(0|e,n.length)),a=0;a<r&&o<i;)if(n[o++]!=t[a++])return!1;return a>=r}})),d("Array.prototype.find",(function(t){return t||function(t,e){return U(this,t,e).Ie}}));var B="function"==typeof Object.assign?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)j(i,r)&&(t[r]=i[r])}return t};d("Object.assign",(function(t){return t||B}));var F=this;function H(t,e){var n,i=t.split("."),r=F;i[0]in r||!r.execScript||r.execScript("var "+i[0]);for(;i.length&&(n=i.shift());)i.length||void 0===e?r=r[n]?r[n]:r[n]={}:r[n]=e}function q(t,e){function n(){}n.prototype=e.prototype,t.Dg=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Og=function(t,n,i){return e.prototype[n].apply(t,Array.prototype.slice.call(arguments,2))}}function K(t){this.c=Math.exp(Math.log(.5)/t),this.b=this.a=0}function $(t,e,n){var i=Math.pow(t.c,e);n=n*(1-i)+i*t.a,isNaN(n)||(t.a=n,t.b+=e)}function V(t){return t.a/(1-Math.pow(t.c,t.b))}function W(){this.b=new K(2),this.c=new K(5),this.a=0}F.a=!0,W.prototype.getBandwidthEstimate=function(t){return 128e3>this.a?t:Math.min(V(this.b),V(this.c))};var G={lb:0,jc:function(){},Z:function(){},error:function(){},m:function(){},info:function(){},debug:function(){},D:function(){},J:function(){}};t.console&&t.console.log.bind&&(G.Z=console.warn.bind(console),G.jc=console.error.bind(console),1<=G.lb&&(G.error=console.error.bind(console)),2<=G.lb&&(G.m=console.warn.bind(console)),3<=G.lb&&(G.info=console.info.bind(console)),4<=G.lb&&(G.debug=console.log.bind(console)),5<=G.lb&&(G.D=console.debug.bind(console)),6<=G.lb&&(G.J=console.debug.bind(console)));var X=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function Y(t){var e;t instanceof Y?(Z(this,t.xa),this.ib=t.ib,this.wa=t.wa,J(this,t.Ib),this.la=t.la,Q(this,t.a.clone()),this.Xa=t.Xa):t&&(e=String(t).match(X))?(Z(this,e[1]||"",!0),this.ib=tt(e[2]||""),this.wa=tt(e[3]||"",!0),J(this,e[4]),this.la=tt(e[5]||"",!0),Q(this,e[6]||"",!0),this.Xa=tt(e[7]||"")):this.a=new ut(null)}function Z(t,e,n){t.xa=n?tt(e,!0):e,t.xa&&(t.xa=t.xa.replace(/:$/,""))}function J(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.Ib=e}else t.Ib=null}function Q(t,e,n){e instanceof ut?t.a=e:(n||(e=et(e,at)),t.a=new ut(e))}function tt(t,e){return t?e?decodeURI(t):decodeURIComponent(t):""}function et(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,nt),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function nt(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}(i=Y.prototype).xa="",i.ib="",i.wa="",i.Ib=null,i.la="",i.Xa="",i.toString=function(){var t=[],e=this.xa;if(e&&t.push(et(e,it,!0),":"),e=this.wa){t.push("//");var n=this.ib;n&&t.push(et(n,it,!0),"@"),t.push(encodeURIComponent(e).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.Ib)&&t.push(":",String(e))}return(e=this.la)&&(this.wa&&"/"!=e.charAt(0)&&t.push("/"),t.push(et(e,"/"==e.charAt(0)?ot:rt,!0))),(e=this.a.toString())&&t.push("?",e),(e=this.Xa)&&t.push("#",et(e,st)),t.join("")},i.resolve=function(t){var e=this.clone();"data"===e.xa&&(e=new Y);var n=!!t.xa;n?Z(e,t.xa):n=!!t.ib,n?e.ib=t.ib:n=!!t.wa,n?e.wa=t.wa:n=null!=t.Ib;var i=t.la;if(n)J(e,t.Ib);else if(n=!!t.la){if("/"!=i.charAt(0))if(this.wa&&!this.la)i="/"+i;else{var r=e.la.lastIndexOf("/");-1!=r&&(i=e.la.substr(0,r+1)+i)}if(".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}i=o.join("/")}}return n?e.la=i:n=""!==t.a.toString(),n?Q(e,t.a.clone()):n=!!t.Xa,n&&(e.Xa=t.Xa),e},i.clone=function(){return new Y(this)};var it=/[#\/\?@]/g,rt=/[#\?:]/g,ot=/[#\?]/g,at=/[#\?@]/g,st=/#/g;function ut(t){this.a=t||null}function ct(t){this.b=t,this.a=null}function lt(t){this.b=t,this.a=null}function ft(t,e){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0};this.i=null==t.maxAttempts?n.maxAttempts:t.maxAttempts,this.f=null==t.baseDelay?n.baseDelay:t.baseDelay,this.h=null==t.fuzzFactor?n.fuzzFactor:t.fuzzFactor,this.g=null==t.backoffFactor?n.backoffFactor:t.backoffFactor,this.a=0,this.b=this.f,(this.c=void 0!==e&&e)&&(this.a=1)}function ht(t){return p((function e(){var n,i;return L(e,(function(e){switch(e.j){case 1:if(t.a>=t.i){if(!t.c)return e.return(Promise.reject());t.a=1,t.b=t.f}return n=t.a,t.a++,0==n?e.return():(i=t.b*(1+(2*Math.random()-1)*t.h),E(e,new Promise((function(t){new lt(t).T(i/1e3)})),2));case 2:t.b*=t.g,k(e)}}))}))}function dt(t,e,n,i){for(var r=[],o=3;o<arguments.length;++o)r[o-3]=arguments[o];this.severity=t,this.category=e,this.code=n,this.data=r,this.handled=!1}function pt(){var t,e,n=new Promise((function(n,i){t=n,e=i}));return n.resolve=t,n.reject=e,n}function mt(t,e){this.promise=t,this.me=e,this.a=!1}function vt(t){return new mt(Promise.reject(t),(function(){return Promise.resolve()}))}function gt(){var t=Promise.reject(new dt(2,7,7001));return t.catch((function(){})),new mt(t,(function(){return Promise.resolve()}))}function yt(t){return new mt(Promise.resolve(t),(function(){return Promise.resolve()}))}function bt(t){return new mt(t,(function(){return t.catch((function(){}))}))}function wt(t){return new mt(Promise.all(t.map((function(t){return t.promise}))),(function(){return Promise.all(t.map((function(t){return t.abort()})))}))}function xt(t,e,n){try{var i=t(e);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then((function(){})).catch((function(){}))})}catch(t){return n.reject(t),function(){return Promise.resolve()}}}function St(e,n){for(var i in n=void 0===n?{}:n)this[i]=n[i];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=t.performance&&t.performance.now?t.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function Tt(){this.a={}}function Et(){this.Sc=new Tt,this.gc=this}function kt(t){var e=new Set;return function t(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(e.has(n))return null;var i=n.constructor==Array;if(n.constructor!=Object&&!i)return null;e.add(n);var r,o=i?[]:{};for(r in n)o[r]=t(n[r]);return i&&(o.length=n.length),o}}(t)}function Ct(t,e){return!("number"!=typeof t||"number"!=typeof e||!isNaN(t)||!isNaN(e))||t===e}function Mt(t,e){var n=t.indexOf(e);-1<n&&t.splice(n,1)}function At(t,e,n){if(n||(n=Ct),t.length!=e.length)return!1;e=e.slice();for(var i={},r=(t=h(t)).next();!r.done;i={item:i.item},r=t.next()){if(i.item=r.value,-1==(r=e.findIndex(function(t){return function(e){return n(t.item,e)}}(i))))return!1;e[r]=e[e.length-1],e.pop()}return 0==e.length}function _t(){this.a=[]}function Pt(t,e){t.a.push(e.finally((function(){Mt(t.a,e)})))}function Nt(t){Et.call(this),this.f=!1,this.g=new _t,this.a=new Set,this.b=new Set,this.c=t||null}(i=ut.prototype).ja=null,i.nc=null,i.add=function(t,e){if(!this.ja&&(this.ja={},this.nc=0,this.a))for(var n=this.a.split("&"),i=0;i<n.length;i++){var r=n[i].indexOf("="),o=null;if(0<=r){var a=n[i].substring(0,r);o=n[i].substring(r+1)}else a=n[i];a=decodeURIComponent(a.replace(/\+/g," ")),o=o||"",this.add(a,decodeURIComponent(o.replace(/\+/g," ")))}return this.a=null,(n=this.ja.hasOwnProperty(t)&&this.ja[t])||(this.ja[t]=n=[]),n.push(e),this.nc++,this},i.toString=function(){if(this.a)return this.a;if(!this.ja)return"";var t,e=[];for(t in this.ja)for(var n=encodeURIComponent(t),i=this.ja[t],r=0;r<i.length;r++){var o=n;""!==i[r]&&(o+="="+encodeURIComponent(i[r])),e.push(o)}return this.a=e.join("&")},i.clone=function(){var t=new ut;if(t.a=this.a,this.ja){var e,n={};for(e in this.ja)n[e]=this.ja[e].concat();t.ja=n,t.nc=this.nc}return t},ct.prototype.T=function(e){var n=this;this.stop();var i=!0,r=null;return this.a=function(){t.clearTimeout(r),i=!1},r=t.setTimeout((function(){i&&n.b()}),1e3*e),this},ct.prototype.stop=function(){this.a&&(this.a(),this.a=null)},H("shaka.util.Timer",lt),lt.prototype.Gc=function(){return this.stop(),this.b(),this},lt.prototype.tickNow=lt.prototype.Gc,lt.prototype.T=function(t){var e=this;return this.stop(),this.a=new ct((function(){e.b()})).T(t),this},lt.prototype.tickAfter=lt.prototype.T,lt.prototype.Ra=function(t){var e=this;return this.stop(),this.a=new ct((function(){e.a.T(t),e.b()})).T(t),this},lt.prototype.tickEvery=lt.prototype.Ra,lt.prototype.stop=function(){this.a&&(this.a.stop(),this.a=null)},lt.prototype.stop=lt.prototype.stop,H("shaka.util.Error",dt),dt.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},dt.Severity={RECOVERABLE:1,CRITICAL:2},dt.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},dt.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013},pt.prototype.resolve=function(){},pt.prototype.reject=function(){},H("shaka.util.AbortableOperation",mt),mt.failed=vt,mt.aborted=gt,mt.completed=yt,mt.notAbortable=bt,mt.prototype.abort=function(){return this.a=!0,this.me()},mt.prototype.abort=mt.prototype.abort,mt.all=wt,mt.prototype.finally=function(t){return this.promise.then((function(){return t(!0)}),(function(){return t(!1)})),this},mt.prototype.finally=mt.prototype.finally,mt.prototype.X=function(t,e){function n(){return r.reject(new dt(2,7,7001)),i.abort()}var i=this,r=new pt;return this.promise.then((function(e){i.a?r.reject(new dt(2,7,7001)):t?n=xt(t,e,r):r.resolve(e)}),(function(t){e?n=xt(e,t,r):r.reject(t)})),new mt(r,(function(){return n()}))},mt.prototype.chain=mt.prototype.X,St.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},St.prototype.stopImmediatePropagation=function(){this.a=!0},St.prototype.stopPropagation=function(){},(i=Tt.prototype).push=function(t,e){this.a.hasOwnProperty(t)?this.a[t].push(e):this.a[t]=[e]},i.get=function(t){return(t=this.a[t])?t.slice():null},i.getAll=function(){var t,e=[];for(t in this.a)e.push.apply(e,this.a[t]);return e},i.remove=function(t,e){var n=this.a[t];if(n)for(var i=0;i<n.length;++i)n[i]==e&&(n.splice(i,1),--i)},i.forEach=function(t){for(var e in this.a)t(e,this.a[e])},Et.prototype.addEventListener=function(t,e){this.Sc.push(t,e)},Et.prototype.removeEventListener=function(t,e){this.Sc.remove(t,e)},Et.prototype.dispatchEvent=function(t){for(var e=this.Sc.get(t.type)||[],n=0;n<e.length;++n){t.target=this.gc,t.currentTarget=this.gc;var i=e[n];try{i.handleEvent?i.handleEvent(t):i.call(this,t)}catch(t){G.error("Uncaught exception in event handler",t,t?t.message:null,t?t.stack:null)}if(t.a)break}return t.defaultPrevented},_t.prototype.destroy=function(){var t=[];return this.a.forEach((function(e){e.promise.catch((function(){})),t.push(e.abort())})),this.a=[],Promise.all(t)},q(Nt,Et),H("shaka.net.NetworkingEngine",Nt),Nt.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4},Nt.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3};var Ot={};function It(t,e,n){n=n||3;var i=Ot[t];(!i||n>=i.priority)&&(Ot[t]={priority:n,cg:e})}function Dt(t,e){return{uris:t,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:e,licenseRequestType:null,sessionId:null}}function Rt(){this.a=0}function Lt(t,e,n){mt.call(this,t,e),this.b=n}function jt(){}function Ut(){this.a=new Tt}function zt(t,e,n,i){this.target=t,this.type=e,this.listener=n,this.a=function(t,e){if(null==e)return!1;if("boolean"==typeof e)return e;var n=new Set(["passive","capture"]);return Object.keys(e).filter((function(t){return!n.has(t)})),function(t){var e=Bt;if(null==e){e=!1;try{var n={},i={get:function(){return e=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},t.addEventListener("test",i,n),t.removeEventListener("test",i,n)}catch(t){e=!1}Bt=e}return e||!1}(t)?e:e.capture||!1}(t,i),this.target.addEventListener(e,n,this.a)}Nt.registerScheme=It,Nt.unregisterScheme=function(t){delete Ot[t]},Nt.prototype.eg=function(t){this.a.add(t)},Nt.prototype.registerRequestFilter=Nt.prototype.eg,Nt.prototype.Fg=function(t){this.a.delete(t)},Nt.prototype.unregisterRequestFilter=Nt.prototype.Fg,Nt.prototype.Ve=function(){this.a.clear()},Nt.prototype.clearAllRequestFilters=Nt.prototype.Ve,Nt.prototype.fg=function(t){this.b.add(t)},Nt.prototype.registerResponseFilter=Nt.prototype.fg,Nt.prototype.Gg=function(t){this.b.delete(t)},Nt.prototype.unregisterResponseFilter=Nt.prototype.Gg,Nt.prototype.We=function(){this.b.clear()},Nt.prototype.clearAllResponseFilters=Nt.prototype.We,Nt.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}},Nt.makeRequest=Dt,Nt.prototype.destroy=function(){return this.f=!0,this.a.clear(),this.b.clear(),this.g.destroy()},Nt.prototype.destroy=Nt.prototype.destroy,Nt.prototype.request=function(t,e){var n=this,i=new Rt;if(this.f){var r=Promise.reject(new dt(2,7,7001));return r.catch((function(){})),new Lt(r,(function(){return Promise.resolve()}),i)}e.method=e.method||"GET",e.headers=e.headers||{},e.retryParameters=e.retryParameters?kt(e.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},e.uris=kt(e.uris);var o=(r=function(t,e,n){for(var i=yt(void 0),r={},o=(t=h(t.a)).next();!o.done;r={Ad:r.Ad},o=t.next())r.Ad=o.value,i=i.X(function(t){return function(){return t.Ad(e,n)}}(r));return i.X(void 0,(function(t){if(t&&7001==t.code)throw t;throw new dt(2,1,1006,t)}))}(this,t,e)).X((function(){return function t(e,n,i,r,o,a,s){var u=new Y(i.uris[o]),c=u.xa,l=!1;c||(c=(c=location.protocol).slice(0,-1),Z(u,c),i.uris[o]=u.toString()),c=c.toLowerCase();var f,h=(c=Ot[c])?c.cg:null;return h?bt(ht(r)).X((function(){return e.f?gt():(f=Date.now(),h(i.uris[o],i,n,(function(t,i,r){e.c&&1==n&&(e.c(t,i),l=!0,s.a=r)})))})).X((function(t){return null==t.timeMs&&(t.timeMs=Date.now()-f),{response:t,Df:l}}),(function(u){if(u&&7001==u.code)throw u;if(e.f)return gt();if(u&&1==u.severity)return e.dispatchEvent(new St("retry",{error:u instanceof dt?u:null})),o=(o+1)%i.uris.length,t(e,n,i,r,o,u,s);throw u||a})):vt(new dt(2,1,1e3,u))}(n,t,e,new ft(e.retryParameters,!1),0,null,i)})),a=o.X((function(e){return function(t,e,n){for(var i=yt(void 0),r=(t=h(t.b)).next();!r.done;r=t.next())i=i.X(r.value.bind(null,e,n.response));return i.X((function(){return n}),(function(t){if(t&&7001==t.code)throw t;var e=2;throw t instanceof dt&&(e=t.severity),new dt(e,1,1007,t)}))}(n,t,e)})),s=Date.now(),u=0;r.promise.then((function(){u=Date.now()-s}),(function(){}));var c=0;return o.promise.then((function(){c=Date.now()}),(function(){})),r=new Lt((r=a.X((function(e){var i=Date.now()-c,r=e.response;return r.timeMs+=u,r.timeMs+=i,e.Df||!n.c||r.fromCache||1!=t||n.c(r.timeMs,r.data.byteLength),r}),(function(t){throw t&&(t.severity=2),t}))).promise,r.me,i),Pt(this.g,r),r},Nt.prototype.request=Nt.prototype.request,Nt.NumBytesRemainingClass=Rt,w(Lt,mt),Nt.PendingRequest=Lt,Lt.all=wt,Lt.notAbortable=bt,Lt.completed=yt,Lt.aborted=gt,Lt.failed=vt,H("shaka.util.IReleasable",jt),jt.prototype.release=function(){},H("shaka.util.EventManager",Ut),Ut.prototype.release=function(){this.gb(),this.a=null},Ut.prototype.release=Ut.prototype.release,Ut.prototype.B=function(t,e,n,i){this.a&&(t=new zt(t,e,n,i),this.a.push(e,t))},Ut.prototype.listen=Ut.prototype.B,Ut.prototype.ua=function(t,e,n,i){var r=this;this.B(t,e,(function i(o){r.pa(t,e,i),n(o)}),i)},Ut.prototype.listenOnce=Ut.prototype.ua,Ut.prototype.pa=function(t,e,n){if(this.a)for(var i=this.a.get(e)||[],r=(i=h(i)).next();!r.done;r=i.next())(r=r.value).target!=t||n!=r.listener&&n||(r.pa(),this.a.remove(e,r))},Ut.prototype.unlisten=Ut.prototype.pa,Ut.prototype.gb=function(){if(this.a){for(var t=this.a.getAll(),e=(t=h(t)).next();!e.done;e=t.next())e.value.pa();this.a.a={}}},Ut.prototype.removeAll=Ut.prototype.gb,zt.prototype.pa=function(){this.target.removeEventListener(this.type,this.listener,this.a),this.listener=this.target=null,this.a=!1},zt.prototype.unlisten=zt.prototype.pa;var Bt=void 0;function Ft(t){return new Y(t=ae(t)).wa}function Ht(t,e,n){function i(t){new DataView(r.buffer).setUint32(o,t.byteLength,!0),o+=4,r.set(t,o),o+=t.byteLength}if(!n||!n.byteLength)throw new dt(2,6,6015);e="string"==typeof e?new Uint8Array(ue(e,!0)):new Uint8Array(e),t=ue(t=ae(t),!0);var r=new Uint8Array(12+t.byteLength+e.byteLength+n.byteLength),o=0;return i(new Uint8Array(t)),i(e),i(new Uint8Array(n)),r}function qt(t,e){for(var n=[],i=h(t),r=i.next();!r.done;r=i.next())n.push(e(r.value));return n}function Kt(t,e){for(var n=h(t),i=n.next();!i.done;i=n.next())if(!e(i.value))return!1;return!0}function $t(t){var e=new Map;return Object.keys(t).forEach((function(n){e.set(n,t[n])})),e}function Vt(t){var e={};return t.forEach((function(t,n){e[n]=t})),e}function Wt(t,e){var n=t;return e&&(n+='; codecs="'+e+'"'),n}function Gt(t){var e=(t=t.split("."))[0];return t.pop(),[e,t.join(".")]}H("shaka.util.FairPlayUtils.defaultGetContentId",Ft),H("shaka.util.FairPlayUtils.initDataTransform",Ht);var Xt=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function Yt(){return!(!t.MediaSource||!MediaSource.isTypeSupported)}function Zt(t){return""!=ee().canPlayType(t)}function Jt(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!te("Tizen")}function Qt(){if(!Jt())return null;var t=navigator.userAgent.match(/Version\/(\d+)/);return t||(t=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(t[1],10):null}function te(t){return(navigator.userAgent||"").includes(t)}function ee(){return ie||(ne||(ne=new lt((function(){ie=null}))),(ie=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(ie=document.createElement("video")),ne.T(1),ie)}var ne=null,ie=null;function re(t){if(!t)return"";239==(t=new Uint8Array(t))[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),t=ce(t),t=escape(t);try{return decodeURIComponent(t)}catch(t){throw new dt(2,2,2004)}}function oe(t,e,n){if(!t)return"";if(!n&&0!=t.byteLength%2)throw G.error("Data has an incorrect length, must be even."),new dt(2,2,2004);if(t instanceof ArrayBuffer)var i=t;else(n=new Uint8Array(t.byteLength)).set(new Uint8Array(t)),i=n.buffer;t=Math.floor(t.byteLength/2),n=new Uint16Array(t),i=new DataView(i);for(var r=0;r<t;r++)n[r]=i.getUint16(2*r,e);return ce(n)}function ae(t){var e=new Uint8Array(t);if(239==e[0]&&187==e[1]&&191==e[2])return re(e);if(254==e[0]&&255==e[1])return oe(e.subarray(2),!1);if(255==e[0]&&254==e[1])return oe(e.subarray(2),!0);var n=function(t,e){return t.byteLength<=e||32<=t[e]&&126>=t[e]}.bind(null,e);if(G.debug("Unable to find byte-order-mark, making an educated guess."),0==e[0]&&0==e[2])return oe(t,!1);if(0==e[1]&&0==e[3])return oe(t,!0);if(n(0)&&n(1)&&n(2)&&n(3))return re(t);throw new dt(2,2,2003)}function se(t){t=encodeURIComponent(t),t=unescape(t);for(var e=new Uint8Array(t.length),n=0;n<t.length;++n)e[n]=t.charCodeAt(n);return e.buffer}function ue(t,e){for(var n=new Uint8Array(2*t.length),i=new DataView(n.buffer),r=0;r<t.length;++r)i.setUint16(2*r,t.charCodeAt(r),e);return n.buffer}function ce(t){if(!le)for(var e=function(t){try{var e=new Uint8Array(t);return 0<String.fromCharCode.apply(null,e).length}catch(t){return!1}},n={size:65536};0<n.size;(n={size:n.size}).size/=2)if(e(n.size)){le=function(t){return function(e){for(var n="",i=0;i<e.length;i+=t.size)n+=String.fromCharCode.apply(null,e.subarray(i,i+t.size));return n}}(n);break}return le(t)}H("shaka.util.StringUtils.fromUTF8",re),H("shaka.util.StringUtils.fromUTF16",oe),H("shaka.util.StringUtils.fromBytesAutoDetect",ae),H("shaka.util.StringUtils.toUTF8",se),H("shaka.util.StringUtils.toUTF16",ue);var le=null;H("shaka.util.StringUtils.resetFromCharCode",(function(){le=null}));var fe={Hc:function(e,n){var i=ce(e);return n=null==n||n,i=t.btoa(i).replace(/\+/g,"-").replace(/\//g,"_"),n?i:i.replace(/=*$/,"")}};function he(t,e){var n=this;e=void 0===e?1:e,this.F=t,this.v=new Set,this.h=this.l=null,this.V=!1,this.K=0,this.a=null,this.i=new Ut,this.b=new Map,this.u=[],this.o=new pt,this.f=null,this.g=function(e){n.o.reject(e),t.onError(e)},this.sa=new Map,this.$=new Map,this.S=new lt((function(){return function(t){var e=t.sa,n=t.$;n.clear(),e.forEach((function(t,e){return n.set(e,t)})),(e=Array.from(n.values())).length&&e.every((function(t){return"expired"==t}))&&t.g(new dt(2,6,6014)),t.F.yc(Vt(n))}(n)})),this.c=!1,this.qa=new pt,this.G=!1,this.H=[],this.ra=!1,this.ea=new lt((function(){!function(t){t.b.forEach((function(e,n){var i=e.rd,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(t.F.onExpirationUpdated(n.sessionId,r),e.rd=r)}))}(n)})).Ra(e),this.o.catch((function(){}))}function de(t,e,n){return t.u=n,t.G=0<n.length,pe(t,e)}function pe(e,n){var i=function(e){if(0==(e=$t(e.f.clearKeys)).size)return null;var n=[],i=[];e.forEach((function(t,e){var r=fe.Yc(e),o=fe.Yc(t);r={kty:"oct",kid:fe.Hc(r,!1),k:fe.Hc(o,!1)},n.push(r),i.push(r.kid)})),e=JSON.stringify({keys:n});var r=JSON.stringify({kids:i});return r=[{initData:new Uint8Array(se(r)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+t.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:r,keyIds:[]}}(e);if(i)for(var r=h(n),o=r.next();!o.done;o=r.next())o.value.drmInfos=[i];for((i=n.some((function(t){return 0<t.drmInfos.length})))||function(t,e){var n=[];e.forEach((function(t,e){n.push({keySystem:e,licenseServerUri:t,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]})}));for(var i=h(t),r=i.next();!r.done;r=i.next())r.value.drmInfos=n}(n,o=$t(e.f.servers)),o=(r=h(n)).next();!o.done;o=r.next())for(var a=(o=h(o.value.drmInfos)).next();!a.done;a=o.next())Ne(a.value,$t(e.f.servers),$t(e.f.advanced||{}));return(o=function(t,e){for(var n=new Set,i=h(e),r=i.next();!r.done;r=i.next()){var o=h(r.value.drmInfos);for(r=o.next();!r.done;r=o.next())n.add(r.value)}for(i=h(n),r=i.next();!r.done;r=i.next())Ne(r.value,$t(t.f.servers),$t(t.f.advanced||{}));o=t.G?"required":"optional";var a=t.G?["persistent-license"]:["temporary"];for(i=new Map,n=h(n),r=n.next();!r.done;r=n.next())r=r.value,i.set(r.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:o,sessionTypes:a,label:r.keySystem,drmInfos:[]});for(n=h(e),r=n.next();!r.done;r=n.next()){r=r.value,o=r.audio,a=r.video;var s=o?Wt(o.mimeType,o.codecs):"",u=a?Wt(a.mimeType,a.codecs):"",c=h(r.drmInfos);for(r=c.next();!r.done;r=c.next()){r=r.value;var l=i.get(r.keySystem);l.drmInfos.push(r),r.distinctiveIdentifierRequired&&(l.distinctiveIdentifier="required"),r.persistentStateRequired&&(l.persistentState="required"),o&&l.audioCapabilities.push({robustness:r.audioRobustness||"",contentType:s}),a&&l.videoCapabilities.push({robustness:r.videoRobustness||"",contentType:u})}}return i}(e,n)).size?(o=xe(e,o),i?o:o.catch((function(){}))):(e.V=!0,Promise.resolve())}function me(t){return p((function e(){var n;return L(e,(function(e){switch(e.j){case 1:if(!(t.l&&t.a&&t.a.serverCertificate&&t.a.serverCertificate.length)){e.C(0);break}return C(e,3),E(e,t.l.setServerCertificate(t.a.serverCertificate),5);case 5:e.s||G.m("Server certificates are not supported by the key system.  The server certificate has been ignored."),A(e,0);break;case 3:return n=_(e),e.return(Promise.reject(new dt(2,6,6004,n.message)))}}))}))}function ve(t){var e=t.a?t.a.initData:[];return e.forEach((function(e){return Te(t,e.initDataType,e.initData)})),t.u.forEach((function(e){return Se(t,e)})),e.length||t.u.length||t.o.resolve(),t.o}function ge(t,e,n){for(var i=t.b.values(),r=(i=h(i)).next();!r.done;r=i.next())if(fe.Da(n,r.value.initData)&&!te("Tizen 2"))return void G.debug("Ignoring duplicate init data.");Te(t,e,n)}function ye(t){return t?t.keySystem:""}function be(t,e){return!!te("Edge/")||t.v.has(e)}function we(t){return t=qt(t=t.b.keys(),(function(t){return t.sessionId})),Array.from(t)}function xe(t,e){if(1==e.size&&e.has(""))return Promise.reject(new dt(2,6,6e3));for(var n=h(e.values()),i=n.next();!i.done;i=n.next())0==(i=i.value).audioCapabilities.length&&delete i.audioCapabilities,0==i.videoCapabilities.length&&delete i.videoCapabilities;var r=n=new pt;return[!0,!1].forEach(function(t){var n=this;e.forEach((function(e,i){e.drmInfos.some((function(t){return!!t.licenseServerUri}))==t&&(r=r.catch(function(){if(!this.c)return navigator.requestMediaKeySystemAccess(i,[e])}.bind(n)))}))}.bind(t)),r=(r=r.catch((function(){return Promise.reject(new dt(2,6,6001))}))).then(function(t){if(this.c)return Promise.reject();this.v.clear();var n=t.getConfiguration(),i=n.videoCapabilities||[],r=h(n.audioCapabilities||[]);for(n=r.next();!n.done;n=r.next())this.v.add(n.value.contentType);for(n=(i=h(i)).next();!n.done;n=i.next())this.v.add(n.value.contentType);i=t.keySystem,r=[];var o=[],a=[],s=[];return function(t,e,n,i,r){t.forEach((function(t){if(e.includes(t.licenseServerUri)||e.push(t.licenseServerUri),t.serverCertificate&&(n.some((function(e){return fe.Da(e,t.serverCertificate)}))||n.push(t.serverCertificate)),t.initData&&t.initData.forEach((function(t){i.some((function(e){return!(!e.keyId||e.keyId!=t.keyId)||e.initDataType==t.initDataType&&fe.Da(e.initData,t.initData)}))||i.push(t)})),t.keyIds)for(var o=0;o<t.keyIds.length;++o)r.includes(t.keyIds[o])||r.push(t.keyIds[o])}))}((n=e.get(t.keySystem)).drmInfos,r,o,a,s),1<o.length&&G.m("Multiple unique server certificates found! Only the first will be used."),1<r.length&&G.m("Multiple unique license server URIs found! Only the first will be used."),this.a={keySystem:i,licenseServerUri:r[0],distinctiveIdentifierRequired:"required"==n.distinctiveIdentifier,persistentStateRequired:"required"==n.persistentState,audioRobustness:(n.audioCapabilities?n.audioCapabilities[0].robustness:"")||"",videoRobustness:(n.videoCapabilities?n.videoCapabilities[0].robustness:"")||"",serverCertificate:o[0],initData:a,keyIds:s},this.a.licenseServerUri?t.createMediaKeys():Promise.reject(new dt(2,6,6012,this.a.keySystem))}.bind(t)).then(function(t){if(this.c)return Promise.reject();G.info("Created MediaKeys object for key system",this.a.keySystem),this.l=t,this.V=!0}.bind(t)).catch(function(t){if(!this.c)return this.a=null,this.v.clear(),t instanceof dt?Promise.reject(t):Promise.reject(new dt(2,6,6002,t.message))}.bind(t)),n.reject(),r}function Se(t,e){try{G.D("Attempting to load an offline session",e);var n=t.l.createSession("persistent-license")}catch(e){var i=new dt(2,6,6005,e.message);return t.g(i),Promise.reject(i)}t.i.B(n,"message",t.se.bind(t)),t.i.B(n,"keystatuseschange",t.qe.bind(t));var r={initData:null,loaded:!1,rd:1/0,Ca:null};return t.b.set(n,r),n.load(e).then(function(t){return this.c?Promise.reject():(G.J("Loaded offline session",e,t),t?(r.loaded=!0,Pe(this)&&this.o.resolve(),n):(this.b.delete(n),void this.g(new dt(2,6,6013))))}.bind(t),function(t){this.c||(this.b.delete(n),this.g(new dt(2,6,6005,t.message)))}.bind(t))}function Te(t,e,n){try{if(t.G){G.D("Creating new persistent session");var i=t.l.createSession("persistent-license")}else G.D("Creating new temporary session"),i=t.l.createSession()}catch(e){return void t.g(new dt(2,6,6005,e.message))}t.i.B(i,"message",t.se.bind(t)),t.i.B(i,"keystatuseschange",t.qe.bind(t)),t.b.set(i,{initData:n,loaded:!1,rd:1/0,Ca:null});try{n=t.f.initDataTransform(n,t.a)}catch(n){return e=n,n instanceof dt||(e=new dt(2,6,6016,n)),void t.g(e)}i.generateRequest(e,n.buffer).catch((function(e){if(!t.c){if(t.b.delete(i),e.errorCode&&e.errorCode.systemCode){var n=e.errorCode.systemCode;0>n&&(n+=Math.pow(2,32)),n="0x"+n.toString(16)}t.g(new dt(2,6,6006,e.message,e,n))}}))}function Ee(t,e){if(ye(e).startsWith("com.apple.fps")){var n=e.serverCertificate;t=Ht(t,Ft(t),n)}return t}function ke(t,e){var n=e.target;G.D("Sending license request for session",n.sessionId,"of type",e.messageType);var i=t.b.get(n),r=t.a.licenseServerUri,o=t.f.advanced[t.a.keySystem];"individualization-request"==e.messageType&&o&&o.individualizationServer&&(r=o.individualizationServer),(r=Dt([r],t.f.retryParameters)).body=e.message,r.method="POST",r.licenseRequestType=e.messageType,r.sessionId=n.sessionId,"com.microsoft.playready"!=t.a.keySystem&&"com.chromecast.playready"!=t.a.keySystem||function(t){var e=oe(t.body,!0,!0);if(e.includes("PlayReadyKeyMessage")){G.debug("Unwrapping PlayReady request.");for(var n=(e=(new DOMParser).parseFromString(e,"application/xml")).getElementsByTagName("HttpHeader"),i=0;i<n.length;++i)t.headers[n[i].getElementsByTagName("name")[0].textContent]=n[i].getElementsByTagName("value")[0].textContent;t.body=fe.Fa(e.getElementsByTagName("Challenge")[0].textContent).buffer}else G.debug("PlayReady request is already unwrapped."),t.headers["Content-Type"]="text/xml; charset=utf-8"}(r),t.a.keySystem.startsWith("com.apple.fps")&&t.f.fairPlayTransform&&function(t){var e=new Uint8Array(t.body);e="spc="+fe.Hc(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=se(e)}(r);var a=Date.now();t.F.Cb.request(2,r).promise.then(function(t){return this.c?Promise.reject():(this.a.keySystem.startsWith("com.apple.fps")&&this.f.fairPlayTransform&&function(t){try{var e=re(t.data)}catch(t){return}"<ckc>"===(e=e.trim()).substr(0,5)&&"</ckc>"===e.substr(-6)&&(e=e.slice(5,-6));try{e=JSON.parse(e).ckc}catch(t){}t.data=fe.Fa(e).buffer}(t),this.K+=(Date.now()-a)/1e3,G.D("Updating session",n.sessionId),n.update(t.data).then(function(){var t=this;this.F.onEvent(new St("drmsessionupdate")),i&&(i.Ca&&i.Ca.resolve(),new lt((function(){i.loaded=!0,Pe(t)&&t.o.resolve()})).T(Oe))}.bind(this)))}.bind(t),function(t){this.c||(t=new dt(2,6,6007,t),this.g(t),i&&i.Ca&&i.Ca.reject(t))}.bind(t)).catch(function(t){this.c||(t=new dt(2,6,6008,t.message),this.g(t),i&&i.Ca&&i.Ca.reject(t))}.bind(t))}function Ce(){var t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],e=[{videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:t}],n=new Map;return t="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").map((function(t){return function(t){return p((function i(){var r,o,a;return L(i,(function(i){switch(i.j){case 1:return C(i,2),E(i,navigator.requestMediaKeySystemAccess(t,e),4);case 4:return r=i.s,a=!!(o=r.getConfiguration().sessionTypes)&&o.includes("persistent-license"),te("Tizen 3")&&(a=!1),n.set(t,{persistentState:a}),E(i,r.createMediaKeys(),5);case 5:A(i,0);break;case 2:_(i),n.set(t,null),k(i)}}))}))}(t)})),Promise.all(t).then((function(){return Vt(n)}))}function Me(t,e){var n=e.audio,i=e.video;if(n&&n.encrypted&&!be(t,Wt(n.mimeType,n.codecs))||i&&i.encrypted&&!be(t,Wt(i.mimeType,i.codecs)))return!1;var r=ye(t.a);return 0==e.drmInfos.length||e.drmInfos.some((function(t){return t.keySystem==r}))}function Ae(t,e){if(!t.length)return e;if(!e.length)return t;for(var n=[],i=0;i<t.length;i++)for(var r=0;r<e.length;r++)if(t[i].keySystem==e[r].keySystem){var o=t[i];r=e[r];var a=[];a=(a=a.concat(o.initData||[])).concat(r.initData||[]);var s=[];s=(s=s.concat(o.keyIds)).concat(r.keyIds),n.push({keySystem:o.keySystem,licenseServerUri:o.licenseServerUri||r.licenseServerUri,distinctiveIdentifierRequired:o.distinctiveIdentifierRequired||r.distinctiveIdentifierRequired,persistentStateRequired:o.persistentStateRequired||r.persistentStateRequired,videoRobustness:o.videoRobustness||r.videoRobustness,audioRobustness:o.audioRobustness||r.audioRobustness,serverCertificate:o.serverCertificate||r.serverCertificate,initData:a,keyIds:s});break}return n}function _e(t){return p((function e(){var n;return L(e,(function(e){switch(e.j){case 1:return n=Array.from(t.b.keys()),t.b.clear(),E(e,Promise.all(n.map((function(t){return p((function e(){return L(e,(function(e){switch(e.j){case 1:return G.D("Closing session",t.sessionId),C(e,2),E(e,Promise.all([t.close(),t.closed]),4);case 4:A(e,0);break;case 2:_(e),k(e)}}))}))}))),0)}}))}))}function Pe(t){return Kt(t=t.b.values(),(function(t){return t.loaded}))}function Ne(e,n,i){!e.keySystem||"org.w3.clearkey"==e.keySystem&&e.licenseServerUri||(n.size&&(n=n.get(e.keySystem)||"",e.licenseServerUri=n),e.keyIds||(e.keyIds=[]),(i=i.get(e.keySystem))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=i.persistentStateRequired),e.videoRobustness||(e.videoRobustness=i.videoRobustness),e.audioRobustness||(e.audioRobustness=i.audioRobustness),e.serverCertificate||(e.serverCertificate=i.serverCertificate)),t.cast&&t.cast.__platform__&&"com.microsoft.playready"==e.keySystem&&(e.keySystem="com.chromecast.playready"))}H("shaka.util.Uint8ArrayUtils.toBase64",fe.Hc),fe.Fa=function(e){e=t.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(e.length),i=0;i<e.length;++i)n[i]=e.charCodeAt(i);return n},H("shaka.util.Uint8ArrayUtils.fromBase64",fe.Fa),fe.Yc=function(e){for(var n=new Uint8Array(e.length/2),i=0;i<e.length;i+=2)n[i/2]=t.parseInt(e.substr(i,2),16);return n},H("shaka.util.Uint8ArrayUtils.fromHex",fe.Yc),fe.Ic=function(t){for(var e="",n=0;n<t.length;++n){var i=t[n].toString(16);1==i.length&&(i="0"+i),e+=i}return e},H("shaka.util.Uint8ArrayUtils.toHex",fe.Ic),fe.Da=function(t,e){if(!t&&!e)return!0;if(!t||!e||t.length!=e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!=e[n])return!1;return!0},H("shaka.util.Uint8ArrayUtils.equal",fe.Da),fe.concat=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];for(var i=n=0;i<e.length;++i)n+=e[i].length;n=new Uint8Array(n);for(var r=i=0;r<e.length;++r)n.set(e[r],i),i+=e[r].length;return n},H("shaka.util.Uint8ArrayUtils.concat",fe.concat),(i=he.prototype).destroy=function(){var t=this;return p((function e(){return L(e,(function(e){switch(e.j){case 1:return t.c?E(e,t.qa,0):(t.c=!0,E(e,function(t){return p((function e(){return L(e,(function(e){switch(e.j){case 1:return t.i.release(),t.i=null,t.o.reject(),t.ea.stop(),t.ea=null,t.S.stop(),t.S=null,E(e,_e(t),2);case 2:if(!t.h){e.C(3);break}return C(e,4),E(e,t.h.setMediaKeys(null),6);case 6:A(e,5);break;case 4:_(e);case 5:t.h=null;case 3:t.a=null,t.v.clear(),t.l=null,t.u=[],t.f=null,t.g=null,t.F=null,k(e)}}))}))}(t),4));case 4:t.qa.resolve(),e.C(0)}}))}))},i.configure=function(t){this.f=t},i.Pb=function(t){var e=this;if(!this.l)return this.i.ua(t,"encrypted",(function(){e.g(new dt(2,6,6010))})),Promise.resolve();this.h=t,this.i.ua(this.h,"play",(function(){for(var t=0;t<e.H.length;t++)ke(e,e.H[t]);e.ra=!0,e.H=[]})),"webkitCurrentPlaybackTargetIsWireless"in this.h&&this.i.B(this.h,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return _e(e)})),t=(t=this.h.setMediaKeys(this.l)).catch((function(t){return Promise.reject(new dt(2,6,6003,t.message))}));var n=me(this);return Promise.all([t,n]).then((function(){if(e.c)return Promise.reject();ve(e),e.a.initData.length||e.u.length||e.i.B(e.h,"encrypted",(function(t){return ge(e,t.initDataType,new Uint8Array(t.initData))}))})).catch((function(t){if(!e.c)return Promise.reject(t)}))},i.Sb=function(){for(var t=1/0,e=this.b.keys(),n=(e=h(e)).next();!n.done;n=e.next())n=n.value,isNaN(n.expiration)||(t=Math.min(t,n.expiration));return t},i.se=function(t){this.h&&this.f.delayLicenseRequestUntilPlayed&&this.h.paused&&!this.ra?this.H.push(t):ke(this,t)},i.qe=function(t){t=t.target,G.J("Key status changed for session",t.sessionId);var e=this.b.get(t),n=!1;t.keyStatuses.forEach(function(t,i){if("string"==typeof i){var r=i;i=t,t=r}if(!("com.microsoft.playready"!=this.a.keySystem||16!=i.byteLength||te("Tizen")||te("VITIS")||te("Web0S")||te("TiVo"))){var o=(r=new DataView(i)).getUint32(0,!0),a=r.getUint16(4,!0),s=r.getUint16(6,!0);r.setUint32(0,o,!1),r.setUint16(4,a,!1),r.setUint16(6,s,!1)}"com.microsoft.playready"==this.a.keySystem&&"status-pending"==t&&(t="usable"),"status-pending"!=t&&(e.loaded=!0),"expired"==t&&(n=!0),r=fe.Ic(new Uint8Array(i)),this.sa.set(r,t)}.bind(this));var i=t.expiration-Date.now();(0>i||n&&1e3>i)&&e&&!e.Ca&&(G.debug("Session has expired",t.sessionId),this.b.delete(t),t.close().catch((function(){}))),Pe(this)&&(this.o.resolve(),this.S.T(Ie))};var Oe=5,Ie=.5;function De(){this.a=new muxjs.mp4.CaptionParser,this.g=[],this.f={}}function Re(){}function Le(t){return!t||1==t.length&&1e-6>t.end(0)-t.start(0)?null:t.length?t.end(t.length-1):null}function je(t,e,n){return n=void 0===n?0:n,!(!t||!t.length||1==t.length&&1e-6>t.end(0)-t.start(0)||e>t.end(t.length-1))&&e+n>=t.start(0)}function Ue(t,e){if(!t||!t.length||1==t.length&&1e-6>t.end(0)-t.start(0))return 0;for(var n=0,i=t.length-1;0<=i&&t.end(i)>e;--i)n+=t.end(i)-Math.max(t.start(i),e);return n}function ze(t){if(!t)return[];for(var e=[],n=0;n<t.length;n++)e.push({start:t.start(n),end:t.end(n)});return e}De.prototype.init=function(t){var e=muxjs.mp4.probe;t=new Uint8Array(t),this.g=e.videoTrackIds(t),this.f=e.timescale(t),this.a.init()},De.prototype.b=function(t,e){var n=new Uint8Array(t);(n=this.a.parse(n,this.g,this.f))&&n.captions&&e(n.captions),this.a.clearParsedCaptions()},De.prototype.c=function(){this.a.resetCaptionStream()},Re.prototype.init=function(){},Re.prototype.b=function(){},Re.prototype.c=function(){};var Be={Xe:function(t,e){return t.reduce(function(t,e,n){return e.catch(t.bind(null,n))}.bind(null,e),Promise.reject())},Oc:function(t,e){return t.concat(e)},wc:function(){},Ma:function(t){return null!=t}};function Fe(t,e){if(0==e.length)return t;var n=e.map((function(t){return new Y(t)}));return t.map((function(t){return new Y(t)})).map((function(t){return n.map(t.resolve.bind(t))})).reduce(Be.Oc,[]).map((function(t){return t.toString()}))}function He(t,e){return{keySystem:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:e||[],keyIds:[]}}var qe={Ua:"video",Mb:"audio",va:"text",Mg:"image",Kg:"application"};function Ke(){this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.b=null,this.g=[],this.c=[],this.f=!1,this.a.on("data",this.i.bind(this)),this.a.on("done",this.h.bind(this))}function $e(e,n){return!(!t.muxjs||"mp2t"!=e.toLowerCase().split(";")[0].split("/")[1])&&(n?MediaSource.isTypeSupported(Ve(n,e)):MediaSource.isTypeSupported(Ve("audio",e))||MediaSource.isTypeSupported(Ve("video",e)))}function Ve(t,e){var n=e.replace(/mp2t/i,"mp4");"audio"==t&&(n=n.replace("video","audio"));var i=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(i){var r="avc1.",o=i[1],a=Number(i[2]);r=("66"==o?r+"4200":"77"==o?r+"4d00":r+"6400")+(a>>4).toString(16),r+=(15&a).toString(16),n=n.replace(i[0],r)}return n}function We(t,e,n){this.startTime=t,this.direction=Qe,this.endTime=e,this.payload=n,this.region=new un,this.position=null,this.positionAlign=Ge,this.size=0,this.textAlign=Xe,this.writingMode=tn,this.lineInterpretation=en,this.line=null,this.lineHeight="",this.lineAlign=nn,this.displayAlign=Ze,this.fontSize=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=on,this.fontStyle=an,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.spacer=!1}Ke.prototype.destroy=function(){return this.a.dispose(),this.a=null,Promise.resolve()},Ke.prototype.i=function(t){this.c=t.captions;var e=new Uint8Array(t.data.byteLength+t.initSegment.byteLength);e.set(t.initSegment,0),e.set(t.data,t.initSegment.byteLength),this.g.push(e)},Ke.prototype.h=function(){var t={data:fe.concat.apply(null,this.g),captions:this.c};this.b.resolve(t),this.f=!1},H("shaka.text.Cue",We);var Ge="auto";We.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Ge};var Xe="center",Ye={LEFT:"left",RIGHT:"right",CENTER:Xe,START:"start",END:"end"};We.textAlign=Ye;var Ze="after",Je={BEFORE:"before",CENTER:"center",AFTER:Ze};We.displayAlign=Je;var Qe="ltr";We.direction={HORIZONTAL_LEFT_TO_RIGHT:Qe,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var tn="horizontal-tb";We.writingMode={HORIZONTAL_TOP_TO_BOTTOM:tn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var en=0;We.lineInterpretation={LINE_NUMBER:en,PERCENTAGE:1};var nn="start",rn={CENTER:"center",START:nn,END:"end"};We.lineAlign=rn;var on=400;We.fontWeight={NORMAL:on,BOLD:700};var an="normal",sn={NORMAL:an,ITALIC:"italic",OBLIQUE:"oblique"};function un(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=cn,this.scroll=ln}We.fontStyle=sn,We.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},H("shaka.text.CueRegion",un);var cn=1;un.units={PX:0,PERCENTAGE:cn,LINES:2};var ln="";function fn(t){this.g=null,this.c=t,this.f=this.o=0,this.h=1/0,this.b=this.a=null,this.l="",this.i=new Map}un.scrollMode={NONE:ln,UP:"up"};var hn={};function dn(e){return!!(hn[e]||t.muxjs&&"application/cea-608"==e)}function pn(t,e){"application/cea-608"!=e&&(t.g=new hn[e])}function mn(t,e,n,i,r){for(var o=n+" "+i,a=new Map,s=(e=h(e)).next();!s.done;s=e.next()){var u=s.value;s=u.stream,a.has(s)||a.set(s,new Map),a.get(s).has(o)||a.get(s).set(o,[]),u.startTime+=r,u.endTime+=r,u.startTime>=t.f&&u.startTime<t.h&&(u=new We(u.startTime,u.endTime,u.text),a.get(s).get(o).push(u),s==t.l&&t.c.append([u]))}for(o=(r=h(a.keys())).next();!o.done;o=r.next())for(o=o.value,t.i.has(o)||t.i.set(o,new Map),s=(e=h(a.get(o).keys())).next();!s.done;s=e.next())s=s.value,u=a.get(o).get(s),t.i.get(o).set(s,u);t.a=null==t.a?Math.max(n,t.f):Math.min(t.a,Math.max(n,t.f)),t.b=Math.max(t.b,Math.min(i,t.h))}function vn(t,e,n){this.f=t,this.g=n,this.b={},this.a=null,this.c={},this.i=new Ut,this.v=!1,this.l={},this.o=e,t=this.u=new pt,e=new MediaSource,this.i.ua(e,"sourceopen",t.resolve),this.f.src=gn(e),this.h=e}H("shaka.text.TextEngine.registerParser",(function(t,e){hn[t]=e})),H("shaka.text.TextEngine.unregisterParser",(function(t){delete hn[t]})),fn.prototype.destroy=function(){return this.c=this.g=null,this.i.clear(),Promise.resolve()},fn.prototype.sc=function(t){try{return this.g.parseMedia(new Uint8Array(t),{periodStart:0,segmentStart:null,segmentEnd:0})[0].startTime}catch(t){throw new dt(2,2,2009,t)}},fn.prototype.remove=function(t,e){return Promise.resolve().then(function(){!this.c||!this.c.remove(t,e)||null==this.a||e<=this.a||t>=this.b||(t<=this.a&&e>=this.b?this.a=this.b=null:t<=this.a&&e<this.b?this.a=e:t>this.a&&e>=this.b&&(this.b=t))}.bind(this))};var gn=t.URL.createObjectURL;function yn(t){var e=Wt(t.mimeType,t.codecs),n=function(t){var e=[t.mimeType];return Xt.forEach((function(n,i){var r=t[i];r&&e.push(n+'="'+r+'"')})),e.join(";")}(t);return dn(e)||MediaSource.isTypeSupported(n)||$e(e,t.type)}function bn(t,e){t.a||(t.a=new fn(t.g)),pn(t.a,e)}function wn(t){return!t.h||"ended"==t.h.readyState}function xn(t,e){if("text"==e)var n=t.a.a;else n=!(n=Tn(t,e))||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function Sn(t,e){return"text"==e?t.a.b:Le(Tn(t,e))}function Tn(t,e){try{return t.b[e].buffered}catch(n){return e in t.b&&G.error("failed to get buffered range for "+e,n),null}}function En(e,n,i,r,o,a){return"text"==n?function(t,e,n,i){return Promise.resolve().then(function(){if(this.g&&this.c)if(null==n||null==i)this.g.parseInit(new Uint8Array(e));else{var t={periodStart:this.o,segmentStart:n,segmentEnd:i};t=this.g.parseMedia(new Uint8Array(e),t).filter(function(t){return t.startTime>=this.f&&t.startTime<this.h}.bind(this)),this.c.append(t),null==this.a&&(this.a=Math.max(n,this.f)),this.b=Math.min(i,this.h)}}.bind(t))}(e.a,i,r,o):e.l[n]?function(t,e){t.f=!0,t.b=new pt,t.g=[],t.c=[];var n=new Uint8Array(e);return t.a.push(n),t.a.flush(),t.f&&t.b.reject(new dt(2,3,3018)),t.b}(e.l[n],i).then(function(t){return this.a||bn(this,"text/vtt"),t.captions&&t.captions.length&&mn(this.a,t.captions,r,o,this.b.video.timestampOffset),Mn(this,n,this.Ee.bind(this,n,t.data.buffer))}.bind(e)):(a&&t.muxjs&&(e.a||bn(e,"text/vtt"),null==r&&null==o?e.o.init(i):e.o.b(i,(function(t){t.length&&mn(e.a,t,r,o,e.b.video.timestampOffset)}))),Mn(e,n,e.Ee.bind(e,n,i)))}function kn(t,e){var n=Sn(t,"video")||0;!function(t,e,n){if(t.l=e,e=t.i.get(e))for(var i=h(e.keys()),r=i.next();!r.done;r=i.next())(r=e.get(r.value).filter((function(t){return t.endTime<=n})))&&t.c.append(r)}(t.a,e,n)}function Cn(t,e){return"text"==e?t.a?(t.o.c(),t.a.remove(0,1/0)):Promise.resolve():Mn(t,e,t.Fe.bind(t,e,0,t.h.duration))}function Mn(t,e,n){if(t.v)return Promise.reject();if(n={start:n,p:new pt},t.c[e].push(n),1==t.c[e].length)try{n.start()}catch(i){"QuotaExceededError"==i.name?n.p.reject(new dt(2,3,3017,e)):n.p.reject(new dt(2,3,3015,i)),_n(t,e)}return n.p}function An(t,e){if(t.v)return Promise.reject();var n,i=[];for(n in t.b){var r=new pt,o={start:function(t){t.resolve()}.bind(null,r),p:r};t.c[n].push(o),i.push(r),1==t.c[n].length&&o.start()}return Promise.all(i).then(function(){try{e()}catch(e){var t=Promise.reject(new dt(2,3,3015,e))}for(var n in this.b)_n(this,n);return t}.bind(t),function(t){throw t}.bind(t))}function _n(t,e){t.c[e].shift();var n=t.c[e][0];if(n)try{n.start()}catch(i){n.p.reject(new dt(2,3,3015,i)),_n(t,e)}}function Pn(t,e){return t=On(t),e=On(e),t.split("-")[0]==e.split("-")[0]}function Nn(t,e){t=On(t),e=On(e);var n=t.split("-"),i=e.split("-");return n[0]==i[0]&&1==n.length&&2==i.length}function On(t){var e=t.split("-");return t=e[0]||"",e=e[1]||"",t=t.toLowerCase(),t=Rn.get(t)||t,(e=e.toUpperCase())?t+"-"+e:t}function In(t){return t.language?On(t.language):t.audio&&t.audio.language?On(t.audio.language):t.video&&t.video.language?On(t.video.language):"und"}function Dn(t,e){for(var n=On(t),i=new Set,r=h(e),o=r.next();!o.done;o=r.next())i.add(On(o.value));for(o=(r=h(i)).next();!o.done;o=r.next())if((o=o.value)==n)return o;for(o=(r=h(i)).next();!o.done;o=r.next())if(Nn(o=o.value,n))return o;for(o=(r=h(i)).next();!o.done;o=r.next()){var a=o=o.value,s=n;if(a=On(a),s=On(s),a=a.split("-"),s=s.split("-"),2==a.length&&2==s.length&&a[0]==s[0])return o}for(o=(i=h(i)).next();!o.done;o=i.next())if(Nn(n,r=o.value))return r;return null}(i=vn.prototype).destroy=function(){var t=this;this.v=!0;var e,n=[];for(e in this.c){var i=this.c[e],r=i[0];for(this.c[e]=i.slice(0,1),r&&n.push(r.p.catch(Be.wc)),r=1;r<i.length;++r)i[r].p.reject()}for(var o in this.a&&n.push(this.a.destroy()),this.g&&n.push(this.g.destroy()),this.l)n.push(this.l[o].destroy());return Promise.all(n).then((function(){t.i&&(t.i.release(),t.i=null),t.f&&(t.f.removeAttribute("src"),t.f.load(),t.f=null),t.h=null,t.a=null,t.g=null,t.b={},t.l={},t.o=null,t.c={}}))},i.init=function(t,e){var n=this;return p((function i(){var r;return L(i,(function(i){switch(i.j){case 1:return r=qe,E(i,n.u,2);case 2:t.forEach((function(t,i){var o=Wt(t.mimeType,t.codecs);i==r.va?bn(n,o):(!e&&MediaSource.isTypeSupported(o)||!$e(o,i)||(n.l[i]=new Ke,o=Ve(i,o)),o=n.h.addSourceBuffer(o),n.i.B(o,"error",n.vg.bind(n,i)),n.i.B(o,"updateend",n.Fb.bind(n,i)),n.b[i]=o,n.c[i]=[])})),k(i)}}))}))},i.$c=function(t){if(t.total=ze(this.f.buffered),t.audio=ze(Tn(this,"audio")),t.video=ze(Tn(this,"video")),t.text=[],this.a){var e=this.a.a,n=this.a.b;null!=e&&null!=n&&t.text.push({start:e,end:n})}},i.remove=function(t,e,n){return"text"==t?this.a.remove(e,n):Mn(this,t,this.Fe.bind(this,t,e,n))},i.flush=function(t){return"text"==t?Promise.resolve():Mn(this,t,this.bf.bind(this,t))},i.endOfStream=function(t){return An(this,function(){wn(this)||(t?this.h.endOfStream(t):this.h.endOfStream())}.bind(this))},i.Ba=function(t){return An(this,function(){this.h.duration=t}.bind(this))},i.ca=function(){return this.h.duration},i.Ee=function(t,e){this.b[t].appendBuffer(e)},i.Fe=function(t,e,n){n<=e?this.Fb(t):this.b[t].remove(e,n)},i.Oe=function(t){var e=this.b[t].appendWindowStart,n=this.b[t].appendWindowEnd;this.b[t].abort(),this.b[t].appendWindowStart=e,this.b[t].appendWindowEnd=n,this.Fb(t)},i.bf=function(t){this.f.currentTime-=.001,this.Fb(t)},i.ug=function(t,e){0>e&&(e+=.001),this.b[t].timestampOffset=e,this.Fb(t)},i.rg=function(t,e,n){this.b[t].appendWindowStart=0,this.b[t].appendWindowEnd=n,this.b[t].appendWindowStart=e,this.Fb(t)},i.vg=function(t){this.c[t][0].p.reject(new dt(2,3,3014,this.f.error?this.f.error.code:0))},i.Fb=function(t){var e=this.c[t][0];e&&(e.p.resolve(),_n(this,t))};var Rn=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]),Ln={Vd:function(t,e){function n(t){var e="";t.video&&(e=Gt(t.video.codecs)[0]);var n="";return t.audio&&(n=Gt(t.audio.codecs)[0]),e+"-"+n}var i=t.periods.reduce((function(t,e){return t.concat(e.variants)}),[]);i=Ln.$d(i,e);for(var r=new Tt,o=(i=h(i)).next();!o.done;o=i.next()){var a=n(o=o.value);r.push(a,o)}var s=null,u=1/0;for(r.forEach((function(t,e){for(var n=0,i=0,r=h(e),o=r.next();!o.done;o=r.next())n+=o.value.bandwidth||0,++i;n/=i,G.debug("codecs",t,"avg bandwidth",n),n<u&&(s=t,u=n)})),i=(r=h(t.periods)).next();!i.done;i=r.next())(i=i.value).variants=i.variants.filter((function(t){return n(t)==s||(G.debug("Dropping Variant (better codec available)",t),!1)}))},ld:function(t,e,n){function i(t,e,n){return t>=e&&t<=n}var r=t.video;return!(r&&r.width&&r.height&&(!i(r.width,e.minWidth,Math.min(e.maxWidth,n.width))||!i(r.height,e.minHeight,Math.min(e.maxHeight,n.height))||!i(r.width*r.height,e.minPixels,e.maxPixels))||t&&t.video&&t.video.frameRate&&!i(t.video.frameRate,e.minFrameRate,e.maxFrameRate)||!i(t.bandwidth,e.minBandwidth,e.maxBandwidth))},Sd:function(t,e,n){var i=!1;return t.forEach((function(t){var r=t.allowedByApplication;t.allowedByApplication=Ln.ld(t,e,n),r!=t.allowedByApplication&&(i=!0)})),i},filterNewPeriod:function(t,e,n,i){i.variants=i.variants.filter((function(i){if(t&&t.V&&!Me(t,i))return G.debug("Dropping variant - not compatible with key system",i),!1;var r=i.audio;return i=i.video,r&&!yn(r)?(G.debug("Dropping variant - audio not compatible with platform",Ln.xb(r)),!1):i&&!yn(i)?(G.debug("Dropping variant - video not compatible with platform",Ln.xb(i)),!1):r&&e&&!Ln.Td(r,e)?(G.debug("Droping variant - not compatible with active audio","active audio",Ln.xb(e),"variant.audio",Ln.xb(r)),!1):!(i&&n&&!Ln.Td(i,n))||(G.debug("Droping variant - not compatible with active video","active video",Ln.xb(n),"variant.video",Ln.xb(i)),!1)})),i.textStreams=i.textStreams.filter((function(t){var e=dn(Wt(t.mimeType,t.codecs));return e||G.debug("Dropping text stream. Is not supported by the platform.",t),e}))},Td:function(t,e){return t.mimeType==e.mimeType&&t.codecs.split(".")[0]==e.codecs.split(".")[0]},Qd:function(t){var e=t.audio,n=t.video,i=e?e.codecs:null,r=n?n.codecs:null,o=[];r&&o.push(r),i&&o.push(i);var a=[];n&&a.push(n.mimeType),e&&a.push(e.mimeType),a=a[0]||null;var s=[];e&&s.push(e.kind),n&&s.push(n.kind),s=s[0]||null;var u=new Set;return e&&e.roles.forEach((function(t){return u.add(t)})),n&&n.roles.forEach((function(t){return u.add(t)})),t={id:t.id,active:!1,type:"variant",bandwidth:t.bandwidth,language:t.language,label:null,kind:s,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:a,codecs:o.join(", "),audioCodec:i,videoCodec:r,primary:t.primary,roles:Array.from(u),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null},n&&(t.videoId=n.id,t.originalVideoId=n.originalId,t.width=n.width||null,t.height=n.height||null,t.frameRate=n.frameRate||null,t.pixelAspectRatio=n.pixelAspectRatio||null,t.videoBandwidth=n.bandwidth||null),e&&(t.audioId=e.id,t.originalAudioId=e.originalId,t.channelsCount=e.channelsCount,t.audioSamplingRate=e.audioSamplingRate,t.audioBandwidth=e.bandwidth||null,t.label=e.label,t.audioRoles=e.roles),t},Fc:function(t){return{id:t.id,active:!1,type:"text",bandwidth:0,language:t.language,label:t.label,kind:t.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:t.mimeType,codecs:t.codecs||null,audioCodec:null,videoCodec:null,primary:t.primary,roles:t.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:t.originalId}},ed:function(t){return t.__shaka_id||(t.__shaka_id=Ln.Kf++),t.__shaka_id},Kf:0,Ef:function(t){var e=Ln.ee(t);return e.active="disabled"!=t.mode,e.type="text",e.originalTextId=t.id,"captions"==t.kind&&(e.mimeType="application/cea-608"),t.kind&&(e.roles=[t.kind]),e},de:function(t){var e=Ln.ee(t);return e.active=t.enabled,e.type="variant",e.originalAudioId=t.id,"main"==t.kind&&(e.primary=!0),t.kind&&(e.roles=[t.kind],e.audioRoles=[t.kind]),e},ee:function(t){return{id:Ln.ed(t),active:!1,type:"",bandwidth:0,language:On(t.language),label:t.label,kind:t.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}},Ab:function(t){return t.allowedByApplication&&t.allowedByKeySystem},sf:function(t){return t.filter((function(t){return Ln.Ab(t)}))},$d:function(t,e){for(var n=t.filter((function(t){return t.audio&&t.audio.channelsCount})),i=new Map,r=(n=h(n)).next();!r.done;r=n.next()){var o=(r=r.value).audio.channelsCount;i.has(o)||i.set(o,[]),i.get(o).push(r)}return 0==(n=Array.from(i.keys())).length?t:(r=n.filter((function(t){return t<=e}))).length?i.get(Math.max.apply(null,r)):i.get(Math.min.apply(null,n))},Rb:function(t,e,n){var i=t,r=t.filter((function(t){return t.primary}));r.length&&(i=r);var o=i.length?i[0].language:"";if(i=i.filter((function(t){return t.language==o})),e){var a=Dn(On(e),t.map((function(t){return t.language})));a&&(i=t.filter((function(t){return On(t.language)==a})))}if(n){if((t=Ln.Zd(i,n)).length)return t;G.m("No exact match for the text role could be found.")}else if((t=i.filter((function(t){return 0==t.roles.length}))).length)return t;return(t=i.map((function(t){return t.roles})).reduce(Be.Oc,[])).length?Ln.Zd(i,t[0]):i},Zd:function(t,e){return t.filter((function(t){return t.roles.includes(e)}))},ce:function(t,e,n){for(var i=0;i<n.length;i++)if(n[i].audio==t&&n[i].video==e)return n[i];return null},Ff:function(t){return"audio"==t.type},If:function(t){return"video"==t.type},Bf:function(t){var e=[];return t.audio&&e.push(t.audio),t.video&&e.push(t.video),e},xb:function(t){return Ln.Ff(t)?"type=audio codecs="+t.codecs+" bandwidth="+t.bandwidth+" channelsCount="+t.channelsCount+" audioSamplingRate="+t.audioSamplingRate:Ln.If(t)?"type=video codecs="+t.codecs+" bandwidth="+t.bandwidth+" frameRate="+t.frameRate+" width="+t.width+" height="+t.height:"unexpected stream type"}};function jn(){this.h=null,this.c=!1,this.b=new W,this.g=[],this.i=!1,this.a=this.f=null}function Un(t,e){return t&&(e=e.filter((function(e){return Ln.ld(e,t,{width:1/0,height:1/0})}))),e.sort((function(t,e){return t.bandwidth-e.bandwidth}))}function zn(t,e){this.a=t,this.b=e}function Bn(t,e){var n=new zn(2,6),i=qn,r=i.a,o=n.b-r.b;(0<(n.a-r.a||o)?i.c:i.b)(i.a,n,t,e)}function Fn(t,e,n,i){G.Z([n,"has been deprecated and will be removed in",e,". We are currently at version",t,". Additional information:",i].join(" "))}function Hn(t,e,n,i){G.jc([n,"has been deprecated and has been removed in",e,". We are now at version",t,". Additional information:",i].join(""))}H("shaka.abr.SimpleAbrManager",jn),jn.prototype.stop=function(){this.h=null,this.c=!1,this.g=[],this.f=null},jn.prototype.stop=jn.prototype.stop,jn.prototype.init=function(t){this.h=t},jn.prototype.init=jn.prototype.init,jn.prototype.chooseVariant=function(){var t=Un(this.a.restrictions,this.g),e=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);this.g.length&&!t.length&&(G.m("No variants met the ABR restrictions. Choosing a variant by lowest bandwidth."),t=[(t=Un(null,this.g))[0]]);for(var n=t[0]||null,i=0;i<t.length;++i){var r=t[i],o=r.bandwidth/this.a.bandwidthDowngradeTarget,a=(t[i+1]||{bandwidth:1/0}).bandwidth/this.a.bandwidthUpgradeTarget;G.J("Bandwidth ranges:",(r.bandwidth/1e6).toFixed(3),(o/1e6).toFixed(3),(a/1e6).toFixed(3)),e>=o&&e<=a&&(n=r)}return this.f=Date.now(),n},jn.prototype.chooseVariant=jn.prototype.chooseVariant,jn.prototype.enable=function(){this.c=!0},jn.prototype.enable=jn.prototype.enable,jn.prototype.disable=function(){this.c=!1},jn.prototype.disable=jn.prototype.disable,jn.prototype.segmentDownloaded=function(t,e){G.J("Segment downloaded:","deltaTimeMs="+t,"numBytes="+e,"lastTimeChosenMs="+this.f,"enabled="+this.c);var n=this.b;if(!(16e3>e)){var i=8e3*e/t,r=t/1e3;n.a+=e,$(n.b,r,i),$(n.c,r,i)}if(null!=this.f&&this.c)t:{if(G.J("Suggesting Streams..."),this.i){if(Date.now()-this.f<1e3*this.a.switchInterval){G.J("Still within switch interval...");break t}}else{if(!(128e3<=this.b.a)){G.J("Still waiting for a good estimate...");break t}this.i=!0}n=this.chooseVariant(),i=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate),G.debug("Calling switch_(), bandwidth="+Math.round(i/1e3)+" kbps"),this.h(n)}},jn.prototype.segmentDownloaded=jn.prototype.segmentDownloaded,jn.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate)},jn.prototype.getBandwidthEstimate=jn.prototype.getBandwidthEstimate,jn.prototype.setVariants=function(t){this.g=t},jn.prototype.setVariants=jn.prototype.setVariants,jn.prototype.configure=function(t){this.a=t},jn.prototype.configure=jn.prototype.configure,zn.prototype.toString=function(){return"v"+this.a+"."+this.b};var qn=null,Kn="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),$n="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Vn=["loop","playbackRate"],Wn=["pause","play"],Gn="abrstatuschanged adaptation buffering drmsessionupdate emsg error expirationupdated largegap loading manifestparsed onstatechange onstateidle streaming textchanged texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading variantchanged".split(" "),Xn={getAssetUri:2,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,usingEmbeddedTextTrack:2,getLoadMode:10},Yn={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},Zn=[["getConfiguration","configure"]],Jn=[["isTextTrackVisible","setTextTrackVisibility"]],Qn="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectEmbeddedTextTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay".split(" "),ti=["attach","detach","load","unload"];function ei(t){return JSON.stringify(t,(function(t,e){if("function"!=typeof e){if(e instanceof Event||e instanceof St){var n={};for(r in e){var i=e[r];i&&"object"==typeof i?"detail"==r&&(n[r]=i):r in Event||(n[r]=i)}return n}if(e instanceof Error){var r=new Set(["name","message","stack"]);for(n in e)r.add(n);for(n=(i=h(Object.getOwnPropertyNames(e))).next();!n.done;n=i.next())r.add(n.value);for(i={},n=(r=h(r)).next();!n.done;n=r.next())i[n=n.value]=e[n];r={__type__:"Error",contents:i}}else if(e instanceof TimeRanges)for(r={__type__:"TimeRanges",length:e.length,start:[],end:[]},n=0;n<e.length;++n)r.start.push(e.start(n)),r.end.push(e.end(n));else r=e instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(e)}:"number"==typeof e?isNaN(e)?"NaN":isFinite(e)?e:0>e?"-Infinity":"Infinity":e;return r}}))}function ni(t){return JSON.parse(t,(function(t,e){if("NaN"==e)var n=NaN;else if("-Infinity"==e)n=-1/0;else if("Infinity"==e)n=1/0;else if(e&&"object"==typeof e&&"TimeRanges"==e.__type__)n=function(t){return{length:t.length,start:function(e){return t.start[e]},end:function(e){return t.end[e]}}}(e);else if(e&&"object"==typeof e&&"Uint8Array"==e.__type__)n=new Uint8Array(e.entries);else if(e&&"object"==typeof e&&"Error"==e.__type__){n=e.contents;var i,r=Error(n.message);for(i in n)r[i]=n[i];n=r}else n=e;return n}))}function ii(t,e,n,i,r,o){this.S=t,this.f=new lt(e),this.V=n,this.l=!1,this.v=i,this.K=r,this.G=o,this.b=this.h=!1,this.H="",this.i=null,this.o=this.sd.bind(this),this.u=this.Rf.bind(this),this.a={video:{},player:{}},this.F=0,this.c={},this.g=null,hi.add(this)}var ri=!1,oi=null;function ai(t){for(var e=h(hi),n=e.next();!n.done;n=e.next())si(n.value,t)}function si(t,e){G.debug("CastSender: onExistingSessionJoined");var n=t.G();t.g=new pt,t.l=!0,t.ud(n,e)}function ui(t){for(var e=h(hi),n=e.next();!n.done;n=e.next()){n=n.value;var i=t;G.debug("CastSender: receiver status",i),ri="available"==i,n.f.Gc()}}function ci(t){var e=oi;e.removeUpdateListener(t.o),e.removeMessageListener("urn:x-cast:com.google.shaka.v2",t.u)}function li(t){for(var e in t.c){var n=t.c[e];delete t.c[e],n.reject(new dt(1,7,7e3))}}function fi(t,e){var n=ei(e),i=oi;try{i.sendMessage("urn:x-cast:com.google.shaka.v2",n,(function(){}),G.error)}catch(e){throw G.error("Cast session sendMessage threw",e),n=new dt(2,8,8005,e),t.v("player",new St("error",{detail:n})),t.ub(),n}}(i=ii.prototype).destroy=function(){return hi.delete(this),li(this),oi&&ci(this),this.f&&(this.f.stop(),this.f=null),this.K=this.v=null,this.b=this.h=!1,this.u=this.o=this.g=this.c=this.a=this.i=null,Promise.resolve()},i.ha=function(){return this.b},i.xd=function(){return this.H},i.init=function(){if(t.chrome&&chrome.cast&&chrome.cast.isAvailable&&this.S.length){this.h=!0,this.f.Gc();var e=new chrome.cast.SessionRequest(this.S);e=new chrome.cast.ApiConfig(e,ai.bind(this),ui.bind(this),"origin_scoped"),chrome.cast.initialize(e,(function(){G.debug("CastSender: init")}),(function(t){G.error("CastSender: init error",t)})),ri&&this.f.T(.02),(e=oi)&&e.status!=chrome.cast.SessionStatus.STOPPED?(G.debug("CastSender: re-using existing connection"),si(this,e)):oi=null}},i.Gd=function(t){this.i=t,this.b&&fi(this,{type:"appData",appData:this.i})},i.cast=function(t){return this.h?ri?this.b?Promise.reject(new dt(1,8,8002)):(this.g=new pt,chrome.cast.requestSession(this.ud.bind(this,t),this.pe.bind(this)),this.g):Promise.reject(new dt(1,8,8001)):Promise.reject(new dt(1,8,8e3))},i.ub=function(){if(this.b){if(li(this),oi){ci(this);try{oi.stop((function(){}),(function(){}))}catch(t){}oi=null}this.sd()}},i.get=function(t,e){if("video"==t){if(Wn.includes(e))return this.ye.bind(this,t,e)}else if("player"==t){if(Yn[e]&&!this.get("player","isLive")())return function(){};if(Qn.includes(e))return this.ye.bind(this,t,e);if(ti.includes(e))return this.hg.bind(this,t,e);if(Xn[e])return this.ve.bind(this,t,e)}return this.ve(t,e)},i.set=function(t,e,n){this.a[t][e]=n,fi(this,{type:"set",targetName:t,property:e,value:n})},i.ud=function(t,e){G.debug("CastSender: onSessionInitiated"),oi=e,e.addUpdateListener(this.o),e.addMessageListener("urn:x-cast:com.google.shaka.v2",this.u),this.sd(),fi(this,{type:"init",initState:t,appData:this.i}),this.g.resolve()},i.pe=function(t){var e=8003;switch(t.code){case"cancel":e=8004;break;case"timeout":e=8005;break;case"receiver_unavailable":e=8006}this.g.reject(new dt(2,8,e,t))},i.ve=function(t,e){return this.a[t][e]},i.ye=function(t,e,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];fi(this,{type:"call",targetName:t,methodName:e,args:i})},i.hg=function(t,e,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];r=new pt;var o=this.F.toString();this.F++,this.c[o]=r;try{fi(this,{type:"asyncCall",targetName:t,methodName:e,args:i,id:o})}catch(t){r.reject(t)}return r},i.sd=function(){var t=!!oi&&"connected"==oi.status;if(G.debug("CastSender: connection status",t),this.b&&!t){for(var e in this.K(),this.a)this.a[e]={};li(this)}this.H=(this.b=t)?oi.receiver.friendlyName:"",this.f.Gc()},i.Rf=function(t,e){var n=ni(e);switch(G.J("CastSender: message",n),n.type){case"event":var i=n.event;this.v(n.targetName,new St(i.type,i));break;case"update":for(var r in i=n.update)for(var o in n=this.a[r]||{},i[r])n[o]=i[r][o];this.l&&(this.V(),this.l=!1);break;case"asyncComplete":if(r=n.id,n=n.error,o=this.c[r],delete this.c[r],o)if(n){for(i in r=new dt(n.severity,n.category,n.code),n)r[i]=n[i];o.reject(r)}else o.resolve()}};var hi=new Set;function di(t,e,n){var i=this;Et.call(this),this.c=t,this.b=e,this.i=this.g=this.f=this.l=this.h=null,this.u=n,this.o=new Map,this.a=new ii(n,(function(){return vi(i)}),(function(){return gi(i)}),(function(t,e){return bi(i,t,e)}),(function(){return yi(i)}),(function(){return mi(i)})),function(t){for(var e in t.a.init(),t.i=new Ut,Kn.forEach(function(t){this.i.B(this.c,t,this.G.bind(this))}.bind(t)),Gn.forEach(function(t){this.i.B(this.b,t,this.v.bind(this))}.bind(t)),t.h={},t.c)Object.defineProperty(t.h,e,{configurable:!1,enumerable:!0,get:t.F.bind(t,e),set:t.H.bind(t,e)});t.l={},pi(t,(function(e){Object.defineProperty(t.l,e,{configurable:!1,enumerable:!0,get:function(){return function t(e,n){if(e.o.has(n)&&(n=e.o.get(n)),"addEventListener"==n)return e.g.addEventListener.bind(e.g);if("removeEventListener"==n)return e.g.removeEventListener.bind(e.g);if("getMediaElement"==n)return function(){return this.h}.bind(e);if("getSharedConfiguration"==n)return G.m("Can't share configuration across a network. Returning copy."),e.a.get("player","getConfiguration");if("getNetworkingEngine"==n)return e.a.ha()&&G.m("NOTE: getNetworkingEngine() is always local!"),e.b.Tb.bind(e.b);if(e.a.ha()){if("getManifest"==n||"drmInfo"==n)return function(){return G.Z(n+"() does not work while casting!"),null};if("getManifestUri"==n)return Bn("getManifestUri",'Please use "getAssetUri" instead.'),t(e,"getAssetUri");if("attach"==n||"detach"==n)return function(){return G.Z(n+"() does not work while casting!"),Promise.resolve()}}return e.a.ha()&&0==Object.keys(e.a.a.video).length&&Xn[n]||!e.a.ha()?e.b[n].bind(e.b):e.a.get("player",n)}(t,e)}})})),function(t){var e=new Map;pi(t,(function(n,i){if(e.has(i)){var r=e.get(i);n.length<r.length?t.o.set(n,r):t.o.set(r,n)}else e.set(i,n)}))}(t),t.f=new Et,t.f.gc=t.h,t.g=new Et,t.g.gc=t.l}(this)}function pi(t,e){function n(t){return"constructor"!=t&&"function"==typeof i[t]&&!r.has(t)}var i=t.b,r=new Set;for(o in i)n(o)&&(r.add(o),e(o,i[o]));for(var o=Object.getPrototypeOf(i),a=Object.getPrototypeOf({});o&&o!=a;){for(var s=h(Object.getOwnPropertyNames(o)),u=s.next();!u.done;u=s.next())n(u=u.value)&&(r.add(u),e(u,i[u]));o=Object.getPrototypeOf(o)}}function mi(t){var e={video:{},player:{},playerAfterLoad:{},manifest:t.b.pc(),startTime:null};return t.c.pause(),Vn.forEach(function(t){e.video[t]=this.c[t]}.bind(t)),t.c.ended||(e.startTime=t.c.currentTime),Zn.forEach(function(t){var n=t[1];t=this.b[t[0]](),e.player[n]=t}.bind(t)),Jn.forEach(function(t){var n=t[1];t=this.b[t[0]](),e.playerAfterLoad[n]=t}.bind(t)),e}function vi(t){t.dispatchEvent(new St("caststatuschanged"))}function gi(t){t.f.dispatchEvent(new St(t.h.paused?"pause":"play"))}function yi(t){Zn.forEach(function(t){var e=t[1];t=this.a.get("player",t[0])(),this.b[e](t)}.bind(t));var e=t.a.get("player","getAssetUri")(),n=t.a.get("video","ended"),i=Promise.resolve(),r=t.c.autoplay,o=null;n||(o=t.a.get("video","currentTime")),e&&(t.c.autoplay=!1,i=t.b.load(e,o));var a={};Vn.forEach(function(t){a[t]=this.a.get("video",t)}.bind(t)),i.then((function(){t.c&&(Vn.forEach(function(t){this.c[t]=a[t]}.bind(t)),Jn.forEach(function(t){var e=t[1];t=this.a.get("player",t[0])(),this.b[e](t)}.bind(t)),t.c.autoplay=r,e&&t.c.play())}),(function(e){t.b.dispatchEvent(new St("error",{detail:e}))}))}function bi(t,e,n){t.a.ha()&&("video"==e?t.f.dispatchEvent(n):"player"==e&&t.g.dispatchEvent(n))}function wi(t,e,n,i){var r=this;Et.call(this),this.a=t,this.b=e,this.c=new Ut,this.G={video:t,player:e},this.u=n||function(){},this.H=i||function(t){return t},this.v=!1,this.h=!0,this.g=0,this.o=!1,this.l=!0,this.i=this.f=null,this.F=new lt((function(){Si(r)})),function(t){var e=cast.receiver.CastReceiverManager.getInstance();e.onSenderConnected=t.re.bind(t),e.onSenderDisconnected=t.re.bind(t),e.onSystemVolumeChanged=t.af.bind(t),t.i=e.getCastMessageBus("urn:x-cast:com.google.cast.media"),t.i.onMessage=t.Mf.bind(t),t.f=e.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),t.f.onMessage=t.Wf.bind(t),e.start(),Kn.forEach(function(t){this.c.B(this.a,t,this.we.bind(this,"video"))}.bind(t)),Gn.forEach(function(t){this.c.B(this.b,t,this.we.bind(this,"player"))}.bind(t)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?t.b.Hd(3840,2160):t.b.Hd(1920,1080),t.c.B(t.a,"loadeddata",function(){this.o=!0}.bind(t)),t.c.B(t.b,"loading",function(){this.h=!1,xi(this)}.bind(t)),t.c.B(t.a,"playing",function(){this.h=!1,xi(this)}.bind(t)),t.c.B(t.a,"pause",function(){xi(this)}.bind(t)),t.c.B(t.b,"unloading",function(){this.h=!0,xi(this)}.bind(t)),t.c.B(t.a,"ended",function(){var t=this;new lt((function(){t.a&&t.a.ended&&(t.h=!0,xi(t))})).T(5)}.bind(t))}(this)}function xi(t){Promise.resolve().then(function(){this.b&&(this.dispatchEvent(new St("caststatuschanged")),Ti(this)||Ci(this,0))}.bind(t))}function Si(t){t.F.T(.5);var e={video:{},player:{}};if($n.forEach(function(t){e.video[t]=this.a[t]}.bind(t)),t.b.Y())for(var n in Yn)0==t.g%Yn[n]&&(e.player[n]=t.b[n]());for(var i in Xn)0==t.g%Xn[i]&&(e.player[i]=t.b[i]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(e.video.volume=n.level,e.video.muted=n.muted),t.o&&(t.g+=1),ki(t,{type:"update",update:e},t.f),Ti(t)}function Ti(t){return!(!t.l||!t.a.duration&&!t.b.Y())&&(Ei(t),t.l=!1,!0)}function Ei(t){var e={contentId:t.b.pc(),streamType:t.b.Y()?"LIVE":"BUFFERED",duration:t.a.duration,contentType:""};Ci(t,0,e)}function ki(t,e,n,i){t.v&&(t=ei(e),i?n.getCastChannel(i).send(t):n.broadcast(t))}function Ci(t,e,n){var i=t.a.playbackRate,r=Mi;i={mediaSessionId:0,playbackRate:i,playerState:r=t.h?r.IDLE:t.b.fd()?r.Je:t.a.paused?r.Le:r.Me,currentTime:t.a.currentTime,supportedMediaCommands:15,volume:{level:t.a.volume,muted:t.a.muted}},n&&(i.media=n),ki(t,{requestId:e,type:"MEDIA_STATUS",status:[i]},t.i)}t.__onGCastApiAvailable=function(t){if(t)for(var e=(t=h(hi)).next();!e.done;e=t.next())e.value.init()},q(di,Et),H("shaka.cast.CastProxy",di),di.prototype.destroy=function(t){return t&&this.a.ub(),this.i&&(this.i.release(),this.i=null),t=[],this.b&&(t.push(this.b.destroy()),this.b=null),this.a&&(t.push(this.a.destroy()),this.a=null),this.l=this.h=this.c=null,Promise.all(t)},di.prototype.destroy=di.prototype.destroy,di.prototype.Cf=function(){return this.h},di.prototype.getVideo=di.prototype.Cf,di.prototype.uf=function(){return this.l},di.prototype.getPlayer=di.prototype.uf,di.prototype.Re=function(){return this.a.h&&ri},di.prototype.canCast=di.prototype.Re,di.prototype.ha=function(){return this.a.ha()},di.prototype.isCasting=di.prototype.ha,di.prototype.xd=function(){return this.a.xd()},di.prototype.receiverName=di.prototype.xd,di.prototype.cast=function(){var t=mi(this);return this.a.cast(t).then(function(){if(this.b)return this.b.Od()}.bind(this))},di.prototype.cast=di.prototype.cast,di.prototype.Gd=function(t){this.a.Gd(t)},di.prototype.setAppData=di.prototype.Gd,di.prototype.Cg=function(){var t=this.a;if(t.b){var e=t.G();chrome.cast.requestSession(t.ud.bind(t,e),t.pe.bind(t))}},di.prototype.suggestDisconnect=di.prototype.Cg,di.prototype.Ue=function(t){var e=this;return p((function n(){return L(n,(function(n){switch(n.j){case 1:return t==e.u?n.return():(e.u=t,e.a.ub(),E(n,e.a.destroy(),2));case 2:e.a=null,e.a=new ii(t,(function(){return vi(e)}),(function(){return gi(e)}),(function(t,n){return bi(e,t,n)}),(function(){return yi(e)}),(function(){return mi(e)})),e.a.init(),k(n)}}))}))},di.prototype.changeReceiverId=di.prototype.Ue,di.prototype.ub=function(){this.a.ub()},di.prototype.forceDisconnect=di.prototype.ub,di.prototype.F=function(t){if("addEventListener"==t)return this.f.addEventListener.bind(this.f);if("removeEventListener"==t)return this.f.removeEventListener.bind(this.f);if(this.a.ha()&&0==Object.keys(this.a.a.video).length){var e=this.c[t];if("function"!=typeof e)return e}return this.a.ha()?this.a.get("video",t):("function"==typeof(t=this.c[t])&&(t=t.bind(this.c)),t)},di.prototype.H=function(t,e){this.a.ha()?this.a.set("video",t,e):this.c[t]=e},di.prototype.G=function(t){this.a.ha()||this.f.dispatchEvent(new St(t.type,t))},di.prototype.v=function(t){this.a.ha()||this.g.dispatchEvent(t)},q(wi,Et),H("shaka.cast.CastReceiver",wi),wi.prototype.isConnected=function(){return this.v},wi.prototype.isConnected=wi.prototype.isConnected,wi.prototype.Hf=function(){return this.h},wi.prototype.isIdle=wi.prototype.Hf,wi.prototype.destroy=function(){var t=this;return p((function e(){var n;return L(e,(function(e){switch(e.j){case 1:return t.c&&(t.c.release(),t.c=null),n=[],t.b&&(n.push(t.b.destroy()),t.b=null),t.F&&(t.F.stop(),t.F=null),t.a=null,t.G=null,t.u=null,t.v=!1,t.h=!0,t.f=null,t.i=null,E(e,Promise.all(n),2);case 2:cast.receiver.CastReceiverManager.getInstance().stop(),k(e)}}))}))},wi.prototype.destroy=wi.prototype.destroy,(i=wi.prototype).re=function(){this.g=0,this.l=!0,this.v=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,xi(this)},i.we=function(t,e){this.b&&(Si(this),ki(this,{type:"event",targetName:t,event:e},this.f))},i.af=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&ki(this,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},this.f),ki(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.f)},i.Wf=function(t){var e=ni(t.data);switch(G.debug("CastReceiver: message",e),e.type){case"init":this.g=0,this.o=!1,this.l=!0,function(t,e,n){for(var i in e.player)t.b[i](e.player[i]);t.u(n),n=Promise.resolve();var r=t.a.autoplay;e.manifest&&(t.a.autoplay=!1,n=t.b.load(e.manifest,e.startTime)),n.then((function(){if(t.b){for(var n in e.video)t.a[n]=e.video[n];for(var i in e.playerAfterLoad)t.b[i](e.playerAfterLoad[i]);t.a.autoplay=r,e.manifest&&(t.a.play(),Ci(t,0))}}),(function(e){t.b.dispatchEvent(new St("error",{detail:e}))}))}(this,e.initState,e.appData),Si(this);break;case"appData":this.u(e.appData);break;case"set":var n=e.targetName,i=e.property;if(e=e.value,"video"==n){var r=cast.receiver.CastReceiverManager.getInstance();if("volume"==i){r.setSystemVolumeLevel(e);break}if("muted"==i){r.setSystemVolumeMuted(e);break}}this.G[n][i]=e;break;case"call":(n=this.G[e.targetName])[e.methodName].apply(n,e.args);break;case"asyncCall":n=e.targetName,i=e.methodName,"player"==n&&"load"==i&&(this.g=0,this.o=!1),r=e.id,t=t.senderId;var o=this.G[n];e=o[i].apply(o,e.args),"player"==n&&"load"==i&&(e=e.then(function(){this.l=!0}.bind(this))),e.then(this.Be.bind(this,t,r,null),this.Be.bind(this,t,r))}},i.Mf=function(t){var e=ni(t.data);switch(G.debug("CastReceiver: message",e),e.type){case"PLAY":this.a.play(),Ci(this,0);break;case"PAUSE":this.a.pause(),Ci(this,0);break;case"SEEK":t=e.currentTime;var n=e.resumeState;null!=t&&(this.a.currentTime=Number(t)),n&&"PLAYBACK_START"==n?(this.a.play(),Ci(this,0)):n&&"PLAYBACK_PAUSE"==n&&(this.a.pause(),Ci(this,0));break;case"STOP":this.b.Od().then(function(){this.b&&Ci(this,0)}.bind(this));break;case"GET_STATUS":Ci(this,Number(e.requestId));break;case"VOLUME":t=(n=e.volume).level,n=n.muted;var i=this.a.volume,r=this.a.muted;null!=t&&(this.a.volume=Number(t)),null!=n&&(this.a.muted=n),i==this.a.volume&&r==this.a.muted||Ci(this,0);break;case"LOAD":this.g=0,this.l=this.o=!1,t=e.media,n=e.currentTime,i=this.H(t.contentId),r=e.autoplay||!0,this.u(t.customData),r&&(this.a.autoplay=!0),this.b.load(i,n).then(function(){this.b&&Ei(this)}.bind(this)).catch(function(t){var n="LOAD_FAILED";7==t.category&&7e3==t.code&&(n="LOAD_CANCELLED"),ki(this,{requestId:Number(e.requestId),type:n},this.i)}.bind(this));break;default:G.m("Unrecognized message type from the generic Chromecast controller!",e.type),ki(this,{requestId:Number(e.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.i)}},i.Be=function(t,e,n){this.b&&ki(this,{type:"asyncComplete",id:e,error:n},this.f,t)};var Mi={IDLE:"IDLE",Me:"PLAYING",Je:"BUFFERING",Le:"PAUSED"};function Ai(t,e){this.N=t,this.b=e==_i,this.a=0}H("shaka.util.DataViewReader",Ai);var _i=1;function Pi(){throw new dt(2,3,3e3)}function Ni(){this.c=[],this.b=[],this.a=!1}function Oi(t){for(var e=null!=t.flags?12:8;t.reader.ya()&&!t.parser.a;)t.parser.Ac(t.start+e,t.reader,t.partialOkay)}function Ii(t){for(var e=null!=t.flags?12:8,n=t.reader.I();0<n&&!t.parser.a;--n)t.parser.Ac(t.start+e,t.reader,t.partialOkay)}function Di(t){return function(e){t(e.reader.fb(e.reader.N.byteLength-e.reader.ga()))}}function Ri(t){for(var e=0,n=0;n<t.length;n++)e=e<<8|t.charCodeAt(n);return e}function Li(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)}function ji(t){var e=this;this.a=[],this.b=[],this.data=[],(new Ni).L("moov",Oi).ia("pssh",(function(t){if(1<t.version)G.m("Unrecognized PSSH version found!");else{var n=t.reader.N;if(n=new Uint8Array(n.buffer,n.byteOffset-12,t.size),e.data.push(n),e.a.push(fe.Ic(t.reader.fb(16))),0<t.version){n=t.reader.I();for(var i=0;i<n;++i){var r=fe.Ic(t.reader.fb(16));e.b.push(r)}}}})).parse(t),0==this.data.length&&G.m("No pssh box found!")}Ai.Endianness={Lg:0,Ng:_i},Ai.prototype.ya=function(){return this.a<this.N.byteLength},Ai.prototype.hasMoreData=Ai.prototype.ya,Ai.prototype.ga=function(){return this.a},Ai.prototype.getPosition=Ai.prototype.ga,Ai.prototype.hf=function(){return this.N.byteLength},Ai.prototype.getLength=Ai.prototype.hf,Ai.prototype.na=function(){try{var t=this.N.getUint8(this.a);return this.a+=1,t}catch(t){Pi()}},Ai.prototype.readUint8=Ai.prototype.na,Ai.prototype.$b=function(){try{var t=this.N.getUint16(this.a,this.b);return this.a+=2,t}catch(t){Pi()}},Ai.prototype.readUint16=Ai.prototype.$b,Ai.prototype.I=function(){try{var t=this.N.getUint32(this.a,this.b);return this.a+=4,t}catch(t){Pi()}},Ai.prototype.readUint32=Ai.prototype.I,Ai.prototype.xe=function(){try{var t=this.N.getInt32(this.a,this.b);return this.a+=4,t}catch(t){Pi()}},Ai.prototype.readInt32=Ai.prototype.xe,Ai.prototype.Jb=function(){try{if(this.b)var t=this.N.getUint32(this.a,!0),e=this.N.getUint32(this.a+4,!0);else e=this.N.getUint32(this.a,!1),t=this.N.getUint32(this.a+4,!1)}catch(t){Pi()}if(2097151<e)throw new dt(2,3,3001);return this.a+=8,e*Math.pow(2,32)+t},Ai.prototype.readUint64=Ai.prototype.Jb,Ai.prototype.fb=function(t){this.a+t>this.N.byteLength&&Pi();var e=new Uint8Array(this.N.buffer,this.N.byteOffset+this.a,t);return this.a+=t,e},Ai.prototype.readBytes=Ai.prototype.fb,Ai.prototype.P=function(t){this.a+t>this.N.byteLength&&Pi(),this.a+=t},Ai.prototype.skip=Ai.prototype.P,Ai.prototype.ze=function(t){this.a<t&&Pi(),this.a-=t},Ai.prototype.rewind=Ai.prototype.ze,Ai.prototype.seek=function(t){(0>t||t>this.N.byteLength)&&Pi(),this.a=t},Ai.prototype.seek=Ai.prototype.seek,Ai.prototype.wd=function(){for(var t=this.a;this.ya()&&0!=this.N.getUint8(this.a);)this.a+=1;return t=new Uint8Array(this.N.buffer,this.N.byteOffset+t,this.a-t),this.a+=1,re(t)},Ai.prototype.readTerminatedString=Ai.prototype.wd,H("shaka.util.Mp4Parser",Ni),Ni.prototype.L=function(t,e){var n=Ri(t);return this.c[n]=0,this.b[n]=e,this},Ni.prototype.box=Ni.prototype.L,Ni.prototype.ia=function(t,e){var n=Ri(t);return this.c[n]=1,this.b[n]=e,this},Ni.prototype.fullBox=Ni.prototype.ia,Ni.prototype.stop=function(){this.a=!0},Ni.prototype.stop=Ni.prototype.stop,Ni.prototype.parse=function(t,e){var n=new Uint8Array(t);for(n=new Ai(new DataView(n.buffer,n.byteOffset,n.byteLength),0),this.a=!1;n.ya()&&!this.a;)this.Ac(0,n,e)},Ni.prototype.parse=Ni.prototype.parse,Ni.prototype.Ac=function(t,e,n){var i=e.ga(),r=e.I(),o=e.I();switch(G.J("Parsing MP4 box",Li(o)),r){case 0:r=e.N.byteLength-i;break;case 1:r=e.Jb()}var a=this.b[o];if(a){var s=null,u=null;1==this.c[o]&&(s=(u=e.I())>>>24,u&=16777215),o=i+r,n&&o>e.N.byteLength&&(o=e.N.byteLength),o-=e.ga(),e=0<o?e.fb(o):new Uint8Array(0),a({parser:this,partialOkay:n||!1,version:s,flags:u,reader:e=new Ai(new DataView(e.buffer,e.byteOffset,e.byteLength),0),size:r,start:i+t})}else e.P(Math.min(i+r-e.ga(),e.N.byteLength-e.ga()))},Ni.prototype.parseNext=Ni.prototype.Ac,Ni.children=Oi,Ni.sampleDescription=Ii,Ni.allData=Di,Ni.typeToString=Li;var Ui={oc:function(t,e){var n=Ui.U(t,e);return 1!=n.length?null:n[0]},Wc:function(t,e,n){return 1!=(t=Ui.ae(t,e,n)).length?null:t[0]},U:function(t,e){return Array.prototype.filter.call(t.childNodes,(function(t){return t instanceof Element&&t.tagName==e}))},ae:function(t,e,n){return Array.prototype.filter.call(t.childNodes,(function(t){return t instanceof Element&&t.localName==n&&t.namespaceURI==e}))},getAttributeNS:function(t,e,n){return t.hasAttributeNS(e,n)?t.getAttributeNS(e,n):null},qc:function(t){return Array.prototype.every.call(t.childNodes,(function(t){return t.nodeType==Node.TEXT_NODE||t.nodeType==Node.CDATA_SECTION_NODE}))?t.textContent.trim():null},M:function(t,e,n,i){i=void 0===i?null:i;var r=null;return null!=(t=t.getAttribute(e))&&(r=n(t)),null==r?i:r},$f:function(t){return t?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t)&&(t+="Z"),t=Date.parse(t),isNaN(t)?null:Math.floor(t/1e3)):null},Ia:function(t){if(!t)return null;var e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(t);return e?(t=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(t)?t:null):(G.m("Invalid duration string:",t),null)},Cc:function(t){var e=/([0-9]+)-([0-9]+)/.exec(t);return e?(t=Number(e[1]),isFinite(t)?(e=Number(e[2]),isFinite(e)?{start:t,end:e}:null):null):null},parseInt:function(t){return 0==(t=Number(t))%1?t:null},Bc:function(t){return 0==(t=Number(t))%1&&0<t?t:null},Gb:function(t){return 0==(t=Number(t))%1&&0<=t?t:null},parseFloat:function(t){return t=Number(t),isNaN(t)?null:t},Ze:function(t){var e;return t=(e=t.match(/^(\d+)\/(\d+)$/))?Number(e[1])/Number(e[2]):Number(t),isNaN(t)?null:t},ue:function(t,e){var n=new DOMParser;try{var i=n.parseFromString(t,"text/xml")}catch(t){}if(i&&i.documentElement.tagName==e)var r=i.documentElement;return r&&0<r.getElementsByTagName("parsererror").length?null:r},te:function(t,e){try{var n=re(t);return Ui.ue(n,e)}catch(t){}}},zi=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime");function Bi(t,e,n){var i=function(t){for(var e=[],n=(t=h(t)).next();!n.done;n=t.next())(n=qi(n.value))&&e.push(n);return e}(t),r=null;t=[];var o=[],a=new Set(i.map((function(t){return t.keyId})));if(a.delete(null),1<a.size)throw new dt(2,4,4010);if(n||(o=i.filter((function(t){return"urn:mpeg:dash:mp4protection:2011"!=t.Ae||(r=t.init||r,!1)}))).length&&(0==(t=function(t,e,n){for(var i=[],r=(n=h(n)).next();!r.done;r=n.next()){r=r.value;var o=zi.get(r.Ae);if(o){var a;if(a=Ui.Wc(r.node,"urn:microsoft:playready","pro")){a=fe.Fa(a.textContent);var s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),u=a.length,c=s.length+16+u,l=new ArrayBuffer(c),f=new Uint8Array(l);l=new DataView(l);var d=0;l.setUint32(d,c),d+=4,l.setUint32(d,1886614376),d+=4,l.setUint32(d,0),d+=4,f.set(s,d),d+=s.length,l.setUint32(d,u),d+=4,f.set(a,d),a=[{initData:f,initDataType:"cenc",keyId:r.keyId}]}else a=null;a=He(o,r.init||t||a),(o=Hi.get(o))&&(a.licenseServerUri=o(r)),i.push(a)}else for(r=h(r=e(r.node)||[]),o=r.next();!o.done;o=r.next())i.push(o.value)}return i}(r,e,o)).length&&(t=[He("",r)])),i.length&&(n||!o.length))for(t=[],n=(e=h(zi.values())).next();!n.done;n=e.next())"org.w3.clearkey"!=(n=n.value)&&t.push(He(n,r));if(a=Array.from(a)[0]||null)for(n=(e=h(t)).next();!n.done;n=e.next())for(i=(n=h(n.value.initData)).next();!i.done;i=n.next())i.value.keyId=a;return{Xd:a,Pg:r,drmInfos:t,be:!0}}var Fi,Hi=(new Map).set("com.widevine.alpha",(function(t){return(t=Ui.Wc(t.node,"urn:microsoft","laurl"))&&t.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",(function(t){return(t=Ui.Wc(t.node,"urn:microsoft:playready","pro"))&&(t=function(t){var e=0,n=new DataView(t).getUint32(e,!0);if(e+=4,n!==t.byteLength)return G.m("PlayReady Object with invalid length encountered."),[];e+=2,n=[];for(var i=new DataView(t);e<t.byteLength-1;){var r=i.getUint16(e,!0);e+=2;var o=i.getUint16(e,!0);e+=2;var a=new Uint8Array(t,e,o);n.push({type:r,value:a}),e+=o}return n}((t=fe.Fa(t.textContent)).buffer).filter((function(t){return 1===t.type}))[0])?(t=oe(t.value,!0),(t=Ui.ue(t,"WRMHEADER"))?function(t){for(var e=(t=h(t.getElementsByTagName("DATA"))).next();!e.done;e=t.next())for(var n=(e=h(e.value.childNodes)).next();!n.done;n=e.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent;return""}(t):""):""}));function qi(t){var e=t.getAttribute("schemeIdUri"),n=Ui.getAttributeNS(t,"urn:mpeg:cenc:2013","default_KID"),i=Ui.ae(t,"urn:mpeg:cenc:2013","pssh").map(Ui.qc);if(!e)return G.error("Missing required schemeIdUri attribute on","ContentProtection element",t),null;if(e=e.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new dt(2,4,4009);var r=[];try{r=i.map((function(t){return{initDataType:"cenc",initData:fe.Fa(t),keyId:null}}))}catch(t){throw new dt(2,4,4007)}return{node:t,Ae:e,keyId:n,init:0<r.length?r:null}}function Ki(e,n,i,r,o){var a={RepresentationID:n,Number:i,Bandwidth:r,Time:o};return e.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(n,i,r,o){if("$$"==n)return"$";var s=a[i];if(null==s)return G.m("URL template does not have an available substitution for identifier",'"'+i+'":',e),n;switch("RepresentationID"==i&&r&&(G.m("URL template should not contain a width specifier for identifier",'"RepresentationID":',e),r=void 0),"Time"==i&&(s=Math.round(s)),o){case void 0:case"d":case"i":case"u":n=s.toString();break;case"o":n=s.toString(8);break;case"x":n=s.toString(16);break;case"X":n=s.toString(16).toUpperCase();break;default:n=s.toString()}return r=t.parseInt(r,10)||1,Array(Math.max(0,r-n.length)+1).join("0")+n}))}function $i(t,e){var n=Vi(t,e,"timescale"),i=1;n&&(i=Ui.Bc(n)||1),n=Vi(t,e,"duration"),(n=Ui.Bc(n||""))&&(n/=i);var r=Vi(t,e,"startNumber"),o=Number(Vi(t,e,"presentationTimeOffset"))||0,a=Ui.Gb(r||"");null!=r&&null!=a||(a=1);var s=Wi(t,e,"SegmentTimeline");if(r=null,s){r=i;var u=t.W.duration||1/0;s=Ui.U(s,"S");for(var c=[],l=-o,f=0;f<s.length;++f){var h=s[f],d=Ui.M(h,"t",Ui.Gb),p=Ui.M(h,"d",Ui.Gb),m=Ui.M(h,"r",Ui.parseInt);if(null!=d&&(d-=o),!p){G.m('"S" element must have a duration:','ignoring the remaining "S" elements.',h);break}if(d=null!=d?d:l,0>(m=m||0))if(f+1<s.length){if(null==(m=Ui.M(s[f+1],"t",Ui.Gb))){G.m('An "S" element cannot have a negative repeat','if the next "S" element does not have a valid start time:','ignoring the remaining "S" elements.',h);break}if(d>=m){G.m('An "S" element cannot have a negative repeat','if its start time exceeds the next "S" element\'s start time:','ignoring the remaining "S" elements.',h);break}m=Math.ceil((m-d)/p)-1}else{if(1/0==u){G.m('The last "S" element cannot have a negative repeat',"if the Period has an infinite duration:",'ignoring the last "S" element.',h);break}if(d/r>=u){G.m('The last "S" element cannot have a negative repeat',"if its start time exceeds the Period's duration:",'igoring the last "S" element.',h);break}m=Math.ceil((u*r-d)/p)-1}for(0<c.length&&d!=l&&(Math.abs((d-l)/r)>=1/15&&G.m("SegmentTimeline contains a large gap/overlap:","the content may have errors in it.",h),c[c.length-1].end=d/r),h=0;h<=m;++h)l=d+p,c.push({start:d/r,end:l/r,Hg:d}),d=l}r=c}return{timescale:i,da:n,hb:a,oa:o/i||0,Pd:o,R:r}}function Vi(t,e,n){return[e(t.A),e(t.aa),e(t.ma)].filter(Be.Ma).map((function(t){return t.getAttribute(n)})).reduce((function(t,e){return t||e}))}function Wi(t,e,n){return[e(t.A),e(t.aa),e(t.ma)].filter(Be.Ma).map((function(t){return Ui.oc(t,n)})).reduce((function(t,e){return t||e}))}function Gi(t,e,n,i,r,o){if(o=void 0===o?0:o,Ui.getAttributeNS(t,"http://www.w3.org/1999/xlink","href")){var a=function(t,e,n,i,r,o){for(var a=Ui.getAttributeNS(t,"http://www.w3.org/1999/xlink","href"),s=Ui.getAttributeNS(t,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=0;u<t.attributes.length;u++){var c=t.attributes[u];"http://www.w3.org/1999/xlink"==c.namespaceURI&&(t.removeAttributeNS(c.namespaceURI,c.localName),--u)}if(5<=o)return vt(new dt(2,4,4028));if("onLoad"!=s)return vt(new dt(2,4,4027));var l=Fe([i],[a]);return r.request(0,Dt(l,e)).X((function(i){if(!(i=Ui.te(i.data,t.tagName)))return vt(new dt(2,4,4001,a));for(;t.childNodes.length;)t.removeChild(t.childNodes[0]);for(;i.childNodes.length;){var s=i.childNodes[0];i.removeChild(s),t.appendChild(s)}for(s=0;s<i.attributes.length;s++){var u=i.attributes[s].nodeName,c=i.getAttribute(u);t.setAttribute(u,c)}return Gi(t,e,n,l[0],r,o+1)}))}(t,e,n,i,r,o);return n&&(a=a.X(void 0,(function(){return Gi(t,e,n,i,r,o)}))),a}a=[];for(var s=0;s<t.childNodes.length;s++){var u=t.childNodes[s];u instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Ui.getAttributeNS(u,"http://www.w3.org/1999/xlink","href")?(t.removeChild(u),--s):"SegmentTimeline"!=u.tagName&&a.push(Gi(u,e,n,i,r,o)))}return wt(a).X((function(){return t}))}function Xi(t,e,n){this.c=t,this.b=e,this.a=n}function Yi(t,e,n,i,r,o){this.position=t,this.startTime=e,this.endTime=n,this.c=i,this.b=r,this.a=o}function Zi(t,e,n,i){var r,o=(new Ni).ia("sidx",(function(t){r=function(t,e,n,i){var r=[];i.reader.P(4);var o=i.reader.I();if(0==o)throw G.error("Invalid timescale."),new dt(2,3,3005);if(0==i.version)var a=i.reader.I(),s=i.reader.I();else a=i.reader.Jb(),s=i.reader.Jb();i.reader.P(2);var u=i.reader.$b();for(t=t+i.size+s,s=0;s<u;s++){var c=i.reader.I(),l=(2147483648&c)>>>31;c&=2147483647;var f=i.reader.I();if(i.reader.P(4),1==l)throw G.error("Heirarchical SIDXs are not supported."),new dt(2,3,3006);r.push(new Yi(r.length,a/o-e,(a+f)/o-e,(function(){return n}),t,t+c-1)),a+=f,t+=c}return i.parser.stop(),r}(e,i,n,t)}));if(t&&o.parse(t),r)return r;throw G.error('Invalid box type, expected "sidx".'),new dt(2,3,3004)}function Ji(t){this.a=t}function Qi(t,e){for(;t.a.length&&t.a[t.a.length-1].startTime>=e;)t.a.pop();for(;t.a.length&&0>=t.a[0].endTime;)t.a.shift();if(0!=t.a.length){var n=t.a[t.a.length-1];t.a[t.a.length-1]=new Yi(n.position,n.startTime,e,n.c,n.b,n.a)}}function tr(t){this.b=t,this.a=new Ai(t,0),Fi||(Fi=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function er(t){var e=nr(t);if(7<e.length)throw new dt(2,3,3002);for(var n=0,i=0;i<e.length;i++)n=256*n+e[i];e=n,n=nr(t);t:{i=fe.Da;for(var r=0;r<Fi.length;r++)if(i(n,Fi[r])){i=!0;break t}i=!1}if(i)n=t.b.byteLength-t.a.ga();else{if(8==n.length&&224&n[1])throw new dt(2,3,3001);for(i=n[0]&(1<<8-n.length)-1,r=1;r<n.length;r++)i=256*i+n[r];n=i}return n=t.a.ga()+n<=t.b.byteLength?n:t.b.byteLength-t.a.ga(),i=new DataView(t.b.buffer,t.b.byteOffset+t.a.ga(),n),t.a.P(n),new ir(e,i)}function nr(t){var e,n=t.a.na();for(e=1;8>=e&&!(n&1<<8-e);e++);if(8<e)throw new dt(2,3,3002);var i=new Uint8Array(e);for(i[0]=n,n=1;n<e;n++)i[n]=t.a.na();return i}function ir(t,e){this.id=t,this.a=e}function rr(t){if(8<t.a.byteLength)throw new dt(2,3,3002);if(8==t.a.byteLength&&224&t.a.getUint8(0))throw new dt(2,3,3001);for(var e=0,n=0;n<t.a.byteLength;n++){e=256*e+t.a.getUint8(n)}return e}function or(){}function ar(t){var e=new tr(t.a);if(179!=(t=er(e)).id)throw G.m("Not a CueTime element."),new dt(2,3,3013);if(t=rr(t),183!=(e=er(e)).id)throw G.m("Not a CueTrackPositions element."),new dt(2,3,3012);e=new tr(e.a);for(var n=0;e.ya();){var i=er(e);if(241==i.id){n=rr(i);break}}return{Ig:t,gg:n}}function sr(t,e){var n=Wi(t,e,"Initialization");if(!n)return null;var i=t.A.ta,r=n.getAttribute("sourceURL");r&&(i=Fe(t.A.ta,[r])),r=0;var o=null;return(n=Ui.M(n,"range",Ui.Cc))&&(r=n.start,o=n.end),new Xi((function(){return i}),r,o)}function ur(t,e,n,i,r,o,a,s){var u=t.presentationTimeline,c=!t.sb||!t.W.hd,l=t.W.start,f=t.W.duration,h=e,d=null;return{createSegmentIndex:function(){var t=[h(i,r,o),"webm"==a?h(n.c(),n.b,n.a):null];return h=null,Promise.all(t).then((function(t){var e=t[0];t=t[1]||null,e="mp4"==a?Zi(e,r,i,s):(new or).parse(e,t,i,s),u.Db(e,l),d=new Ji(e),c&&Qi(d,f)}))},findSegmentPosition:function(t){return d.find(t)},getSegmentReference:function(t){return d.get(t)}}}function cr(t){return t.ac}function lr(t,e){var n=sr(t,fr),i=function(t){return[t.A.Pa,t.aa.Pa,t.ma.Pa].filter(Be.Ma).map((function(t){return Ui.U(t,"SegmentURL")})).reduce((function(t,e){return 0<t.length?t:e})).map((function(e){return e.getAttribute("indexRange")&&!t.he&&(t.he=!0,G.m("We do not support the SegmentURL@indexRange attribute on SegmentList.  We only use the SegmentList@duration attribute or SegmentTimeline, which must be accurate.")),{Jf:e.getAttribute("media"),start:(e=Ui.M(e,"mediaRange",Ui.Cc,{start:0,end:null})).start,end:e.end}}))}(t),r=$i(t,fr),o=r.hb;0==o&&(G.m("SegmentList@startNumber must be > 0"),o=1);var a=0;if(r.da?a=r.da*(o-1):r.R&&0<r.R.length&&(a=r.R[0].start),!(i={da:r.da,startTime:a,hb:o,oa:r.oa,R:r.R,cb:i}).da&&!i.R&&1<i.cb.length)throw G.m("SegmentList does not contain sufficient segment information:","the SegmentList specifies multiple segments,","but does not specify a segment duration or timeline.",t.A),new dt(2,4,4002);if(!i.da&&!t.W.duration&&!i.R&&1==i.cb.length)throw G.m("SegmentList does not contain sufficient segment information:","the SegmentList specifies one segment,","but does not specify a segment duration, period duration,","or timeline.",t.A),new dt(2,4,4002);if(i.R&&0==i.R.length)throw G.m("SegmentList does not contain sufficient segment information:","the SegmentList has an empty timeline.",t.A),new dt(2,4,4002);return o=r=null,t.ma.id&&t.A.id&&(r=e[o=t.ma.id+","+t.A.id]),a=function(t,e,n,i){var r=i.cb.length;i.R&&i.R.length!=i.cb.length&&(r=Math.min(i.R.length,i.cb.length),G.m("The number of items in the segment timeline and the number of segment","URLs do not match, truncating",i.cb.length,"to",r));for(var o=[],a=i.startTime,s=0;s<r;s++){var u,c=i.cb[s],l=Fe(n,[c.Jf]);u=null!=i.da?a+i.da:i.R?i.R[s].end:a+t,o.push(new Yi(s+e,a,u,function(t){return t}.bind(null,l),c.start,c.end)),a=u}return o}(t.W.duration,i.hb,t.A.ta,i),r?(r.md(a),o=t.presentationTimeline.Vb(),r.Tc(o-t.W.start)):(t.presentationTimeline.Db(a,t.W.start),r=new Ji(a),o&&t.sb&&(e[o]=r)),t.sb&&t.W.hd||Qi(r,t.W.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:r.find.bind(r),getSegmentReference:r.get.bind(r),initSegmentReference:n,oa:i.oa}}function fr(t){return t.Pa}function hr(t,e,n,i){var r=function(t){var e=Vi(t,dr,"initialization");if(!e)return null;var n=t.A.id,i=t.bandwidth||null,r=t.A.ta;return new Xi((function(){var t=Ki(e,n,null,i,null);return Fe(r,[t])}),0,null)}(t),o=$i(t,dr),a=Vi(t,dr,"media"),s=Vi(t,dr,"index");if(a=(o={da:o.da,timescale:o.timescale,hb:o.hb,oa:o.oa,Pd:o.Pd,R:o.R,kd:a,Xb:s}).Xb?1:0,a+=o.R?1:0,0==(a+=o.da?1:0))throw G.error("SegmentTemplate does not contain any segment information:","the SegmentTemplate must contain either an index URL template","a SegmentTimeline, or a segment duration.",t.A),new dt(2,4,4002);if(1!=a&&(G.m("SegmentTemplate containes multiple segment information sources:","the SegmentTemplate should only contain an index URL template,","a SegmentTimeline or a segment duration.",t.A),o.Xb?(G.info("Using the index URL template by default."),o.R=null):G.info("Using the SegmentTimeline by default."),o.da=null),!o.Xb&&!o.kd)throw G.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate's media URL template is missing.",t.A),new dt(2,4,4002);if(o.Xb){if("mp4"!=(n=t.A.mimeType.split("/")[1])&&"webm"!=n)throw G.error("SegmentTemplate specifies an unsupported container type.",t.A),new dt(2,4,4006);if("webm"==n&&!r)throw G.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate uses a WebM container,","but does not contain an initialization URL template.",t.A),new dt(2,4,4005);i=Ki(o.Xb,t.A.id,null,t.bandwidth||null,null),t=ur(t,e,r,i=Fe(t.A.ta,[i]),0,null,n,o.oa)}else o.da?(i||(t.presentationTimeline.od(o.da),t.presentationTimeline.pd(t.W.start)),t=function(t,e){var n=t.W.duration,i=e.da,r=e.hb,o=e.timescale,a=e.kd,s=t.bandwidth||null,u=t.A.id,c=t.A.ta;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(t){return 0>t||n&&t>=n?null:Math.floor(t/i)},getSegmentReference:function(t){var e=t*i,l=e+i;return n&&(l=Math.min(l,n)),0>l||n&&e>=n?null:new Yi(t,e,l,(function(){var n=Ki(a,u,t+r,s,e*o);return Fe(c,[n])}),0,null)}}}(t,o)):(a=e=null,t.ma.id&&t.A.id&&(e=n[a=t.ma.id+","+t.A.id]),s=function(t,e){for(var n=[],i=0;i<e.R.length;i++){var r=i+e.hb;n.push(new Yi(r,e.R[i].start,e.R[i].end,function(t,e,n,i,r,o){return Fe(i,[t=Ki(t,e,r,n,o)]).map((function(t){return t.toString()}))}.bind(null,e.kd,t.A.id,t.bandwidth||null,t.A.ta,r,e.R[i].Hg+e.Pd),0,null))}return n}(t,o),i=!t.sb||!t.W.hd,e?(i&&Qi(new Ji(s),t.W.duration),e.md(s),n=t.presentationTimeline.Vb(),e.Tc(n-t.W.start)):(t.presentationTimeline.Db(s,t.W.start),e=new Ji(s),a&&t.sb&&(n[a]=e)),i&&Qi(e,t.W.duration),t={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:e.find.bind(e),getSegmentReference:e.get.bind(e)});return{createSegmentIndex:t.createSegmentIndex,findSegmentPosition:t.findSegmentPosition,getSegmentReference:t.getSegmentReference,initSegmentReference:r,oa:o.oa}}function dr(t){return t.cc}H("shaka.media.InitSegmentReference",Xi),Xi.prototype.Qc=function(){return this.c()},Xi.prototype.createUris=Xi.prototype.Qc,Xi.prototype.bd=function(){return this.b},Xi.prototype.getStartByte=Xi.prototype.bd,Xi.prototype.ad=function(){return this.a},Xi.prototype.getEndByte=Xi.prototype.ad,H("shaka.media.SegmentReference",Yi),Yi.prototype.ga=function(){return this.position},Yi.prototype.getPosition=Yi.prototype.ga,Yi.prototype.sc=function(){return this.startTime},Yi.prototype.getStartTime=Yi.prototype.sc,Yi.prototype.ff=function(){return this.endTime},Yi.prototype.getEndTime=Yi.prototype.ff,Yi.prototype.Qc=function(){return this.c()},Yi.prototype.createUris=Yi.prototype.Qc,Yi.prototype.bd=function(){return this.b},Yi.prototype.getStartByte=Yi.prototype.bd,Yi.prototype.ad=function(){return this.a},Yi.prototype.getEndByte=Yi.prototype.ad,H("shaka.media.SegmentIndex",Ji),Ji.prototype.destroy=function(){return this.a=null,Promise.resolve()},Ji.prototype.destroy=Ji.prototype.destroy,Ji.prototype.find=function(t){for(var e=this.a.length-1;0<=e;--e){var n=this.a[e];if(t>=n.startTime&&t<n.endTime)return n.position}return this.a.length&&t<this.a[0].startTime?this.a[0].position:null},Ji.prototype.find=Ji.prototype.find,Ji.prototype.get=function(t){return 0==this.a.length||0>(t-=this.a[0].position)||t>=this.a.length?null:this.a[t]},Ji.prototype.get=Ji.prototype.get,Ji.prototype.offset=function(t){for(var e=0;e<this.a.length;++e)this.a[e].startTime+=t,this.a[e].endTime+=t},Ji.prototype.offset=Ji.prototype.offset,Ji.prototype.md=function(t){for(var e=[],n=0,i=0;n<this.a.length&&i<t.length;){var r=this.a[n],o=t[i];r.startTime<o.startTime?(e.push(r),n++):(r.startTime>o.startTime?0==n?e.push(o):G.m("Refusing to rewrite original references on update!"):(.1<Math.abs(r.endTime-o.endTime)?e.push(new Yi(r.position,o.startTime,o.endTime,o.c,o.b,o.a)):e.push(r),n++),i++)}for(;n<this.a.length;)e.push(this.a[n++]);if(e.length)for(n=e[e.length-1].position+1;i<t.length;)r=new Yi(n++,(r=t[i++]).startTime,r.endTime,r.c,r.b,r.a),e.push(r);else e=t;this.a=e},Ji.prototype.merge=Ji.prototype.md,Ji.prototype.Tc=function(t){for(var e=0;e<this.a.length;++e)if(this.a[e].endTime>t)return void this.a.splice(0,e);this.a=[]},Ji.prototype.evict=Ji.prototype.Tc,tr.prototype.ya=function(){return this.a.ya()},or.prototype.parse=function(t,e,n,i){var r;if(440786851!=er(e=new tr(new DataView(e))).id)throw G.error("Not an EBML element."),new dt(2,3,3008);var o=er(e);if(408125543!=o.id)throw G.error("Not a Segment element."),new dt(2,3,3009);for(e=o.a.byteOffset,o=new tr(o.a),r=null;o.ya();){var a=er(o);if(357149030==a.id){r=a;break}}if(!r)throw G.error("Not an Info element."),new dt(2,3,3010);for(o=new tr(r.a),r=1e6,a=null;o.ya();){var s=er(o);if(2807729==s.id)r=rr(s);else if(17545==s.id)if(4==(a=s).a.byteLength)a=a.a.getFloat32(0);else{if(8!=a.a.byteLength)throw new dt(2,3,3003);a=a.a.getFloat64(0)}}if(null==a)throw new dt(2,3,3011);if(r=a*(o=r/1e9),475249515!=(t=er(new tr(new DataView(t)))).id)throw G.error("Not a Cues element."),new dt(2,3,3007);return function(t,e,n,i,r,o){function a(){return r}var s=[];t=new tr(t.a);for(var u=null,c=null;t.ya();){var l=er(t);if(187==l.id){var f=ar(l);f&&(l=n*f.Ig,f=e+f.gg,null!=u&&s.push(new Yi(s.length,u-o,l-o,a,c,f-1)),u=l,c=f)}}return null!=u&&s.push(new Yi(s.length,u-o,i-o,a,c,null)),s}(t,e,o,r,n,i)};var pr={Hb:{},Zb:{},zd:function(t,e){pr.Zb[t]=e}};function mr(t,e,n){this.f=t,this.Dc=e,this.h=this.g=1/0,this.a=1,this.b=this.c=null,this.l=0,this.o=!0,this.i=0,this.u=void 0===n||n}function vr(t,e,n,i){return t=Dt(t,i),0==e&&null==n||(t.headers.Range=n?"bytes="+e+"-"+n:"bytes="+e+"-"),t}function gr(){var t=this;this.b=this.a=null,this.f=[],this.c=null,this.l=[],this.h=1,this.o={},this.u=0,this.v=new K(5),this.i=new lt((function(){!function(t){p((function e(){var n,i;return L(e,(function(e){switch(e.j){case 1:return G.info("Updating manifest..."),n=0,C(e,2),E(e,yr(t),4);case 4:n=e.s,A(e,3);break;case 2:i=_(e),t.b&&(i.severity=1,t.b.onError(i));case 3:if(!t.b)return e.return();Sr(t,n),k(e)}}))}))}(t)})),this.g=new _t}function yr(t){var e=Date.now(),n=t.b.networkingEngine.request(0,Dt(t.f,t.a.retryParameters));return Pt(t.g,n),n.promise.then((function(e){if(t.b)return e.uri&&!t.f.includes(e.uri)&&t.f.unshift(e.uri),function(t,e,n){if(!(e=Ui.te(e,"MPD")))throw new dt(2,4,4001,n);return e=Gi(e,t.a.retryParameters,t.a.dash.xlinkFailGracefully,n,t.b.networkingEngine),Pt(t.g,e),e.promise.then((function(e){return function(t,e,n){return p((function i(){var r,o,a,s,u,c,l,f,h,d,p,m,v,g,y,b,w,x,S,T,C,M,A,_;return L(i,(function(i){switch(i.j){case 1:s=Be,c=[n],0<(l=(u=Ui).U(e,"Location").map(u.qc).filter(s.Ma)).length&&(f=Fe(c,l),c=t.f=f),h=u.U(e,"BaseURL").map(u.qc),d=Fe(c,h),p=t.a.dash.ignoreMinBufferTime,m=0,p||(m=u.M(e,"minBufferTime",u.Ia)),t.u=u.M(e,"minimumUpdatePeriod",u.Ia,-1),v=u.M(e,"availabilityStartTime",u.$f),g=u.M(e,"timeShiftBufferDepth",u.Ia),y=u.M(e,"maxSegmentDuration",u.Ia),b=e.getAttribute("type")||"static",w=t.a.dash.ignoreSuggestedPresentationDelay,x=null,w||(x=u.M(e,"suggestedPresentationDelay",u.Ia)),t.c?S=t.c.presentationTimeline:(T=Math.max(t.a.dash.defaultPresentationDelay,1.5*m),S=new mr(v,null!=x?x:T,t.a.dash.autoCorrectDrift));for(var P={sb:"static"!=b,presentationTimeline:S,ma:null,W:null,aa:null,A:null,bandwidth:0,he:!1},N=d,O=Ui.M(e,"mediaPresentationDuration",Ui.Ia),I=[],D=0,R=Ui.U(e,"Period"),L=0;L<R.length;L++){var j=R[L];D=Ui.M(j,"start",Ui.Ia,D);var U=Ui.M(j,"duration",Ui.Ia),z=null;if(L!=R.length-1){var B=Ui.M(R[L+1],"start",Ui.Ia);null!=B&&(z=B-D)}else null!=O&&(z=O-D);if(B=1/15,z&&U&&Math.abs(z-U)>B&&G.m("There is a gap/overlap between Periods",j),null==z&&(z=U),j=br(t,P,N,{start:D,duration:z,node:j,hd:null==z||L==R.length-1}),I.push(j),U=P.ma.id,t.l.includes(U)||(t.l.push(U),t.c&&(t.b.filterNewPeriod(j),t.c.periods.push(j))),null==z){L!=R.length-1&&G.m("Skipping Period",L+1,"and any subsequent Periods:","Period",L+1,"does not have a valid start time.",I[L+1]),D=null;break}D+=z}if(null==t.c&&t.b.filterAllPeriods(I),null!=O?(D!=O&&G.m("@mediaPresentationDuration does not match the total duration of all","Periods."),r=I,o=O,a=!1):(r=I,o=D,a=!0),C=o,M=r,S.dc("static"==b),"static"!=b&&a||S.Ba(C||1/0),S.Y()&&!isNaN(t.a.availabilityWindowOverride)&&(g=t.a.availabilityWindowOverride),null==g&&(g=1/0),S.Jd(g),S.od(y||1),t.c){i.C(0);break}if(t.c={presentationTimeline:S,periods:M,offlineSessionIds:[],minBufferTime:m||0},!S.He()){i.C(0);break}return A=u.U(e,"UTCTiming"),E(i,function(t,e,n){n=n.map((function(t){return{scheme:t.getAttribute("schemeIdUri"),value:t.getAttribute("value")}}));var i=t.a.dash.clockSyncUri;return!n.length&&i&&n.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),Be.Xe(n,function(t){var n=t.scheme;switch(t=t.value,n){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return Er(this,e,t,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return Er(this,e,t,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return n=Date.parse(t),isNaN(n)?0:n-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":return G.Z("NTP UTCTiming scheme is not supported"),Promise.reject();default:return G.Z("Unrecognized scheme in UTCTiming element",n),Promise.reject()}}.bind(t)).catch((function(){return G.Z("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),0}))}(t,d,A),4);case 4:if(_=i.s,!t.b)return i.return();S.Ce(_),k(i)}}))}))}(t,e,n)}))}(t,e.data,e.uri)})).then((function(){var n=(Date.now()-e)/1e3;return $(t.v,1,n),n}))}function br(t,e,n,i){if(e.ma=Tr(i.node,null,n),e.W=i,e.ma.id||(G.info("No Period ID given for Period with start time "+i.start+",  Assigning a default"),e.ma.id="__shaka_period_"+i.start),Ui.U(i.node,"EventStream").forEach(t.ag.bind(t,i.start,i.duration)),n=Ui.U(i.node,"AdaptationSet").map(t.Zf.bind(t,e)).filter(Be.Ma),e.sb){e=[];for(var r=h(n),o=r.next();!o.done;o=r.next())for(var a=(o=h(o.value.jg)).next();!a.done;a=o.next())e.push(a.value);if(e.length!=new Set(e).size)throw new dt(2,4,4018)}var s=n.filter((function(t){return!t.Nd}));if(n.filter((function(t){return t.Nd})).forEach((function(t){var e=t.streams[0],n=t.Nd;s.forEach((function(t){t.id==n&&t.streams.forEach((function(t){t.trickModeVideo=e}))}))})),e=wr(s,"video"),r=wr(s,"audio"),!e.length&&!r.length)throw new dt(2,4,4004);for(n=t.a.disableAudio,r.length&&!n||(r=[null]),n=t.a.disableVideo,e.length&&!n||(e=[null]),n=[],o=0;o<r.length;o++)for(a=0;a<e.length;a++)xr(t,r[o],e[a],n);if(e=[],!t.a.disableText)for(t=wr(s,"text"),r=0;r<t.length;r++)e.push.apply(e,t[r].streams);return{startTime:i.start,textStreams:e,variants:n}}function wr(t,e){return t.filter((function(t){return t.contentType==e}))}function xr(t,e,n,i){if(e||n)if(e&&n){var r=e.drmInfos,o=n.drmInfos;if(!r.length||!o.length||0<Ae(r,o).length){o=Ae(e.drmInfos,n.drmInfos);for(var a=0;a<e.streams.length;a++)for(var s=0;s<n.streams.length;s++)r=(n.streams[s].bandwidth||0)+(e.streams[a].bandwidth||0),r={id:t.h++,language:e.language,primary:e.jd||n.jd,audio:e.streams[a],video:n.streams[s],bandwidth:r,drmInfos:o,allowedByApplication:!0,allowedByKeySystem:!0},i.push(r)}}else for(o=e||n,a=0;a<o.streams.length;a++)r=o.streams[a].bandwidth||0,r={id:t.h++,language:o.language||"und",primary:o.jd,audio:e?o.streams[a]:null,video:n?o.streams[a]:null,bandwidth:r,drmInfos:o.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},i.push(r)}function Sr(t,e){0>t.u||t.i.T(Math.max(3,t.u-e,V(t.v)))}function Tr(t,e,n){e=e||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,qd:null,audioSamplingRate:null},n=n||e.ta;var i=Ui.Gb,r=Ui.Ze,o=Ui.U(t,"BaseURL").map(Ui.qc),a=t.getAttribute("contentType")||e.contentType,s=t.getAttribute("mimeType")||e.mimeType,u=t.getAttribute("codecs")||e.codecs;r=Ui.M(t,"frameRate",r)||e.frameRate;for(var c=t.getAttribute("par")||e.pixelAspectRatio,l=Ui.U(t,"InbandEventStream"),f=e.emsgSchemeIdUris.slice(),d=(l=h(l)).next();!d.done;d=l.next())d=d.value.getAttribute("schemeIdUri"),f.includes(d)||f.push(d);return l=function(t){for(var e=0;e<t.length;++e){var n=t[e],i=n.getAttribute("schemeIdUri");if(i&&(n=n.getAttribute("value")))switch(i){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":var r=parseInt(n,10);if(!r){G.m("Channel parsing failure! Ignoring scheme and value",i,n);continue}return r;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(r=parseInt(n,16))){G.m("Channel parsing failure! Ignoring scheme and value",i,n);continue}for(t=0;r;)1&r&&++t,r>>=1;return t;default:G.m("Unrecognized audio channel scheme:",i,n)}}return null}(l=Ui.U(t,"AudioChannelConfiguration"))||e.qd,d=Ui.M(t,"audioSamplingRate",i)||e.audioSamplingRate,a||(a=kr(s,u)),{ta:Fe(n,o),ac:Ui.oc(t,"SegmentBase")||e.ac,Pa:Ui.oc(t,"SegmentList")||e.Pa,cc:Ui.oc(t,"SegmentTemplate")||e.cc,width:Ui.M(t,"width",i)||e.width,height:Ui.M(t,"height",i)||e.height,contentType:a,mimeType:s,codecs:u,frameRate:r,pixelAspectRatio:c,emsgSchemeIdUris:f,id:t.getAttribute("id"),qd:l,audioSamplingRate:d}}function Er(t,e,n,i){return(e=Dt(e=Fe(e,[n]),t.a.retryParameters)).method=i,e=t.b.networkingEngine.request(4,e),Pt(t.g,e),e.promise.then((function(t){if("HEAD"==i){if(!t.headers||!t.headers.date)return G.m("UTC timing response is missing","expected date header"),0;t=t.headers.date}else t=re(t.data);return t=Date.parse(t),isNaN(t)?(G.m("Unable to parse date from UTC timing response"),0):t-Date.now()}))}function kr(t,e){return dn(Wt(t,e))?"text":t.split("/")[0]}function Cr(t,e,n,i){this.b=t,this.type=e,this.a=n,this.segments=i||null}function Mr(t,e,n,i){this.id=t,this.name=e,this.a=n,this.value=void 0===i?null:i}function Ar(t,e){this.name=t,this.value=e}function _r(t,e,n){return(t=t.getAttribute(e))?t.value:n||null}function Pr(t,e){this.b=e,this.a=t}H("shaka.media.ManifestParser.registerParserByExtension",pr.zd),pr.Kb=function(t,e){pr.Hb[t]=e},H("shaka.media.ManifestParser.registerParserByMime",pr.Kb),pr.dg=function(){var t={};if(Yt()){for(var e in pr.Hb)t[e]=!0;for(var n in pr.Zb)t[n]=!0}e={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var i=(n=h(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!i.done;i=n.next())t[i=i.value]=Yt()?!!pr.Hb[i]:Zt(i);for(var r in e)t[r]=Yt()?!!pr.Zb[r]:Zt(e[r]);return t},pr.create=function(t,e,n,i){return p((function r(){var o,a;return L(r,(function(r){switch(r.j){case 1:return C(r,2),E(r,pr.gf(t,e,n,i),4);case 4:return o=r.s,r.return(new o);case 2:throw(a=_(r)).severity=2,a}}))}))},pr.gf=function(t,e,n,i){return p((function r(){var o,a,s,u,c;return L(r,(function(r){switch(r.j){case 1:if(o=pr,i){if(a=o.Hb[i.toLowerCase()])return r.return(a);G.m("Could not determine manifest type using MIME type ",i)}if(s=o.getExtension(t)){if(u=o.Zb[s])return r.return(u);G.m("Could not determine manifest type for extension ",s)}else G.m("Could not find extension for ",t);if(i){r.C(2);break}return E(r,o.qf(t,e,n),3);case 3:if(i=r.s){if(c=pr.Hb[i])return r.return(c);G.m("Could not determine manifest type using MIME type",i)}case 2:throw new dt(2,4,4e3,t)}}))}))},pr.qf=function(t,e,n){return p((function i(){var r,o,a;return L(i,(function(i){switch(i.j){case 1:return(r=Dt([t],n)).method="HEAD",E(i,e.request(0,r).promise,2);case 2:return o=i.s,a=o.headers["content-type"],i.return(a?a.toLowerCase().split(";").shift():"")}}))}))},pr.getExtension=function(t){return 1==(t=new Y(t).la.split("/").pop().split(".")).length?"":t.pop().toLowerCase()},pr.isSupported=function(t,e){return!!Yt()&&(e in pr.Hb||pr.getExtension(t)in pr.Zb)},H("shaka.media.PresentationTimeline",mr),mr.prototype.ca=function(){return this.g},mr.prototype.getDuration=mr.prototype.ca,mr.prototype.nf=function(){return this.a},mr.prototype.getMaxSegmentDuration=mr.prototype.nf,mr.prototype.Ba=function(t){this.g=t},mr.prototype.setDuration=mr.prototype.Ba,mr.prototype.wf=function(){return this.f},mr.prototype.getPresentationStartTime=mr.prototype.wf,mr.prototype.Ce=function(t){this.l=t},mr.prototype.setClockOffset=mr.prototype.Ce,mr.prototype.dc=function(t){this.o=t},mr.prototype.setStatic=mr.prototype.dc,mr.prototype.Jd=function(t){this.h=t},mr.prototype.setSegmentAvailabilityDuration=mr.prototype.Jd,mr.prototype.sg=function(t){this.Dc=t},mr.prototype.setDelay=mr.prototype.sg,mr.prototype.ef=function(){return this.Dc},mr.prototype.getDelay=mr.prototype.ef,mr.prototype.Db=function(t,e){if(0!=t.length){var n=t[t.length-1].endTime+e;this.pd(t[0].startTime+e),this.a=t.reduce((function(t,e){return Math.max(t,e.endTime-e.startTime)}),this.a),this.b=Math.max(this.b,n),null!=this.f&&this.u&&(this.f=(Date.now()+this.l)/1e3-this.b-this.a),G.D("notifySegments:","maxSegmentDuration="+this.a)}},mr.prototype.notifySegments=mr.prototype.Db,mr.prototype.pd=function(t){this.c=null==this.c?t:Math.min(this.c,t)},mr.prototype.notifyMinSegmentStartTime=mr.prototype.pd,mr.prototype.od=function(t){this.a=Math.max(this.a,t),G.D("notifyNewSegmentDuration:","maxSegmentDuration="+this.a)},mr.prototype.notifyMaxSegmentDuration=mr.prototype.od,mr.prototype.offset=function(t){null!=this.c&&(this.c+=t),null!=this.b&&(this.b+=t)},mr.prototype.offset=mr.prototype.offset,mr.prototype.Y=function(){return 1/0==this.g&&!this.o},mr.prototype.isLive=mr.prototype.Y,mr.prototype.bb=function(){return 1/0!=this.g&&!this.o},mr.prototype.isInProgress=mr.prototype.bb,mr.prototype.Vb=function(){if(1/0==this.h)return this.i;var t=this.wb()-this.h;return Math.max(this.i,t)},mr.prototype.getSegmentAvailabilityStart=mr.prototype.Vb,mr.prototype.De=function(t){this.i=t},mr.prototype.setUserSeekStart=mr.prototype.De,mr.prototype.wb=function(){return this.Y()||this.bb()?Math.min(Math.max(0,(Date.now()+this.l)/1e3-this.a-this.f),this.g):this.g},mr.prototype.getSegmentAvailabilityEnd=mr.prototype.wb,mr.prototype.Ub=function(t){var e=Math.max(this.c,this.i);if(1/0==this.h)return e;var n=this.wb()-this.h;return t=Math.min(n+t,this.Ga()),Math.max(e,t)},mr.prototype.getSafeSeekRangeStart=mr.prototype.Ub,mr.prototype.vb=function(){return this.Ub(0)},mr.prototype.getSeekRangeStart=mr.prototype.vb,mr.prototype.Ga=function(){var t=this.Y()||this.bb()?this.Dc:0;return Math.max(0,this.wb()-t)},mr.prototype.getSeekRangeEnd=mr.prototype.Ga,mr.prototype.He=function(){return!(null==this.f||null!=this.b&&this.u)},mr.prototype.usingPresentationStartTime=mr.prototype.He,H("shaka.dash.DashParser",gr),(i=gr.prototype).configure=function(t){this.a=t},i.start=function(t,e){var n=this;return p((function i(){var r;return L(i,(function(i){switch(i.j){case 1:return n.f=[t],n.b=e,E(i,yr(n),2);case 2:if(r=i.s,n.b&&Sr(n,r),!n.b)throw new dt(2,7,7001);return i.return(n.c)}}))}))},i.stop=function(){return this.a=this.b=null,this.f=[],this.c=null,this.l=[],this.o={},null!=this.i&&(this.i.stop(),this.i=null),this.g.destroy()},i.update=function(){yr(this).catch(function(t){this.b&&this.b.onError(t)}.bind(this))},i.onExpirationUpdated=function(){},i.Zf=function(t,e){if(t.aa=Tr(e,t.ma,null),"image"==t.aa.contentType)return G.m("Skipping Image AdaptationSet",t.aa),null;var n=!1,i=Ui.U(e,"Role"),r=i.map((function(t){return t.getAttribute("value")})).filter(Be.Ma),o=void 0,a="text"==t.aa.contentType;a&&(o="subtitle");for(var s=0;s<i.length;s++){var u=i[s].getAttribute("schemeIdUri");if(null==u||"urn:mpeg:dash:role:2011"==u)switch(u=i[s].getAttribute("value"),u){case"main":n=!0;break;case"caption":case"subtitle":o=u}}var c=null,l=!1;Ui.U(e,"EssentialProperty").forEach((function(t){"http://dashif.org/guidelines/trickmode"==t.getAttribute("schemeIdUri")?c=t.getAttribute("value"):l=!0})),s=Ui.U(e,"Accessibility");var f=new Map;for(i={},u=(s=h(s)).next();!u.done;i={Qb:i.Qb},u=s.next()){var d=u.value;u=d.getAttribute("schemeIdUri"),d=d.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==u||"urn:scte:dash:cc:cea-708:2015"==u?(i.Qb=1,null!=d?d.split(";").forEach(function(t){return function(e){if(e.includes("=")){var n=(e=e.split("="))[0].startsWith("CC")?e[0]:"CC"+e[0];e=e[1].split(",")[0].split(":").pop()}else n="CC"+t.Qb,t.Qb+=2;f.set(n,On(e))}}(i)):f.set("CC1","und")):"urn:mpeg:dash:role:2011"==u&&null!=d&&(r.push(d),"captions"==d&&(o="caption"))}if(l)return null;var p=Bi(i=Ui.U(e,"ContentProtection"),this.a.dash.customScheme,this.a.dash.ignoreDrmInfo);if(i=On(e.getAttribute("lang")||"und"),s=e.getAttribute("label"),(u=Ui.U(e,"Label"))&&u.length&&((u=u[0]).textContent&&(s=u.textContent)),0==(r=(u=Ui.U(e,"Representation")).map(this.bg.bind(this,t,p,o,i,s,n,r,f)).filter((function(t){return!!t}))).length){if(this.a.dash.ignoreEmptyAdaptationSet||a)return null;throw new dt(2,4,4003)}return t.aa.contentType&&"application"!=t.aa.contentType||(t.aa.contentType=kr(r[0].mimeType,r[0].codecs),r.forEach((function(e){e.type=t.aa.contentType}))),r.forEach((function(t){p.drmInfos.forEach((function(e){t.keyId&&e.keyIds.push(t.keyId)}))})),a=u.map((function(t){return t.getAttribute("id")})).filter(Be.Ma),{id:t.aa.id||"__fake__"+this.h++,contentType:t.aa.contentType,language:i,jd:n,streams:r,drmInfos:p.drmInfos,Nd:c,jg:a}},i.bg=function(t,e,n,i,r,o,a,s,u){if(t.A=Tr(u,t.aa,null),!function(t){var e=t.ac?1:0;if(e+=t.Pa?1:0,0==(e+=t.cc?1:0))return"text"==t.contentType||"application"==t.contentType||(G.m("Representation does not contain a segment information source:","the Representation must contain one of SegmentBase, SegmentList,",'SegmentTemplate, or explicitly indicate that it is "text".',t),!1);return 1!=e&&(G.m("Representation contains multiple segment information sources:","the Representation should only contain one of SegmentBase,","SegmentList, or SegmentTemplate.",t),t.ac?(G.info("Using SegmentBase by default."),t.Pa=null):G.info("Using SegmentList by default."),t.cc=null),!0}(t.A))return G.m("Skipping Representation",t.A),null;t.bandwidth=Ui.M(u,"bandwidth",Ui.Bc)||0;var c=t.A.contentType;c="text"==c||"application"==c;try{var l=this.kg.bind(this);if(t.A.ac)var f=function(t,e){var n=Number(Vi(t,cr,"presentationTimeOffset"))||0,i=Vi(t,cr,"timescale"),r=1;i&&(r=Ui.Bc(i)||1),n=n/r||0,i=sr(t,cr);var o=t.A.contentType;if(r=t.A.mimeType.split("/")[1],"text"!=o&&"mp4"!=r&&"webm"!=r)throw G.error("SegmentBase specifies an unsupported container type.",t.A),new dt(2,4,4006);if("webm"==r&&!i)throw G.error("SegmentBase does not contain sufficient segment information:","the SegmentBase uses a WebM container,","but does not contain an Initialization element.",t.A),new dt(2,4,4005);o=Wi(t,cr,"RepresentationIndex");var a=Vi(t,cr,"indexRange"),s=t.A.ta;if(a=Ui.Cc(a||""),o){var u=o.getAttribute("sourceURL");u&&(s=Fe(t.A.ta,[u])),a=Ui.M(o,"range",Ui.Cc,a)}if(!a)throw G.error("SegmentBase does not contain sufficient segment information:","the SegmentBase does not contain @indexRange","or a RepresentationIndex element.",t.A),new dt(2,4,4002);return{createSegmentIndex:(r=ur(t,e,i,s,a.start,a.end,r,n)).createSegmentIndex,findSegmentPosition:r.findSegmentPosition,getSegmentReference:r.getSegmentReference,initSegmentReference:i,oa:n}}(t,l);else if(t.A.Pa)f=lr(t,this.o);else if(t.A.cc)f=hr(t,l,this.o,!!this.c);else{var h=t.A.ta,d=t.W.duration||0;f={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(t){return 0<=t&&t<d?1:null},getSegmentReference:function(t){return 1!=t?null:new Yi(1,0,d,(function(){return h}),0,null)},initSegmentReference:null,oa:0}}}catch(t){if(c&&4002==t.code)return null;throw t}return u=function(t,e,n,i){var r=Bi(t,e,i);if(n.be)t=1==n.drmInfos.length&&!n.drmInfos[0].keySystem,e=0==r.drmInfos.length,(0==n.drmInfos.length||t&&!e)&&(n.drmInfos=r.drmInfos),n.be=!1;else if(0<r.drmInfos.length&&(n.drmInfos=n.drmInfos.filter((function(t){return r.drmInfos.some((function(e){return e.keySystem==t.keySystem}))})),0==n.drmInfos.length))throw new dt(2,4,4008);return r.Xd||n.Xd}(u=Ui.U(u,"ContentProtection"),this.a.dash.customScheme,e,this.a.dash.ignoreDrmInfo),{id:this.h++,originalId:t.A.id,createSegmentIndex:f.createSegmentIndex,findSegmentPosition:f.findSegmentPosition,getSegmentReference:f.getSegmentReference,initSegmentReference:f.initSegmentReference,presentationTimeOffset:f.oa,mimeType:t.A.mimeType,codecs:t.A.codecs,frameRate:t.A.frameRate,pixelAspectRatio:t.A.pixelAspectRatio,bandwidth:t.bandwidth,width:t.A.width,height:t.A.height,kind:n,encrypted:0<e.drmInfos.length,keyId:u,language:i,label:r,type:t.aa.contentType,primary:o,trickModeVideo:null,emsgSchemeIdUris:t.A.emsgSchemeIdUris,roles:a,channelsCount:t.A.qd,audioSamplingRate:t.A.audioSamplingRate,closedCaptions:s}},i.ag=function(t,e,n){var i=Ui.Gb,r=n.getAttribute("schemeIdUri")||"",o=n.getAttribute("value")||"",a=Ui.M(n,"timescale",i)||1;Ui.U(n,"Event").forEach(function(n){var s=Ui.M(n,"presentationTime",i)||0,u=Ui.M(n,"duration",i)||0;u=(s=s/a+t)+u/a,null!=e&&(s=Math.min(s,t+e),u=Math.min(u,t+e)),n={schemeIdUri:r,value:o,startTime:s,endTime:u,id:n.getAttribute("id")||"",eventElement:n},this.b.onTimelineRegionAdded(n)}.bind(this))},i.kg=function(t,e,n){return t=vr(t,e,n,this.a.retryParameters),t=this.b.networkingEngine.request(1,t),Pt(this.g,t),t.promise.then((function(t){return t.data}))},pr.zd("mpd",gr),pr.Kb("application/dash+xml",gr),pr.Kb("video/vnd.mpeg.dash.mpd",gr),Mr.prototype.toString=function(){var t="#"+this.name,e=this.a?this.a.map((function(t){return t.name+"="+(isNaN(Number(t.value))?'"'+t.value+'"':t.value)})):[];return this.value&&e.unshift(this.value),0<e.length&&(t+=":"+e.join(",")),t},Mr.prototype.getAttribute=function(t){var e=this.a.filter((function(e){return e.name==t}));return e.length?e[0]:null};var Nr={tb:function(t,e){return t.filter((function(t){return t.name==e}))},Ya:function(t,e){var n=Nr.tb(t,e);return n.length?n[0]:null},Xc:function(t,e,n){return t.filter((function(t){var i=t.getAttribute("TYPE");return t=t.getAttribute("GROUP-ID"),i.value==e&&t.value==n}))},Pc:function(t,e){return Fe([t],[e])[0]},gd:function(t){return/^#(?!EXT)/m.test(t)}};function Or(t){this.b=t,this.a=0}function Ir(t){Dr(t,/[ \t]+/gm)}function Dr(t,e){e.lastIndex=t.a;var n=e.exec(t.b);return n=null==n?null:{position:n.index,length:n[0].length,mg:n},t.a==t.b.length||null==n||n.position!=t.a?null:(t.a+=n.length,n.mg)}function Rr(t){return t.a==t.b.length?null:(t=Dr(t,/[^ \t\n]*/gm))?t[0]:null}function Lr(){this.a=0}function jr(t,e,n){var i=(e=(e=re(e)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new dt(2,4,4015);e=0;for(var r=1;r<i.length;r++)if(!Nr.gd(i[r])){var o=zr(t,i[r]);if(--t.a,Br.includes(o.name)){e=1;break}"EXT-X-STREAM-INF"==o.name&&(r+=1)}for(r=[],o=1;o<i.length;)if(Nr.gd(i[o]))o+=1;else{var a=zr(t,i[o]);if(Fr.includes(a.name)){if(1!=e)throw new dt(2,4,4017);return new Cr(n,e,r,t=Ur(t,n,i=i.splice(o,i.length-o),r))}r.push(a),o+=1,"EXT-X-STREAM-INF"==a.name&&(a.a.push(new Ar("URI",i[o])),o+=1)}return new Cr(n,e,r)}function Ur(t,e,n,i){var r=[],o=[];return n.forEach((function(n){if(/^(#EXT)/.test(n))n=zr(t,n),Br.includes(n.name)?i.push(n):o.push(n);else{if(Nr.gd(n))return[];n=Nr.Pc(e,n.trim()),r.push(new Pr(n,o)),o=[]}})),r}function zr(t,e){var n=t.a++,i=e.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!i)throw new dt(2,4,4016,e);var r,o=i[1],a=i[2];if(i=[],a){var s;(s=Dr(a=new Or(a),/^([^,=]+)(?:,|$)/g))&&(r=s[1]);for(var u=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;s=Dr(a,u);)i.push(new Ar(s[1],s[2]||s[3]))}return new Mr(n,o,i,r)}var Br="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),Fr="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");function Hr(t){try{var e=Hr.parse(t);return yt({uri:t,vd:t,data:e.data,headers:{"content-type":e.contentType}})}catch(t){return vt(t)}}function qr(){var t=this;this.a=this.f=null,this.ea=1,this.G=new Map,this.V=new Set,this.b=new Map,this.c=null,this.v="",this.u=new Lr,this.S=0,this.h=new lt((function(){!function(t){p((function e(){var n,i;return L(e,(function(e){switch(e.j){case 1:return G.info("Updating manifest..."),t.f?(C(e,2),E(e,t.update(),4)):e.return();case 4:n=t.S,t.h.T(n),A(e,0);break;case 2:if(i=_(e),!t.f)return e.return();i.severity=1,t.f.onError(i),t.h.T(.1),k(e)}}))}))}(t)})),this.g=co,this.o=null,this.F=0,this.H=1/0,this.i=new _t,this.K=[],this.l=new Map,this.$=!1}function Kr(t,e){return p((function n(){var i,r,o,a,s,u,c,l,f,h;return L(n,(function(n){switch(n.j){case 1:return i=Nr,r=lo,o=e.Pe,E(n,so(t,Dt([o],t.a.retryParameters),0),2);case 2:if(a=n.s,1!=(s=jr(t.u,a.data,a.uri)).type)throw new dt(2,4,4017);return c=(u=i.Ya(s.a,"EXT-X-MEDIA-SEQUENCE"))?Number(u.value):0,l=e.stream,E(n,Jr(t,e.Jc,s,c,l.mimeType,l.codecs),3);case 3:f=n.s,e.bc.a=f,h=f[f.length-1],i.Ya(s.a,"EXT-X-ENDLIST")&&(ao(t,r.Va),t.c.Ba(h.endTime)),k(n)}}))}))}function $r(t){t.forEach((function(t){if(t){var e=t.stream.codecs.split(",");e=e.filter((function(t){return"mp4a.40.34"!=t})),t.stream.codecs=e.join(",")}}))}function Vr(t,e,n,i,r){return{id:t.ea++,language:e?e.language:"und",primary:!!e&&e.primary||!!n&&n.primary,audio:e,video:n,bandwidth:i,drmInfos:r,allowedByApplication:!0,allowedByKeySystem:!0}}function Wr(t,e,n){return p((function i(){var r,o,a,s,u,c,l,f,h,d,p,m;return L(i,(function(i){switch(i.j){case 1:if(r=eo(e,"URI"),t.b.has(r))return i.return(t.b.get(r));if(o=eo(e,"TYPE").toLowerCase(),a=qe,"subtitles"==o&&(o=a.va),s=On(_r(e,"LANGUAGE","und")),u=_r(e,"NAME"),c=e.getAttribute("DEFAULT"),l=e.getAttribute("AUTOSELECT"),f=_r(e,"CHANNELS"),"audio"==o)if(f){var v=f.split("/")[0];v=parseInt(v,10)}else v=null;else v=null;return h=v,d=!!c||!!l,p=_r(e,"CHARACTERISTICS"),E(i,Gr(t,r,n,o,s,d,u,h,null,p),2);case 2:return m=i.s,t.b.has(r)?i.return(t.b.get(r)):null==m?i.return(null):(t.G.set(e.id,m),t.b.set(r,m),i.return(m))}}))}))}function Gr(t,e,n,i,r,o,a,s,u,c){return p((function l(){var f,d,m,v,g,y,b,w,x,S,T,k,M,P,N,O,I,D,R,j,U,z,B,F,H,q,K;return L(l,(function(l){switch(l.j){case 1:return d=(f=Nr).Pc(t.v,e),E(l,so(t,Dt([d],t.a.retryParameters),0),2);case 2:if(m=l.s,d=m.uri,1!=(v=jr(t.u,m.data,d)).type)throw new dt(2,4,4017);g=[],v.segments.forEach((function(t){t=f.tb(t.b,"EXT-X-KEY"),g.push.apply(g,t)})),y=!1,b=[],w=null;for(var $=h(g),V=$.next();!V.done;V=$.next())if(x=V.value,"NONE"!=(S=eo(x,"METHOD"))){if(y=!0,"AES-128"==S)return G.m("Unsupported HLS Encryption",S),t.$=!0,l.return(null);T=eo(x,"KEYFORMAT"),(M=(k=uo[T])?k(x):null)?(M.keyIds.length&&(w=M.keyIds[0]),b.push(M)):G.m("Unsupported HLS KEYFORMAT",T)}if(y&&!b.length)throw new dt(2,4,4026);return function(t,e){var n=lo,i=Nr.Ya(e.a,"EXT-X-PLAYLIST-TYPE"),r=Nr.Ya(e.a,"EXT-X-ENDLIST");r=i&&"VOD"==i.value||r,i=i&&"EVENT"==i.value&&!r,i=!r&&!i,r?ao(t,n.Va):(ao(t,i?n.Rd:n.Ke),n=no(e.a,"EXT-X-TARGETDURATION"),n=Number(n.value),t.F=Math.max(n,t.F),t.H=Math.min(n,t.H))}(t,v),P=function(t,e){if(1==e.length)return e[0];var n=to(t,e);if(null!=n)return n;throw new dt(2,4,4025,e)}(i,n),E(l,function(t,e,n,i){return p((function r(){var o,a,s,u,c,l,f,h,d;return L(r,(function(r){switch(r.j){case 1:return o=qe,a=i.segments[0].a,s=new Y(a),u=s.la.split(".").pop(),c=oo[e],(l=c[u])?r.return(l):e==o.va?n&&"vtt"!=n?r.return("application/mp4"):r.return("text/vtt"):((f=Dt([a],t.a.retryParameters)).method="HEAD",E(r,so(t,f,1),2));case 2:if(h=r.s,!(d=h.headers["content-type"]))throw new dt(2,4,4021,u);return r.return(d.split(";")[0])}}))}))}(t,i,P,v),3);case 3:return N=l.s,ro.includes(N)&&(P=""),I=(O=f.Ya(v.a,"EXT-X-MEDIA-SEQUENCE"))?Number(O.value):0,C(l,4),E(l,Jr(t,e,v,I,N,P),6);case 6:D=l.s,A(l,5);break;case 4:if(4035==(R=_(l)).code)return G.Z("Skipping unsupported HLS stream",N,e),l.return(null);throw R;case 5:return j=D[0].startTime,U=D[D.length-1].endTime,z=U-j,B=new Ji(D),F=Xr(v),H=void 0,"text"==i&&(H="subtitle"),q=[],c&&q.push(c),K={id:t.ea++,originalId:a,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:B.find.bind(B),getSegmentReference:B.get.bind(B),initSegmentReference:F,presentationTimeOffset:0,mimeType:N,codecs:P,kind:H,encrypted:y,keyId:w,language:r,label:a,type:i,primary:o,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:q,channelsCount:s,audioSamplingRate:null,closedCaptions:u},l.return({stream:K,bc:B,drmInfos:b,Jc:e,Pe:d,nd:j,Qg:U,duration:z})}}))}))}function Xr(t){var e=Nr.tb(t.a,"EXT-X-MAP");if(!e.length)return null;if(1<e.length)throw new dt(2,4,4020);var n=eo(e=e[0],"URI"),i=Nr.Pc(t.b,n);return t=0,n=null,(e=_r(e,"BYTERANGE"))&&(t=e.split("@"),e=Number(t[0]),n=(t=Number(t[1]))+e-1),new Xi((function(){return[i]}),t,n)}function Yr(t,e,n,i){var r=e.b,o=e.a;e=no(r,"EXTINF").value.split(","),e=i+Number(e[0]);var a=0,s=null;return(r=Nr.Ya(r,"EXT-X-BYTERANGE"))&&(a=r.value.split("@"),r=Number(a[0]),s=(a=a[1]?Number(a[1]):t.a+1)+r-1),new Yi(n,i,e,(function(){return[o]}),a,s)}function Zr(t){t.c&&(t.K.forEach((function(e){t.c.Db(e,0)})),t.K=[])}function Jr(t,e,n,i,r,o){return p((function a(){var s,u,c,l,f,h,d,m,v,g;return L(a,(function(a){switch(a.j){case 1:return s=n.segments,u=[],c=s[0].a,l=Yr(null,s[0],i,0),f=Xr(n),E(a,function(t,e,n,i,r,o){return p((function a(){var s,u,c,l,f,h,d,p,m;return L(a,(function(a){switch(a.j){case 1:if(t.o){if(s=t.b.get(e),u=s.bc,c=u.get(i.position))return G.D("Found segment start time in previous manifest"),a.return(c.startTime);G.debug("Unable to find segment start time in previous manifest!")}if(G.D("Fetching segment to find start time"),r=r.toLowerCase(),ro.includes(r))throw G.Z("Raw formats are not yet supported.  Skipping "+r),new dt(1,4,4035);if("video/webm"==r)throw G.Z("WebM in HLS is not yet supported.  Skipping."),new dt(1,4,4035);if("video/mp4"!=r&&"audio/mp4"!=r){a.C(2);break}return l=[Qr(t,i)],n&&l.push(Qr(t,n)),E(a,Promise.all(l),3);case 3:return f=a.s,h=f[0],d=f[1]||f[0],a.return(function(t,e,n,i){var r=0;if((new Ni).L("moov",Oi).L("trak",Oi).L("mdia",Oi).ia("mdhd",(function(t){t.reader.P(0==t.version?8:16),r=t.reader.I(),t.parser.stop()})).parse(i,!0),!r)throw G.error("Unable to find timescale in init segment!"),new dt(2,4,4030,t,e);var o=0,a=!1;if((new Ni).L("moof",Oi).L("traf",Oi).ia("tfdt",(function(t){o=(0==t.version?t.reader.I():t.reader.Jb())/r,a=!0,t.parser.stop()})).parse(n,!0),!a)throw new dt(2,4,4030,t,e);return o}(e,h.uri,h.data,d.data));case 2:if("video/mp2t"!=r){a.C(4);break}return E(a,Qr(t,i),5);case 5:return p=a.s,a.return(function(t,e,n){function i(){o.seek(a+188),71!=(s=o.na())&&(o.seek(a+192),s=o.na()),71!=s&&(o.seek(a+204),s=o.na()),71!=s&&r(),o.ze(1)}function r(){throw new dt(2,4,4030,t,e)}for(var o=new Ai(new DataView(n),0),a=0,s=0;;)if(a=o.ga(),71!=(s=o.na())&&r(),8191==(8191&(n=o.$b())))i();else if(16384&n){if(0!=(n=(48&o.na())>>4)&&2!=n||r(),3==n&&(n=o.na(),o.P(n)),1==o.I()>>8){o.P(3),0!=(n=o.na()>>6)&&1!=n||r(),0==o.na()&&r(),n=o.na();var u=o.$b(),c=o.$b();return(1073741824*((14&n)>>1)+((65534&u)<<14|(65534&c)>>1))/9e4}i()}else i()}(e,p.uri,p.data));case 4:if("application/mp4"!=r&&!r.startsWith("text/")){a.C(6);break}return E(a,Qr(t,i),7);case 7:return m=a.s,a.return(function(t,e,n){return dn(t=Wt(t,e))?(pn(e=new fn(null),t),e.sc(n)):0}(r,o,m.data));case 6:throw new dt(2,4,4030,e)}}))}))}(t,e,f,l,r,o),2);case 2:h=a.s,G.debug("First segment",c.split("/").pop(),"starts at",h);for(var y=0;y<s.length;++y)d=s[y],m=u[u.length-1],v=0==y?h:m.endTime,g=Yr(m,d,i+y,v),u.push(g);return t.K.push(u),Zr(t),a.return(u)}}))}))}function Qr(t,e){return p((function n(){var i,r,o,a,s,u;return L(n,(function(n){switch(n.j){case 1:return i=1,r=vr(e.c(),e.b,e.b+2048-1,t.a.retryParameters),o=vr(e.c(),e.b,e.a,t.a.retryParameters),t.a.hls.useFullSegmentsForStartTime?n.return(so(t,o,i)):(C(n,2),E(n,so(t,r,i),4));case 4:return a=n.s,n.return(a);case 2:if(7001==(s=_(n)).code)throw s;return G.Z("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",r.uris[0]),E(n,so(t,o,i),5);case 5:return u=n.s,n.return(u)}}))}))}function to(t,e){for(var n=io[t],i=0;i<n.length;i++)for(var r=0;r<e.length;r++)if(n[i].test(e[r].trim()))return e[r].trim();return"text"==t?"":null}function eo(t,e){var n=t.getAttribute(e);if(!n)throw new dt(2,4,4023,e);return n.value}function no(t,e){var n=Nr.Ya(t,e);if(!n)throw new dt(2,4,4024,e);return n}H("shaka.net.DataUriPlugin",Hr),Hr.parse=function(e){var n=e.split(":");if(2>n.length||"data"!=n[0])throw G.error("Bad data URI, failed to parse scheme"),new dt(2,1,1004,e);if(2>(n=n.slice(1).join(":").split(",")).length)throw G.error("Bad data URI, failed to extract encoding and MIME type"),new dt(2,1,1004,e);var i=n[0];n=t.decodeURIComponent(n.slice(1).join(","));var r=null;if(1<(i=i.split(";")).length&&(r=i[1]),"base64"==r)e=fe.Fa(n).buffer;else{if(r)throw G.error("Bad data URI, unknown encoding"),new dt(2,1,1005,e);e=se(n)}return{data:e,contentType:i[0]}},It("data",Hr),H("shaka.hls.HlsParser",qr),(i=qr.prototype).configure=function(t){this.a=t},i.start=function(t,e){var n=this;return p((function i(){var r,o;return L(i,(function(i){switch(i.j){case 1:return n.f=e,E(i,so(n,Dt([t],n.a.retryParameters),0),2);case 2:return r=i.s,n.v=r.uri,E(i,function(t,e){return p((function n(){var i,r,o,a,s,u,c,l,f,d,m;return L(n,(function(n){switch(n.j){case 1:if(0!=(i=jr(t.u,e,t.v)).type)throw new dt(2,4,4022);return E(n,function(t,e){return p((function n(){var i,r,o,a,s,u,c,l,f,d,m,v;return L(n,(function(n){switch(n.j){case 1:return i=Nr,r=Be,o=e.a,a=i.tb(e.a,"EXT-X-MEDIA"),s=a.filter(function(t){return"SUBTITLES"==eo(t,"TYPE")}.bind(t)),u=s.map(function(t){var e=this;return p((function n(){var i;return L(n,(function(n){switch(n.j){case 1:return e.a.disableText?n.return(null):(C(n,2),E(n,function(t,e){return p((function n(){var i;return L(n,(function(n){switch(n.j){case 1:return eo(e,"TYPE"),E(n,Wr(t,e,[]),2);case 2:return i=n.s,n.return(i.stream)}}))}))}(e,t),4));case 4:return n.return(n.s);case 2:if(i=_(n),e.a.hls.ignoreTextStreamFailures)return n.return(null);throw i}}))}))}.bind(t)),c=a.filter((function(t){return"CLOSED-CAPTIONS"==eo(t,"TYPE")})),function(t,e){for(var n=h(e),i=n.next();!i.done;i=n.next()){eo(i=i.value,"TYPE");var r=_r(i,"LANGUAGE")||"und";r=On(r);var o=eo(i,"GROUP-ID");i=eo(i,"INSTREAM-ID"),t.l.get(o)||t.l.set(o,new Map),t.l.get(o).set(i,r)}}(t,c),E(n,Promise.all(u),2);case 2:return l=n.s,f=i.tb(o,"EXT-X-STREAM-INF"),d=f.map(function(t){return function(t,e,n){return p((function i(){var r,o,a,s,u,c,l,f,d,m,v,g,y,b,w,x,S,T,k,C,M,A,_,P,N,O,I;return L(i,(function(i){switch(i.j){case 1:return r=qe,o=Nr,a=_r(e,"CODECS","avc1.42E01E,mp4a.40.2"),s=function(t){for(var e=new Set,n=[],i=(t=h(t)).next();!i.done;i=t.next()){var r=Gt(i=i.value)[0];e.has(r)?G.debug("Ignoring duplicate codec"):(n.push(i),e.add(r))}return n}(a.split(/\s*,\s*/)),u=e.getAttribute("RESOLUTION"),l=c=null,f=_r(e,"FRAME-RATE"),d=Number(eo(e,"BANDWIDTH")),u&&(m=u.value.split("x"),c=m[0],l=m[1]),v=(v=(v=o.tb(n.a,"EXT-X-MEDIA")).filter((function(t){return"CLOSED-CAPTIONS"!=eo(t,"TYPE")}))).filter((function(t){var e=_r(t,"URI")||"";return"SUBTITLES"==(_r(t,"TYPE")||"")||""!=e})),g=_r(e,"AUDIO"),y=_r(e,"VIDEO"),g?v=o.Xc(v,"AUDIO",g):y&&(v=o.Xc(v,"VIDEO",y)),(b=to(r.va,s))&&((w=_r(e,"SUBTITLES"))&&((x=o.Xc(v,"SUBTITLES",w)).length&&(S=t.G.get(x[0].id))&&(S.stream.codecs=b)),Mt(s,b)),T=v.map(function(t){return Wr(this,t,s)}.bind(t)),k=[],C=[],E(i,Promise.all(T),2);case 2:if(A=(A=i.s).filter((function(t){return null!=t})),g?k=A:y&&(C=A),G.debug("Guessing stream type for",e.toString()),P=!1,k.length||C.length?k.length?(O=eo(e,"URI"),I=k[0].Jc,O==I?(G.debug("Guessing audio-only."),_=r.Mb,P=!0):(G.debug("Guessing video."),_=r.Ua)):(G.debug("Guessing audio."),_=r.Mb):1==s.length?(N=to(r.Ua,s),u||f||N?(G.debug("Guessing video-only."),_=r.Ua):(G.debug("Guessing audio-only."),_=r.Mb)):(G.debug("Guessing multiplexed audio+video."),_=r.Ua,s=[s.join(",")]),P){i.C(3);break}return E(i,function(t,e,n,i){return p((function r(){var o,a,s,u,c;return L(r,(function(r){switch(r.j){case 1:return o=qe,a=eo(e,"URI"),t.b.has(a)?r.return(t.b.get(a)):(s=_r(e,"CLOSED-CAPTIONS"),u=null,i==o.Ua&&s&&"NONE"!=s&&(u=t.l.get(s)),E(r,Gr(t,a,n,i,"und",!1,null,null,u,null),2));case 2:return null==(c=r.s)?r.return(null):t.b.has(a)?r.return(t.b.get(a)):(t.b.set(a,c),r.return(c))}}))}))}(t,e,s,_),4);case 4:M=i.s;case 3:if(M)M.stream.type==r.Mb?k=[M]:C=[M];else if(null===M)return G.debug("streamInfo is null"),i.return([]);return C&&$r(C),k&&$r(k),i.return(function(t,e,n,i,r,o,a){n.forEach(function(t){(t=t.stream)&&(t.width=Number(r)||void 0,t.height=Number(o)||void 0,t.frameRate=Number(a)||void 0)}.bind(t));var s=!!t.a&&t.a.disableAudio;e.length&&!s||(e=[null]);s=!!t.a&&t.a.disableVideo,(!n.length||s)&&(n=[null]);s=[];for(var u=(e=h(e)).next();!u.done;u=e.next()){u=u.value;for(var c=h(n),l=c.next();!l.done;l=c.next()){var f=l.value;l=u?u.stream:null;var d=f?f.stream:null,p=u?u.drmInfos:null,m=f?f.drmInfos:null;f=(f?f.Jc:"")+" - "+(u?u.Jc:"");var v=void 0;if(l&&d){if(p.length&&m.length&&!(0<Ae(p,m).length)){G.m("Incompatible DRM info in HLS variant.  Skipping.");continue}v=Ae(p,m)}else l?v=p:d&&(v=m);t.V.has(f)?G.debug("Skipping variant which only differs in text streams."):(l=Vr(t,l,d,i,v),s.push(l),t.V.add(f))}}return s}(t,k,C,d,c,l,f))}}))}))}(this,t,e)}.bind(t)),E(n,Promise.all(d),3);case 3:return m=n.s,v=(v=m.reduce(r.Oc,[])).filter((function(t){return null!=t})),n.return({startTime:0,variants:v,textStreams:l.filter((function(t){return null!=t}))})}}))}))}(t,i),2);case 2:if(r=n.s,!t.f)throw new dt(2,7,7001);if(t.$&&0==r.variants.length)throw G.info("No stream is created, because we don't support AES-128","encryption yet"),new dt(2,4,4034);t.f.filterAllPeriods([r]),o=1/0,a=0,s=1/0;for(var v=h(t.b.values()),g=v.next();!g.done;g=v.next())u=g.value,o=Math.min(o,u.nd),a=Math.max(a,u.nd),"text"!=u.stream.type&&(s=Math.min(s,u.duration));if(t.g!=lo.Va?(t.c=new mr(0,3*t.F),t.c.dc(!1)):(t.c=new mr(null,0),t.c.dc(!0)),Zr(t),t.g!=lo.Va){for(t.S=t.H,c=lo,t.g==c.Rd&&(l=t.c.Dc,isNaN(t.a.availabilityWindowOverride)||(l=t.a.availabilityWindowOverride),t.c.Jd(l)),f=0;95443.7176888889<=a;)f+=95443.7176888889,a-=95443.7176888889;if(f)for(G.debug("Offsetting live streams by",f,"to compensate for rollover"),g=(v=h(t.b.values())).next();!g.done;g=v.next())95443.7176888889>(d=g.value).nd?(G.D("Offset applied to",d.stream.type),d.stream.presentationTimeOffset=-f,d.bc.offset(f)):G.D("Offset NOT applied to",d.stream.type)}else for(t.c.Ba(s),t.c.offset(-o),g=(v=h(t.b.values())).next();!g.done;g=v.next())(m=g.value).stream.presentationTimeOffset=o,m.bc.offset(-o),Qi(m.bc,s);t.o={presentationTimeline:t.c,periods:[r],offlineSessionIds:[],minBufferTime:0},k(n)}}))}))}(n,r.data),3);case 3:return 0<(o=n.S)&&n.h.T(o),i.return(n.o)}}))}))},i.stop=function(){this.h&&(this.h.stop(),this.h=null);var t=[];return this.i&&(t.push(this.i.destroy()),this.i=null),this.a=this.f=null,this.G.clear(),this.V.clear(),this.b.clear(),this.o=null,Promise.all(t)},i.update=function(){if(this.g!=lo.Va){for(var t=[],e=h(this.b.values()),n=e.next();!n.done;n=e.next())t.push(Kr(this,n.value));return Promise.all(t)}},i.onExpirationUpdated=function(){};var io={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},ro=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],oo={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};function ao(t,e){t.g=e,t.c&&t.c.dc(t.g==lo.Va),t.g!=lo.Va||t.h.stop()}function so(t,e,n){if(!t.i)throw new dt(2,7,7001);return e=t.f.networkingEngine.request(n,e),Pt(t.i,e),e.promise}var uo={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(t){var e=eo(t,"METHOD");Bn("HLS SAMPLE-AES-CENC","SAMPLE-AES-CENC will no longer be supported, see Issue #1227");var n=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];return n.includes(e)?(e=eo(t,"URI"),e=Hr.parse(e),e=He("com.widevine.alpha",[{initDataType:"cenc",initData:e=new Uint8Array(e.data)}]),(t=_r(t,"KEYID"))&&(e.keyIds=[t.substr(2).toLowerCase()]),e):(G.error("Widevine in HLS is only supported with [",n.join(", "),"], not",e),null)}},co="VOD",lo={Va:co,Ke:"EVENT",Rd:"LIVE"};function fo(){this.a=new Map}function ho(t,e,n){po(t,e).text=n}function po(t,e){return t.a.has(e)||t.a.set(e,new mo),t.a.get(e)}function mo(){this.text=this.variant=null}function vo(t,e){this.a=t,this.b=new Set([t]);for(var n=h(e=e||[]),i=n.next();!i.done;i=n.next())this.add(i.value)}function go(t,e){var n;if(!(n=!!t.audio!=!!e.audio||!!t.video!=!!e.video||t.language!=e.language)&&(n=t.audio&&e.audio)){n=t.audio;var i=e.audio;n=!(n.channelsCount==i.channelsCount&&yo(n,i)&&bo(n.roles,i.roles))}return!n&&(n=t.video&&e.video)&&(n=!(yo(n=t.video,i=e.video)&&bo(n.roles,i.roles))),!n}function yo(t,e){if(t.mimeType!=e.mimeType)return!1;var n=t.codecs.split(",").map((function(t){return Gt(t)[0]})),i=e.codecs.split(",").map((function(t){return Gt(t)[0]}));if(n.length!=i.length)return!1;n.sort(),i.sort();for(var r=0;r<n.length;r++)if(n[r]!=i[r])return!1;return!0}function bo(t,e){var n=new Set(t),i=new Set(e);if(n.delete("main"),i.delete("main"),n.size!=i.size)return!1;for(var r=(n=h(n)).next();!r.done;r=n.next())if(!i.has(r.value))return!1;return!0}function wo(t){this.a=t,this.b=new xo(t.language,"",t.audio&&t.audio.channelsCount?t.audio.channelsCount:0,"")}function xo(t,e,n,i,r){this.f=t,this.c=e,this.a=n,this.b=void 0===i?"":i,this.g=void 0===r?"":r}function So(){this.a=ko,this.b=(new Map).set(ko,2).set(Eo,1)}function To(t,e,n){t.b.set(ko,n).set(Eo,e)}pr.zd("m3u8",qr),pr.Kb("application/x-mpegurl",qr),pr.Kb("application/vnd.apple.mpegurl",qr),vo.prototype.add=function(t){return go(this.a,t)?(this.b.add(t),!0):(G.m("Rejecting variant - not compatible with root."),!1)},vo.prototype.values=function(){return this.b.values()},wo.prototype.create=function(t){var e=this,n=t.filter((function(t){return go(e.a,t)}));return n.length?new vo(n[0],n):this.b.create(t)},xo.prototype.create=function(t){var e=[];e=function(t,e){var n=Dn(On(e),t.map((function(t){return In(t)})));return n?t.filter((function(t){return n==In(t)})):[]}(t,this.f);var n=t.filter((function(t){return t.primary}));for(e=e.length?e:n.length?n:t,this.c&&((t=function(t,e,n){return t.filter((function(t){if(n){var i=t[n];return i&&i.roles.includes(e)}return i=t.audio,t=t.video,i&&0<=i.roles.indexOf(e)||t&&0<=t.roles.indexOf(e)}))}(e,this.c,this.g)).length?e=t:G.m("No exact match for variant role could be found.")),this.a&&((t=Ln.$d(e,this.a)).length?e=t:G.m("No exact match for the channel count could be found.")),this.b&&((t=function(t,e){return t.filter((function(t){return!!t.audio&&t.audio.label.toLowerCase()==e.toLowerCase()}))}(e,this.b)).length?e=t:G.m("No exact match for variant label could be found.")),t=new vo(e[0]),n=(e=h(e)).next();!n.done;n=e.next())n=n.value,go(t.a,n)&&t.add(n);return t};var Eo=0,ko=1;function Co(t,e){this.g=t,this.h=Ao(t),this.a=t.a.currentTime,this.f=Date.now()/1e3,this.b=!1,this.i=e,this.c=function(){}}function Mo(t){this.a=t}function Ao(t){if(t.a.paused||0==t.a.playbackRate||0==t.a.buffered.length)var e=!1;else t:{e=t.a.buffered,t=t.a.currentTime;for(var n=0;n<e.length;n++){var i=e.start(n),r=e.end(n);if(!(t<i||t>r-.5)){e=!0;break t}}e=!1}return e}function _o(t,e,n,i,r){var o=this;this.a=t,this.v=e,this.u=n,this.l=r,this.f=new Ut,this.i=!1,this.o=t.readyState,this.c=!1,this.b=i,this.h=!1,this.f.B(t,"waiting",(function(){return Po(o)})),this.g=new lt((function(){Po(o)})).Ra(.25)}function Po(t){if(0!=t.a.readyState){if(t.a.seeking){if(!t.i)return}else t.i=!1;if(!t.a.paused){t.a.readyState!=t.o&&(t.c=!1,t.o=t.a.readyState);var e=t.u.smallGapLimit,n=t.a.currentTime,i=t.a.buffered;t:{if(i&&i.length&&!(1==i.length&&1e-6>i.end(0)-i.start(0)))for(var r=te("Edge/")||te("Trident/")||te("Tizen")||te("CrKey")?.5:.1,o=0;o<i.length;o++)if(i.start(o)>n&&(0==o||i.end(o-1)-n<=r)){r=o;break t}r=null}if(null==r)t.b&&(i=Ao(n=(t=t.b).g),r=n.a.currentTime,o=Date.now()/1e3,t.a==r&&t.h==i||(t.f=o,t.a=r,t.h=i,t.b=!1),(r=o-t.f)>=t.i&&i&&!t.b&&(t.c(t.a,r),t.b=!0,t.a=n.a.currentTime));else if(0!=r||t.h){o=i.start(r);var a=t.v.Ga();if(!(o>=a)){e=(a=o-n)<=e;var s=!1;if(!(.001>a)){if(!e&&!t.c){t.c=!0;var u=new St("largegap",{currentTime:n,gapSize:a});u.cancelable=!0,t.l(u),t.u.jumpLargeGaps&&!u.defaultPrevented?s=!0:G.info("Ignoring large gap at",n,"size",a)}(e||s)&&(0==r?G.info("Jumping forward",a,"seconds because of gap before start time of",o):G.info("Jumping forward",a,"seconds because of gap starting at",i.end(r-1),"and ending at",o),t.a.currentTime=o)}}}}}}function No(t){var e=this;this.c=t,this.a=new Set,this.b=new lt((function(){Oo(e,!1)})).Ra(.25)}function Oo(t,e){for(var n=h(t.a),i=n.next();!i.done;i=n.next())i.value.g(t.c.currentTime,e)}function Io(t){for(var e=[],n=(t=h(t)).next();!n.done;n=t.next())for(var i=(n=h(n.value.variants)).next();!i.done;i=n.next())e.push(i.value);return e}function Do(t,e){for(var n=null,i=h(t),r=i.next();!r.done;r=i.next())e>=(r=r.value).startTime&&(n=r);return n}function Ro(t){this.c=t,this.a=null,this.b=function(){}}function Lo(t){var e=this;this.a=t,this.f=!1,this.c=this.a.rc(),this.b=new lt((function(){e.a.le(.25*e.c)}))}function jo(t){t.b.stop();var e=t.f?0:t.c;if(0<=e)try{return void(t.a.rc()!=e&&t.a.Id(e))}catch(t){}t.b.Ra(.25),0!=t.a.rc()&&t.a.Id(0)}function Uo(t,e,n,i){e==HTMLMediaElement.HAVE_NOTHING||t.readyState>=e?i():(e=zo.get(e),n.ua(t,e,i))}Co.prototype.release=function(){this.g=null,this.c=function(){}},_o.prototype.release=function(){this.f&&(this.f.release(),this.f=null),null!=this.g&&(this.g.stop(),this.g=null),this.b&&(this.b.release(),this.b=null),this.a=this.v=this.l=null},_o.prototype.td=function(){this.h=!0,Po(this)},No.prototype.release=function(){this.b.stop();for(var t=h(this.a),e=t.next();!e.done;e=t.next())e.value.release();this.a.clear()},Ro.prototype.release=function(){this.a=this.c=null,this.b=function(){}},Ro.prototype.g=function(t){var e=this.a,n=this.c.periods;e!=(t=Do(n,t)||n[0])&&this.b(t),this.a=t},Lo.prototype.release=function(){this.b&&(this.b.stop(),this.b=null),this.a=null},Lo.prototype.set=function(t){this.c=t,jo(this)};var zo=new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Bo(t,e,n){var i=this;this.a=t,this.g=e,this.f=n,this.h=!1,this.b=new Ut,this.c=new $o(t),Uo(this.a,HTMLMediaElement.HAVE_METADATA,this.b,(function(){qo(i,i.f)}))}function Fo(t){return t.h?t.a.currentTime:t.f}function Ho(t,e){0<t.a.readyState?Vo(t.c,e):Uo(t.a,HTMLMediaElement.HAVE_METADATA,t.b,(function(){qo(t,t.f)}))}function qo(t,e){.001>Math.abs(t.a.currentTime-e)?Ko(t):(t.b.ua(t.a,"seeking",(function(){Ko(t)})),Vo(t.c,0==t.a.currentTime?e:t.a.currentTime))}function Ko(t){t.h=!0,t.b.B(t.a,"seeking",(function(){return t.g()}))}function $o(t){var e=this;this.b=t,this.h=10,this.g=this.c=this.f=0,this.a=new lt((function(){0>=e.f?(G.m(["Failed to move playhead from",e.c,"to",e.g].join(" ")),e.a.stop()):e.b.currentTime!=e.c?e.a.stop():(e.b.currentTime=e.g,e.f--)}))}function Vo(t,e){t.c=t.b.currentTime,t.g=e,t.f=t.h,t.b.currentTime=e,t.a.Ra(.1)}function Wo(t){var e=this;this.a=t,this.f=!1,this.c=null,this.b=new Ut,Uo(this.a,HTMLMediaElement.HAVE_CURRENT_DATA,this.b,(function(){null==e.c?e.f=!0:(e.b.ua(e.a,"seeking",(function(){e.f=!0})),e.a.currentTime=Math.max(0,e.a.currentTime+e.c))}))}function Go(t,e,n,i,r,o){var a=this;this.b=t,this.a=e.presentationTimeline,this.F=e.minBufferTime||0,this.h=n,this.v=r,this.l=null,this.f=new _o(t,e.presentationTimeline,n,function(t,e){if(!e.stallEnabled)return null;var n=e.stallSkip,i=new Co(new Mo(t),e.stallThreshold);return function(t,e){t.c=e}(i,(function(e,i){G.debug(["Stall detected at",e,"for",i,"seconds. Seeking forward",n,"seconds."].join(" ")),t.currentTime+=n})),i}(t,n),o),this.c=new Bo(t,(function(){t:{var t=a.f;t.i=!0,t.h=!1,t.c=!1,t=Fo(a.c);var e=Yo(a,t);if(.001<Math.abs(e-t)){var n=(new Date).getTime()/1e3;if(!a.l||a.l<n-1){a.l=n,Ho(a.c,e),t=void 0;break t}}G.D("Seek to "+t),a.v(),t=void 0}return t}),function(t,e){return null==e?e=1/0>t.a.ca()?t.a.vb():t.a.Ga():0>e&&(e=t.a.Ga()+e),Xo(t,Zo(t,e))}(this,i)),this.i=new lt((function(){if(0!=a.b.readyState&&!a.b.paused){var t=a.b.currentTime,e=a.a.vb(),n=a.a.Ga();3>n-e&&(e=n-3),t<e&&(e=Yo(a,t),G.info("Jumping forward "+(e-t)+" seconds to catch up with the seek range."),a.b.currentTime=e)}})).Ra(.25)}function Xo(t,e){var n=t.a.ca();return e>=n?n-t.h.durationBackoff:e}function Yo(t,e){var n=je.bind(null,t.b.buffered),i=Math.max(t.F,t.h.rebufferingGoal),r=t.h.safeSeekOffset,o=t.a.vb(),a=t.a.Ga(),s=t.a.ca();3>a-o&&(o=a-3);var u=t.a.Ub(i),c=t.a.Ub(r);return i=t.a.Ub(i+r),e>=s?(G.D("Playhead past duration."),Xo(t,e)):e>a?(G.D("Playhead past end."),a):e<o?n(c)?(G.D("Playhead before start & start is buffered"),c):(G.D("Playhead before start & start is unbuffered"),i):e>=u||n(e)?(G.D("Playhead in safe region or in buffered region."),e):(G.D("Playhead outside safe region & in unbuffered region."),i)}function Zo(t,e){var n=t.a.vb();return e<n||e>(n=t.a.Ga())?n:e}function Jo(){this.b=function(){},this.a=new Set}function Qo(t){var e=this;this.h=t,this.f=new Map,this.a=function(){},this.b=function(){},this.c=function(){},this.i=[{kb:null,jb:ea,ab:function(t,n){return e.a(t,n)}},{kb:ta,jb:ea,ab:function(t,n){return e.a(t,n)}},{kb:na,jb:ea,ab:function(t,n){return e.a(t,n)}},{kb:ea,jb:ta,ab:function(t,n){return e.b(t,n)}},{kb:ea,jb:na,ab:function(t,n){return e.b(t,n)}},{kb:ta,jb:na,ab:function(t,n){return e.c(t,n)}},{kb:na,jb:ta,ab:function(t,n){return e.c(t,n)}}]}Bo.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.c&&(this.c.release(),this.c=null),this.g=function(){},this.a=null},$o.prototype.release=function(){this.a&&(this.a.stop(),this.a=null),this.b=null},Wo.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.a=null},Wo.prototype.o=function(t){this.c=this.f?this.c:t},Wo.prototype.g=function(){return(this.f?this.a.currentTime:this.c)||0},Wo.prototype.u=function(){},Go.prototype.release=function(){this.c&&(this.c.release(),this.c=null),this.f&&(this.f.release(),this.f=null),this.i&&(this.i.stop(),this.i=null),this.b=this.c=this.a=this.h=null,this.v=function(){}},Go.prototype.o=function(t){Ho(this.c,t)},Go.prototype.g=function(){var t=Fo(this.c);return 0<this.b.readyState&&!this.b.paused?Zo(this,t):t},Go.prototype.u=function(){this.f.td()},Jo.prototype.release=function(){this.b=function(){},this.a.clear()},Qo.prototype.release=function(){this.h=null,this.f.clear(),this.a=function(){},this.b=function(){},this.c=function(){}},Qo.prototype.g=function(t,e){for(var n=h(this.h.a),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.f.get(i),o=t<i.startTime?ta:t>i.endTime?na:ea;this.f.set(i,o);for(var a=h(this.i),s=a.next();!s.done;s=a.next())(s=s.value).kb==r&&s.jb==o&&s.ab(i,e)}};var ta=1,ea=2,na=3;function ia(t,e){this.a=e,this.c=t,this.g=null,this.l=1,this.v=Promise.resolve(),this.h=[],this.i=new Map,this.b=new Map,this.u=!1,this.H=null,this.G=this.f=this.o=!1,this.F=0}function ra(t){return aa(t,"audio")}function oa(t){return aa(t,"video")}function aa(t,e){var n=t.b.get(e);return n?n.Oa||n.stream:null}function sa(t,e){return p((function n(){var i,r,o,a,s,u,c,l,f;return L(n,(function(n){switch(n.j){case 1:return i=qe,E(n,Cn(t.a.O,i.va),2);case 2:return t.F++,t.G=!1,r=t.F,o=t.a.O,a=new Map,s=new Set,a.set(i.va,e),s.add(e),E(n,o.init(a,!1),3);case 3:return t.f?n.return():E(n,ma(t,s),4);case 4:if(t.f)return n.return();u=t.a.O.g.isTextVisible()||t.g.alwaysStreamText,t.F!=r||t.b.has(i.va)||t.G||!u||(c=t.a.Za(),l=Ta(t,c),f=da(e,l,0),t.b.set(i.va,f),Ma(t,f,0)),k(n)}}))}))}function ua(t,e){var n=t.b.get("video");if(n){var i=n.stream;if(i)if(G.debug("setTrickPlay",e),e){var r=i.trickModeVideo;r&&!n.Oa&&(G.debug("Engaging trick mode stream",r),la(t,r,!1,0,!1),n.Oa=i)}else(i=n.Oa)&&(G.debug("Restoring non-trick-mode stream",i),n.Oa=null,la(t,i,!0,0,!1))}}function ca(t,e,n,i){var r=!1;if(e.video){var o=la(t,e.video,n,i,!1);r=r||o}return e.audio&&(t=la(t,e.audio,n,i,!1),r=r||t),r}function la(t,e,n,i,r){var o=t.b.get(e.type);if(!o&&"text"==e.type&&t.g.ignoreTextStreamFailures)return sa(t,e),!0;if(!o)return!1;var a=Ea(t,e),s=Array.from(t.b.values()).every((function(t){return t.ka==o.ka}));return n&&a!=o.ka&&s?(G.debug("switch: switching to stream in another Period; clearing buffer and changing Periods"),t.b.forEach((function(e){fa(t,e)})),!0):(o.Oa&&(G.debug("switch during trick play mode",e),e.trickModeVideo?(o.Oa=e,e=e.trickModeVideo,G.debug("switch found trick play stream",e)):(o.Oa=null,G.debug("switch found no special trick play stream"))),!(!(s=t.h[a])||!s.Lb)&&(!(!(s=t.i.get(e.id))||!s.Lb)&&(o.stream!=e||r?("text"==e.type&&bn(t.a.O,Wt(e.mimeType,e.codecs)),o.stream=e,o.vc=!0,G.debug("switch: switching to Stream "+Pa(o)),function(t,e,n){if(!e.Yb)return!1;var i=t.a.Za(),r=Sn(t.a.O,e.type),o=ya(t,e,i,r,n);return n=o&&o.a?o.a-o.b:null,o&&!n&&(n=(o.endTime-o.sc())*e.stream.bandwidth/8),!isNaN(n)&&((o=e.stream.initSegmentReference)&&(n+=(o.a?o.a-o.b:null)||0),o=t.a.getBandwidthEstimate(),8*n/o<r-i-Math.max(t.c.minBufferTime||0,t.g.rebufferingGoal)||e.Yb.b.a>n)}(t,o,a)&&(G.info("Aborting current segment request to switch."),o.Yb.abort()),n&&(o.Wa?o.Kc=!0:o.Na?(o.Sa=!0,o.lc=i,o.Kc=!0):(Aa(o),Ca(t,o,!0,i).catch((function(e){t.a&&t.a.onError(e)})))),!0):(G.debug("switch: Stream "+Pa(o)+" already active"),!1))))}function fa(t,e){var n=Pa(e);e.Wa?G.debug(n,"clear: already clearing the buffer"):e.Sa?G.debug(n,"clear: already waiting"):e.Na?(G.debug(n,"clear: currently updating"),e.Sa=!0,e.lc=0):null==xn(t.a.O,e.type)?(G.debug(n,"clear: nothing buffered"),null==e.Ka&&Ma(t,e,0)):(G.debug(n,"clear: handling right now"),Aa(e),Ca(t,e,!1,0).catch((function(e){t.a&&t.a.onError(e)})))}function ha(t,e,n,i,r){return p((function o(){var a,s,u,c,l,f,h;return L(o,(function(o){switch(o.j){case 1:return a=t.a.Za(),s=Ta(t,a),u=qe,c=new Map,l=new Set,e&&(c.set(u.Mb,e),l.add(e)),n&&(c.set(u.Ua,n),l.add(n)),i&&(c.set(u.va,i),l.add(i)),f=t.a.O,h=t.g.forceTransmuxTS,E(o,f.init(c,h),2);case 2:return t.f?o.return():(function(t){var e=t.c.presentationTimeline.ca();1/0>e?t.a.O.Ba(e):t.a.O.Ba(Math.pow(2,32))}(t),E(o,ma(t,l),3));case 3:if(t.f)return o.return();c.forEach((function(e,n){if(!t.b.has(n)){var i=da(e,s,r);t.b.set(n,i),Ma(t,i,0)}})),k(o)}}))}))}function da(t,e,n){return{stream:t,type:t.type,Bb:null,Ha:null,Oa:null,vc:!0,ka:e,endOfStream:!1,Na:!1,Ka:null,Sa:!1,lc:0,Kc:!1,Wa:!1,yd:!1,Wb:!1,Bd:n||0,Yb:null}}function pa(t,e){var n=t.h[e];if(n)return G.debug("(all) Period "+e+" is being or has been set up"),n.promise;G.debug("(all) setting up Period "+e),n={promise:new pt,Lb:!1},t.h[e]=n;for(var i=new Set,r=h(t.c.periods[e].variants),o=r.next();!o.done;o=r.next())(o=o.value).video&&i.add(o.video),o.video&&o.video.trickModeVideo&&i.add(o.video.trickModeVideo),o.audio&&i.add(o.audio);for(o=(r=h(t.c.periods[e].textStreams)).next();!o.done;o=r.next())i.add(o.value);return t.v=t.v.then(function(){if(!this.f)return ma(this,i)}.bind(t)).then(function(){this.f||(this.h[e].promise.resolve(),this.h[e].Lb=!0,G.D("(all) setup Period "+e))}.bind(t)).catch(function(t){this.f||(this.h[e].promise.catch((function(){})),this.h[e].promise.reject(),delete this.h[e],G.m("(all) failed to setup Period "+e),this.a.onError(t))}.bind(t)),n.promise}function ma(t,e){return p((function n(){var i,r,o,a,s,u,c;return L(n,(function(n){switch(n.j){case 1:i=[];for(var l=h(e),f=l.next();!f.done;f=l.next())r=f.value,(o=t.i.get(r.id))?(G.debug("(all) Stream "+r.id+" is being or has been set up"),i.push(o.promise)):(G.D("(all) setting up Stream "+r.id),t.i.set(r.id,{promise:new pt,Lb:!1}),i.push(r.createSegmentIndex()));return C(n,2),E(n,Promise.all(i),4);case 4:if(t.f)return n.return();A(n,3);break;case 2:if(a=_(n),t.f)return n.return();for(f=(n=h(e)).next();!f.done;f=n.next())s=f.value,t.i.get(s.id).promise.catch((function(){})),t.i.get(s.id).promise.reject(),t.i.delete(s.id);throw a;case 3:for(f=(l=h(e)).next();!f.done;f=l.next())u=f.value,(c=t.i.get(u.id)).Lb||(c.promise.resolve(),c.Lb=!0,G.D("(all) setup Stream "+u.id));k(n)}}))}))}function va(t,e){if(!t.f){var n=Pa(e);if(!e.Na&&null!=e.Ka&&!e.Wa)if(e.Ka=null,e.Sa)G.debug(n,"skipping update and clearing the buffer"),Ca(t,e,e.Kc,e.lc);else{try{var i=function(t,e){if(xa(e))return kn(t.a.O,e.stream.originalId||""),null;var n=Pa(e),i=t.a.Za(),r=ga(t,e,i);G.J(n,"timeNeeded="+r);var o=Ea(t,e.stream),a=Ta(t,r),s=function(t,e,n){return"text"==e?null==(t=t.a).b||t.b<n?0:t.b-Math.max(n,t.a):Ue(t=Tn(t,e),n)}(t.a.O,e.type,i);G.J(n,"update_:","presentationTime="+i,"bufferedAhead="+s);var u=Math.max(t.c.minBufferTime||0,t.g.rebufferingGoal,t.g.bufferingGoal)*t.l;if(r>=t.c.presentationTimeline.ca())return G.debug(n,"buffered to end of presentation"),e.endOfStream=!0,"video"==e.type&&(r=t.b.get("text"))&&"application/cea-608"==r.stream.mimeType&&(r.endOfStream=!0),null;if(e.endOfStream=!1,e.ka=a,a!=o)return G.debug(n,"need Period "+a,"presentationTime="+i,"timeNeeded="+r,"currentPeriodIndex="+o),null;if(s>=u)return G.J(n,"buffering goal met"),.5;if(n=Sn(t.a.O,e.type),!(n=ya(t,e,i,n,o)))return 1;var c=1/0;return Array.from(t.b.values()).forEach((function(e){xa(e)||(e=ga(t,e,i),c=Math.min(c,e))})),r>=c+t.c.presentationTimeline.a?1:(e.Bd=0,function(t,e,n,i,r){var o=Pa(e),a=t.c.periods[i];G.D(o,"fetchAndAppend_:","presentationTime="+n,"currentPeriod.startTime="+a.startTime,"reference.position="+r.position,"reference.startTime="+r.startTime,"reference.endTime="+r.endTime);var s=e.stream,u=t.c.presentationTimeline.ca(),c=t.c.periods[i+1];i=function(t,e,n,i,r){if(!e.vc)return Promise.resolve();var o=Pa(e);return n=t.c.periods[n].startTime-e.stream.presentationTimeOffset,G.D(o,"setting timestamp offset to "+n),G.D(o,"setting append window start to "+i),G.D(o,"setting append window end to "+r),i=function(t,e,n,i,r){return"text"==e?(t.a.o=n,(t=t.a).f=i,t.h=r,Promise.resolve()):Promise.all([Mn(t,e,t.Oe.bind(t,e)),Mn(t,e,t.ug.bind(t,e,n)),Mn(t,e,t.rg.bind(t,e,i,r))])}(t.a.O,e.type,n,i,r),e.stream.initSegmentReference?(G.D(o,"fetching init segment"),t=ka(t,e,e.stream.initSegmentReference).then(function(t){if(!this.f)return G.D(o,"appending init segment"),En(this.a.O,e.type,t,null,null,e.stream.closedCaptions&&0<e.stream.closedCaptions.size)}.bind(t)).catch((function(t){return e.vc=!0,Promise.reject(t)})),Promise.all([i,t])):i}(t,e,i,Math.max(0,a.startTime-.1),c?c.startTime+.01:u),e.Na=!0,e.vc=!1,G.J(o,"fetching segment"),u=ka(t,e,r),Promise.all([i,u]).then(function(t){if(!this.f&&!this.o)return function(t,e,n,i,r,o,a){var s=Pa(e),u=r.closedCaptions&&0<r.closedCaptions.size;return null!=r.emsgSchemeIdUris&&0<r.emsgSchemeIdUris.length&&(new Ni).ia("emsg",t.K.bind(t,i,o,r.emsgSchemeIdUris)).parse(a),function(t,e,n){var i=Pa(e);G.J(i,"checking buffer length");var r=Math.max(t.g.bufferBehind,t.c.presentationTimeline.a),o=xn(t.a.O,e.type);if(null==o)return G.J(i,"buffer behind okay because nothing buffered:","presentationTime="+n,"bufferBehind="+r),Promise.resolve();var a=n-o,s=a-r;return 0>=s?(G.J(i,"buffer behind okay:","presentationTime="+n,"bufferedBehind="+a,"bufferBehind="+r,"underflow="+-s),Promise.resolve()):(G.D(i,"buffer behind too large:","presentationTime="+n,"bufferedBehind="+a,"bufferBehind="+r,"overflow="+s),t.a.O.remove(e.type,o,o+s).then(function(){this.f||G.D(i,"evicted "+s+" seconds")}.bind(t)))}(t,e,n).then(function(){if(!this.f)return G.D(s,"appending media segment"),En(this.a.O,e.type,a,o.startTime+i.startTime,o.endTime+i.startTime,u)}.bind(t)).then(function(){if(!this.f)return G.J(s,"appended media segment"),e.Bb=r,e.Ha=o,Promise.resolve()}.bind(t))}(this,e,n,a,s,r,t[1])}.bind(t)).then(function(){this.f||this.o||(e.Na=!1,e.yd=!1,e.Sa||this.a.td(),Ma(this,e,0),function(t,e,n){if(!t.u){var i=Pa(e);if(1==(e=Array.from(t.b.values())).length&&"text"==e[0].type||(t.u=e.every((function(t){return"text"==t.type||!t.Sa&&!t.Wa&&t.Ha}))),t.u){for(G.debug(i,"startup complete"),n=Ea(t,n),t.h[n]||pa(t,n).then(function(){this.f||(G.D(i,"calling onCanSwitch()..."),this.a.ne())}.bind(t)).catch(Be.wc),n=0;n<t.c.periods.length;++n)pa(t,n).catch(Be.wc);t.a.Xf&&(G.D(i,"calling onStartupComplete()..."),t.a.Xf())}}}(this,e,s),G.D(o,"finished fetch and append"))}.bind(t)).catch(function(t){this.f||this.o||(e.Na=!1,"text"==e.type&&this.g.ignoreTextStreamFailures?(1001==t.code?G.m(o,"Text stream failed to download. Proceeding without it."):G.m(o,"Text stream failed to parse. Proceeding without it."),this.b.delete("text")):7001==t.code?(e.Na=!1,e.Ka=null,Ma(this,e,0)):3017==t.code?function(t,e,n){var i=Pa(e);if(Array.from(t.b.values()).some((function(t){return t!=e&&t.yd})))G.debug(i,"MediaSource threw QuotaExceededError:","waiting for another stream to recover...");else{var r=Math.round(100*t.l);if(20<r)t.l-=.2;else{if(!(4<r))return G.error(i,"MediaSource threw QuotaExceededError too many times"),e.Wb=!0,t.o=!0,void t.a.onError(n);t.l-=.04}G.m(i,"MediaSource threw QuotaExceededError:","reducing buffering goals by "+(100-Math.round(100*t.l))+"%"),e.yd=!0}Ma(t,e,4)}(this,e,t):(G.error(o,"failed fetch and append: code="+t.code),e.Wb=!0,t.severity=2,_a(this,t)))}.bind(t))}(t,e,i,o,n),null)}(t,e);null!=i&&(Ma(t,e,i),e.Wb=!1)}catch(e){return void _a(t,e)}i=Array.from(t.b.values()),function(t,e){var n=Pa(e),i=Ea(t,e.stream);if(e.ka!=i){var r=e.ka,o=Array.from(t.b.values());o.every((function(t){return t.ka==r||xa(t)}))?o.every(Sa)?(G.debug(n,"all need Period "+r),pa(t,r).then(function(){if(!this.f)if(o.every(function(t){var e=Sa(t),n=Ea(this,t.stream);return!!xa(t)||e&&t.ka==r&&n!=r}.bind(this))){var t=this.c.periods[r];G.D(n,"calling onChooseStreams()...");var e=this.a.oe(t),i=new Map;e.variant&&e.variant.video&&i.set("video",e.variant.video),e.variant&&e.variant.audio&&i.set("audio",e.variant.audio),e.text&&i.set("text",e.text);for(var a=(e=h(this.b.keys())).next();!a.done;a=e.next())if(a=a.value,!i.has(a)&&"text"!=a)return G.error(n,"invalid Streams chosen: missing "+a+" Stream"),void this.a.onError(new dt(2,5,5005));for(a=(e=h(Array.from(i.keys()))).next();!a.done;a=e.next())if(a=a.value,!this.b.has(a)){if("text"!=a)return G.error(n,"invalid Streams chosen: unusable "+a+" Stream"),void this.a.onError(new dt(2,5,5005));ha(this,null,null,i.get("text"),t.startTime),i.delete(a)}for(a=(e=h(Array.from(this.b.keys()))).next();!a.done;a=e.next()){a=a.value;var s=this.b.get(a),u=i.get(a);if(u){var c=xa(s);c&&(s.ka=r,s.Bd=t.startTime),la(this,u,!1,0,!1),c&&xa(s)||Ma(this,this.b.get(a),0)}else this.b.delete(a)}G.D(n,"calling onCanSwitch()..."),this.a.ne()}else G.debug(n,"ignoring transition to Period",r,"since another is happening")}.bind(t)).catch(Be.wc)):G.debug(n,"all MediaStates need Period "+r+", but not all MediaStates are idle"):G.debug(n,"not all MediaStates need Period "+r)}}(t,e),t.u&&i.every((function(t){return t.endOfStream}))&&(G.D(n,"calling endOfStream()..."),t.a.O.endOfStream().then(function(){if(!this.f){var t=this.a.O.ca();0!=t&&t<this.c.presentationTimeline.ca()&&this.c.presentationTimeline.Ba(t)}}.bind(t)))}}}function ga(t,e,n){return e.Bb&&e.Ha?(n=Ea(t,e.Bb),t.c.periods[n].startTime+e.Ha.endTime):Math.max(n,e.Bd)}function ya(t,e,n,i,r){var o=Pa(e);return e.Ha&&e.stream==e.Bb?(i=e.Ha.position+1,G.J(o,"next position known:","position="+i),wa(t,e,r,i)):(e.Ha?(G.D(o,"next position unknown: another Stream buffered"),o=Ea(t,e.Bb),o=ba(t,e,t.c.periods[o].startTime+e.Ha.endTime,r)):(G.D(o,"next position unknown: nothing buffered"),o=ba(t,e,i||n,r)),null==o?null:(n=null,null==i&&(n=wa(t,e,r,Math.max(0,o-1))),n||wa(t,e,r,o)))}function ba(t,e,n,i){var r=Pa(e);return t=t.c.periods[i],G.debug(r,"looking up segment:","presentationTime="+n,"currentPeriod.startTime="+t.startTime),n=Math.max(0,n-t.startTime),null==(e=e.stream.findSegmentPosition(n))&&G.m(r,"cannot find segment:","currentPeriod.startTime="+t.startTime,"lookupTime="+n),e}function wa(t,e,n,i){var r=Pa(e);return n=t.c.periods[n],(e=e.stream.getSegmentReference(i))?(t=(i=t.c.presentationTimeline).Vb(),i=i.wb(),n.startTime+e.endTime<t||n.startTime+e.startTime>i?(G.J(r,"segment is not available:","currentPeriod.startTime="+n.startTime,"reference.startTime="+e.startTime,"reference.endTime="+e.endTime,"availabilityStart="+t,"availabilityEnd="+i),null):e):(G.D(r,"segment does not exist:","currentPeriod.startTime="+n.startTime,"position="+i),null)}function xa(t){return t&&"text"==t.type&&"application/cea-608"==t.stream.mimeType}function Sa(t){return!t.Na&&null==t.Ka&&!t.Sa&&!t.Wa}function Ta(t,e){var n=Do(t.c.periods,e+1/15);return n?t.c.periods.indexOf(n):0}function Ea(t,e){for(var n=t.c.periods,i=0;i<n.length;i++){for(var r=n[i],o=new Set,a=h(r.variants),s=a.next();!s.done;s=a.next())(s=s.value).audio&&o.add(s.audio),s.video&&o.add(s.video),s.video&&s.video.trickModeVideo&&o.add(s.video.trickModeVideo);for(a=(r=h(r.textStreams)).next();!a.done;a=r.next())o.add(a.value);if(o.has(e))return i}return-1}function ka(t,e,n){var i=vr(n.c(),n.b,n.a,t.g.retryParameters);return G.J("fetching: reference=",n),t=t.a.Cb.request(1,i),e.Yb=t,t.promise.then((function(t){return e.Yb=null,t.data}))}function Ca(t,e,n,i){return p((function r(){var o,a,s,u;return L(r,(function(r){switch(r.j){case 1:return o=Pa(e),e.Sa=!1,e.Kc=!1,e.lc=0,e.Wa=!0,G.debug(o,"clearing buffer"),i?(s=t.a.Za(),u=t.a.O.ca(),a=t.a.O.remove(e.type,s+i,u)):a=Cn(t.a.O,e.type).then(function(){if(!this.f&&n)return this.a.O.flush(e.type)}.bind(t)),E(r,a,2);case 2:if(t.f)return r.return();G.debug(o,"cleared buffer"),e.Bb=null,e.Ha=null,e.Wa=!1,e.endOfStream=!1,Ma(t,e,0),k(r)}}))}))}function Ma(t,e,n){G.J(Pa(e),"updating in "+n+" seconds"),e.Ka=new ct((function(){return p((function n(){var i;return L(n,(function(n){switch(n.j){case 1:return C(n,2),E(n,va(t,e),4);case 4:A(n,0);break;case 2:i=_(n),t.a&&t.a.onError(i),k(n)}}))}))})).T(n)}function Aa(t){null!=t.Ka&&(t.Ka.stop(),t.Ka=null)}function _a(t,e){ht(t.H).then(function(){this.f||(this.a.onError(e),e.handled||this.g.failureCallback(e))}.bind(t))}function Pa(t){return"("+t.type+":"+t.stream.id+")"}function Na(t,e,n,i,r,o){if(200<=n&&299>=n&&202!=n)return{uri:r||i,vd:i,data:e,headers:t,fromCache:!!t["x-shaka-from-cache"]};r=null;try{r=ae(e)}catch(t){}throw G.debug("HTTP error text:",r),new dt(401==n||403==n?2:1,1,1001,i,n,r,t,o)}function Oa(t,e,n,i){var r=new Oa.b;$t(e.headers).forEach((function(t,e){r.append(e,t)}));var o=new Oa.a,a={Ud:!1,Ge:!1};if(t=new mt(t=Oa.l(t,n,{body:e.body||void 0,headers:r,method:e.method,signal:o.signal,credentials:e.allowCrossSiteCredentials?"include":void 0},a,i),(function(){return a.Ud=!0,o.abort(),Promise.resolve()})),e=e.retryParameters.timeout){var s=new lt((function(){a.Ge=!0,o.abort()}));s.T(e/1e3),t.finally((function(){s.stop()}))}return t}function Ia(t,e,n,i){var r=new Ia.f,o=Date.now(),a=0;return new mt(new Promise((function(s,u){for(var c in r.open(e.method,t,!0),r.responseType="arraybuffer",r.timeout=e.retryParameters.timeout,r.withCredentials=e.allowCrossSiteCredentials,r.onabort=function(){u(new dt(1,1,7001,t,n))},r.onload=function(e){for(var i=(e=e.target).getAllResponseHeaders().trim().split("\r\n"),r={},o=(i=h(i)).next();!o.done;o=i.next())r[(o=o.value.split(": "))[0].toLowerCase()]=o.slice(1).join(": ");try{var a=Na(r,e.response,e.status,t,e.responseURL,n);s(a)}catch(t){u(t)}},r.onerror=function(e){u(new dt(1,1,1002,t,e,n))},r.ontimeout=function(){u(new dt(1,1,1003,t,n))},r.onprogress=function(t){var e=Date.now();(100<e-o||t.lengthComputable&&t.loaded==t.total)&&(i(e-o,t.loaded-a,t.total-t.loaded),a=t.loaded,o=e)},e.headers)r.setRequestHeader(c.toLowerCase(),e.headers[c]);r.send(e.body)})),(function(){return r.abort(),Promise.resolve()}))}function Da(){this.a=this.f=this.b=0,this.c=new Map,this.g=0}function Ra(t,e,n){this.h=t,this.b=new Map,this.c=!1,this.g=e,this.f=n,this.a=new Da}function La(t,e,n,i,r,o){var a=function(t,e){t.b+=e;var n=t.g;return t.g++,t.c.set(n,e),n}(t.a,i);i=t.b.get(e)||Promise.resolve(),t.b.set(e,i.then((function(){return p((function e(){var i,s,u,c,l,f;return L(e,(function(e){switch(e.j){case 1:return E(e,function(t,e){return p((function n(){var i;return L(n,(function(n){switch(n.j){case 1:return E(n,t.h.request(1,e).promise,2);case 2:return i=n.s,n.return(i.data)}}))}))}(t,n),2);case 2:if(i=e.s,t.c)throw new dt(2,9,7001);if(r)for(var h in s=new Uint8Array(i),(u=new ji(s)).data)c=Number(h),l=u.data[c],f=u.a[c],t.f(l,f);return t.a.close(a,i.byteLength),h=t.a,t.g(0==h.b?0:h.f/h.b,t.a.a),e.return(o(i))}}))}))})))}function ja(t,e){var n=this;this.c=t,this.b=t.objectStore(e),this.a=new pt,t.onabort=function(t){t.preventDefault(),n.a.reject()},t.onerror=function(t){t.preventDefault(),n.a.reject()},t.oncomplete=function(){n.a.resolve()}}function Ua(t,e){return new Promise((function(n,i){var r=t.b.openCursor();r.onerror=i,r.onsuccess=function(t){if(!(t=t.target.result))return n();e(t.key,t.value,t),t.continue()}}))}function za(t){this.b=t,this.a=[]}function Ba(t,e){return Fa(t,e,"readwrite")}function Fa(t,e,n){var i=new ja(n=t.b.transaction([e],n),e);return t.a.push(i),i.promise().then((function(){Mt(t.a,i)}),(function(){Mt(t.a,i)})),i}function Ha(t,e,n){this.b=new za(t),this.c=e,this.a=n}function qa(t){return Promise.reject(new dt(2,9,9011,"Cannot add new value to "+t))}function Ka(t,e,n,i){e=(t=Ba(t.b,e)).store();for(var r={},o=(n=h(n)).next();!o.done;r={key:r.key},o=n.next())r.key=o.value,e.delete(r.key).onsuccess=function(t){return function(){return i(t.key)}}(r);return t.promise()}function $a(t,e,n){return p((function i(){var r,o,a,s,u,c,l;return L(i,(function(i){switch(i.j){case 1:for(r=Fa(t.b,e,"readonly"),o=r.store(),a={},s=[],u={},c=h(n),l=c.next();!l.done;u={request:u.request,key:u.key},l=c.next())u.key=l.value,u.request=o.get(u.key),u.request.onsuccess=function(t){return function(){null==t.request.result&&s.push(t.key),a[t.key]=t.request.result}}(u);return E(i,r.promise(),2);case 2:if(s.length)throw new dt(2,9,9012,"Could not find values for "+s);return i.return(n.map((function(t){return a[t]})))}}))}))}function Va(t){this.a=new za(t)}function Wa(){this.a=new Map}function Ga(t,e,n){if(!(t=t.a.get(e)))throw new dt(2,9,9013,"Could not find mechanism with name "+e);if(!(e=t.getCells().get(n)))throw new dt(2,9,9013,"Could not find cell with name "+n);return e}function Xa(t,e){Ya.set(t,e)}ia.prototype.destroy=function(){for(var t=h(this.b.values()),e=t.next();!e.done;e=t.next())Aa(e.value);return this.b.clear(),this.i.clear(),this.g=this.h=this.v=this.c=this.a=null,this.f=!0,Promise.resolve()},ia.prototype.configure=function(t){this.g=t,this.H=new ft({maxAttempts:Math.max(t.retryParameters.maxAttempts,2),baseDelay:t.retryParameters.baseDelay,backoffFactor:t.retryParameters.backoffFactor,fuzzFactor:t.retryParameters.fuzzFactor,timeout:0},!0)},ia.prototype.start=function(){var t=this;return p((function e(){var n,i,r;return L(e,(function(e){switch(e.j){case 1:return n=t.a.Za(),i=Ta(t,n),(r=t.a.oe(t.c.periods[i])).variant||r.text?E(e,ha(t,r.variant?r.variant.audio:null,r.variant?r.variant.video:null,r.text,n),2):(G.error("init: no Streams chosen"),e.return(new dt(2,5,5005)));case 2:if(t.f)return e.return();G.debug("init: completed initial Stream setup"),t.a&&t.a.Of&&(G.D("init: calling onInitialStreamsSetup()..."),t.a.Of()),k(e)}}))}))},ia.prototype.K=function(t,e,n,i){var r=i.reader.wd(),o=i.reader.wd(),a=i.reader.I(),s=i.reader.I(),u=i.reader.I(),c=i.reader.I();i=i.reader.fb(i.reader.N.byteLength-i.reader.ga()),t=t.startTime+e.startTime+s/a,n.includes(r)&&("urn:mpeg:dash:event:2012"==r?this.a.Pf():this.a.onEvent(new St("emsg",{detail:{startTime:t,endTime:t+u/a,schemeIdUri:r,value:o,timescale:a,presentationTimeDelta:s,eventDuration:u,id:c,messageData:i}})))},H("shaka.net.HttpFetchPlugin",Oa),Oa.l=function(t,e,n,i,r){return p((function o(){var a,s,u,c,l,f,h,d,m,v,g,y;return L(o,(function(o){switch(o.j){case 1:return a=Oa.g,s=Oa.c,f=l=0,h=Date.now(),C(o,2),E(o,a(t,n),4);case 4:return u=o.s,d=u.clone().body.getReader(),v=(m=u.headers.get("Content-Length"))?parseInt(m,10):0,new s({start:function(t){!function e(){return p((function n(){var i,o,a;return L(n,(function(n){switch(n.j){case 1:return C(n,2),E(n,d.read(),4);case 4:i=n.s,A(n,3);break;case 2:return o=_(n),G.D("error reading from stream",o.message),n.return();case 3:i.done||(l+=i.value.byteLength),(100<(a=Date.now())-h||i.done)&&(r(a-h,l-f,v-l),f=l,h=a),i.done?t.close():(t.enqueue(i.value),e()),k(n)}}))}))}()}}),E(o,u.arrayBuffer(),5);case 5:c=o.s,A(o,3);break;case 2:if(g=_(o),i.Ud)throw new dt(1,1,7001,t,e);if(i.Ge)throw new dt(1,1,1003,t,e);throw new dt(1,1,1002,t,g,e);case 3:return y={},u.headers.forEach((function(t,e){y[e.trim()]=t})),o.return(Na(y,c,u.status,t,u.url,e))}}))}))},Oa.isSupported=function(){if(!t.ReadableStream)return!1;try{new ReadableStream({})}catch(t){return!1}return!(!t.fetch||!t.AbortController)},Oa.isSupported=Oa.isSupported,Oa.g=t.fetch,Oa.a=t.AbortController,Oa.c=t.ReadableStream,Oa.b=t.Headers,Oa.isSupported()&&(It("http",Oa,2),It("https",Oa,2)),H("shaka.net.HttpXHRPlugin",Ia),Ia.f=t.XMLHttpRequest,It("http",Ia,1),It("https",Ia,1),Da.prototype.close=function(t,e){if(this.c.has(t)){var n=this.c.get(t);this.c.delete(t),this.f+=n,this.a+=e}},Ra.prototype.destroy=function(){return this.c=!0,Promise.all(this.b.values()).then((function(){}),(function(){}))},ja.prototype.abort=function(){try{this.c.abort()}catch(t){}return this.a.catch((function(){}))},ja.prototype.store=function(){return this.b},ja.prototype.promise=function(){return this.a},za.prototype.destroy=function(){return Promise.all(this.a.map((function(t){return t.abort()})))},(i=Ha.prototype).destroy=function(){return this.b.destroy()},i.hasFixedKeySpace=function(){return!0},i.addSegments=function(){return qa(this.c)},i.removeSegments=function(t,e){return Ka(this,this.c,t,e)},i.getSegments=function(t){var e=this;return p((function n(){var i;return L(n,(function(n){switch(n.j){case 1:return E(n,$a(e,e.c,t),2);case 2:return i=n.s,n.return(i.map((function(t){return e.Wd(t)})))}}))}))},i.addManifests=function(){return qa(this.a)},i.updateManifestExpiration=function(t,e){var n=Ba(this.b,this.a),i=n.store();return i.get(t).onsuccess=function(n){(n=n.target.result)&&(n.expiration=e,i.put(n,t))},n.promise()},i.removeManifests=function(t,e){return Ka(this,this.a,t,e)},i.getManifests=function(t){var e=this;return p((function n(){var i;return L(n,(function(n){switch(n.j){case 1:return E(n,$a(e,e.a,t),2);case 2:return i=n.s,n.return(i.map((function(t){return e.mc(t)})))}}))}))},i.getAllManifests=function(){var t=this;return p((function e(){var n,i;return L(e,(function(e){switch(e.j){case 1:return n=Fa(t.b,t.a,"readonly"),i=new Map,E(e,Ua(n,(function(e,n){i.set(e,t.mc(n))})),2);case 2:return E(e,n.promise(),3);case 3:return e.return(i)}}))}))},i.Wd=function(t){return t},i.mc=function(t){return t},i.add=function(t,e){var n=this;return p((function i(){var r,o,a,s;return L(i,(function(i){switch(i.j){case 1:r=Ba(n.b,t),o=r.store(),a=[];for(var u=h(e),c=u.next();!c.done;c=u.next())s=c.value,o.add(s).onsuccess=function(t){a.push(t.target.result)};return E(i,r.promise(),2);case 2:return i.return(a)}}))}))},Va.prototype.destroy=function(){return this.a.destroy()},Va.prototype.getAll=function(){var t=this;return p((function e(){var n,i;return L(e,(function(e){switch(e.j){case 1:return n=Fa(t.a,"session-ids","readonly"),i=[],E(e,Ua(n,(function(t,e){i.push(e)})),2);case 2:return E(e,n.promise(),3);case 3:return e.return(i)}}))}))},Va.prototype.add=function(t){for(var e=Ba(this.a,"session-ids"),n=e.store(),i=(t=h(t)).next();!i.done;i=t.next())n.add(i.value);return e.promise()},Va.prototype.remove=function(t){var e=this;return p((function n(){var i;return L(n,(function(n){switch(n.j){case 1:return E(n,Ua(i=Ba(e.a,"session-ids"),(function(e,n,i){0<=t.indexOf(n.sessionId)&&i.delete()})),2);case 2:return E(n,i.promise(),0)}}))}))},Wa.prototype.destroy=function(){for(var t=[],e=h(this.a.values()),n=e.next();!n.done;n=e.next())t.push(n.value.destroy());return this.a.clear(),Promise.all(t)},Wa.prototype.init=function(){var t=this;Ya.forEach((function(e,n){var i=e();i?t.a.set(n,i):G.info("Skipping "+n+" as it is not supported on this platform")}));for(var e=[],n=h(this.a.values()),i=n.next();!i.done;i=n.next())e.push(i.value.init());return Promise.all(e)},Wa.prototype.erase=function(){var t=this;return p((function e(){var n,i;return L(e,(function(e){switch(e.j){case 1:return n=Array.from(t.a.values()),(i=0<n.length)||Ya.forEach((function(t){(t=t())&&n.push(t)})),E(e,Promise.all(n.map((function(t){return t.erase()}))),2);case 2:if(!i)return E(e,Promise.all(n.map((function(t){return t.destroy()}))),0);e.C(0)}}))}))},H("shaka.offline.StorageMuxer.register",Xa),H("shaka.offline.StorageMuxer.unregister",(function(t){Ya.delete(t)}));var Ya=new Map;function Za(t){Ha.apply(this,arguments)}function Ja(t){return function(t){var e=t.streams.filter((function(t){return"audio"==t.contentType})),n=t.streams.filter((function(t){return"video"==t.contentType}));if(!e.every((function(t){return t.variantIds}))||!n.every((function(t){return t.variantIds}))){e.forEach((function(t){t.variantIds=[]})),n.forEach((function(t){t.variantIds=[]}));var i=0;if(n.length&&!e.length){G.debug("Found video-only content. Creating variants for video.");var r=i++;n.forEach((function(t){t.variantIds.push(r)}))}if(!n.length&&e.length){G.debug("Found audio-only content. Creating variants for audio.");var o=i++;e.forEach((function(t){t.variantIds.push(o)}))}n.length&&e.length&&(G.debug("Found audio-video content. Creating variants."),e.forEach((function(t){n.forEach((function(e){var n=i++;t.variantIds.push(n),e.variantIds.push(n)}))})))}}(t),t.streams.forEach((function(){})),{startTime:t.startTime,streams:t.streams.map(Qa)}}function Qa(t){var e=t.initSegmentUri?es(t.initSegmentUri):null;return{id:t.id,originalId:null,primary:t.primary,presentationTimeOffset:t.presentationTimeOffset,contentType:t.contentType,mimeType:t.mimeType,codecs:t.codecs,frameRate:t.frameRate,pixelAspectRatio:void 0,kind:t.kind,language:t.language,label:t.label,width:t.width,height:t.height,initSegmentKey:e,encrypted:t.encrypted,keyId:t.keyId,segments:t.segments.map(ts),variantIds:t.variantIds}}function ts(t){var e=es(t.uri);return{startTime:t.startTime,endTime:t.endTime,dataKey:e}}function es(t){var e;if((e=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(t))||(e=/^offline:segment\/([0-9]+)$/.exec(t)))return Number(e[1]);throw new dt(2,9,9004,"Could not parse uri "+t)}function ns(t,e,n,i){Ha.call(this,t,e,n),this.f=i}function is(){this.g=this.c=this.b=this.a=this.f=null}function rs(t,e,n,i){this.a=t,this.g=e,this.f=n,this.c=i,this.b=["offline:",t,"/",e,"/",n,"/",i].join("")}function os(t){if(null==(t=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(t)))return null;var e=t[1];if("manifest"!=e&&"segment"!=e)return null;var n=t[2];if(!n)return null;var i=t[3];return i&&null!=e?new rs(e,n,i,Number(t[4])):null}function as(t,e){this.b=t,this.a=e}function ss(t,e,n){var i=e.streams.filter((function(t){return"audio"==t.contentType})),r=e.streams.filter((function(t){return"video"==t.contentType}));return i=function(t,e,n){for(var i=new Set,r=h(e),o=r.next();!o.done;o=r.next()){var a=h(o.value.variantIds);for(o=a.next();!o.done;o=a.next())i.add(o.value)}for(r=h(n),o=r.next();!o.done;o=r.next())for(a=h(o.value.variantIds),o=a.next();!o.done;o=a.next())i.add(o.value);for(r=new Map,i=h(i),o=i.next();!o.done;o=i.next())o=o.value,r.set(o,{id:o,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0});for(e=h(e),i=e.next();!i.done;i=e.next())for(i=i.value,o=us(t,i),a=h(i.variantIds),i=a.next();!i.done;i=a.next())(i=r.get(i.value)).language=o.language,i.primary=i.primary||o.primary,i.audio=o;for(n=h(n),e=n.next();!e.done;e=n.next())for(i=e.value,e=us(t,i),o=h(i.variantIds),i=o.next();!i.done;i=o.next())(i=r.get(i.value)).primary=i.primary||e.primary,i.video=e;return r}(t,i,r),r=e.streams.filter((function(t){return"text"==t.contentType})).map((function(e){return us(t,e)})),e.streams.forEach((function(i){i=i.segments.map((function(e,n){return cs(t,n,e)})),n.Db(i,e.startTime)})),{startTime:e.startTime,variants:Array.from(i.values()),textStreams:r}}function us(t,e){var n=e.segments.map((function(e,n){return cs(t,n,e)})),i=new Ji(n);return n={id:e.id,originalId:e.originalId,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(t){return i.find(t)},getSegmentReference:function(t){return i.get(t)},initSegmentReference:null,presentationTimeOffset:e.presentationTimeOffset,mimeType:e.mimeType,codecs:e.codecs,width:e.width||void 0,height:e.height||void 0,frameRate:e.frameRate||void 0,pixelAspectRatio:e.pixelAspectRatio||void 0,kind:e.kind,encrypted:e.encrypted,keyId:e.keyId,language:e.language,label:e.label||null,type:e.contentType,primary:e.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},null!=e.initSegmentKey&&(n.initSegmentReference=function(t,e){var n=new rs("segment",t.b,t.a,e);return new Xi((function(){return[n.toString()]}),0,null)}(t,e.initSegmentKey)),n}function cs(t,e,n){var i=new rs("segment",t.b,t.a,n.dataKey);return new Yi(e,n.startTime,n.endTime,(function(){return[i.toString()]}),0,null)}function ls(){this.a=null}function fs(t){var e=os(t);return e&&"manifest"==e.a?fs.h(t):e&&"segment"==e.a?fs.i(e.key(),e):vt(new dt(2,1,9004,t))}function hs(t,e,n){return p((function i(){var r,o,a,s,u,c;return L(i,(function(i){switch(i.j){case 1:r=[];for(var l=[],f=h(n),d=f.next();!d.done;d=f.next()){d=d.value;for(var m=!1,v=h(l),g=v.next();!g.done;g=v.next())if(ds((g=g.value).info,d)){g.sessionIds.push(d.sessionId),m=!0;break}m||l.push({info:d,sessionIds:[d.sessionId]})}o=h(l),a=o.next();case 2:if(a.done){i.C(4);break}return s=a.value,u=function(t,e,n){return p((function i(){var r,o,a,s;return L(i,(function(i){switch(i.j){case 1:return r=new he({Cb:e,onError:function(){},yc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),C(i,2),r.configure(t),E(i,function(t,e,n,i,r,o){var a=new Map;return a.set(e,{audioCapabilities:r,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:e,drmInfos:[{keySystem:e,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,initData:null,keyIds:null}]}),xe(t,a)}(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:A(i,3);break;case 2:return o=_(i),G.m("Error initializing EME",o),E(i,r.destroy(),5);case 5:return i.return([]);case 3:return C(i,6),E(i,me(r),8);case 8:A(i,7);break;case 6:return a=_(i),G.m("Error setting server certificate",a),E(i,r.destroy(),9);case 9:return i.return([]);case 7:return s=[],E(i,Promise.all(n.sessionIds.map((function(t){return p((function e(){var n;return L(e,(function(e){switch(e.j){case 1:return C(e,2),E(e,function(t,e){return p((function n(){var i,r,o;return L(n,(function(n){switch(n.j){case 1:return E(n,Se(t,e),2);case 2:return(i=n.s)?(r=[],(o=t.b.get(i))&&(o.Ca=new pt,r.push(o.Ca)),G.J("Attempting to remove session",e),r.push(i.remove()),E(n,Promise.all(r),0)):(G.J("Ignoring attempt to remove missing session",e),n.return())}}))}))}(r,t),4);case 4:s.push(t),A(e,0);break;case 2:n=_(e),G.m("Error deleting offline session",n),k(e)}}))}))}))),10);case 10:return E(i,r.destroy(),11);case 11:return i.return(s)}}))}))}(t,e,s),E(i,u,5);case 5:c=i.s,r=r.concat(c),a=o.next(),i.C(2);break;case 4:return i.return(r)}}))}))}function ds(t,e){function n(t,e){return t.robustness==e.robustness&&t.contentType==e.contentType}return t.keySystem==e.keySystem&&t.licenseUri==e.licenseUri&&At(t.audioCapabilities,e.audioCapabilities,n)&&At(t.videoCapabilities,e.videoCapabilities,n)}function ps(t,e){var n={Ea:null,w:null,mimeType:null,startTime:null,Ld:null,uri:null},i=this;this.h=e,this.c=t,this.f=n,this.i=null,this.g=[],this.b=this.a=null,this.l=!0,this.o=Promise.resolve().then((function(){return function(t){return p((function e(){return L(e,(function(e){switch(e.j){case 1:if(t.l){if(0==t.g.length||t.a&&!t.a.$a)var n=!1;else{t.a&&(t.a.za.eb(),t.a=null);var i=(n=t.g.shift()).create(t.f);i?(n.za.Eb(),t.a={node:i.node,payload:i.payload,$a:i.$a,za:n.za}):n.za.zc(),n=!0}return n?n=Promise.resolve():t.a?n=function(t){return p((function e(){var n,i;return L(e,(function(e){switch(e.j){case 1:return t.c=t.h.rf(t.c,t.f,t.a.node,t.a.payload),C(e,2),t.b=t.h.Ye(t.c,t.f,t.a.payload),E(e,t.b.promise,4);case 4:t.b=null,t.c==t.a.node&&(t.a.za.xc(),t.a=null),A(e,0);break;case 2:return 7001==(n=_(e)).code?t.a.za.eb():t.a.za.onError(n),t.a=null,t.b=null,i=t,E(e,t.h.handleError(t.f,n),5);case 5:i.c=e.s,k(e)}}))}))}(t):(t.h.Nf(t.c),t.i=new pt,n=t.i),E(e,n,1)}e.C(0)}}))}))}(i)}))}function ms(t,e){var n={Eb:function(){},xc:function(){},eb:function(){},onError:function(){},zc:function(){},Sg:function(){}};return t.g.push({create:e,za:n}),t.b&&t.b.abort(),vs(t),n}function vs(t){t.i&&(t.i.resolve(),t.i=null)}function gs(t){this.a=null;for(var e=0;e<t.textTracks.length;++e){var n=t.textTracks[e];n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.a=n)}this.a||(this.a=t.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden"}function ys(t){if(t.startTime>=t.endTime)return G.m("Invalid cue times: "+t.startTime+" - "+t.endTime),null;var e=new VTTCue(t.startTime,t.endTime,t.payload);e.lineAlign=t.lineAlign,e.positionAlign=t.positionAlign,t.size&&(e.size=t.size);try{e.align=t.textAlign}catch(t){}return"center"==t.textAlign&&"center"!=e.align&&(e.align="middle"),"vertical-lr"==t.writingMode?e.vertical="lr":"vertical-rl"==t.writingMode&&(e.vertical="rl"),1==t.lineInterpretation&&(e.snapToLines=!1),null!=t.line&&(e.line=t.line),null!=t.position&&(e.position=t.position),e}function bs(t,e){var n=t.mode;t.mode="showing"==n?"showing":"hidden";for(var i=t.cues,r=i.length-1;0<=r;r--){var o=i[r];o&&e(o)&&t.removeCue(o)}t.mode=n}function ws(t,e,n,i,r){var o,a=r in i,s=!0;for(o in e){var u=r+"."+o,c=a?i[r]:n[o];a||o in n?void 0===e[o]?void 0===c||a?delete t[o]:t[o]=kt(c):c.constructor==Object&&e[o]&&e[o].constructor==Object?(t[o]||(t[o]=kt(c)),u=ws(t[o],e[o],c,i,u),s=s&&u):typeof e[o]!=typeof c||null==e[o]||"function"!=typeof e[o]&&e[o].constructor!=c.constructor?(G.jc("Invalid config, wrong type for "+u),s=!1):("function"==typeof n[o]&&n[o].length!=e[o].length&&G.Z("Unexpected number of arguments for "+u),t[o]=e[o]):(G.jc("Invalid config, unrecognized key "+u),s=!1)}return s}function xs(t,e){for(var n={},i=n,r=0,o=0;!(0>(r=t.indexOf(".",r)));)0!=r&&"\\"==t[r-1]||(i[o=t.substring(o,r).replace(/\\\./g,".")]={},i=i[o],o=r+1),r+=1;return i[t.substring(o).replace(/\\\./g,".")]=e,n}function Ss(){}function Ts(){var t=5e5,e=1/0;navigator.connection&&(t=1e6*navigator.connection.downlink,navigator.connection.saveData&&(e=360));var n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:Ee,fairPlayTransform:!0,updateExpirationTime:1},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,dash:{customScheme:function(t){if(t)return null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,defaultPresentationDelay:10,ignoreMinBufferTime:!1,autoCorrectDrift:!0,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1},hls:{ignoreTextStreamFailures:!1,useFullSegmentsForStartTime:!1}},r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},failureCallback:function(t){return G.error("Unhandled streaming error",t),[t]},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0};te("Web0S")&&(r.stallEnabled=!1);var o={trackSelectionCallback:function(t){return p((function e(){return L(e,(function(e){switch(e.j){case 1:return e.return(t)}}))}))},progressCallback:function(t,e){return[t,e]},usePersistentLicense:!0},a={drm:n,manifest:i,streaming:r,offline:o,abrFactory:jn,abr:{enabled:!0,defaultBandwidthEstimate:t,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return o.trackSelectionCallback=function(t){return p((function e(){return L(e,(function(e){switch(e.j){case 1:return e.return(function(t,e){var n=t.filter((function(t){return"variant"==t.type})),i=[],r=Dn(e,n.map((function(t){return t.language})));r&&(i=n.filter((function(t){return On(t.language)==r}))),0==i.length&&(i=n.filter((function(t){return t.primary}))),0==i.length&&(1<new Set(n.map((function(t){return t.language}))).size&&G.m("Could not choose a good audio track based on language preferences or primary tracks.  An arbitrary language will be stored!"),i=n);var o=i.filter((function(t){return t.height&&480>=t.height}));if(o.length&&(o.sort((function(t,e){return e.height-t.height})),i=o.filter((function(t){return t.height==o[0].height}))),n=[],i.length){var a=Math.floor(i.length/2);i.sort((function(t,e){return t.bandwidth-e.bandwidth})),n.push(i[a])}for(i=h(t),a=i.next();!a.done;a=i.next())"text"==(a=a.value).type&&n.push(a);return n}(t,a.preferredAudioLanguage))}}))}))},a}function Es(t,e,n){var i={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return ws(t,e,n||Ts(),i,"")}function ks(){this.a=null,this.b=[]}function Cs(t,e){if(null==t.a)t.a={timestamp:Date.now()/1e3,state:e,duration:0};else{var n=Date.now()/1e3;t.a.duration=n-t.a.timestamp,t.a.state!=e&&(t.b.push(t.a),t.a={timestamp:n,state:e,duration:0})}}function Ms(t,e){var n=0;t.a&&t.a.state==e&&(n+=t.a.duration);for(var i=h(t.b),r=i.next();!r.done;r=i.next())n+=(r=r.value).state==e?r.duration:0;return n}function As(){this.b=this.c=null,this.a=[]}function _s(){this.f=this.u=this.h=this.b=this.i=this.l=this.o=this.g=this.v=NaN,this.a=new ks,this.c=new As}function Ps(e,n){var i=this;Et.call(this),this.i=bu,this.a=null,this.nb=!1,this.g=new Ut,this.Lc=this.l=this.Nb=this.c=this.u=this.f=this.ec=this.F=this.fc=this.H=this.pb=this.o=this.G=this.h=this.S=null,this.ke=1e9,this.hc=new Set,this.rb=!0,this.sa=null,this.je=!1,this.ge=0,this.ra=null,this.ea=new fo,this.b=Hs(this),this.ic={width:1/0,height:1/0},this.v=null,this.Ob=new xo(this.b.preferredAudioLanguage,this.b.preferredVariantRole,this.b.preferredAudioChannelCount),this.qa=this.b.preferredTextLanguage,this.mb=this.b.preferredTextRole,this.Mc=[],n&&n(this),this.S=function(t){return new Nt((function(e,n){t.l&&t.l.segmentDownloaded(e,n)}))}(this),this.g.B(t,"online",(function(){i.Cd()})),this.K={name:"detach"},this.V={name:"attach"},this.La={name:"unload"},this.Zc={name:"manifest-parser"},this.Uc={name:"manifest"},this.ob={name:"media-source"},this.Nc={name:"drm-engine"},this.$={name:"load"},this.dd={name:"src-equals-drm-engine"},this.qb={name:"src-equals"};var r=new Map;r.set(this.V,(function(t,e){return bt(function(t,e,n){return null==e.w&&(e.w=n.w,t.g.B(e.w,"error",(function(){var e=ou(t);e&&t.Qa(e)}))),t.a=e.w,Promise.resolve()}(i,t,e))})),r.set(this.K,(function(t){return t.w&&(i.g.pa(t.w,"error"),t.w=null),i.a=null,bt(t=Promise.resolve())})),r.set(this.La,(function(t){return bt(Ds(i,t))})),r.set(this.ob,(function(e){return bt(e=function(e,n){return p((function i(){var r,o,a,s;return L(i,(function(i){switch(i.j){case 1:return r=t.muxjs?new De:new Re,o=e.b.textDisplayFactory,a=new o,e.Rc=o,E(i,(s=new vn(n.w,r,a)).u,2);case 2:e.G=s,k(i)}}))}))}(i,e))})),r.set(this.Zc,(function(t,e){return bt(function(t,e,n){return p((function i(){var r,o,a,s;return L(i,(function(i){switch(i.j){case 1:if(e.Ea=n.Ea,e.mimeType=n.mimeType,e.uri=n.uri,r=e.uri,o=t.S,t.Nb=r,e.Ea){t.u=e.Ea(),i.C(2);break}return a=t,E(i,pr.create(r,o,t.b.manifest.retryParameters,e.mimeType),3);case 3:a.u=i.s;case 2:s=kt(t.b.manifest),n.w&&"AUDIO"===n.w.nodeName&&(s.disableVideo=!0),t.u.configure(s),k(i)}}))}))}(i,t,e))})),r.set(this.Uc,(function(t){return function(t,e){var n=e.uri,i=t.S;t.ec=new Jo,function(t,e){t.b=e}(t.ec,(function(e){ru(t,"timelineregionadded",e)}));var r={networkingEngine:i,filterNewPeriod:function(e){return t.Vc(e)},filterAllPeriods:function(e){return qs(t,e)},onTimelineRegionAdded:function(e){var n=t.ec;t:{for(var i=h(n.a),r=i.next();!r.done;r=i.next())if((r=r.value).schemeIdUri==e.schemeIdUri&&r.id==e.id&&r.startTime==e.startTime&&r.endTime==e.endTime){i=r;break t}i=null}null==i&&(n.a.add(e),n.b(e))},onEvent:function(e){return t.dispatchEvent(e)},onError:function(e){return t.Qa(e)}};return new mt(Promise.resolve().then((function(){return p((function e(){var i;return L(e,(function(e){switch(e.j){case 1:return i=t,E(e,t.u.start(n,r),2);case 2:if(i.c=e.s,t.dispatchEvent(new St("manifestparsed")),0==t.c.periods.length)throw new dt(2,4,4014);!function(t){function e(t){return t.video&&t.audio||t.video&&t.video.codecs.includes(",")}t.some((function(t){return t.variants.some(e)}))&&(G.debug("Found variant with audio and video content, so filtering out audio-only content in all periods."),t.forEach((function(t){t.variants=t.variants.filter(e)})))}(t.c.periods),k(e)}}))}))})),(function(){return G.info("Aborting parser step..."),t.u.stop()}))}(i,t)})),r.set(this.Nc,(function(){return bt(function(t){return p((function e(){return L(e,(function(e){switch(e.j){case 1:return t.h=Rs(t,{Cb:t.S,onError:function(e){t.Qa(e)},yc:function(e){au(t,e)},onExpirationUpdated:function(e,n){su(t,e,n)},onEvent:function(e){t.dispatchEvent(e)}}),t.h.configure(t.b.drm),E(e,de(t.h,Io(t.c.periods),t.c.offlineSessionIds),2);case 2:qs(t,t.c.periods),k(e)}}))}))}(i))})),r.set(this.$,(function(t,e){return bt(function(t,e,n){return p((function i(){var r,o,a,s,u,c,l,f,d,p;return L(i,(function(i){switch(i.j){case 1:return e.startTime=n.startTime,r=e.w,o=e.uri,t.Nb=o,t.H=new Lo({rc:function(){return e.w.playbackRate},Id:function(t){e.w.playbackRate=t},le:function(t){e.w.currentTime+=t}}),t.v=new _s,a=function(){return Gs(t)},s=function(){return Ws(t)},t.g.B(r,"playing",a),t.g.B(r,"pause",a),t.g.B(r,"ended",a),t.g.B(r,"ratechange",s),u=t.b.abrFactory,t.l&&t.Lc==u||(t.Lc=u,t.l=new u,t.l.configure(t.b.abr)),function(t,e){for(var n=0;n<e.length;n++){for(var i=e[n],r=new Map,o=h(i.variants),a=o.next();!a.done;a=o.next())if((a=a.value).video&&a.video.closedCaptions)for(var s=h((a=a.video).closedCaptions.keys()),u=s.next();!u.done;u=s.next())if(u=u.value,!r.has(u)){var c={id:t.ke++,originalId:u,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"application/cea-608",codecs:"",kind:"caption",encrypted:!1,keyId:null,language:a.closedCaptions.get(u),label:null,type:"text",primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:a.roles,channelsCount:null,audioSamplingRate:null,closedCaptions:null};r.set(u,c)}for(r=h(r.values()),o=r.next();!o.done;o=r.next())i.textStreams.push(o.value)}}(t,t.c.periods),t.Ob=new xo(t.b.preferredAudioLanguage,t.b.preferredVariantRole,t.b.preferredAudioChannelCount),t.qa=t.b.preferredTextLanguage,function(t,e,n){0<e&&(t.Y()?G.m("|playRangeStart| has been configured for live content. Ignoring the setting."):t.De(e)),n<t.ca()&&(t.Y()?G.m("|playRangeEnd| has been configured for live content. Ignoring the setting."):t.Ba(n))}(t.c.presentationTimeline,t.b.playRangeStart,t.b.playRangeEnd),E(i,t.h.Pb(r),2);case 2:return t.l.init((function(e,n,i){n=void 0!==n&&n,i=void 0===i?0:i,G.debug("switch_");t:{for(var r=h(t.c.periods),o=r.next();!o.done;o=r.next())if((o=o.value).variants.includes(e)){r=o;break t}r=null}Bs(t,r,e,!0),t.f&&ca(t.f,e,n,i)&&Js(t)})),t.o=function(t,e){return new Go(t.a,t.c,t.b.streaming,e,(function(){t.pb&&Oo(t.pb,!0),t.f&&function(t){function e(e){var r=t.a.O;return"text"==e?e=null!=(e=r.a).a&&null!=e.b&&(n>=e.a&&n<e.b):e=je(e=Tn(r,e),n,i),e}var n=t.a.Za(),i=t.g.smallGapLimit,r=!1,o=Ta(t,n);if(Kt(t.b.values(),(function(t){return t.ka==o})))for(var a=h(t.b.keys()),s=a.next();!s.done;s=a.next())e(s=s.value)||(fa(t,t.b.get(s)),r=!0);else Kt(t.b.keys(),e)||(G.debug("(all): seeked: unbuffered seek: clearing all buffers"),t.b.forEach((function(e){fa(t,e)})),r=!0);r||G.debug("(all): seeked: buffered seek: presentationTime="+n)}(t.f),t.F&&js(t)}),(function(e){return t.dispatchEvent(e)}))}(t,e.startTime),t.pb=function(t){var e=new Ro(t.c);!function(t,e){t.b=e}(e,(function(){Qs(t)}));var n=new Qo(t.ec);!function(t,e,n,i){t.a=e,t.b=n,t.c=i}(n,(function(e){ru(t,"timelineregionenter",e)}),(function(e){ru(t,"timelineregionexit",e)}),(function(e,n){n||(ru(t,"timelineregionenter",e),ru(t,"timelineregionexit",e))}));var i=new No(t.a);return i.a.add(e),i.a.add(n),i}(t),c=Math.max(t.c.minBufferTime,t.b.streaming.rebufferingGoal),Ls(t,c),t.f=function(t){return new ia(t.c,{Za:function(){return t.o.g()},getBandwidthEstimate:function(){return t.l.getBandwidthEstimate()},O:t.G,Cb:t.S,oe:t.Lf.bind(t),ne:t.Se.bind(t),onError:t.Qa.bind(t),onEvent:function(e){return t.dispatchEvent(e)},Pf:t.Qf.bind(t),td:t.Vf.bind(t)})}(t),t.f.configure(t.b.streaming),Ln.Vd(t.c,t.b.preferredAudioChannelCount),t.i=wu,t.dispatchEvent(new St("streaming")),E(i,t.f.start(),3);case 3:t.b.streaming.startAtSegmentBoundary&&(l=t.o.g(),f=function(t,e){function n(t,e){if(!t)return null;var n=t.findSegmentPosition(e-o.startTime);return null==n?null:(n=t.getSegmentReference(n))?n.startTime+o.startTime:null}var i=ra(t.f),r=oa(t.f),o=du(t);return i=n(i,e),null!=(r=n(r,e))&&null!=i?Math.max(r,i):null!=r?r:null!=i?i:e}(t,l),t.o.o(f)),t.c.periods.forEach(t.Vc.bind(t)),Qs(t),Js(t),d=du(t)||t.c.periods[0],p=d.variants.some((function(t){return t.primary})),t.b.preferredAudioLanguage||p||G.m("No preferred audio language set.  We will choose an arbitrary language initially"),Xs(t,d.variants),t.g.ua(r,"loadedmetadata",(function(){t.v.b=Date.now()/1e3-n.Ld})),k(i)}}))}))}(i,t,e))})),r.set(this.dd,(function(t){return bt(t=function(t,e){return p((function n(){var i,r;return L(n,(function(n){switch(n.j){case 1:return i=qe,t.h=Rs(t,{Cb:t.S,onError:function(e){t.Qa(e)},yc:function(e){au(t,e)},onExpirationUpdated:function(e,n){su(t,e,n)},onEvent:function(e){t.dispatchEvent(e)}}),t.h.configure(t.b.drm),r={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"video/mp4",codecs:"",encrypted:!0,keyId:null,language:"und",label:null,type:i.Ua,primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},bandwidth:100,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0},E(n,de(t.h,[r],[]),2);case 2:return E(n,t.h.Pb(e.w),0)}}))}))}(i,t))})),r.set(this.qb,(function(t,e){return function(t,e,n){function i(){return Gs(t)}if(e.uri=n.uri,e.startTime=n.startTime,t.Nb=e.uri,t.v=new _s,t.o=new Wo(e.w),null!=e.startTime&&t.o.o(e.startTime),t.H=new Lo({rc:function(){return e.w.playbackRate},Id:function(t){e.w.playbackRate=t},le:function(t){e.w.currentTime+=t}}),Ls(t,t.b.streaming.rebufferingGoal),t.g.B(e.w,"playing",i),t.g.B(e.w,"pause",i),t.g.B(e.w,"ended",i),t.g.B(e.w,"ratechange",(function(){return Ws(t)})),"none"!=t.a.preload&&t.g.ua(e.w,"loadedmetadata",(function(){t.v.b=Date.now()/1e3-n.Ld})),t.a.audioTracks&&(t.g.B(t.a.audioTracks,"addtrack",(function(){return Qs(t)})),t.g.B(t.a.audioTracks,"removetrack",(function(){return Qs(t)})),t.g.B(t.a.audioTracks,"change",(function(){return Qs(t)}))),t.a.textTracks){var r=t.a.textTracks;t.g.B(r,"addtrack",(function(){return Qs(t)})),t.g.B(r,"removetrack",(function(){return Qs(t)})),t.g.B(r,"change",(function(){return Qs(t)}))}e.w.src=e.uri,t.i=xu,t.dispatchEvent(new St("streaming"));var o=new pt;Uo(t.a,HTMLMediaElement.HAVE_METADATA,t.g,(function(){o.resolve()}));var a=!1;return t.Mc.push((function(){a=!0})),Uo(t.a,HTMLMediaElement.HAVE_CURRENT_DATA,t.g,(function(){return p((function e(){return L(e,(function(e){switch(e.j){case 1:if(a)return e.return();if(function(t){var e=t.b.preferredAudioLanguage;if(""!=e){t.Dd(e);var n=t.b.preferredVariantRole;""!=n&&t.Dd(e,n)}}(t),zs(t).find((function(t){return"disabled"!=t.mode}))){e.C(2);break}return E(e,new Promise((function(e){t.g.ua(t.a.textTracks,"change",e),new lt(e).T(1)})),2);case 2:if(a)return e.return();!function(t){var e=t.b.preferredTextLanguage;if(""!=e){t.Ed(e);var n=t.b.preferredTextRole;""!=n&&t.Ed(e,n)}}(t),k(e)}}))}))})),t.a.error?o.reject(ou(t)):"none"==t.a.preload&&(G.Z('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),o.resolve()),t.g.ua(t.a,"error",(function(){o.reject(ou(t))})),new mt(o,(function(){return o.reject(new dt(2,7,7001)),Promise.resolve()}))}(i,t,e)})),this.Ta=new ps(this.K,{rf:function(t,e,n,r){var o=null;return t==i.K&&(o=n==i.K?i.K:i.V),t==i.V&&(o=n==i.K||e.w!=r.w?i.K:n==i.V?i.V:n==i.ob||n==i.$?i.ob:n==i.qb?i.dd:null),t==i.ob&&(o=n==i.$&&e.w==r.w?i.Zc:i.La),t==i.Zc&&(o=vu(i.$,i.Uc,i.La,n,e,r)),t==i.Uc&&(o=vu(i.$,i.Nc,i.La,n,e,r)),t==i.Nc&&(o=vu(i.$,i.$,i.La,n,e,r)),t==i.dd&&(o=n==i.qb&&e.w==r.w?i.qb:i.La),t!=i.$&&t!=i.qb||(o=i.La),t==i.La&&(o=r.w&&e.w==r.w?i.V:i.K),o},Ye:function(t,e,n){return i.dispatchEvent(new St("onstatechange",{state:t.name})),r.get(t)(e,n)},handleError:function(t,e){return p((function n(){return L(n,(function(n){switch(n.j){case 1:return G.m("The walker saw an error:"),e instanceof dt?G.m("Error Code:",e.code):(G.m("Error Message:",e.message),G.m("Error Stack:",e.stack)),E(n,Ds(i,t),2);case 2:return n.return(t.w?i.V:i.K)}}))}))},Nf:function(t){i.dispatchEvent(new St("onstateidle",{state:t.name}))}}),e&&this.Pb(e,!0)}w(Za,Ha),Za.prototype.updateManifestExpiration=function(t,e){var n=Ba(this.b,this.a),i=n.store(),r=new pt;return i.get(t).onsuccess=function(n){(n=n.target.result)?(n.expiration=e,i.put(n),r.resolve()):r.reject(new dt(2,9,9012,"Could not find values for "+t))},n.promise().then((function(){return r}))},Za.prototype.mc=function(t){return{originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:null==t.expiration?1/0:t.expiration,periods:t.periods.map(Ja),sessionIds:t.sessionIds,drmInfo:t.drmInfo,appMetadata:t.appMetadata}},Za.prototype.Wd=function(t){return{data:t.data}},w(ns,Ha),ns.prototype.hasFixedKeySpace=function(){return this.f},ns.prototype.addSegments=function(t){return this.f?qa(this.c):this.add(this.c,t)},ns.prototype.addManifests=function(t){return this.f?qa(this.a):this.add(this.a,t)},ns.prototype.mc=function(t){return null==t.expiration&&(t.expiration=1/0),t},(i=is.prototype).init=function(){var e=this,n=new pt,i=t.indexedDB.open("shaka_offline_db",4);return i.onsuccess=function(t){t=t.target.result,e.f=t;var i=t.objectStoreNames;i.contains("manifest")&&i.contains("segment")?(G.debug("Mounting v1 idb storage cell"),i=new Za(t,"segment","manifest")):i=null,e.a=i,(i=t.objectStoreNames).contains("manifest-v2")&&i.contains("segment-v2")?(G.debug("Mounting v2 idb storage cell"),i=new ns(t,"segment-v2","manifest-v2",!0)):i=null,e.b=i,(i=t.objectStoreNames).contains("manifest-v3")&&i.contains("segment-v3")?(G.debug("Mounting v3 idb storage cell"),i=new ns(t,"segment-v3","manifest-v3",!1)):i=null,e.c=i,t.objectStoreNames.contains("session-ids")?(G.debug("Mounting session ID idb storage cell"),t=new Va(t)):t=null,e.g=t,n.resolve()},i.onupgradeneeded=function(t){t=t.target.result;for(var e=h(["segment-v3","manifest-v3","session-ids"]),n=e.next();!n.done;n=e.next())n=n.value,t.objectStoreNames.contains(n)||t.createObjectStore(n,{autoIncrement:!0})},i.onerror=function(t){n.reject(new dt(2,9,9001,i.error)),t.preventDefault()},n},i.destroy=function(){var t=this;return p((function e(){return L(e,(function(e){switch(e.j){case 1:if(!t.a){e.C(2);break}return E(e,t.a.destroy(),2);case 2:if(!t.b){e.C(4);break}return E(e,t.b.destroy(),4);case 4:if(!t.c){e.C(6);break}return E(e,t.c.destroy(),6);case 6:if(!t.g){e.C(8);break}return E(e,t.g.destroy(),8);case 8:t.f&&t.f.close(),k(e)}}))}))},i.getCells=function(){var t=new Map;return this.a&&t.set("v1",this.a),this.b&&t.set("v2",this.b),this.c&&t.set("v3",this.c),t},i.getEmeSessionCell=function(){return this.g},i.erase=function(){var e=this;return p((function n(){return L(n,(function(n){switch(n.j){case 1:if(!e.a){n.C(2);break}return E(n,e.a.destroy(),2);case 2:if(!e.b){n.C(4);break}return E(n,e.b.destroy(),4);case 4:if(!e.c){n.C(6);break}return E(n,e.c.destroy(),6);case 6:return e.f&&e.f.close(),E(n,function(){var e=new pt,n=t.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){G.m("Deleting","shaka_offline_db","is being blocked")},n.onsuccess=function(){e.resolve()},n.onerror=function(t){e.reject(new dt(2,9,9001,n.error)),t.preventDefault()},e}(),8);case 8:return e.f=null,e.a=null,e.b=null,e.c=null,E(n,e.init(),0)}}))}))},Xa("idb",(function(){return t.indexedDB?new is:null})),rs.prototype.Aa=function(){return this.g},rs.prototype.fa=function(){return this.f},rs.prototype.key=function(){return this.c},rs.prototype.toString=function(){return this.b},(i=ls.prototype).configure=function(){},i.start=function(t){var e=this;return p((function n(){var i,r,o,a,s;return L(n,(function(n){switch(n.j){case 1:return i=os(t),e.a=i,null==i||"manifest"!=i.a?n.return(Promise.reject(new dt(2,1,9004,i))):(r=new Wa,M(n,2),E(n,r.init(),4));case 4:return E(n,Ga(r,i.Aa(),i.fa()),5);case 5:return E(n,n.s.getManifests([i.key()]),6);case 6:return o=n.s,a=o[0],s=new as(i.Aa(),i.fa()),n.return(function(t,e){var n=new mr(null,0);n.Ba(e.duration);var i=e.periods.map((function(e){return ss(t,e,n)})),r=e.drmInfo?[e.drmInfo]:[];return e.drmInfo&&i.forEach((function(t){t.variants.forEach((function(t){t.drmInfos=r}))})),{presentationTimeline:n,minBufferTime:2,offlineSessionIds:e.sessionIds,periods:i}}(s,a));case 2:return P(n),E(n,r.destroy(),7);case 7:N(n,0)}}))}))},i.stop=function(){return Promise.resolve()},i.update=function(){},i.onExpirationUpdated=function(t,e){var n=this;return p((function i(){var r,o,a,s,u,c,l,f;return L(i,(function(i){switch(i.j){case 1:return r=n.a,o=new Wa,C(i,2,3),E(i,o.init(),5);case 5:return E(i,Ga(o,r.Aa(),r.fa()),6);case 6:return E(i,(a=i.s).getManifests([r.key()]),7);case 7:if(s=i.s,u=s[0],c=u.sessionIds.includes(t),l=null==u.expiration||u.expiration>e,!c||!l){i.C(3);break}return G.debug("Updating expiration for stored content"),E(i,a.updateManifestExpiration(r.key(),e),3);case 3:return P(i),E(i,o.destroy(),10);case 10:N(i,0);break;case 2:f=_(i),G.error("There was an error updating",r,f),i.C(3)}}))}))},pr.Kb("application/x-offline-manifest",ls),H("shaka.offline.OfflineScheme",fs),fs.h=function(t){return yt(t={uri:t,vd:t,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}})},fs.i=function(t,e){var n=new Wa;return yt(void 0).X((function(){return n.init()})).X((function(){return Ga(n,e.Aa(),e.fa())})).X((function(t){return t.getSegments([e.key()])})).X((function(t){return{uri:e,vd:e,data:t[0].data,headers:{}}})).finally((function(){return n.destroy()}))},It("offline",fs),ps.prototype.destroy=function(){var t=this;return p((function e(){return L(e,(function(e){switch(e.j){case 1:return t.l=!1,t.b&&t.b.abort(),vs(t),E(e,t.o,2);case 2:t.a&&t.a.za.eb();for(var n=h(t.g),i=n.next();!i.done;i=n.next())i.value.za.eb();t.a=null,t.g=[],t.h=null,k(e)}}))}))},H("shaka.text.SimpleTextDisplayer",gs),gs.prototype.remove=function(t,e){return!!this.a&&(bs(this.a,(function(n){return n.startTime<e&&n.endTime>t})),!0)},gs.prototype.remove=gs.prototype.remove,gs.prototype.append=function(t){for(var e=ys,n=[],i=(t=h(t)).next();!i.done;i=t.next())(i=i.value).nestedCues.length?n=n.concat(i.nestedCues):n.push(i);var r=[];t=this.a.cues?Array.from(this.a.cues):[],i={};for(var o=(n=h(n)).next();!o.done;i={zb:i.zb},o=n.next())i.zb=o.value,t.some(function(t){return function(e){return e.startTime==t.zb.startTime&&e.endTime==t.zb.endTime&&e.text==t.zb.payload}}(i))||(o=e(i.zb))&&r.push(o);r.slice().sort((function(t,e){return t.startTime!=e.startTime?t.startTime-e.startTime:t.endTime!=e.endTime?t.endTime-e.startTime:r.indexOf(e)-r.indexOf(t)})).forEach(function(t){this.a.addCue(t)}.bind(this))},gs.prototype.append=gs.prototype.append,gs.prototype.destroy=function(){return this.a&&bs(this.a,(function(){return!0})),this.a=null,Promise.resolve()},gs.prototype.destroy=gs.prototype.destroy,gs.prototype.isTextVisible=function(){return"showing"==this.a.mode},gs.prototype.isTextVisible=gs.prototype.isTextVisible,gs.prototype.setTextVisibility=function(t){this.a.mode=t?"showing":"hidden"},gs.prototype.setTextVisibility=gs.prototype.setTextVisibility,H("shaka.util.ConfigUtils.mergeConfigObjects",ws),H("shaka.util.ConfigUtils.convertToConfigObject",xs),H("shaka.util.PlayerConfiguration",Ss),Ss.mergeConfigObjects=Es,q(Ps,Et),H("shaka.Player",Ps),Ps.prototype.destroy=function(){var t=this;return p((function e(){var n;return L(e,(function(e){switch(e.j){case 1:return t.i==yu?e.return():(t.i=yu,n=ms(t.Ta,(function(){return{node:t.K,payload:{Ea:null,w:null,mimeType:null,startTime:null,Ld:null,uri:null},$a:!1}})),E(e,new Promise((function(e){n.Eb=function(){G.info("Preparing to destroy walker...")},n.xc=function(){e(),t.dispatchEvent(new St("loaded"))},n.eb=function(){e()},n.onError=function(){e()},n.zc=function(){e()}})),2));case 2:return E(e,t.Ta.destroy(),3);case 3:if(t.g&&(t.g.release(),t.g=null),t.Lc=null,t.l=null,t.b=null,!t.S){e.C(0);break}return E(e,t.S.destroy(),5);case 5:t.S=null,k(e)}}))}))},Ps.prototype.destroy=Ps.prototype.destroy,Ps.version="v2.5.12";var Ns=["2","5"];qn=new function(t){this.a=t,this.c=Fn,this.b=Hn}(new zn(Number(Ns[0]),Number(Ns[1])));var Os=["output-restricted","internal-error"],Is={};function Ds(t,e){return p((function n(){var i;return L(n,(function(n){switch(n.j){case 1:return t.i!=yu&&(t.i=bu),i=t.Mc.map((function(t){return t()})),t.Mc=[],E(n,Promise.all(i),2);case 2:if(t.dispatchEvent(new St("unloading")),e.Ea=null,e.mimeType=null,e.startTime=null,e.uri=null,e.w&&(t.g.pa(e.w,"loadedmetadata"),t.g.pa(e.w,"playing"),t.g.pa(e.w,"pause"),t.g.pa(e.w,"ended"),t.g.pa(e.w,"ratechange")),t.pb&&(t.pb.release(),t.pb=null),t.fc&&(t.fc.stop(),t.fc=null),!t.u){n.C(3);break}return E(n,t.u.stop(),4);case 4:t.u=null;case 3:if(!t.l){n.C(5);break}return E(n,t.l.stop(),5);case 5:if(!t.f){n.C(7);break}return E(n,t.f.destroy(),8);case 8:t.f=null;case 7:if(t.H&&(t.H.release(),t.H=null),t.o&&(t.o.release(),t.o=null),!t.G){n.C(9);break}return E(n,t.G.destroy(),10);case 10:t.G=null;case 9:if(!e.w||!e.w.src){n.C(11);break}return E(n,new Promise((function(t){return new lt(t).T(.1)})),12);case 12:e.w.removeAttribute("src"),e.w.load();case 11:if(!t.h){n.C(13);break}return E(n,t.h.destroy(),14);case 14:t.h=null;case 13:t.ea.a.clear(),t.Nb=null,t.F=null,t.hc.clear(),t.c=null,t.v=null,t.Rc=null,t.rb=!0,Vs(t),k(n)}}))}))}function Rs(t,e){return new he(e,t.b.drm.updateExpirationTime)}function Ls(t,e){t.F=new So,t.F.a=Eo,To(t.F,e,Math.min(.5,e/2)),Vs(t),t.fc=new lt((function(){js(t)})).Ra(.25)}function js(t){switch(t.i){case xu:var e=!!t.a.ended||Le(t.a.buffered)>=t.a.duration-1;break;case wu:t:if(t.a.ended||wn(t.G))e=!0;else{if(t.c.presentationTimeline.Y()){var n=t.c.presentationTimeline.wb();if(Le(t.a.buffered)>=n){e=!0;break t}}e=!1}break;default:e=!1}var i=Ue(t.a.buffered,t.a.currentTime),r=e,o=(n=t.F).b.get(n.a);e=n.a,i=r||i>=o?ko:Eo,n.a=i,e!=i&&Vs(t)}function Us(t){if(t.u){var e=kt(t.b.manifest);t.a&&"AUDIO"===t.a.nodeName&&(e.disableVideo=!0),t.u.configure(e)}if(t.h&&t.h.configure(t.b.drm),t.f){t.f.configure(t.b.streaming);try{t.c.periods.forEach(t.Vc.bind(t))}catch(e){t.Qa(e)}var n=ra(t.f),i=oa(t.f);e=du(t),n=Ln.ce(n,i,e.variants),t.l&&n&&n.allowedByApplication&&n.allowedByKeySystem?Xs(t,e.variants):(G.debug("Choosing new streams after changing configuration"),Ys(t,e))}if(t.G&&(e=t.b.textDisplayFactory,t.Rc!=e)){n=new e;var r=(i=t.G).g;i.g=n,r&&(n.setTextVisibility(r.isTextVisible()),r.destroy()),i.a&&(i.a.c=n),t.Rc=e,t.f&&((n=(e=t.f).b.get("text"))&&la(e,n.stream,!0,0,!0))}t.l&&(t.l.configure(t.b.abr),t.b.abr.enabled&&!t.rb?t.l.enable():t.l.disable(),iu(t)),t.F&&(e=t.b.streaming.rebufferingGoal,t.c&&(e=Math.max(e,t.c.minBufferTime)),To(t.F,e,Math.min(.5,e/2)))}function zs(t){return Array.from(t.a.textTracks).filter((function(t){return"metadata"!=t.kind&&"Shaka Player TextTrack"!=t.label}))}function Bs(t,e,n,i){po(t.ea,e).variant=n,(t=t.v.c).c!=n&&(t.c=n,t.a.push({timestamp:Date.now()/1e3,id:n.id,type:"variant",fromAdaptation:i,bandwidth:n.bandwidth}))}function Fs(t,e,n,i){ho(t.ea,e,n),(t=t.v.c).b!=n&&(t.b=n,t.a.push({timestamp:Date.now()/1e3,id:n.id,type:"text",fromAdaptation:i,bandwidth:null}))}function Hs(t){var e=Ts();return e.streaming.failureCallback=function(e){t.Y()&&[1001,1002,1003].includes(e.code)&&(e.severity=1,G.m("Live streaming error.  Retrying automatically..."),t.Cd())},e.textDisplayFactory=function(){return new gs(t.a)},e}function qs(t,e){var n=t.f?ra(t.f):null,i=t.f?oa(t.f):null;if(e.forEach(Ln.filterNewPeriod.bind(null,t.h,n,i)),0==(n=function(t,e){var n=0;return t.forEach((function(t){n+=e(t)?1:0})),n}(e,(function(t){return t.variants.some(Ln.Ab)}))))throw new dt(2,4,4032);if(n<e.length)throw new dt(2,4,4011);e.forEach(function(t){Ln.Sd(t.variants,this.b.restrictions,this.ic)&&this.f&&du(this)==t&&Qs(this),uu(this,t.variants)}.bind(t))}function Ks(t,e,n,i){return n=void 0!==n&&n,i=void 0===i?0:i,t.rb?(t.sa=e,t.je=n,t.ge=i,!0):((e=ca(t.f,e,n,i))&&tu(t),e)}function $s(t,e){if(t.rb)return t.ra=e,!0;var n=la(t.f,e,!0,0,!1);return n&&eu(t),n}function Vs(t){var e=t.fd();if(t.v&&t.F&&t.o){var n=t.H;n.f=e,jo(n),Gs(t)}t.dispatchEvent(new St("buffering",{buffering:e}))}function Ws(t){var e=t.a.playbackRate;0!=e&&t.H.set(e)}function Gs(t){if(t.v&&t.F){var e=t.v.a;t.F.a==Eo?Cs(e,"buffering"):t.a.paused?Cs(e,"paused"):t.a.ended?Cs(e,"ended"):Cs(e,"playing")}}function Xs(t,e){try{uu(t,e)}catch(e){return t.Qa(e),null}var n=e.filter((function(t){return Ln.Ab(t)}));return n=t.Ob.create(n),t.l.setVariants(Array.from(n.values())),t.l.chooseVariant()}function Ys(t,e){var n=Zs(t,e,!1),i=Ln.Rb(e.textStreams,t.qa,t.mb)[0]||null,r=!1;i&&(t.b.streaming.alwaysStreamText||t.uc())&&(Fs(t,e,i,!0),r=$s(t,i)),(n||r)&&Js(t)}function Zs(t,e,n){n=void 0===n||n;var i=Xs(t,e.variants),r=!1;return i&&(Bs(t,e,i,!0),r=Ks(t,i,!0)),n&&r&&Js(t),r}function Js(t){cu(t,new St("adaptation"))}function Qs(t){cu(t,new St("trackschanged"))}function tu(t){cu(t,new St("variantchanged"))}function eu(t){cu(t,new St("textchanged"))}function nu(t){cu(t,new St("texttrackvisibility"))}function iu(t){cu(t,new St("abrstatuschanged",{Rg:t.b.abr.enabled}))}function ru(t,e,n){t.dispatchEvent(new St(e,{detail:{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}}))}function ou(t){if(!t.a.error)return null;var e=t.a.error.code;if(1==e)return null;var n=t.a.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new dt(2,3,3016,e,n,t.a.error.message)}function au(t,e){if(t.f){var n=du(t),i=!1,r=Object.keys(e);0==r.length&&G.m("Got a key status event without any key statuses, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks.");var o=1==r.length&&"00"==r[0];o&&G.m("Got a synthetic key status event, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks."),r.length&&t.c.periods.forEach((function(t){t.variants.forEach((function(t){Ln.Bf(t).forEach((function(n){var r=t.allowedByKeySystem;n.keyId&&(n=e[o?"00":n.keyId],t.allowedByKeySystem=!!n&&!Os.includes(n)),r!=t.allowedByKeySystem&&(i=!0)}))}))})),r=ra(t.f);var a=oa(t.f);(r=Ln.ce(r,a,n.variants))&&!r.allowedByKeySystem&&(G.debug("Choosing new variants after key status changed"),Zs(t,n)),i&&(Qs(t),Xs(t,n.variants))}}function su(t,e,n){t.u&&t.u.onExpirationUpdated&&t.u.onExpirationUpdated(e,n),t.dispatchEvent(new St("expirationupdated"))}function uu(t,e){var n=t.h?Vt(t.h.$):{},i=Object.keys(n);i=i.length&&"00"==i[0];for(var r=!1,o=!1,a=[],s=[],u=h(e),c=u.next();!c.done;c=u.next()){var l=[];(c=c.value).audio&&l.push(c.audio),c.video&&l.push(c.video);for(var f=(l=h(l)).next();!f.done;f=l.next())if((f=f.value).keyId){var d=n[i?"00":f.keyId];d?Os.includes(d)&&(s.includes(d)||s.push(d)):a.includes(f.keyId)||a.push(f.keyId)}c.allowedByApplication?c.allowedByKeySystem&&(r=!0):o=!0}if(!r)throw new dt(2,4,4012,{hasAppRestrictions:o,missingKeys:a,restrictedKeyStatuses:s})}function cu(t,e){p((function n(){return L(n,(function(n){switch(n.j){case 1:return E(n,Promise.resolve(),2);case 2:t.i!=yu&&t.dispatchEvent(e),k(n)}}))}))}function lu(t){for(var e=new Set,n=(t=h(t)).next();!n.done;n=t.next())(n=n.value).language?e.add(On(n.language)):e.add("und");return e}function fu(t){for(var e=new Map,n=(t=h(t)).next();!n.done;n=t.next()){var i=n.value;n="und";var r=[];for(i.language&&(n=On(i.language)),(r="variant"==i.type?i.audioRoles:i.roles)&&r.length||(r=[""]),e.has(n)||e.set(n,new Set),r=(i=h(r)).next();!r.done;r=i.next())r=r.value,e.get(n).add(r)}var o=[];return e.forEach((function(t,e){for(var n=h(t),i=n.next();!i.done;i=n.next())o.push({language:e,role:i.value})})),o}function hu(t){return null==(t=du(t))?[]:t.variants.filter((function(t){return Ln.Ab(t)}))}function du(t){for(var e=t.o.g(),n=null,i=(t=h(t.c.periods)).next();!i.done;i=t.next())(i=i.value).startTime<=e&&(n=i);return n}function pu(t){var e=du(t);return po(t.ea,e).variant}function mu(){return new dt(2,7,7e3)}function vu(t,e,n,i,r,o){return i==t&&r.w==o.w&&r.uri==o.uri&&r.mimeType==o.mimeType&&r.Ea==o.Ea?e:n}function gu(t){return new Promise((function(e,n){t.eb=function(){return n(mu())},t.xc=function(){return e()},t.onError=function(t){return n(t)},t.zc=function(){return n(mu())}}))}Ps.registerSupportPlugin=function(t,e){Is[t]=e},Ps.isBrowserSupported=function(){if(!(t.Promise&&t.Uint8Array&&Array.prototype.forEach))return!1;var e=Qt();return!(e&&12>e||!(t.MediaKeys&&t.navigator&&t.navigator.requestMediaKeySystemAccess&&t.MediaKeySystemAccess&&t.MediaKeySystemAccess.prototype.getConfiguration))&&(!!Yt()||Zt("application/x-mpegurl"))},Ps.probeSupport=function(){return Ce().then((function(t){for(var e=pr.dg(),n={},i=h('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",")),r=i.next();!r.done;r=i.next()){n[r=r.value]=Yt()?!!dn(r)||(MediaSource.isTypeSupported(r)||$e(r)):Zt(r);var o=r.split(";")[0];n[o]=n[o]||n[r]}for(var a in t={manifest:e,media:n,drm:t},Is)t[a]=Is[a]();return t}))},Ps.prototype.Pb=function(t,e){if(e=void 0===e||e,this.i==yu)return Promise.reject(mu());var n={Ea:null,w:null,mimeType:null,startTime:null,Ld:null,uri:null};n.w=t,Yt()||(e=!1);var i=e?this.ob:this.V,r=ms(this.Ta,(function(){return{node:i,payload:n,$a:!1}}));return r.Eb=function(){return G.info("Starting attach...")},gu(r)},Ps.prototype.attach=Ps.prototype.Pb,Ps.prototype.detach=function(){var t=this;if(this.i==yu)return Promise.reject(mu());var e=ms(this.Ta,(function(){return{node:t.K,payload:{Ea:null,w:null,mimeType:null,startTime:null,Ld:null,uri:null},$a:!1}}));return e.Eb=function(){return G.info("Starting detach...")},gu(e)},Ps.prototype.detach=Ps.prototype.detach,Ps.prototype.Od=function(t){var e=this;if(t=void 0===t||t,this.i==yu)return Promise.reject(mu());Yt()||(t=!1);var n={Ea:null,w:null,mimeType:null,startTime:null,Ld:null,uri:null},i=ms(this.Ta,(function(i){var r=i.w&&t?e.ob:i.w?e.V:e.K;return n.w=i.w,{node:r,payload:n,$a:!1}}));return i.Eb=function(){return G.info("Starting unload...")},gu(i)},Ps.prototype.unload=Ps.prototype.Od,Ps.prototype.load=function(t,e,n){if(this.i==yu)return Promise.reject(mu());this.dispatchEvent(new St("loading"));var i={Ea:null,w:null,mimeType:null,startTime:null,Ld:null,uri:null};i.uri=t,i.Ld=Date.now()/1e3,n&&"string"!=typeof n&&(Bn("Loading with a manifest parser factory","Please register a manifest parser and for the mime-type."),i.Ea=function(){return new n}),n&&"string"==typeof n&&(i.mimeType=n),void 0!==e&&(i.startTime=e);var r=function(t,e){if(e.Ea)return!1;if(!Yt())return!0;var n=e.mimeType,i=e.uri||"";return n||(n={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"}[pr.getExtension(i)]),!!n&&(""!=(e.w||ee()).canPlayType(n)&&(!pr.isSupported(i,n)||Jt()&&t.b.streaming.useNativeHlsOnSafari))}(this,i)?this.qb:this.$,o=ms(this.Ta,(function(t){return null==t.w?null:(i.w=t.w,{node:r,payload:i,$a:!0})}));return o.Eb=function(){return G.info("Starting load of "+t+"...")},new Promise((function(t,e){o.zc=function(){return e(new dt(2,7,7002))},o.xc=function(){return t()},o.eb=function(){return e(mu())},o.onError=function(t){return e(t)}}))},Ps.prototype.load=Ps.prototype.load,Ps.prototype.configure=function(t,e){2==arguments.length&&"string"==typeof t&&(t=xs(t,e));var n=Es(this.b,t,Hs(this));return Us(this),n},Ps.prototype.configure=Ps.prototype.configure,Ps.prototype.getConfiguration=function(){var t=Hs(this);return Es(t,this.b,Hs(this)),t},Ps.prototype.getConfiguration=Ps.prototype.getConfiguration,Ps.prototype.lg=function(){for(var t in this.b)delete this.b[t];Es(this.b,Hs(this),Hs(this)),Us(this)},Ps.prototype.resetConfiguration=Ps.prototype.lg,Ps.prototype.jf=function(){return this.i},Ps.prototype.getLoadMode=Ps.prototype.jf,Ps.prototype.pf=function(){return this.a},Ps.prototype.getMediaElement=Ps.prototype.pf,Ps.prototype.Tb=function(){return this.S},Ps.prototype.getNetworkingEngine=Ps.prototype.Tb,Ps.prototype.pc=function(){return this.Nb},Ps.prototype.getAssetUri=Ps.prototype.pc,Ps.prototype.mf=function(){return Bn("getManifestUri",'Please use "getAssetUri" instead.'),this.pc()},Ps.prototype.getManifestUri=Ps.prototype.mf,Ps.prototype.Y=function(){return this.c?this.c.presentationTimeline.Y():!(!this.a||!this.a.src)&&1/0==this.a.duration},Ps.prototype.isLive=Ps.prototype.Y,Ps.prototype.bb=function(){return!!this.c&&this.c.presentationTimeline.bb()},Ps.prototype.isInProgress=Ps.prototype.bb,Ps.prototype.Gf=function(){if(this.c){if(!this.c.periods.length)return!1;var t=this.c.periods[0].variants;return!!t.length&&!t[0].video}return!(!this.a||!this.a.src)&&(this.a.videoTracks?0==this.a.videoTracks.length:0==this.a.videoHeight)},Ps.prototype.isAudioOnly=Ps.prototype.Gf,Ps.prototype.ng=function(){if(this.c){var t=this.c.presentationTimeline;return{start:t.vb(),end:t.Ga()}}return this.a&&this.a.src&&(t=this.a.seekable).length?{start:t.start(0),end:t.end(t.length-1)}:{start:0,end:0}},Ps.prototype.seekRange=Ps.prototype.ng,Ps.prototype.keySystem=function(){return ye(this.drmInfo())},Ps.prototype.keySystem=Ps.prototype.keySystem,Ps.prototype.drmInfo=function(){return this.h?this.h.a:null},Ps.prototype.drmInfo=Ps.prototype.drmInfo,Ps.prototype.Sb=function(){return this.h?this.h.Sb():1/0},Ps.prototype.getExpiration=Ps.prototype.Sb,Ps.prototype.fd=function(){return!!this.F&&this.F.a==Eo},Ps.prototype.isBuffering=Ps.prototype.fd,Ps.prototype.tf=function(){if(this.H){var t=this.H;t=t.f?0:t.c}else t=0;return t},Ps.prototype.getPlaybackRate=Ps.prototype.tf,Ps.prototype.Eg=function(t){0==t?G.Z("A trick play rate of 0 is unsupported!"):(this.a.paused&&this.a.play(),this.H&&this.H.set(t),this.i==wu&&ua(this.f,1<Math.abs(t)))},Ps.prototype.trickPlay=Ps.prototype.Eg,Ps.prototype.Te=function(){this.i==xu&&this.H.set(1),this.i==wu&&(this.H.set(1),ua(this.f,!1))},Ps.prototype.cancelTrickPlay=Ps.prototype.Te,Ps.prototype.cd=function(){if(this.c&&this.o){for(var t=pu(this),e=[],n=h(hu(this)),i=n.next();!i.done;i=n.next()){i=i.value;var r=Ln.Qd(i);r.active=i==t,e.push(r)}return e}return this.a&&this.a.audioTracks?Array.from(this.a.audioTracks).map((function(t){return Ln.de(t)})):[]},Ps.prototype.getVariantTracks=Ps.prototype.cd,Ps.prototype.yb=function(){if(this.c&&this.o){for(var t=function(t){var e=du(t);if(null==e)return null;if(!po(t.ea,e).text){var n=Ln.Rb(e.textStreams,t.qa,t.mb);n.length&&ho(t.ea,e,n[0])}return po(t.ea,e).text}(this),e=[],n=h(function(t){var e=du(t);return null==e?[]:e.textStreams.filter((function(e){return!t.hc.has(e)}))}(this)),i=n.next();!i.done;i=n.next()){i=i.value;var r=Ln.Fc(i);r.active=i==t,e.push(r)}return e}return this.a&&this.a.src&&this.a.textTracks?zs(this).map((function(t){return Ln.Ef(t)})):[]},Ps.prototype.getTextTracks=Ps.prototype.yb,Ps.prototype.Fd=function(t){if(this.c&&this.f){var e=du(this),n=e.textStreams.find((function(e){return e.id==t.id}));n?(Fs(this,e,n,!1),$s(this,n),this.qa=n.language):G.error("No stream with id",t.id)}else if(this.a&&this.a.src&&this.a.textTracks){for(n=(e=h(e=zs(this))).next();!n.done;n=e.next())n=n.value,Ln.ed(n)==t.id?n.mode=this.nb?"showing":"hidden":n.mode="disabled";eu(this)}},Ps.prototype.selectTextTrack=Ps.prototype.Fd,Ps.prototype.og=function(){Bn("selectEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. Please use SelectTextTrack.");var t=this.yb().filter((function(t){return"application/cea-608"==t.mimeType}));0<t.length?this.Fd(t[0]):G.m("Unable to find the text track embedded in the video.")},Ps.prototype.selectEmbeddedTextTrack=Ps.prototype.og,Ps.prototype.Jg=function(){Bn("usingEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. There should be no reason to know if the player is playing embedded text.");var t=this.yb().filter((function(t){return t.active}))[0];return!!t&&"application/cea-608"==t.mimeType},Ps.prototype.usingEmbeddedTextTrack=Ps.prototype.Jg,Ps.prototype.pg=function(t,e,n){if(n=void 0===n?0:n,this.c&&this.f){var i=du(this);this.b.abr.enabled&&G.Z("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=i.variants.find((function(e){return e.id==t.id}));r?Ln.Ab(r)?(Bs(this,i,r,!1),Ks(this,r,e,n),this.Ob=new wo(r),Xs(this,i.variants)):G.error("Unable to switch to restricted track",t.id):G.error("No variant with id",t.id)}else if(this.a&&this.a.audioTracks){for(n=(e=h(e=Array.from(this.a.audioTracks))).next();!n.done;n=e.next())n=n.value,Ln.ed(n)==t.id&&(n.enabled=!0);tu(this)}},Ps.prototype.selectVariantTrack=Ps.prototype.pg,Ps.prototype.df=function(){return fu(this.cd())},Ps.prototype.getAudioLanguagesAndRoles=Ps.prototype.df,Ps.prototype.Af=function(){return fu(this.yb())},Ps.prototype.getTextLanguagesAndRoles=Ps.prototype.Af,Ps.prototype.cf=function(){return Array.from(lu(this.cd()))},Ps.prototype.getAudioLanguages=Ps.prototype.cf,Ps.prototype.zf=function(){return Array.from(lu(this.yb()))},Ps.prototype.getTextLanguages=Ps.prototype.zf,Ps.prototype.Dd=function(t,e){if(this.c&&this.o){var n=du(this);this.Ob=new xo(t,e||"",0,"","audio"),Zs(this,n)}else if(this.a&&this.a.audioTracks){var i=Array.from(this.a.audioTracks);n=On(t);for(var r=(i=h(i)).next();!r.done;r=i.next()){r=r.value;var o=Ln.de(r);On(o.language)!=n||e&&!o.roles.includes(e)||(r.enabled=!0)}tu(this)}},Ps.prototype.selectAudioLanguage=Ps.prototype.Dd,Ps.prototype.Ed=function(t,e){if(this.c&&this.o){var n=du(this);this.qa=t,this.mb=e||"";var i=Ln.Rb(n.textStreams,this.qa,this.mb)[0]||null;i&&(Fs(this,n,i,!1),(this.b.streaming.alwaysStreamText||this.uc())&&$s(this,i))}else{var r=On(t);(n=this.yb().filter((function(t){return On(t.language)==r&&(!e||t.roles.includes(e))}))[0])&&this.Fd(n)}},Ps.prototype.selectTextLanguage=Ps.prototype.Ed,Ps.prototype.qg=function(t){if(this.c&&this.o){for(var e=du(this),n=null,i=h(hu(this)),r=i.next();!r.done;r=i.next())if((r=r.value).audio.label==t){n=r;break}null==n?G.m("No variants were found with label: "+t+". Ignoring the request to switch."):(this.Ob=new xo(n.language,"",0,t),Zs(this,e))}},Ps.prototype.selectVariantsByLabel=Ps.prototype.qg,Ps.prototype.uc=function(){var t=this.nb;return this.G?this.G.g.isTextVisible():this.a&&this.a.src&&this.a.textTracks?zs(this).some((function(t){return"showing"==t.mode})):t},Ps.prototype.isTextTrackVisible=Ps.prototype.uc,Ps.prototype.tg=function(t){var e=this;return p((function n(){var i,r,o,a;return L(n,(function(n){switch(n.j){case 1:if(e.nb==(i=!!t))return n.return();if(e.nb=i,e.i!=wu){if(e.a&&e.a.src&&e.a.textTracks)for(var s=h(zs(e)),u=s.next();!u.done;u=s.next())"disabled"!=(r=u.value).mode&&(r.mode=i?"showing":"hidden");n.C(2);break}if(e.G.g.setTextVisibility(i),e.b.streaming.alwaysStreamText){n.C(2);break}if(!i){(s=e.f).G=!0,(u=s.b.get("text"))&&(Aa(u),s.b.delete("text")),n.C(2);break}if(aa(e.f,"text")){n.C(2);break}if(o=du(e),!(0<(a=Ln.Rb(o.textStreams,e.qa,e.mb)).length)){n.C(2);break}return E(n,sa(e.f,a[0]),2);case 2:nu(e),k(n)}}))}))},Ps.prototype.setTextTrackVisibility=Ps.prototype.tg,Ps.prototype.vf=function(){if(!this.Y())return G.m("getPlayheadTimeAsDate is for live streams!"),null;var t=this.Ta.f,e=0;if(this.o)e=this.o.g();else if(t){if(null==t.startTime)return new Date;e=t.startTime}return this.c?new Date(1e3*(this.c.presentationTimeline.f+this.a.currentTime)):this.a&&this.a.getStartDate?(t=this.a.getStartDate(),isNaN(t.getTime())?(G.m("EXT-X-PROGRAM-DATETIME required to get playhead time as Date!"),null):new Date(t.getTime()+1e3*e)):(G.m("No way to get playhead time as Date!"),null)},Ps.prototype.getPlayheadTimeAsDate=Ps.prototype.vf,Ps.prototype.xf=function(){if(!this.Y())return G.m("getPresentationStartTimeAsDate is for live streams!"),null;if(this.c)return new Date(1e3*this.c.presentationTimeline.f);if(this.a&&this.a.getStartDate){var t=this.a.getStartDate();return isNaN(t.getTime())?(G.m("EXT-X-PROGRAM-DATETIME required to get presentation start time as Date!"),null):t}return G.m("No way to get presentation start time as Date!"),null},Ps.prototype.getPresentationStartTimeAsDate=Ps.prototype.xf,Ps.prototype.$c=function(){var t={total:[],audio:[],video:[],text:[]};return this.i==xu&&(t.total=ze(this.a.buffered)),this.i==wu&&this.G.$c(t),t},Ps.prototype.getBufferedInfo=Ps.prototype.$c,Ps.prototype.getStats=function(){if(this.i!=wu&&this.i!=xu)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,switchHistory:[],stateHistory:[]};Gs(this);var t=this.a;if(t.getVideoPlaybackQuality){t=t.getVideoPlaybackQuality();var e=this.v,n=Number(t.totalVideoFrames);e.o=Number(t.droppedVideoFrames),e.l=n,this.v.i=Number(t.corruptedVideoFrames)}this.h?t=(t=this.h).K?t.K:NaN:t=NaN,this.v.h=t,this.i==wu&&((t=pu(this))&&(this.v.u=t.bandwidth),t&&t.video&&(e=this.v,n=t.video.height||NaN,e.v=t.video.width||NaN,e.g=n),t=this.l.getBandwidthEstimate(),this.v.f=t);var i=this.v;t=i.v,e=i.g,n=i.u;for(var r=i.l,o=i.o,a=i.i,s=i.f,u=i.b,c=Ms(i.a,"playing"),l=Ms(i.a,"paused"),f=Ms(i.a,"buffering"),d=i.h,p=function(t){function e(t){return{timestamp:t.timestamp,state:t.state,duration:t.duration}}for(var n=[],i=h(t.b),r=i.next();!r.done;r=i.next())n.push(e(r.value));return t.a&&n.push(e(t.a)),n}(i.a),m=[],v=(i=h(i.c.a)).next();!v.done;v=i.next())v=v.value,m.push({timestamp:v.timestamp,id:v.id,type:v.type,fromAdaptation:v.fromAdaptation,bandwidth:v.bandwidth});return{width:t,height:e,streamBandwidth:n,decodedFrames:r,droppedFrames:o,corruptedFrames:a,estimatedBandwidth:s,loadLatency:u,playTime:c,pauseTime:l,bufferingTime:f,licenseTime:d,stateHistory:p,switchHistory:m}},Ps.prototype.getStats=Ps.prototype.getStats,Ps.prototype.addTextTrack=function(t,e,n,i,r,o){var a=this;return p((function s(){var u,c,l,f,h,d,p,m,v;return L(s,(function(s){switch(s.j){case 1:if(a.i==xu)throw G.error("Cannot add text when loaded with src="),Error("State error!");if(a.i!=wu)throw G.error("Must call load() and wait for it to resolve before adding text tracks."),Error("State error!");if(u=du(a),c=qe,l=a.c.periods.indexOf(u),h=(f=l+1)>=a.c.periods.length?a.c.presentationTimeline.ca():a.c.periods[f].startTime,1/0==(d=h-u.startTime))throw new dt(1,4,4033);return p=new Yi(1,0,d,(function(){return[t]}),0,null),m={id:a.ke++,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(t){return 1==t?p:null},initSegmentReference:null,presentationTimeOffset:0,mimeType:i,codecs:r||"",kind:n,encrypted:!1,keyId:null,language:e,label:o||null,type:c.va,primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},a.hc.add(m),u.textStreams.push(m),E(s,sa(a.f,m),2);case 2:return(v=aa(a.f,"text"))&&ho(a.ea,u,v),a.hc.delete(m),G.debug("Choosing new streams after adding a text stream"),Ys(a,u),Qs(a),s.return(Ln.Fc(m))}}))}))},Ps.prototype.addTextTrack=Ps.prototype.addTextTrack,Ps.prototype.Hd=function(t,e){this.ic.width=t,this.ic.height=e},Ps.prototype.setMaxHardwareResolution=Ps.prototype.Hd,Ps.prototype.Cd=function(){if(this.i==wu){var t=this.f;if(t.f)G.error("Unable to retry after StreamingEngine is destroyed!"),t=!1;else if(t.o)G.error("Unable to retry after StreamingEngine encountered a fatal error!"),t=!1;else{for(var e=h(t.b.values()),n=e.next();!n.done;n=e.next()){var i=Pa(n=n.value);n.Wb&&(G.info(i,"Retrying after failure..."),n.Wb=!1,Ma(t,n,.1))}t=!0}}else t=!1;return t},Ps.prototype.retryStreaming=Ps.prototype.Cd,Ps.prototype.kf=function(){return this.c},Ps.prototype.getManifest=Ps.prototype.kf,Ps.prototype.lf=function(){return this.u?this.u.constructor:null},Ps.prototype.getManifestParserFactory=Ps.prototype.lf,(i=Ps.prototype).Vc=function(t){var e=this.f?ra(this.f):null,n=this.f?oa(this.f):null;if(Ln.filterNewPeriod(this.h,e,n,t),!(e=t.variants).some(Ln.Ab))throw new dt(2,4,4011);if(uu(this,t.variants),Ln.Sd(e,this.b.restrictions,this.ic)&&this.f&&du(this)==t&&Qs(this),t=this.h?this.h.a:null)for(n=(e=h(e)).next();!n.done;n=e.next())for(var i=(n=h(n.value.drmInfos)).next();!i.done;i=n.next())if((i=i.value).keySystem==t.keySystem)for(var r=(i=h(i.initData||[])).next();!r.done;r=i.next())r=r.value,ge(this.h,r.initDataType,r.initData)},i.Lf=function(t){G.debug("onChooseStreams_",t);try{G.J("onChooseStreams_, choosing variant from ",t.variants),G.J("onChooseStreams_, choosing text from ",t.textStreams),this.rb=!0,this.l.disable(),iu(this),G.debug("Choosing new streams after period changed");var e=Xs(this,t.variants),n=Ln.Rb(t.textStreams,this.qa,this.mb)[0]||null;this.sa&&(t.variants.includes(this.sa)&&(e=this.sa),this.sa=null),this.ra&&(t.textStreams.includes(this.ra)&&(n=this.ra),this.ra=null),e&&Bs(this,t,e,!0),n&&Fs(this,t,n,!0);var i=this.f,r=i.b.get("video");if(r)var o=i.c.periods[r.ka];else{var a=i.b.get("audio");o=a?i.c.periods[a.ka]:null}var s=e?e.audio:null;if(!o&&n){var u;if(u=s){t=n;var c=On(this.b.preferredTextLanguage),l=On(s.language),f=On(t.language);u=Pn(f,c)&&!Pn(l,f)}u&&(this.nb=!0),this.nb&&this.G.g.setTextVisibility(!0),nu(this)}var h=this.b.streaming.alwaysStreamText||this.uc()?{variant:e,text:n}:{variant:e,text:null};return G.J("onChooseStreams_, chose variant ",h.variant),G.J("onChooseStreams_, chose text ",h.text),h}catch(t){return this.Qa(t),{variant:null,text:null}}},i.Se=function(){G.debug("canSwitch_"),this.rb=!1,this.b.abr.enabled&&(this.l.enable(),iu(this)),this.sa&&(ca(this.f,this.sa,this.je,this.ge),tu(this),this.sa=null),this.ra&&(la(this.f,this.ra,!0,0,!1),eu(this),this.ra=null)},i.Qf=function(){this.u&&this.u.update&&this.u.update()},i.Vf=function(){this.o&&this.o.u()},i.Qa=function(t){if(this.i!=yu){var e=new St("error",{detail:t});this.dispatchEvent(e),e.defaultPrevented&&(t.handled=!0)}};var yu=0,bu=1,wu=2,xu=3;function Su(t,e){var n=ss(new as(t.Aa(),t.fa()),e.periods[0],new mr(null,0)),i=e.appMetadata||{};return n=Tu(n),{offlineUri:t.toString(),originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration,tracks:n,appMetadata:i}}function Tu(t){for(var e=[],n=Ln.sf(t.variants),i=(n=h(n)).next();!i.done;i=n.next())e.push(Ln.Qd(i.value));for(n=(t=h(t.textStreams)).next();!n.done;n=t.next())e.push(Ln.Fc(n.value));return e}function Eu(){this.a={}}function ku(t,e){var n=e.audio,i=e.video;if(n&&!i&&(t.a[n.id]=n.bandwidth||e.bandwidth),!n&&i&&(t.a[i.id]=i.bandwidth||e.bandwidth),n&&i){var r=n.bandwidth||393216,o=i.bandwidth||e.bandwidth-r;0>=o&&(G.m("Audio bit rate consumes variants bandwidth. Setting video bandwidth to match variant's bandwidth."),o=e.bandwidth),t.a[n.id]=r,t.a[i.id]=o}}function Cu(t,e){var n=t.a[e];return null==n&&(n=0,G.error("Asking for bitrate of stream not given to the estimator")),0==n&&G.m("Using bitrate of 0, this stream won't affect progress"),n}function Mu(t){this.a=!1,this.b=new pt,this.c=t}function Au(t){var e=new Pu;t.periods.forEach((function(t,n){var i=Ou(t.variants);if(0==n)for(var r=(i=h(i.a)).next();!r.done;r=i.next())e.add(r.value);else!function(t,e){t.a=t.a.filter((function(t){return Nu(e,t)}))}(e,i)}));for(var n=(t=h(t.periods)).next();!n.done;n=t.next())(n=n.value).variants=n.variants.filter((function(t){return Nu(e,new _u(t))}))}function _u(t){var e=t.audio;t=t.video,this.b=e?e.mimeType:null,this.a=e?e.codecs.split(".")[0]:null,this.f=t?t.mimeType:null,this.c=t?t.codecs.split(".")[0]:null}function Pu(){this.a=[]}function Nu(t,e){return t.a.some((function(t){return e.b==t.b&&e.a==t.a&&e.f==t.f&&e.c==t.c}))}function Ou(t){for(var e=new Pu,n=(t=h(t)).next();!n.done;n=t.next())e.add(new _u(n.value));return e}function Iu(t){var e=this;if(t&&t.constructor!=Ps)throw new dt(2,9,9008);this.b=this.a=null,t?(this.a=t.b,this.b=t.Tb()):(this.a=Ts(),this.b=new Nt),this.f=!1,this.c=[],this.g=[];var n=!t;this.h=new Mu((function(){return p((function t(){var i;return L(t,(function(t){switch(t.j){case 1:return i=function(){},E(t,Promise.all(e.g.map((function(t){return t.then(i,i)}))),2);case 2:if(!n){t.C(3);break}return E(t,e.b.destroy(),3);case 3:e.a=null,e.b=null,k(t)}}))}))}))}function Du(){if(Yt())t:{for(var t=h(Ya.values()),e=t.next();!e.done;e=t.next())if(e=(e=e.value)()){e.destroy(),t=!0;break t}t=!1}else t=!1;return t}function Ru(t,e){for(var n=[],i=h(t.periods),r=i.next();!r.done;r=i.next())for(var o=(r=h(r.value.streams)).next();!o.done;o=r.next())o=o.value,e&&"video"==o.contentType?n.push({contentType:Wt(o.mimeType,o.codecs),robustness:t.drmInfo.videoRobustness}):e||"audio"!=o.contentType||n.push({contentType:Wt(o.mimeType,o.codecs),robustness:t.drmInfo.audioRobustness});return n}function Lu(t,e,n){return p((function i(){return L(i,(function(i){switch(i.j){case 1:return E(i,function(t,e,n,i){return p((function r(){var o,a,s;return L(r,(function(r){switch(r.j){case 1:return i.drmInfo?(o=function(t){var e=Array.from(t.a.keys());if(!e.length)throw new dt(2,9,9e3,"No supported storage mechanisms found");return t.a.get(e[0]).getEmeSessionCell()}(n),a=i.sessionIds.map((function(t){return{sessionId:t,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:Ru(i,!1),videoCapabilities:Ru(i,!0)}})),E(r,hs(e,t,a),2)):r.return();case 2:return s=r.s,E(r,o.remove(s),3);case 3:return E(r,o.add(a.filter((function(t){return-1==s.indexOf(t.sessionId)}))),0)}}))}))}(t.b,t.a.drm,n,e),0)}}))}))}function ju(t,e,n,i){function r(){s+=1,t.a.offline.progressCallback(u,s/a)}var o=function(t){var e=[];return t.periods.forEach((function(t){t.streams.forEach((function(t){null!=t.initSegmentKey&&e.push(t.initSegmentKey),t.segments.forEach((function(t){e.push(t.dataKey)}))}))})),e}(i),a=o.length+1,s=0,u=Su(n,i);return Promise.all([e.removeSegments(o,r),e.removeManifests([n.key()],r)])}function Uu(t,e,n,i,r,o){var a={id:o.id,originalId:o.originalId,primary:o.primary,presentationTimeOffset:o.presentationTimeOffset||0,contentType:o.type,mimeType:o.mimeType,codecs:o.codecs,frameRate:o.frameRate,pixelAspectRatio:o.pixelAspectRatio,kind:o.kind,language:o.language,label:o.label,width:o.width||null,height:o.height||null,initSegmentKey:null,encrypted:o.encrypted,keyId:o.keyId,segments:[],variantIds:[]};r=r.presentationTimeline.Vb();var s=o.id,u=o.initSegmentReference;return u&&(u=vr(u.c(),u.b,u.a,t.a.streaming.retryParameters),La(e,s,u,.5*Cu(i,o.id),!0,(function(e){return p((function i(){var r;return L(i,(function(i){switch(i.j){case 1:return E(i,n.addSegments([{data:e}]),2);case 2:r=i.s,t.c.push(r[0]),a.initSegmentKey=r[0],k(i)}}))}))}))),function(t,e,n){for(var i=null==(e=t.findSegmentPosition(e))?null:t.getSegmentReference(e);i;)n(i),i=t.getSegmentReference(++e)}(o,r,(function(r){var u=vr(r.c(),r.b,r.a,t.a.streaming.retryParameters);La(e,s,u,function(t,e,n){return n=n.endTime-n.startTime,Cu(t,e)*n}(i,o.id,r),!1,(function(e){return p((function i(){var o;return L(i,(function(i){switch(i.j){case 1:return E(i,n.addSegments([{data:e}]),2);case 2:o=i.s,t.c.push(o[0]),a.segments.push({startTime:r.startTime,endTime:r.endTime,dataKey:o[0]}),k(i)}}))}))}))})),a}function zu(t){if(t.h.a)throw new dt(2,9,7001)}function Bu(){if(!Du())throw new dt(2,9,9e3)}function Fu(t,e){return p((function n(){return L(n,(function(n){switch(n.j){case 1:return t.g.push(e),M(n,2),E(n,e,4);case 4:return n.return(n.s);case 2:P(n),Mt(t.g,e),N(n,0)}}))}))}function Hu(t){var e=new Set(t.variants.map((function(t){return t.video}))),n=new Set(t.variants.map((function(t){return t.audio})));t=t.textStreams,1<e.size&&G.m("Multiple video tracks selected to be stored");for(var i=(e=h(n)).next();!i.done;i=e.next()){i=i.value;for(var r=h(n),o=r.next();!o.done;o=r.next())i!=(o=o.value)&&i.language==o.language&&G.m("Similar audio tracks were selected to be stored",i.id,o.id)}for(e=(n=h(t)).next();!e.done;e=n.next())for(e=e.value,r=(i=h(t)).next();!r.done;r=i.next())e!=(r=r.value)&&e.language==r.language&&G.m("Similar text tracks were selected to be stored",e.id,r.id)}Ps.LoadMode={DESTROYED:yu,NOT_LOADED:bu,MEDIA_SOURCE:wu,SRC_EQUALS:xu},Mu.prototype.destroy=function(){var t=this;return this.a?this.b:(this.a=!0,this.c().then((function(){t.b.resolve()}),(function(){t.b.resolve()})))},Pu.prototype.add=function(t){Nu(this,t)||this.a.push(t)},H("shaka.offline.Storage",Iu),Iu.support=Du,Iu.prototype.destroy=function(){return this.h.destroy()},Iu.prototype.destroy=Iu.prototype.destroy,Iu.prototype.configure=function(t,e){2==arguments.length&&"string"==typeof t&&(t=xs(t,e));var n=t,i=!1;return null!=n.trackSelectionCallback&&(i=!0,n.offline=n.offline||{},n.offline.trackSelectionCallback=n.trackSelectionCallback,delete n.trackSelectionCallback),null!=n.progressCallback&&(i=!0,n.offline=n.offline||{},n.offline.progressCallback=n.progressCallback,delete n.progressCallback),null!=n.usePersistentLicense&&(i=!0,n.offline=n.offline||{},n.offline.usePersistentLicense=n.usePersistentLicense,delete n.usePersistentLicense),i&&Bn("Storage.configure with OfflineConfig","Please configure storage with a player configuration."),Es(this.a,t)},Iu.prototype.configure=Iu.prototype.configure,Iu.prototype.getConfiguration=function(){var t=Ts();return Es(t,this.a,Ts()),t},Iu.prototype.getConfiguration=Iu.prototype.getConfiguration,Iu.prototype.Tb=function(){return this.b},Iu.prototype.getNetworkingEngine=Iu.prototype.Tb,Iu.prototype.store=function(t,e,n){var i=this;return Fu(this,function(t,e,n,i){return p((function r(){var o,a,s,u,c,l,f,d,m;return L(r,(function(r){switch(r.j){case 1:return Bu(),t.f?r.return(Promise.reject(new dt(2,9,9006))):(t.f=!0,E(r,function(t,e,n){return p((function i(){var r,o,a,s,u,c;return L(i,(function(i){switch(i.j){case 1:return r=null,o=t.b,a={networkingEngine:o,filterAllPeriods:function(){},filterNewPeriod:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(t){r=t}},E(i,n(),2);case 2:return(s=i.s).configure(t.a.manifest),zu(t),M(i,3),E(i,s.start(e,a),5);case 5:return u=i.s,zu(t),c=function(t){for(var e=new Set,n=(t=h(t.periods)).next();!n.done;n=t.next()){for(var i=h((n=n.value).textStreams),r=i.next();!r.done;r=i.next())e.add(r.value);for(n=h(n.variants),i=n.next();!i.done;i=n.next())(i=i.value).audio&&e.add(i.audio),i.video&&e.add(i.video)}return e}(u),E(i,Promise.all(qt(c,(function(t){return t.createSegmentIndex()}))),6);case 6:if(zu(t),r)throw r;return i.return(u);case 3:return P(i),E(i,s.stop(),7);case 7:N(i,0)}}))}))}(t,e,i),2));case 2:if(o=r.s,zu(t),!(!o.presentationTimeline.Y()&&!o.presentationTimeline.bb()))throw new dt(2,9,9005,e);return a=null,s=new Wa,c=u=null,C(r,3,4),E(r,function(t,e,n){return p((function i(){var r,o,a;return L(i,(function(i){switch(i.j){case 1:return r=new he({Cb:t.b,onError:n,yc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),o=Io(e.periods),a=t.a,r.configure(a.drm),E(i,function(t,e,n){return t.u=[],t.G=n,pe(t,e)}(r,o,a.offline.usePersistentLicense),2);case 2:return E(i,me(r),3);case 3:return E(i,ve(r),4);case 4:return i.return(r)}}))}))}(t,o,(function(t){c=c||t})),6);case 6:if(a=r.s,zu(t),c)throw c;return E(r,function(t,e,n){return p((function i(){var r,o;return L(i,(function(i){switch(i.j){case 1:return r={width:1/0,height:1/0},function(t,e,n){for(var i=(t=h(t.periods)).next();!i.done;i=t.next())(i=i.value).variants=i.variants.filter((function(t){return Ln.ld(t,e,n)}))}(e,t.a.restrictions,r),function(t){for(var e=(t=h(t.periods)).next();!e.done;e=t.next())(e=e.value).variants=e.variants.filter((function(t){var e=!0;return t.audio&&(e=e&&yn(t.audio)),t.video&&(e=e&&yn(t.video)),e}))}(e),function(t,e){for(var n=h(t.periods),i=n.next();!i.done;i=n.next())(i=i.value).variants=i.variants.filter((function(t){return Me(e,t)}))}(e,n),Au(e),o=t.a.preferredAudioChannelCount,Ln.Vd(e,o),E(i,function(t,e){return p((function n(){var i,r,o,a;return L(n,(function(n){switch(n.j){case 1:i=null,r=h(t.periods),o=r.next();case 2:if(o.done){n.C(0);break}return a=o.value,i&&(a.variants=a.variants.filter((function(t){return Nu(i,new _u(t))}))),E(n,e(a),5);case 5:i=Ou(a.variants),o=r.next(),n.C(2)}}))}))}(e,(function(e){return p((function n(){var i,r,o,a,s,u,c,l;return L(n,(function(n){switch(n.j){case 1:i=Ln,r=[];for(var f=h(e.variants),d=f.next();!d.done;d=f.next())o=d.value,r.push(i.Qd(o));for(d=(f=h(e.textStreams)).next();!d.done;d=f.next())a=d.value,r.push(i.Fc(a));return E(n,t.a.offline.trackSelectionCallback(r),2);case 2:for(s=n.s,u=new Set,c=new Set,d=(f=h(s)).next();!d.done;d=f.next())"variant"==(l=d.value).type&&u.add(l.id),"text"==l.type&&c.add(l.id);e.variants=e.variants.filter((function(t){return u.has(t.id)})),e.textStreams=e.textStreams.filter((function(t){return c.has(t.id)})),k(n)}}))}))})),2);case 2:(function(t){if(0==t.periods.length)throw new dt(2,4,4014);for(var e=(t=h(t.periods)).next();!e.done;e=t.next())Hu(e.value)})(e),k(i)}}))}))}(t,o,a),7);case 7:return E(r,s.init(),8);case 8:return zu(t),E(r,function(t){var e=null;if(t.a.forEach((function(t,n){t.getCells().forEach((function(t,i){t.hasFixedKeySpace()||e||(e={path:{Aa:n,fa:i},fa:t})}))})),e)return e;throw new dt(2,9,9013,"Could not find a cell that supports add-operations")}(s),9);case 9:return u=r.s,zu(t),E(r,function(t,e,n,i,r,o){return p((function a(){var s,u,c,l,f,d,m,v,g,y;return L(a,(function(a){switch(a.j){case 1:return s=function(t,e,n){var i=null==e.expiration?1/0:e.expiration;return{offlineUri:null,originalManifestUri:t,duration:e.presentationTimeline.ca(),size:0,expiration:i,tracks:e=Tu(e.periods[0]),appMetadata:n}}(r,i,o),u=i.periods.some((function(t){return t.variants.some((function(t){return t.drmInfos&&t.drmInfos.length}))})),c=i.periods.some((function(t){return t.variants.some((function(t){return t.drmInfos.some((function(t){return t.initData&&t.initData.length}))}))})),f=null,(l=u&&!c)&&(d=n.a,f=qu.get(d.keySystem)),m=new Ra(t.b,(function(e,n){s.size=n,t.a.offline.progressCallback(s,e)}),(function(e,i){l&&t.a.offline.usePersistentLicense&&f==i&&ge(n,"cenc",e)})),M(a,2),g=v=function(t,e,n,i,r,o,a){var s=new Eu,u=r.periods.map((function(i){return function(t,e,n,i,r,o){for(var a=h(o.variants),s=a.next();!s.done;s=a.next())ku(i,s.value);for(a=h(o.textStreams),s=a.next();!s.done;s=a.next())i.a[s.value.id]=52;a=function(t){for(var e=new Set,n=h(t.textStreams),i=n.next();!i.done;i=n.next())e.add(i.value);for(t=h(t.variants),n=t.next();!n.done;n=t.next())(n=n.value).audio&&e.add(n.audio),n.video&&e.add(n.video);return e}(o);var u=new Map;for(a=h(a),s=a.next();!s.done;s=a.next()){s=s.value;var c=Uu(t,e,n,i,r,s);u.set(s.id,c)}return o.variants.forEach((function(t){t.audio&&u.get(t.audio.id).variantIds.push(t.id),t.video&&u.get(t.video.id).variantIds.push(t.id)})),{startTime:o.startTime,streams:Array.from(u.values())}}(t,e,n,s,r,i)})),c=i.a,l=t.a.offline.usePersistentLicense;return c&&l&&(c.initData=[]),{originalManifestUri:o,duration:r.presentationTimeline.ca(),size:0,expiration:i.Sb(),periods:u,sessionIds:l?we(i):[],drmInfo:c,appMetadata:a}}(t,m,e,n,i,r,o),E(a,function(t){return p((function e(){return L(e,(function(e){switch(e.j){case 1:return E(e,Promise.all(t.b.values()),2);case 2:return e.return(t.a.a)}}))}))}(m),4);case 4:if(g.size=a.s,v.expiration=n.Sb(),y=we(n),v.sessionIds=t.a.offline.usePersistentLicense?y:[],u&&t.a.offline.usePersistentLicense&&!y.length)throw new dt(2,9,9007);return a.return(v);case 2:return P(a),E(a,m.destroy(),5);case 5:N(a,0)}}))}))}(t,u.fa,a,o,e,n),10);case 10:if(l=r.s,zu(t),c)throw c;return E(r,u.fa.addManifests([l]),11);case 11:return f=r.s,zu(t),d=new rs("manifest",u.path.Aa,u.path.fa,f[0]),r.return(Su(d,l));case 4:return P(r),t.f=!1,t.c=[],E(r,s.destroy(),12);case 12:if(!a){r.C(13);break}return E(r,a.destroy(),13);case 13:N(r,0);break;case 3:if(m=_(r),!u){r.C(15);break}return E(r,u.fa.removeSegments(t.c,(function(){})),15);case 15:throw c||m}}))}))}(this,t,e||{},(function(){return p((function e(){var r,o;return L(e,(function(e){switch(e.j){case 1:return n&&"string"!=typeof n?(Bn("Storing with a manifest parser factory","Please register a manifest parser and for the mime-type."),r=n,e.return(new r)):E(e,pr.create(t,i.b,i.a.manifest.retryParameters,n),2);case 2:return o=e.s,e.return(o)}}))}))})))},Iu.prototype.store=Iu.prototype.store,Iu.prototype.yf=function(){return this.f},Iu.prototype.getStoreInProgress=Iu.prototype.yf,Iu.prototype.remove=function(t){return Fu(this,function(t,e){return p((function n(){var i,r,o,a,s,u;return L(n,(function(n){switch(n.j){case 1:return Bu(),null==(i=os(e))||"manifest"!=i.a?n.return(Promise.reject(new dt(2,9,9004,e))):(r=i,o=new Wa,M(n,2),E(n,o.init(),4));case 4:return E(n,Ga(o,r.Aa(),r.fa()),5);case 5:return E(n,(a=n.s).getManifests([r.key()]),6);case 6:return s=n.s,u=s[0],E(n,Promise.all([Lu(t,u,o),ju(t,a,r,u)]),2);case 2:return P(n),E(n,o.destroy(),8);case 8:N(n,0)}}))}))}(this,t))},Iu.prototype.remove=Iu.prototype.remove,Iu.prototype.ig=function(){return Fu(this,function(t){return p((function e(){var n,i,r,o,a,s,u,c,l;return L(e,(function(e){switch(e.j){case 1:return Bu(),n=t.b,i=t.a.drm,r=new Wa,o=!1,M(e,2),E(e,r.init(),4);case 4:for(a=[],function(t,e){t.a.forEach((function(t){e(t.getEmeSessionCell())}))}(r,(function(t){return a.push(t)})),s=Promise.resolve(),u={},c=h(a),l=c.next();!l.done;u={Ec:u.Ec},l=c.next())u.Ec=l.value,s=s.then(function(t){return function(){return p((function e(){var r,a;return L(e,(function(e){switch(e.j){case 1:return E(e,t.Ec.getAll(),2);case 2:return r=e.s,E(e,hs(i,n,r),3);case 3:return a=e.s,E(e,t.Ec.remove(a),4);case 4:a.length!=r.length&&(o=!0),k(e)}}))}))}}(u));return E(e,s,2);case 2:return P(e),E(e,r.destroy(),6);case 6:N(e,3);break;case 3:return e.return(!o)}}))}))}(this))},Iu.prototype.removeEmeSessions=Iu.prototype.ig,Iu.prototype.list=function(){return Fu(this,p((function t(){var e,n,i;return L(t,(function(t){switch(t.j){case 1:return Bu(),e=[],n=new Wa,M(t,2),E(t,n.init(),4);case 4:return i=Promise.resolve(),function(t,e){t.a.forEach((function(t,n){t.getCells().forEach((function(t,i){e({Aa:n,fa:i},t)}))}))}(n,(function(t,n){i=i.then((function(){return p((function i(){return L(i,(function(i){switch(i.j){case 1:return E(i,n.getAllManifests(),2);case 2:i.s.forEach((function(n,i){var r=Su(new rs("manifest",t.Aa,t.fa,i),n);e.push(r)})),k(i)}}))}))}))})),E(t,i,2);case 2:return P(t),E(t,n.destroy(),6);case 6:N(t,3);break;case 3:return t.return(e)}}))})))},Iu.prototype.list=Iu.prototype.list,Iu.deleteAll=function(){return p((function t(){var e;return L(t,(function(t){switch(t.j){case 1:return e=new Wa,M(t,2),E(t,e.erase(),2);case 2:return P(t),E(t,e.destroy(),5);case 5:N(t,0)}}))}))};var qu=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");Is.offline=Du,H("shaka.polyfill.installAll",(function(){for(var t=0;t<Vu.length;++t)try{Vu[t].Qe()}catch(t){G.Z("Error installing polyfill!",t)}}));var Ku,$u,Vu=[];function Wu(t,e){for(var n={priority:e=e||0,Qe:t},i=0;i<Vu.length;i++)if(Vu[i].priority<e)return void Vu.splice(i,0,n);Vu.push(n)}function Gu(t){var e=t.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"==typeof Event)var n=new Event(e,t);else(n=document.createEvent("Event")).initEvent(e,t.bubbles,t.cancelable);t.target.dispatchEvent(n)}function Xu(t,e,n){if("input"==t)switch(this.type){case"range":t="change"}HTMLInputElement.prototype.originalAddEventListener.call(this,t,e,n)}function Yu(){var t=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(e){for(var n=[],i=0;i<arguments.length;++i)n[i]=arguments[i];return(n=t.apply(this,n)).abort=function(){},n}}function Zu(t,e){G.debug("PatchedMediaKeysApple.requestMediaKeySystemAccess");try{var n=new Ju(t,e);return Promise.resolve(n)}catch(t){return Promise.reject(t)}}function Ju(t,e){if(G.debug("PatchedMediaKeysApple.MediaKeySystemAccess"),this.keySystem=t,t.startsWith("com.apple.fps"))for(var n=h(e),i=n.next();!i.done;i=n.next()){var r=i.value;if("required"==r.persistentState)i=null;else{i={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label};var o=!1,a=!1;if(r.audioCapabilities)for(var s=h(r.audioCapabilities),u=s.next();!u.done;u=s.next())if((u=u.value).contentType){o=!0;var c=u.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(this.keySystem,c)&&(i.audioCapabilities.push(u),a=!0)}if(r.videoCapabilities)for(u=(r=h(r.videoCapabilities)).next();!u.done;u=r.next())(s=u.value).contentType&&(o=!0,u=s.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,u)&&(i.videoCapabilities.push(s),a=!0));o||(a=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),i=a?i:null}if(i)return void(this.a=i)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Qu(t){G.debug("PatchedMediaKeysApple.setMediaKeys");var e=this.mediaKeys;return e&&e!=t&&ec(e,null),delete this.mediaKeys,(this.mediaKeys=t)?ec(t,this):Promise.resolve()}function tc(t){G.debug("PatchedMediaKeysApple.MediaKeys"),this.b=new WebKitMediaKeys(t),this.a=new Ut}function ec(t,e){if(t.a.gb(),!e)return Promise.resolve();t.a.B(e,"webkitneedkey",ic);try{return Uo(e,HTMLMediaElement.HAVE_METADATA,t.a,(function(){e.webkitSetMediaKeys(t.b)})),Promise.resolve()}catch(t){return Promise.reject(t)}}function nc(t){G.debug("PatchedMediaKeysApple.MediaKeySession"),Et.call(this),this.b=null,this.g=t,this.c=this.a=null,this.f=new Ut,this.sessionId="",this.expiration=NaN,this.closed=new pt,this.keyStatuses=new oc}function ic(t){if(G.debug("PatchedMediaKeysApple.onWebkitNeedKey_",t),t=new Uint8Array(t.initData),new DataView(t.buffer,t.byteOffset,t.byteLength).getUint32(0,!0)+4!=t.byteLength)throw new RangeError("Malformed FairPlay init data");t=se(t=oe(t.subarray(4),!0));var e=new Event("encrypted");e.initDataType="skd",e.initData=t,this.dispatchEvent(e)}function rc(t,e){var n=t.keyStatuses;n.size=null==e?0:1,n.a=e,t.dispatchEvent(new St("keystatuseschange"))}function oc(){this.size=0,this.a=void 0}function ac(t,e){G.debug("PatchedMediaKeysMs.requestMediaKeySystemAccess");try{var n=new sc(t,e);return Promise.resolve(n)}catch(t){return Promise.reject(t)}}function sc(t,e){G.debug("PatchedMediaKeysMs.MediaKeySystemAccess"),this.keySystem=t;for(var n=!1,i=0;i<e.length;++i){var r=e[i],o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label},a=!1;if(r.audioCapabilities)for(var s=0;s<r.audioCapabilities.length;++s){var u=r.audioCapabilities[s];if(u.contentType){a=!0;var c=u.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,c)&&(o.audioCapabilities.push(u),n=!0)}}if(r.videoCapabilities)for(s=0;s<r.videoCapabilities.length;++s)(u=r.videoCapabilities[s]).contentType&&(a=!0,c=u.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,c)&&(o.videoCapabilities.push(u),n=!0));if(a||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==r.persistentState&&(n=!1),n)return void(this.a=o)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function uc(t){G.debug("PatchedMediaKeysMs.setMediaKeys");var e=this.mediaKeys;return e&&e!=t&&lc(e,null),delete this.mediaKeys,(this.mediaKeys=t)?lc(t,this):Promise.resolve()}function cc(t){G.debug("PatchedMediaKeysMs.MediaKeys"),this.b=new MSMediaKeys(t),this.a=new Ut}function lc(t,e){if(t.a.gb(),!e)return Promise.resolve();t.a.B(e,"msneedkey",hc);try{return Uo(e,HTMLMediaElement.HAVE_METADATA,t.a,(function(){e.msSetMediaKeys(t.b)})),Promise.resolve()}catch(t){return Promise.reject(t)}}function fc(t){G.debug("PatchedMediaKeysMs.MediaKeySession"),Et.call(this),this.c=null,this.g=t,this.b=this.a=null,this.f=new Ut,this.sessionId="",this.expiration=NaN,this.closed=new pt,this.keyStatuses=new pc}function hc(t){if(G.debug("PatchedMediaKeysMs.onMsNeedKey_",t),t.initData){var e=document.createEvent("CustomEvent");e.initCustomEvent("encrypted",!1,!1,null),e.initDataType="cenc",e.initData=function(t){if(!t)return t;var e=new ji(t);if(1>=e.data.length)return t;t=[];for(var n={},i=(e=h(e.data)).next();!i.done;n={tc:n.tc},i=e.next())n.tc=i.value,t.some(function(t){return function(e){return fe.Da(e,t.tc)}}(n))||t.push(n.tc);return fe.concat.apply(fe,t instanceof Array?t:function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(h(t)))}(t.initData).buffer,this.dispatchEvent(e)}}function dc(t,e){var n=t.keyStatuses;n.size=null==e?0:1,n.a=e,t.dispatchEvent(new St("keystatuseschange"))}function pc(){this.size=0,this.a=void 0}function mc(){return G.debug("PatchedMediaKeysNop.requestMediaKeySystemAccess"),Promise.reject(Error("The key system specified is not supported."))}function vc(t){return G.debug("PatchedMediaKeysNop.setMediaKeys"),null==t?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function gc(){throw new TypeError("Illegal constructor.")}function yc(){throw new TypeError("Illegal constructor.")}H("shaka.polyfill.register",Wu),Wu((function(){_l()}),-1),Wu((function(){if(t.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,(e=Document.prototype).exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Gu),document.addEventListener("webkitfullscreenerror",Gu),document.addEventListener("mozfullscreenchange",Gu),document.addEventListener("mozfullscreenerror",Gu),document.addEventListener("MSFullscreenChange",Gu),document.addEventListener("MSFullscreenError",Gu)}})),Wu((function(){G.debug("IndexedDB.install");var e=!1;if(te("CrKey"))G.debug("Removing IndexedDB from ChromeCast"),e=!0;else try{t.indexedDB&&(e=!1)}catch(t){G.debug("Removing IndexedDB due to an exception when accessing it"),e=!0}e&&delete t.indexedDB})),Wu((function(){G.debug("InputEvent.install"),te("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(G.info("Patching input event support on IE."),HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=Xu)})),Wu((function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})})),Wu((function(){G.debug("mathRound.install")})),Wu((function(){G.debug("MediaSource.install");var e=Qt();t.MediaSource?t.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(G.info("Patching Chromecast MSE bugs."),function(){var t=MediaSource.isTypeSupported,e=/^dv(?:h[e1]|a[v1])\./;MediaSource.isTypeSupported=function(n){for(var i=n.split(/ *; */),r=i[0],o={},a=1;a<i.length;++a){var s=i[a].split("="),u=s[0];s=s[1].replace(/"(.*)"/,"$1"),o[u]=s}if(!(i=o.codecs))return t(n);var c=!1,l=!1;for(var f in n=i.split(",").filter((function(t){return e.test(t)&&(l=!0),/^(hev|hvc)1\.2/.test(t)&&(c=!0),!0})),l&&(c=!1),o.codecs=n.join(","),c&&(o.eotf="smpte2084"),o)r+="; "+f+'="'+o[f]+'"';return cast.__platform__.canDisplayType(r)}}()):e?(function(){var t=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(e){return"mp2t"!=e.split(/ *; */)[0].split("/")[1].toLowerCase()&&t(e)}}(),12>=e?(G.info("Patching Safari 11 & 12 MSE bugs."),Yu(),function(){var t=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(e,n){return t.call(this,e,n-.001)}}()):(G.info("Patching Safari 13 MSE bugs."),Yu())):te("Tizen 2")||te("Tizen 3")||te("Tizen 4")?function(){var t=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(e){return"opus"!=Gt(e)[0]&&t(e)}}():G.info("Using native MSE as-is."):G.info("No MSE implementation available.")})),Ju.prototype.createMediaKeys=function(){G.debug("PatchedMediaKeysApple.MediaKeySystemAccess.createMediaKeys");var t=new tc(this.keySystem);return Promise.resolve(t)},Ju.prototype.getConfiguration=function(){return G.debug("PatchedMediaKeysApple.MediaKeySystemAccess.getConfiguration"),this.a},tc.prototype.createSession=function(t){if(G.debug("PatchedMediaKeysApple.MediaKeys.createSession"),"temporary"!=(t=t||"temporary"))throw new TypeError("Session type "+t+" is unsupported on this platform.");return new nc(this.b,t)},tc.prototype.setServerCertificate=function(t){return G.debug("PatchedMediaKeysApple.MediaKeys.setServerCertificate"),t&&new Uint8Array(t),Promise.resolve(!0)},q(nc,Et),(i=nc.prototype).generateRequest=function(t,e){G.debug("PatchedMediaKeysApple.MediaKeySession.generateRequest"),this.a=new pt;try{this.b=this.g.createSession("video/mp4",new Uint8Array(e)),this.sessionId=this.b.sessionId||"",this.f.B(this.b,"webkitkeymessage",this.yg.bind(this)),this.f.B(this.b,"webkitkeyadded",this.wg.bind(this)),this.f.B(this.b,"webkitkeyerror",this.xg.bind(this)),rc(this,"status-pending")}catch(t){this.a.reject(t)}return this.a},i.load=function(){return G.debug("PatchedMediaKeysApple.MediaKeySession.load"),Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(t){G.debug("PatchedMediaKeysApple.MediaKeySession.update"),this.c=new pt;try{this.b.update(new Uint8Array(t))}catch(t){this.c.reject(t)}return this.c},i.close=function(){G.debug("PatchedMediaKeysApple.MediaKeySession.close");try{this.b.close(),this.closed.resolve(),this.f.gb()}catch(t){this.closed.reject(t)}return this.closed},i.remove=function(){return G.debug("PatchedMediaKeysApple.MediaKeySession.remove"),Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},i.yg=function(t){G.debug("PatchedMediaKeysApple.onWebkitKeyMessage_",t),this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new St("message",{messageType:null==this.keyStatuses.a?"license-request":"license-renewal",message:t.message.buffer}))},i.wg=function(t){G.debug("PatchedMediaKeysApple.onWebkitKeyAdded_",t),this.c&&(rc(this,"usable"),this.c.resolve(),this.c=null)},i.xg=function(t){if(G.debug("PatchedMediaKeysApple.onWebkitKeyError_",t),(t=Error("EME PatchedMediaKeysApple key error")).errorCode=this.b.error,null!=this.a)this.a.reject(t),this.a=null;else if(null!=this.c)this.c.reject(t),this.c=null;else switch(this.b.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:rc(this,"output-not-allowed");break;default:rc(this,"internal-error")}},(i=oc.prototype).forEach=function(t){this.a&&t(this.a,Ku)},i.get=function(t){if(this.has(t))return this.a},i.has=function(t){var e=Ku;return!(!this.a||!fe.Da(new Uint8Array(t),new Uint8Array(e)))},i.entries=function(){},i.keys=function(){},i.values=function(){},Wu((function(){t.HTMLVideoElement&&t.WebKitMediaKeys&&(G.info("Using Apple-prefixed EME"),Ku=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Qu,t.MediaKeys=tc,t.MediaKeySystemAccess=Ju,navigator.requestMediaKeySystemAccess=Zu)})),sc.prototype.createMediaKeys=function(){G.debug("PatchedMediaKeysMs.MediaKeySystemAccess.createMediaKeys");var t=new cc(this.keySystem);return Promise.resolve(t)},sc.prototype.getConfiguration=function(){return G.debug("PatchedMediaKeysMs.MediaKeySystemAccess.getConfiguration"),this.a},cc.prototype.createSession=function(t){if(G.debug("PatchedMediaKeysMs.MediaKeys.createSession"),"temporary"!=(t=t||"temporary"))throw new TypeError("Session type "+t+" is unsupported on this platform.");return new fc(this.b,t)},cc.prototype.setServerCertificate=function(){return G.debug("PatchedMediaKeysMs.MediaKeys.setServerCertificate"),Promise.resolve(!1)},q(fc,Et),(i=fc.prototype).generateRequest=function(t,e){G.debug("PatchedMediaKeysMs.MediaKeySession.generateRequest"),this.a=new pt;try{this.c=this.g.createSession("video/mp4",new Uint8Array(e),null),this.f.B(this.c,"mskeymessage",this.Uf.bind(this)),this.f.B(this.c,"mskeyadded",this.Sf.bind(this)),this.f.B(this.c,"mskeyerror",this.Tf.bind(this)),dc(this,"status-pending")}catch(t){this.a.reject(t)}return this.a},i.load=function(){return G.debug("PatchedMediaKeysMs.MediaKeySession.load"),Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(t){G.debug("PatchedMediaKeysMs.MediaKeySession.update"),this.b=new pt;try{this.c.update(new Uint8Array(t))}catch(t){this.b.reject(t)}return this.b},i.close=function(){G.debug("PatchedMediaKeysMs.MediaKeySession.close");try{this.c.close(),this.closed.resolve(),this.f.gb()}catch(t){this.closed.reject(t)}return this.closed},i.remove=function(){return G.debug("PatchedMediaKeysMs.MediaKeySession.remove"),Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},i.Uf=function(t){G.debug("PatchedMediaKeysMs.onMsKeyMessage_",t),this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new St("message",{messageType:null==this.keyStatuses.a?"license-request":"license-renewal",message:t.message.buffer}))},i.Sf=function(t){G.debug("PatchedMediaKeysMs.onMsKeyAdded_",t),this.a?(G.debug("Simulating completion for a PR persistent license."),dc(this,"usable"),this.a.resolve(),this.a=null):this.b&&(dc(this,"usable"),this.b.resolve(),this.b=null)},i.Tf=function(t){if(G.debug("PatchedMediaKeysMs.onMsKeyError_",t),(t=Error("EME PatchedMediaKeysMs key error")).errorCode=this.c.error,null!=this.a)this.a.reject(t),this.a=null;else if(null!=this.b)this.b.reject(t),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:dc(this,"output-not-allowed");break;default:dc(this,"internal-error")}},(i=pc.prototype).forEach=function(t){this.a&&t(this.a,$u)},i.get=function(t){if(this.has(t))return this.a},i.has=function(t){var e=$u;return!(!this.a||!fe.Da(new Uint8Array(t),new Uint8Array(e)))},i.entries=function(){},i.keys=function(){},i.values=function(){},Wu((function(){!t.HTMLVideoElement||!t.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(G.info("Using ms-prefixed EME v20140218"),$u=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=uc,t.MediaKeys=cc,t.MediaKeySystemAccess=sc,navigator.requestMediaKeySystemAccess=ac)})),gc.prototype.createSession=function(){},gc.prototype.setServerCertificate=function(){},yc.prototype.getConfiguration=function(){},yc.prototype.createMediaKeys=function(){},Wu((function(){!t.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(G.info("EME not available."),navigator.requestMediaKeySystemAccess=mc,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=vc,t.MediaKeys=gc,t.MediaKeySystemAccess=yc)}),-10);var bc,wc="";function xc(t){return wc?wc+t.charAt(0).toUpperCase()+t.slice(1):t}function Sc(t,e){G.debug("PatchedMediaKeysWebkit.requestMediaKeySystemAccess");try{var n=new Ec(t,e);return Promise.resolve(n)}catch(t){return Promise.reject(t)}}function Tc(t){G.debug("PatchedMediaKeysWebkit.setMediaKeys");var e=this.mediaKeys;return e&&e!=t&&Cc(e,null),delete this.mediaKeys,(this.mediaKeys=t)&&Cc(t,this),Promise.resolve()}function Ec(t,e){G.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess"),this.a=this.keySystem=t;var n=!1;"org.w3.clearkey"==t&&(this.a="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video");for(var o=0;o<e.length;++o){var a=e[o],s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:a.initDataTypes,sessionTypes:["temporary"],label:a.label},u=!1;if(a.audioCapabilities)for(var c=0;c<a.audioCapabilities.length;++c){var l=a.audioCapabilities[c];if(l.contentType){u=!0;var f=l.contentType.split(";")[0];r.canPlayType(f,this.a)&&(s.audioCapabilities.push(l),i=!0)}}if(a.videoCapabilities)for(c=0;c<a.videoCapabilities.length;++c)(l=a.videoCapabilities[c]).contentType&&(u=!0,r.canPlayType(l.contentType,this.a)&&(s.videoCapabilities.push(l),i=!0));if(u||(i=r.canPlayType("video/mp4",this.a)||r.canPlayType("video/webm",this.a)),"required"==a.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):i=!1),i)return void(this.b=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=t&&"com.widevine.alpha"!=t||(n="None of the requested configurations were supported."),(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function kc(t){G.debug("PatchedMediaKeysWebkit.MediaKeys"),this.g=t,this.b=null,this.a=new Ut,this.c=[],this.f={}}function Cc(t,e){t.b=e,t.a.gb();var n=wc;e&&(t.a.B(e,n+"needkey",t.Yf.bind(t)),t.a.B(e,n+"keymessage",t.Bg.bind(t)),t.a.B(e,n+"keyadded",t.zg.bind(t)),t.a.B(e,n+"keyerror",t.Ag.bind(t)))}function Mc(t,e){var n=t.f[e];return n?(G.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",n),n):(n=t.c.shift())?(n.sessionId=e,t.f[e]=n,G.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",n),n):null}function Ac(t,e,n){G.debug("PatchedMediaKeysWebkit.MediaKeySession"),Et.call(this),this.f=t,this.h=!1,this.a=this.b=null,this.c=e,this.g=n,this.sessionId="",this.expiration=NaN,this.closed=new pt,this.keyStatuses=new Nc}function _c(t,e,n){if(t.h)return Promise.reject(Error("The session is already initialized."));t.h=!0;try{if("persistent-license"==t.g)if(n)var i=new Uint8Array(se("LOAD_SESSION|"+n));else{var r=se("PERSISTENT|"),o=new Uint8Array(r.byteLength+e.byteLength);o.set(new Uint8Array(r),0),o.set(new Uint8Array(e),r.byteLength),i=o}else i=new Uint8Array(e)}catch(t){return Promise.reject(t)}t.b=new pt;var a=xc("generateKeyRequest");try{t.f[a](t.c,i)}catch(e){if("InvalidStateError"!=e.name)return t.b=null,Promise.reject(e);new lt((function(){try{t.f[a](t.c,i)}catch(e){t.b.reject(e),t.b=null}})).T(.01)}return t.b}function Pc(t,e){var n=t.keyStatuses;n.size=null==e?0:1,n.a=e,t.dispatchEvent(new St("keystatuseschange"))}function Nc(){this.size=0,this.a=void 0}function Oc(t){if("picture-in-picture"==(t=t.target).webkitPresentationMode){document.pictureInPictureElement=t;var e=new Event("enterpictureinpicture");t.dispatchEvent(e)}else document.pictureInPictureElement==t&&(document.pictureInPictureElement=null),e=new Event("leavepictureinpicture"),t.dispatchEvent(e)}function Ic(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Dc(){var t=document.pictureInPictureElement;return t?(t.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function Rc(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function Lc(t){t?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function jc(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Uc(e,n,i){return new t.TextTrackCue(e,n,i)}function zc(e,n,i){return new t.TextTrackCue(e+"-"+n+"-"+i,e,n,i)}function Bc(){}Ec.prototype.createMediaKeys=function(){G.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.createMediaKeys");var t=new kc(this.a);return Promise.resolve(t)},Ec.prototype.getConfiguration=function(){return G.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.getConfiguration"),this.b},(i=kc.prototype).createSession=function(t){if(G.debug("PatchedMediaKeysWebkit.MediaKeys.createSession"),"temporary"!=(t=t||"temporary")&&"persistent-license"!=t)throw new TypeError("Session type "+t+" is unsupported on this platform.");var e=this.b||document.createElement("video");return e.src||(e.src="about:blank"),t=new Ac(e,this.g,t),this.c.push(t),t},i.setServerCertificate=function(){return G.debug("PatchedMediaKeysWebkit.MediaKeys.setServerCertificate"),Promise.resolve(!1)},i.Yf=function(t){G.debug("PatchedMediaKeysWebkit.onWebkitNeedKey_",t);var e=document.createEvent("CustomEvent");e.initCustomEvent("encrypted",!1,!1,null),e.initDataType="cenc",t.initData instanceof ArrayBuffer?e.initData=t.initData:e.initData=t.initData.buffer,this.b.dispatchEvent(e)},i.Bg=function(t){G.debug("PatchedMediaKeysWebkit.onWebkitKeyMessage_",t);var e=Mc(this,t.sessionId);e?(t=new St("message",{messageType:null==e.keyStatuses.a?"licenserequest":"licenserenewal",message:t.message}),G.debug("PatchedMediaKeysWebkit.MediaKeySession.generated"),e.b&&(e.b.resolve(),e.b=null),e.dispatchEvent(t)):G.error("Session not found",t.sessionId)},i.zg=function(t){G.debug("PatchedMediaKeysWebkit.onWebkitKeyAdded_",t),(t=Mc(this,t.sessionId))&&(G.debug("PatchedMediaKeysWebkit.MediaKeySession.ready"),Pc(t,"usable"),t.a&&t.a.resolve(),t.a=null)},i.Ag=function(t){G.debug("PatchedMediaKeysWebkit.onWebkitKeyError_",t);var e=Mc(this,t.sessionId);e&&e.handleError(t)},q(Ac,Et),(i=Ac.prototype).handleError=function(t){G.debug("PatchedMediaKeysWebkit.MediaKeySession.handleError",t);var e=Error("EME v0.1b key error"),n=t.errorCode;n.systemCode=t.systemCode,e.errorCode=n,!t.sessionId&&this.b?(45==t.systemCode&&(e.message="Unsupported session type."),this.b.reject(e),this.b=null):t.sessionId&&this.a?(this.a.reject(e),this.a=null):(e=t.systemCode,t.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Pc(this,"output-restricted"):Pc(this,1==e?"expired":"internal-error"))},i.Kd=function(t,e){if(this.a)this.a.then(this.Kd.bind(this,t,e)).catch(this.Kd.bind(this,t,e));else{if(this.a=t,"webkit-org.w3.clearkey"==this.c){var n=re(e),i=JSON.parse(n);"oct"!=i.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),n=fe.Fa(i.keys[0].k),i=fe.Fa(i.keys[0].kid)}else n=new Uint8Array(e),i=null;var r=xc("addKey");try{this.f[r](this.c,n,i,this.sessionId)}catch(t){this.a.reject(t),this.a=null}}},i.generateRequest=function(t,e){return G.debug("PatchedMediaKeysWebkit.MediaKeySession.generateRequest"),_c(this,e,null)},i.load=function(t){return G.debug("PatchedMediaKeysWebkit.MediaKeySession.load"),"persistent-license"==this.g?_c(this,null,t):Promise.reject(Error("Not a persistent session."))},i.update=function(t){G.debug("PatchedMediaKeysWebkit.MediaKeySession.update",t);var e=new pt;return this.Kd(e,t),e},i.close=function(){if(G.debug("PatchedMediaKeysWebkit.MediaKeySession.close"),"persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var t=xc("cancelKeyRequest");try{this.f[t](this.c,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},i.remove=function(){return G.debug("PatchedMediaKeysWebkit.MediaKeySession.remove"),"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},(i=Nc.prototype).forEach=function(t){this.a&&t(this.a,bc)},i.get=function(t){if(this.has(t))return this.a},i.has=function(t){var e=bc;return!(!this.a||!fe.Da(new Uint8Array(t),new Uint8Array(e)))},i.entries=function(){},i.keys=function(){},i.values=function(){},Wu((function(){if(!(!t.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)G.info("Using webkit-prefixed EME v0.1b"),wc="webkit";else{if(!HTMLMediaElement.prototype.generateKeyRequest)return;G.info("Using nonprefixed EME v0.1b")}bc=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=Sc,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Tc,t.MediaKeys=kc,t.MediaKeySystemAccess=Ec}})),Wu((function(){if(t.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(G.debug("PiPWebkit.install"),document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=Ic,Object.defineProperty(e,"disablePictureInPicture",{get:Rc,set:Lc,enumerable:!0,configurable:!0}),document.exitPictureInPicture=Dc,document.addEventListener("webkitpresentationmodechanged",Oc,!0))}})),Wu((function(){if(G.debug("VideoPlayPromise.install"),t.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch((function(){})),t}}})),Wu((function(){if(t.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in e&&(e.getVideoPlaybackQuality=jc)}})),Wu((function(){if(t.VTTCue)G.info("Using native VTTCue.");else if(t.TextTrackCue){var e=TextTrackCue.length;if(3==e)G.info("Using VTTCue polyfill from 3 argument TextTrackCue."),t.VTTCue=Uc;else if(6==e)G.info("Using VTTCue polyfill from 6 argument TextTrackCue."),t.VTTCue=zc;else{try{var n=!!Uc(1,2,"")}catch(t){n=!1}n&&(G.info("Using VTTCue polyfill from 3 argument TextTrackCue."),t.VTTCue=Uc)}}else G.error("VTTCue not available.")})),H("shaka.text.TtmlTextParser",Bc),Bc.prototype.parseInit=function(){},Bc.prototype.parseInit=Bc.prototype.parseInit,Bc.prototype.parseMedia=function(t,e){var n=re(t),i=[],r=new DOMParser,o=null;if(""==n)return i;try{o=r.parseFromString(n,"text/xml")}catch(t){throw new dt(2,2,2005,"Failed to parse TTML.")}if(o){if(n=o.getElementsByTagName("parsererror")[0])throw new dt(2,2,2005,n.textContent);if(!(r=o.getElementsByTagName("tt")[0]))throw new dt(2,2,2005,"TTML does not contain <tt> tag.");var a=Ui.getAttributeNS(r,"http://www.w3.org/ns/ttml#parameter","frameRate"),s=Ui.getAttributeNS(r,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),u=Ui.getAttributeNS(r,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),c=Ui.getAttributeNS(r,"http://www.w3.org/ns/ttml#parameter","tickRate");if(o=r.getAttribute("xml:space")||"default",n=r.getAttribute("tts:extent"),"default"!=o&&"preserve"!=o)throw new dt(2,2,2005,"Invalid xml:space value: "+o);o="default"==o,a=new cl(a,s,u,c),s=tl(r.getElementsByTagName("metadata")[0]),u=tl(r.getElementsByTagName("styling")[0]),c=tl(r.getElementsByTagName("layout")[0]);for(var l=[],f=0;f<c.length;f++){var d,p,m=c[f],v=u,g=n,y=new un,b=m.getAttribute("xml:id");if(b)y.id=b,b=null,g&&(b=qc.exec(g)||$c.exec(g)),g=b?Number(b[1]):null,b=b?Number(b[2]):null,(d=rl(m,v,"extent"))&&(null!=(d=(p=qc.exec(d))||$c.exec(d))&&(y.width=null!=g?100*Number(d[1])/g:Number(d[1]),y.height=null!=b?100*Number(d[2])/b:Number(d[2]),y.widthUnits=p||null!=g?cn:0,y.heightUnits=p||null!=b?cn:0)),(m=rl(m,v,"origin"))&&(null!=(d=(p=qc.exec(m))||$c.exec(m))&&(y.viewportAnchorX=null!=b?100*Number(d[1])/b:Number(d[1]),y.viewportAnchorY=null!=g?100*Number(d[2])/g:Number(d[2]),y.viewportAnchorUnits=p||null!=g?cn:0));else G.m("TtmlTextParser parser encountered a region with no id. Region will be ignored."),y=null;y&&l.push(y)}for(n=function t(e){if(!e)return[];for(var n=[],i=(e=h(e.childNodes)).next();!i.done;i=e.next())(i=i.value)instanceof Element&&(i.hasAttribute("begin")?n.push(i):n=n.concat(t(i)));return n}(r.getElementsByTagName("body")[0]),r=(n=h(n)).next();!r.done;r=n.next())(r=el(r.value,e.periodStart,a,s,u,c,l,o,!1))&&i.push(r)}return i},Bc.prototype.parseMedia=Bc.prototype.parseMedia;var Fc,Hc,qc=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Kc=/^(\d+px|\d+em)$/,$c=/^(\d+)px (\d+)px$/,Vc=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Wc=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Gc=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Xc=/^(\d*(?:\.\d*)?)f$/,Yc=/^(\d*(?:\.\d*)?)t$/,Zc=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,Jc={left:nn,center:"center",right:"end",start:nn,end:"end"},Qc={left:"line-left",center:"center",right:"line-right"};function tl(t){var e=[];if(!t)return e;for(var n=h(t.childNodes),i=n.next();!i.done;i=n.next())(i=i.value).nodeType==Node.ELEMENT_NODE&&"br"!==i.nodeName&&(i=tl(i),e=e.concat(i));return e.length||e.push(t),e}function el(t,e,n,i,r,o,a,s,u){if(u&&"br"==t.nodeName)return(t=new We(0,0,"")).spacer=!0,t;var c=/^[\s\n]*$/.test(t.textContent),l=t.nodeType==Node.ELEMENT_NODE&&!t.hasAttribute("begin")&&!t.hasAttribute("end");if(t.nodeType!=Node.ELEMENT_NODE||l&&c||l&&!u)return null;c=sl(t.getAttribute("begin"),n),l=sl(t.getAttribute("end"),n);var f=sl(t.getAttribute("dur"),n);if(null==l&&null!=f&&(l=c+f),!u&&(null==c||null==l))throw new dt(2,2,2001);if(c+=e,l+=e,f="",u=[],Array.from(t.childNodes).find((function(t){return t.nodeType===Node.TEXT_NODE&&/\S+/.test(t.textContent)})))f=function t(e,n){for(var i="",r=h(e.childNodes),o=r.next();!o.done;o=r.next())"br"==(o=o.value).nodeName&&e.childNodes[0]!==o?i+="\n":o.childNodes&&0<o.childNodes.length?i+=t(o,n):n?i+=o=(o=o.textContent.trim()).replace(/\s+/g," "):i+=o.textContent;return i}(t,s);else for(var d=h(t.childNodes),p=d.next();!p.done;p=d.next())(p=el(p.value,e,n,i,r,o,a,s,!0))&&(p.startTime=p.startTime||c,p.endTime=p.endTime||l,u.push(p));if((e=new We(c,l,f)).nestedCues=u,(o=al(t,"region",o,"")[0])&&o.getAttribute("xml:id")){var m=o.getAttribute("xml:id");e.region=a.filter((function(t){return t.id==m}))[0]}return function(t,e,n,i,r){"rtl"==il(e,n,r,"direction")&&(t.direction="rtl");var o=il(e,n,r,"writingMode");"tb"==o||"tblr"==o?t.writingMode="vertical-lr":"tbrl"==o?t.writingMode="vertical-rl":"rltb"==o||"rl"==o?t.direction="rtl":o&&(t.direction=Qe),(o=il(e,n,r,"textAlign"))?(t.positionAlign=Qc[o],t.lineAlign=Jc[o],t.textAlign=Ye[o.toUpperCase()]):t.textAlign="start",(o=il(e,n,r,"displayAlign"))&&(t.displayAlign=Je[o.toUpperCase()]);(o=il(e,n,r,"color"))&&(t.color=o);(o=il(e,n,r,"backgroundColor"))&&(t.backgroundColor=o);(o=il(e,n,r,"fontFamily"))&&(t.fontFamily=o);(o=il(e,n,r,"fontWeight"))&&"bold"==o&&(t.fontWeight=700),(o=il(e,n,r,"wrapOption"))&&"noWrap"==o&&(t.wrapLine=!1),(o=il(e,n,r,"lineHeight"))&&o.match(Kc)&&(t.lineHeight=o),(o=il(e,n,r,"fontSize"))&&o.match(Kc)&&(t.fontSize=o),(o=il(e,n,r,"fontStyle"))&&(t.fontStyle=sn[o.toUpperCase()]);if(i){o=i.getAttribute("imagetype");var a=i.getAttribute("encoding");i=i.textContent.trim(),"PNG"==o&&"Base64"==a&&i&&(t.backgroundImage="data:image/png;base64,"+i)}(n=rl(n,r,"textDecoration"))&&nl(t,n),(e=ol(e,r,"textDecoration"))&&nl(t,e)}(e,t,o,i=al(t,"smpte:backgroundImage",i,"#")[0],r),e}function nl(t,e){for(var n=e.split(" "),i=0;i<n.length;i++)switch(n[i]){case"underline":t.textDecoration.includes("underline")||t.textDecoration.push("underline");break;case"noUnderline":t.textDecoration.includes("underline")&&Mt(t.textDecoration,"underline");break;case"lineThrough":t.textDecoration.includes("lineThrough")||t.textDecoration.push("lineThrough");break;case"noLineThrough":t.textDecoration.includes("lineThrough")&&Mt(t.textDecoration,"lineThrough");break;case"overline":t.textDecoration.includes("overline")||t.textDecoration.push("overline");break;case"noOverline":t.textDecoration.includes("overline")&&Mt(t.textDecoration,"overline")}}function il(t,e,n,i){return(t=ol(t,n,i))?t:rl(e,n,i)}function rl(t,e,n){for(var i=tl(t),r=0;r<i.length;r++){var o=Ui.getAttributeNS(i[r],"http://www.w3.org/ns/ttml#styling",n);if(o)return o}return(t=al(t,"style",e,"")[0])?Ui.getAttributeNS(t,"http://www.w3.org/ns/ttml#styling",n):null}function ol(t,e,n){var i=Ui.getAttributeNS(t,"http://www.w3.org/ns/ttml#styling",n);if(i)return i;for(t=al(t,"style",e,""),e=null,i=0;i<t.length;i++){var r=Ui.getAttributeNS(t[i],"http://www.w3.org/ns/ttml#styling",n);r&&(e=r)}return e}function al(t,e,n,i){var r=[];if(!t||1>n.length)return r;var o=t;for(t=null;o&&!(t=o.getAttribute(e))&&(o=o.parentNode)instanceof Element;);if(e=t)for(t=(e=h(e=e.split(" "))).next();!t.done;t=e.next()){t=t.value;for(var a=(o=h(n)).next();!a.done;a=o.next())if(i+(a=a.value).getAttribute("xml:id")==t){r.push(a);break}}return r}function sl(t,e){var n=null;if(Vc.test(t)){n=Vc.exec(t);var i=Number(n[1]),r=Number(n[2]),o=Number(n[3]),a=Number(n[4]);n=(o+=(a+=(Number(n[5])||0)/e.b)/e.frameRate)+60*r+3600*i}else Wc.test(t)?n=ul(Wc,t):Gc.test(t)?n=ul(Gc,t):Xc.test(t)?(n=Xc.exec(t),n=Number(n[1])/e.frameRate):Yc.test(t)?(n=Yc.exec(t),n=Number(n[1])/e.a):Zc.test(t)&&(n=ul(Zc,t));return n}function ul(t,e){var n=t.exec(e);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function cl(t,e,n,i){this.frameRate=Number(t)||30,this.b=Number(e)||1,this.a=Number(i),0==this.a&&(this.a=t?this.frameRate*this.b:1),n&&(t=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(t[1])/Number(t[2]))}function ll(){this.a=new Bc}function fl(){}function hl(t,e,n){var i;if(i=/^align:(start|middle|center|end|left|right)$/.exec(e))e=i[1],t.textAlign="middle"==e?Xe:Ye[e.toUpperCase()];else if(i=/^vertical:(lr|rl)$/.exec(e))t.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl";else if(i=/^size:([\d.]+)%$/.exec(e))t.size=Number(i[1]);else if(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(e))t.position=Number(i[1]),i[2]&&(e=i[2],t.positionAlign="line-left"==e||"start"==e?"line-left":"line-right"==e||"end"==e?"line-right":"center");else{if(!(i=/^region:(.*)$/.exec(e))){t:{if(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(e))t.lineInterpretation=1,t.line=Number(n[1]),n[2]&&(t.lineAlign=rn[n[2].toUpperCase()]);else{if(!(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(e))){t=!1;break t}t.lineInterpretation=en,t.line=Number(n[1]),n[2]&&(t.lineAlign=rn[n[2].toUpperCase()])}t=!0}return t}(e=function(t,e){var n=t.filter((function(t){return t.id==e}));return n.length?n[0]:(G.m("VTT parser could not find a region with id: ",e," The region will be ignored."),null)}(n,i[1]))&&(t.region=e)}return!0}function dl(t){if(null==(t=Dr(t,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g)))return null;var e=Number(t[2]),n=Number(t[3]);return 59<e||59<n?null:Number(t[4])/1e3+n+60*e+3600*(Number(t[1])||0)}function pl(){this.a=null}function ml(t,e,n){var i,r,o;return(new Ni).L("payl",Di((function(t){i=re(t)}))).L("iden",Di((function(t){r=re(t)}))).L("sttg",Di((function(t){o=re(t)}))).parse(t),i?function(t,e,n,i,r){if(t=new We(i,r,t),e&&(t.id=e),n)for(e=new Or(n),n=Rr(e);n;)hl(t,n,[])||G.m("VTT parser encountered an invalid VTT setting: ",n," The setting will be ignored."),Ir(e),n=Rr(e);return t}(i,r,o,e,n):null}
/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function vl(){}function gl(){Fc?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Fc=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=yl):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function yl(t,e){var n=this;return p((function i(){var r;return L(i,(function(i){switch(i.j){case 1:return console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),E(i,Fc.call(n,t,e),2);case 2:return Ml(r=i.s)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Fc,i.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=bl,i.return(bl.call(n,t,e)))}}))}))}function bl(t,e){var n=this;return p((function i(){var r,o,a,s,u,c,l,f;return L(i,(function(i){switch(i.j){case 1:console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),r=Cl(t),o=[];for(var d=h(e),p=d.next();!p.done;p=d.next())a=p.value,s=wl(a.videoCapabilities,r),u=wl(a.audioCapabilities,r),a.videoCapabilities&&a.videoCapabilities.length&&!s.length||a.audioCapabilities&&a.audioCapabilities.length&&!u.length||((c=Object.assign({},a)).videoCapabilities=s,c.audioCapabilities=u,o.push(c));if(!o.length)throw(l=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",l.code=DOMException.NOT_SUPPORTED_ERR,l;return E(i,Fc.call(n,t,o),2);case 2:return f=i.s,i.return(new kl(f,r))}}))}))}function wl(t,e){return t?t.filter((function(t){return!t.encryptionScheme||t.encryptionScheme==e})):t}function xl(){}function Sl(){navigator.mediaCapabilities?(Hc=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Tl):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function Tl(t){var e=this;return p((function n(){var i;return L(n,(function(n){switch(n.j){case 1:return console.assert(e==navigator.mediaCapabilities,'bad "this" for decodingInfo'),E(n,Hc.call(e,t),2);case 2:return i=n.s,t.keySystemConfiguration?Ml(i.keySystemAccess)?(console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Hc,n.return(i)):(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=El,n.return(El.call(e,t))):n.return(i)}}))}))}function El(t){var e=this;return p((function n(){var i,r,o,a,s,u,c;return L(n,(function(n){switch(n.j){case 1:return console.assert(e==navigator.mediaCapabilities,'bad "this" for decodingInfo'),i=null,t.keySystemConfiguration&&(r=t.keySystemConfiguration,o=r.keySystem,a=r.audio&&r.audio.encryptionScheme,s=r.video&&r.video.encryptionScheme,i=Cl(o),u={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:t},a&&a!=i||s&&s!=i)?n.return(u):E(n,Hc.call(e,t),2);case 2:return(c=n.s).keySystemAccess&&(c.keySystemAccess=new kl(c.keySystemAccess,i)),n.return(c)}}))}))}function kl(t,e){this.b=t,this.a=e,this.keySystem=t.keySystem}function Cl(t){return t.startsWith("com.widevine")||t.startsWith("com.microsoft")||t.startsWith("com.adobe")||t.startsWith("org.w3")?"cenc":t.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",t,"Please contribute!"),null)}function Ml(t){var e=(t=t.getConfiguration()).audioCapabilities&&t.audioCapabilities[0];return!(!(t=t.videoCapabilities&&t.videoCapabilities[0]||e)||void 0===t.encryptionScheme)}function Al(){}function _l(){gl(),Sl()}hn["application/ttml+xml"]=Bc,H("shaka.text.Mp4TtmlParser",ll),ll.prototype.parseInit=function(t){var e=!1;if((new Ni).L("moov",Oi).L("trak",Oi).L("mdia",Oi).L("minf",Oi).L("stbl",Oi).ia("stsd",Ii).L("stpp",(function(t){e=!0,t.parser.stop()})).parse(t),!e)throw new dt(2,2,2007)},ll.prototype.parseInit=ll.prototype.parseInit,ll.prototype.parseMedia=function(t,e){var n=!1,i=[];if((new Ni).L("mdat",Di(function(t){n=!0,i=i.concat(this.a.parseMedia(t,e))}.bind(this))).parse(t),!n)throw new dt(2,2,2007);return i},ll.prototype.parseMedia=ll.prototype.parseMedia,hn['application/mp4; codecs="stpp"']=ll,hn['application/mp4; codecs="stpp.ttml.im1t"']=ll,hn['application/mp4; codecs="stpp.TTML.im1t"']=ll,H("shaka.text.VttTextParser",fl),fl.prototype.parseInit=function(){},fl.prototype.parseInit=fl.prototype.parseInit,fl.prototype.parseMedia=function(t,e){var n=re(t);if(n=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m),!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new dt(2,2,2e3);var i=e.segmentStart;if(null==i&&(i=0,n[0].includes("X-TIMESTAMP-MAP"))){var r=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),o=n[0].match(/MPEGTS:(\d+)/m);if(r&&o){if(null==(i=dl(new Or(r[1]))))throw new dt(2,2,2e3);i=e.periodStart+(Number(o[1])/9e4-i)}}o=[];var a=n[0].split("\n");for(r=1;r<a.length;r++)if(/^Region:/.test(a[r])){var s=new Or(a[r]),u=new un;Rr(s),Ir(s);for(var c=Rr(s);c;){var l;t:{var f=u,h=c;if(l=/^id=(.*)$/.exec(h))f.id=l[1];else if(l=/^width=(\d{1,2}|100)%$/.exec(h))f.width=Number(l[1]);else if(l=/^lines=(\d+)$/.exec(h))f.height=Number(l[1]),f.heightUnits=2;else if(l=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(h))f.regionAnchorX=Number(l[1]),f.regionAnchorY=Number(l[2]);else if(l=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(h))f.viewportAnchorX=Number(l[1]),f.viewportAnchorY=Number(l[2]);else{if(!/^scroll=up$/.exec(h)){l=!1;break t}f.scroll="up"}l=!0}l||G.m("VTT parser encountered an invalid VTTRegion setting: ",c," The setting will be ignored."),Ir(s),c=Rr(s)}o.push(u)}for(r=[],s=1;s<n.length;s++){if(l=a=n[s].split("\n"),f=i,a=o,1==l.length&&!l[0]||/^NOTE($|[ \t])/.test(l[0])||"STYLE"==l[0])a=null;else{u=null,l[0].includes("--\x3e")||(u=l[0],l.splice(0,1)),h=dl(c=new Or(l[0]));var d=Dr(c,/[ \t]+--\x3e[ \t]+/g),p=dl(c);if(null==h||null==d||null==p)throw new dt(2,2,2001);for(l=new We(h+f,p+f,l.slice(1).join("\n").trim()),Ir(c),f=Rr(c);f;)hl(l,f,a)||G.m("VTT parser encountered an invalid VTT setting: ",f," The setting will be ignored."),Ir(c),f=Rr(c);null!=u&&(l.id=u),a=l}a&&r.push(a)}return r},fl.prototype.parseMedia=fl.prototype.parseMedia,hn["text/vtt"]=fl,hn['text/vtt; codecs="vtt"']=fl,H("shaka.text.Mp4VttParser",pl),pl.prototype.parseInit=function(t){var e=!1;if((new Ni).L("moov",Oi).L("trak",Oi).L("mdia",Oi).ia("mdhd",function(t){0==t.version?(t.reader.P(4),t.reader.P(4),this.a=t.reader.I(),t.reader.P(4)):(t.reader.P(8),t.reader.P(8),this.a=t.reader.I(),t.reader.P(8)),t.reader.P(4)}.bind(this)).L("minf",Oi).L("stbl",Oi).ia("stsd",Ii).L("wvtt",(function(){e=!0})).parse(t),!this.a)throw new dt(2,2,2008);if(!e)throw new dt(2,2,2008)},pl.prototype.parseInit=pl.prototype.parseInit,pl.prototype.parseMedia=function(t,e){var n=this;if(!this.a)throw G.error("No init segment for MP4+VTT!"),new dt(2,2,2008);var i,r=0,o=[],a=[],s=!1,u=!1,c=!1,l=null;if((new Ni).L("moof",Oi).L("traf",Oi).ia("tfdt",(function(t){s=!0,r=0==t.version?t.reader.I():t.reader.Jb()})).ia("tfhd",(function(t){var e=t.flags;(t=t.reader).P(4),1&e&&t.P(8),2&e&&t.P(4),l=8&e?t.I():null})).ia("trun",(function(t){u=!0;var e=t.version,n=t.flags,i=(t=t.reader).I();1&n&&t.P(4),4&n&&t.P(4);for(var r=[],a=0;a<i;a++){var s={duration:null,sampleSize:null,Md:null};256&n&&(s.duration=t.I()),512&n&&(s.sampleSize=t.I()),1024&n&&t.P(4),2048&n&&(s.Md=0==e?t.I():t.xe()),r.push(s)}o=r})).L("mdat",Di((function(t){c=!0,i=t}))).parse(t),!c&&!s&&!u)throw new dt(2,2,2008);var f=r,h=new Ai(new DataView(i.buffer,i.byteOffset,i.byteLength),0);return o.forEach((function(t){var i=t.duration||l,o=t.Md?r+t.Md:f;f=o+(i||0);var s=0;do{var u=h.I();s+=u;var c=h.I(),d=null;"vttc"==(c=Li(c))?8<u&&(d=h.fb(u-8)):("vtte"!=c&&G.error("Unknown box "+c+"! Skipping!"),h.P(u-8)),i?d&&a.push(ml(d,e.periodStart+o/n.a,e.periodStart+f/n.a)):G.error("WVTT sample duration unknown, and no default found!")}while(t.sampleSize&&s<t.sampleSize)})),a.filter(Be.Ma)},pl.prototype.parseMedia=pl.prototype.parseMedia,hn['application/mp4; codecs="wvtt"']=pl,H("shaka.util.Dom.createHTMLElement",(function(t){return document.createElement(t)})),H("shaka.util.Dom.createVideoElement",(function(){var t=document.createElement("video");return t.muted=!0,t.width=600,t.height=400,t})),H("shaka.util.Dom.asHTMLElement",(function(t){return t})),H("shaka.util.Dom.asHTMLMediaElement",(function(t){return t})),H("shaka.util.Dom.removeAllChildren",(function(t){for(;t.firstChild;)t.removeChild(t.firstChild)})),H("EmeEncryptionSchemePolyfill",vl),vl.install=gl,H("McEncryptionSchemePolyfill",xl),xl.install=Sl,kl.prototype.getConfiguration=function(){var t=this.b.getConfiguration();if(t.videoCapabilities)for(var e=h(t.videoCapabilities),n=e.next();!n.done;n=e.next())n.value.encryptionScheme=this.a;if(t.audioCapabilities)for(n=(e=h(t.audioCapabilities)).next();!n.done;n=e.next())n.value.encryptionScheme=this.a;return t},kl.prototype.createMediaKeys=function(){return this.b.createMediaKeys()},H("EncryptionSchemePolyfills",Al),Al.install=_l,void 0!==n&&n.$e&&(n.$e=Al)}.call(i,n,n,void 0),i.shaka)e[r]=i.shaka[r]}()}).call(this,n(5))},function(t,e,n){"use strict";n.r(e);n(19);var i=n(7);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var o=n(8);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);var a=n(9);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var s=n(10);for(var r in s)"default"!==r&&function(t){n.d(e,t,(function(){return s[t]}))}(r);var u=n(11);for(var r in u)"default"!==r&&function(t){n.d(e,t,(function(){return u[t]}))}(r);n(12);var c=n(13);for(var r in c)"default"!==r&&function(t){n.d(e,t,(function(){return c[t]}))}(r);var l=n(14);for(var r in l)"default"!==r&&function(t){n.d(e,t,(function(){return l[t]}))}(r);var f=n(15);for(var r in f)"default"!==r&&function(t){n.d(e,t,(function(){return f[t]}))}(r);var h=n(16);for(var r in h)"default"!==r&&function(t){n.d(e,t,(function(){return h[t]}))}(r);n(18);var d=n(17);for(var r in d)"default"!==r&&function(t){n.d(e,t,(function(){return d[t]}))}(r)},function(t,e,n){var i,r,o;
/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(1),n(24),n(26),n(27),n(28),n(29),n(30),n(2),n(6)],void 0===(o="function"==typeof(i=function(t){return t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var n=this.options;return!(this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(e),!this.handle||(this._blurActiveElement(e),this._blockFrames(!0===n.iframeFix?"iframe":n.iframeFix),0)))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map((function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var n=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(n).length||t.ui.safeBlur(n)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter((function(){return"fixed"===t(this).css("position")})).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(!1===this._trigger("drag",e,i))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==n._trigger("stop",e)&&n._clear()})):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper),r=i?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,r=this.options,o=this.document[0];this.relativeContainer=null,r.containment?"window"!==r.containment?"document"!==r.containment?r.containment.constructor!==Array?("parent"===r.containment&&(r.containment=this.helper[0].parentNode),(i=(n=t(r.containment))[0])&&(e=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n)):this.containment=r.containment:this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(t,e){var n,i,r,o,a=this.options,s=this._isRootNode(this.scrollParent[0]),u=t.pageX,c=t.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(u=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(u=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),a.grid&&(r=a.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,c=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-a.grid[1]:r+a.grid[1]:r,o=a.grid[0]?this.originalPageX+Math.round((u-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,u=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(u=this.originalPageX),"x"===a.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:u-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n,i){var r=t.extend({},n,{item:i.element});i.sortables=[],t(i.options.connectToSortable).each((function(){var n=t(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",e,r))}))},stop:function(e,n,i){var r=t.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,t.each(i.sortables,(function(){this.isOver?(this.isOver=0,i.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(e),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",e,r))}))},drag:function(e,n,i){t.each(i.sortables,(function(){var r=!1,o=this;o.positionAbs=i.positionAbs,o.helperProportions=i.helperProportions,o.offset.click=i.offset.click,o._intersectsWith(o.containerCache)&&(r=!0,t.each(i.sortables,(function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(r=!1),r}))),r?(o.isOver||(o.isOver=1,i._parent=n.helper.parent(),o.currentItem=n.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return n.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=i.offset.click.top,o.offset.click.left=i.offset.click.left,o.offset.parent.left-=i.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=i.offset.parent.top-o.offset.parent.top,i._trigger("toSortable",e),i.dropped=o.element,t.each(i.sortables,(function(){this.refreshPositions()})),i.currentItem=i.element,o.fromOutside=i),o.currentItem&&(o._mouseDrag(e),n.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(e),n.position=i._generatePosition(e,!0),i._trigger("fromSortable",e),i.dropped=!1,t.each(i.sortables,(function(){this.refreshPositions()})))}))}}),t.ui.plugin.add("draggable","cursor",{start:function(e,n,i){var r=t("body"),o=i.options;r.css("cursor")&&(o._cursor=r.css("cursor")),r.css("cursor",o.cursor)},stop:function(e,n,i){var r=i.options;r._cursor&&t("body").css("cursor",r._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n,i){var r=t(n.helper),o=i.options;r.css("opacity")&&(o._opacity=r.css("opacity")),r.css("opacity",o.opacity)},stop:function(e,n,i){var r=i.options;r._opacity&&t(n.helper).css("opacity",r._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(e,n,i){var r=i.options,o=!1,a=i.scrollParentNotHidden[0],s=i.document[0];a!==s&&"HTML"!==a.tagName?(r.axis&&"x"===r.axis||(i.overflowOffset.top+a.offsetHeight-e.pageY<r.scrollSensitivity?a.scrollTop=o=a.scrollTop+r.scrollSpeed:e.pageY-i.overflowOffset.top<r.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(i.overflowOffset.left+a.offsetWidth-e.pageX<r.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+r.scrollSpeed:e.pageX-i.overflowOffset.left<r.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(e.pageY-t(s).scrollTop()<r.scrollSensitivity?o=t(s).scrollTop(t(s).scrollTop()-r.scrollSpeed):t(window).height()-(e.pageY-t(s).scrollTop())<r.scrollSensitivity&&(o=t(s).scrollTop(t(s).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(e.pageX-t(s).scrollLeft()<r.scrollSensitivity?o=t(s).scrollLeft(t(s).scrollLeft()-r.scrollSpeed):t(window).width()-(e.pageX-t(s).scrollLeft())<r.scrollSensitivity&&(o=t(s).scrollLeft(t(s).scrollLeft()+r.scrollSpeed)))),!1!==o&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,n,i){var r=i.options;i.snapElements=[],t(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each((function(){var e=t(this),n=e.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:n.top,left:n.left})}))},drag:function(e,n,i){var r,o,a,s,u,c,l,f,h,d,p=i.options,m=p.snapTolerance,v=n.offset.left,g=v+i.helperProportions.width,y=n.offset.top,b=y+i.helperProportions.height;for(h=i.snapElements.length-1;h>=0;h--)c=(u=i.snapElements[h].left-i.margins.left)+i.snapElements[h].width,f=(l=i.snapElements[h].top-i.margins.top)+i.snapElements[h].height,g<u-m||v>c+m||b<l-m||y>f+m||!t.contains(i.snapElements[h].item.ownerDocument,i.snapElements[h].item)?(i.snapElements[h].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=!1):("inner"!==p.snapMode&&(r=Math.abs(l-b)<=m,o=Math.abs(f-y)<=m,a=Math.abs(u-g)<=m,s=Math.abs(c-v)<=m,r&&(n.position.top=i._convertPositionTo("relative",{top:l-i.helperProportions.height,left:0}).top),o&&(n.position.top=i._convertPositionTo("relative",{top:f,left:0}).top),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:u-i.helperProportions.width}).left),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c}).left)),d=r||o||a||s,"outer"!==p.snapMode&&(r=Math.abs(l-y)<=m,o=Math.abs(f-b)<=m,a=Math.abs(u-v)<=m,s=Math.abs(c-g)<=m,r&&(n.position.top=i._convertPositionTo("relative",{top:l,left:0}).top),o&&(n.position.top=i._convertPositionTo("relative",{top:f-i.helperProportions.height,left:0}).top),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:u}).left),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left)),!i.snapElements[h].snapping&&(r||o||a||s||d)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=r||o||a||s||d)}}),t.ui.plugin.add("draggable","stack",{start:function(e,n,i){var r,o=i.options,a=t.makeArray(t(o.stack)).sort((function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)}));a.length&&(r=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each((function(e){t(this).css("zIndex",r+e)})),this.css("zIndex",r+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n,i){var r=t(n.helper),o=i.options;r.css("zIndex")&&(o._zIndex=r.css("zIndex")),r.css("zIndex",o.zIndex)},stop:function(e,n,i){var r=i.options;r._zIndex&&t(n.helper).css("zIndex",r._zIndex)}}),t.ui.draggable})?i.apply(e,r):i)||(t.exports=o)},function(t,e,n){var i,r,o;
/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(1),n(25),n(2),n(6)],void 0===(o="function"==typeof(i=function(t){var e=!1;return t(document).on("mouseup",(function(){e=!1})),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).on("click."+this.widgetName,(function(n){if(!0===t.data(n.target,e.widgetName+".preventClickEvent"))return t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!e){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1===n.which,o=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&t(n.target).closest(this.options.cancel).length;return!(r&&!o&&this._mouseCapture(n)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=!1!==this._mouseStart(n),!this._mouseStarted)?(n.preventDefault(),0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,0)))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&t.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,e=!1,n.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})?i.apply(e,r):i)||(t.exports=o)},function(t,e,n){var i,r,o;r=[n(1),n(2)],void 0===(o="function"==typeof(i=function(t){return t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})?i.apply(e,r):i)||(t.exports=o)},function(t,e,n){var i,r,o;
/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(1),n(2)],void 0===(o="function"==typeof(i=function(t){return t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo((function(e){return function(n){return!!t.data(n,e)}})):function(e,n,i){return!!t.data(e,i[3])}})})?i.apply(e,r):i)||(t.exports=o)},function(t,e,n){var i,r,o;r=[n(1),n(2)],void 0===(o="function"==typeof(i=function(t){return t.ui.plugin={add:function(e,n,i){var r,o=t.ui[e].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(t,e,n,i){var r,o=t.plugins[e];if(o&&(i||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(r=0;r<o.length;r++)t.options[o[r][0]]&&o[r][1].apply(t.element,n)}}})?i.apply(e,r):i)||(t.exports=o)},function(t,e,n){var i,r,o;r=[n(1),n(2)],void 0===(o="function"==typeof(i=function(t){return t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(n){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e}})?i.apply(e,r):i)||(t.exports=o)},function(t,e,n){var i,r,o;r=[n(1),n(2)],void 0===(o="function"==typeof(i=function(t){return t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")}})?i.apply(e,r):i)||(t.exports=o)},function(t,e,n){var i,r,o;
/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(1),n(2)],void 0===(o="function"==typeof(i=function(t){return t.fn.scrollParent=function(e){var n=this.css("position"),i="absolute"===n,r=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter((function(){var e=t(this);return(!i||"static"!==e.css("position"))&&r.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))})).eq(0);return"fixed"!==n&&o.length?o:t(this[0].ownerDocument||document)}})?i.apply(e,r):i)||(t.exports=o)},function(t,e,n){var i=n(32),r=n(33),o=n(4),a=n(3),s=n(34),u=function(t,e){this.init(t,e)},c={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},l={passive:!0};u.prototype.init=function(t,e){var n=this;this.svg=t,this.defs=t.querySelector("defs"),a.setupSvgAttributes(this.svg),this.options=o.extend(o.extend({},c),e),this.state="none";var i=a.getBoundingClientRectNormalized(t);this.width=i.width,this.height=i.height,this.viewport=s(a.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(t,e){if(n.viewport&&n.options.beforeZoom)return n.options.beforeZoom(t,e)},onZoom:function(t){if(n.viewport&&n.options.onZoom)return n.options.onZoom(t)},beforePan:function(t,e){if(n.viewport&&n.options.beforePan)return n.options.beforePan(t,e)},onPan:function(t){if(n.viewport&&n.options.onPan)return n.options.onPan(t)},onUpdatedCTM:function(t){if(n.viewport&&n.options.onUpdatedCTM)return n.options.onUpdatedCTM(t)}});var u=this.getPublicInstance();u.setBeforeZoom(this.options.beforeZoom),u.setOnZoom(this.options.onZoom),u.setBeforePan(this.options.beforePan),u.setOnPan(this.options.onPan),u.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&r.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()},u.prototype.setupHandlers=function(){var t=this,e=null;if(this.eventListeners={mousedown:function(n){var i=t.handleMouseDown(n,e);return e=n,i},touchstart:function(n){var i=t.handleMouseDown(n,e);return e=n,i},mouseup:function(e){return t.handleMouseUp(e)},touchend:function(e){return t.handleMouseUp(e)},mousemove:function(e){return t.handleMouseMove(e)},touchmove:function(e){return t.handleMouseMove(e)},mouseleave:function(e){return t.handleMouseUp(e)},touchleave:function(e){return t.handleMouseUp(e)},touchcancel:function(e){return t.handleMouseUp(e)}},null!=this.options.customEventsHandler){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var n=this.options.customEventsHandler.haltEventListeners;if(n&&n.length)for(var i=n.length-1;i>=0;i--)this.eventListeners.hasOwnProperty(n[i])&&delete this.eventListeners[n[i]]}for(var r in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(r,this.eventListeners[r],!this.options.preventMouseEventsDefault&&l);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())},u.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var t=this;this.wheelListener=function(e){return t.handleMouseWheel(e)};var e=!this.options.preventMouseEventsDefault;i.on(this.options.eventsListenerElement||this.svg,this.wheelListener,e),this.options.mouseWheelZoomEnabled=!0}},u.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var t=!this.options.preventMouseEventsDefault;i.off(this.options.eventsListenerElement||this.svg,this.wheelListener,t),this.options.mouseWheelZoomEnabled=!1}},u.prototype.handleMouseWheel=function(t){if(this.options.zoomEnabled&&"none"===this.state){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1);var e=t.deltaY||1,n=Date.now()-this.lastMouseWheelEventTime,i=3+Math.max(0,30-n);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in t&&0===t.deltaMode&&t.wheelDelta&&(e=0===t.deltaY?0:Math.abs(t.wheelDelta)/t.deltaY),e=-.3<e&&e<.3?e:(e>0?1:-1)*Math.log(Math.abs(e)+10)/i;var r=this.svg.getScreenCTM().inverse(),o=a.getEventPoint(t,this.svg).matrixTransform(r),s=Math.pow(1+this.options.zoomScaleSensitivity,-1*e);this.zoomAtPoint(s,o)}},u.prototype.zoomAtPoint=function(t,e,n){var i=this.viewport.getOriginalState();n?(t=Math.max(this.options.minZoom*i.zoom,Math.min(this.options.maxZoom*i.zoom,t)),t/=this.getZoom()):this.getZoom()*t<this.options.minZoom*i.zoom?t=this.options.minZoom*i.zoom/this.getZoom():this.getZoom()*t>this.options.maxZoom*i.zoom&&(t=this.options.maxZoom*i.zoom/this.getZoom());var r=this.viewport.getCTM(),o=e.matrixTransform(r.inverse()),a=this.svg.createSVGMatrix().translate(o.x,o.y).scale(t).translate(-o.x,-o.y),s=r.multiply(a);s.a!==r.a&&this.viewport.setCTM(s)},u.prototype.zoom=function(t,e){this.zoomAtPoint(t,a.getSvgCenterPoint(this.svg,this.width,this.height),e)},u.prototype.publicZoom=function(t,e){e&&(t=this.computeFromRelativeZoom(t)),this.zoom(t,e)},u.prototype.publicZoomAtPoint=function(t,e,n){if(n&&(t=this.computeFromRelativeZoom(t)),"SVGPoint"!==o.getType(e)){if(!("x"in e)||!("y"in e))throw new Error("Given point is invalid");e=a.createSVGPoint(this.svg,e.x,e.y)}this.zoomAtPoint(t,e,n)},u.prototype.getZoom=function(){return this.viewport.getZoom()},u.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()},u.prototype.computeFromRelativeZoom=function(t){return t*this.viewport.getOriginalState().zoom},u.prototype.resetZoom=function(){var t=this.viewport.getOriginalState();this.zoom(t.zoom,!0)},u.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())},u.prototype.reset=function(){this.resetZoom(),this.resetPan()},u.prototype.handleDblClick=function(t){var e;if((this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),this.options.controlIconsEnabled)&&(t.target.getAttribute("class")||"").indexOf("svg-pan-zoom-control")>-1)return!1;e=t.shiftKey?1/(2*(1+this.options.zoomScaleSensitivity)):2*(1+this.options.zoomScaleSensitivity);var n=a.getEventPoint(t,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(e,n)},u.prototype.handleMouseDown=function(t,e){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),o.mouseAndTouchNormalize(t,this.svg),this.options.dblClickZoomEnabled&&o.isDblClick(t,e)?this.handleDblClick(t):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=a.getEventPoint(t,this.svg).matrixTransform(this.firstEventCTM.inverse()))},u.prototype.handleMouseMove=function(t){if(this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),"pan"===this.state&&this.options.panEnabled){var e=a.getEventPoint(t,this.svg).matrixTransform(this.firstEventCTM.inverse()),n=this.firstEventCTM.translate(e.x-this.stateOrigin.x,e.y-this.stateOrigin.y);this.viewport.setCTM(n)}},u.prototype.handleMouseUp=function(t){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),"pan"===this.state&&(this.state="none")},u.prototype.fit=function(){var t=this.viewport.getViewBox(),e=Math.min(this.width/t.width,this.height/t.height);this.zoom(e,!0)},u.prototype.contain=function(){var t=this.viewport.getViewBox(),e=Math.max(this.width/t.width,this.height/t.height);this.zoom(e,!0)},u.prototype.center=function(){var t=this.viewport.getViewBox(),e=.5*(this.width-(t.width+2*t.x)*this.getZoom()),n=.5*(this.height-(t.height+2*t.y)*this.getZoom());this.getPublicInstance().pan({x:e,y:n})},u.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()},u.prototype.pan=function(t){var e=this.viewport.getCTM();e.e=t.x,e.f=t.y,this.viewport.setCTM(e)},u.prototype.panBy=function(t){var e=this.viewport.getCTM();e.e+=t.x,e.f+=t.y,this.viewport.setCTM(e)},u.prototype.getPan=function(){var t=this.viewport.getState();return{x:t.x,y:t.y}},u.prototype.resize=function(){var t=a.getBoundingClientRectNormalized(this.svg);this.width=t.width,this.height=t.height;var e=this.viewport;e.options.width=this.width,e.options.height=this.height,e.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())},u.prototype.destroy=function(){var t=this;for(var e in this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,null!=this.options.customEventsHandler&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()}),this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(e,this.eventListeners[e],!this.options.preventMouseEventsDefault&&l);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),this.reset(),f=f.filter((function(e){return e.svg!==t.svg})),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}},u.prototype.getPublicInstance=function(){var t=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return t.options.panEnabled=!0,t.pi},disablePan:function(){return t.options.panEnabled=!1,t.pi},isPanEnabled:function(){return!!t.options.panEnabled},pan:function(e){return t.pan(e),t.pi},panBy:function(e){return t.panBy(e),t.pi},getPan:function(){return t.getPan()},setBeforePan:function(e){return t.options.beforePan=null===e?null:o.proxy(e,t.publicInstance),t.pi},setOnPan:function(e){return t.options.onPan=null===e?null:o.proxy(e,t.publicInstance),t.pi},enableZoom:function(){return t.options.zoomEnabled=!0,t.pi},disableZoom:function(){return t.options.zoomEnabled=!1,t.pi},isZoomEnabled:function(){return!!t.options.zoomEnabled},enableControlIcons:function(){return t.options.controlIconsEnabled||(t.options.controlIconsEnabled=!0,r.enable(t)),t.pi},disableControlIcons:function(){return t.options.controlIconsEnabled&&(t.options.controlIconsEnabled=!1,r.disable(t)),t.pi},isControlIconsEnabled:function(){return!!t.options.controlIconsEnabled},enableDblClickZoom:function(){return t.options.dblClickZoomEnabled=!0,t.pi},disableDblClickZoom:function(){return t.options.dblClickZoomEnabled=!1,t.pi},isDblClickZoomEnabled:function(){return!!t.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return t.enableMouseWheelZoom(),t.pi},disableMouseWheelZoom:function(){return t.disableMouseWheelZoom(),t.pi},isMouseWheelZoomEnabled:function(){return!!t.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(e){return t.options.zoomScaleSensitivity=e,t.pi},setMinZoom:function(e){return t.options.minZoom=e,t.pi},setMaxZoom:function(e){return t.options.maxZoom=e,t.pi},setBeforeZoom:function(e){return t.options.beforeZoom=null===e?null:o.proxy(e,t.publicInstance),t.pi},setOnZoom:function(e){return t.options.onZoom=null===e?null:o.proxy(e,t.publicInstance),t.pi},zoom:function(e){return t.publicZoom(e,!0),t.pi},zoomBy:function(e){return t.publicZoom(e,!1),t.pi},zoomAtPoint:function(e,n){return t.publicZoomAtPoint(e,n,!0),t.pi},zoomAtPointBy:function(e,n){return t.publicZoomAtPoint(e,n,!1),t.pi},zoomIn:function(){return this.zoomBy(1+t.options.zoomScaleSensitivity),t.pi},zoomOut:function(){return this.zoomBy(1/(1+t.options.zoomScaleSensitivity)),t.pi},getZoom:function(){return t.getRelativeZoom()},setOnUpdatedCTM:function(e){return t.options.onUpdatedCTM=null===e?null:o.proxy(e,t.publicInstance),t.pi},resetZoom:function(){return t.resetZoom(),t.pi},resetPan:function(){return t.resetPan(),t.pi},reset:function(){return t.reset(),t.pi},fit:function(){return t.fit(),t.pi},contain:function(){return t.contain(),t.pi},center:function(){return t.center(),t.pi},updateBBox:function(){return t.updateBBox(),t.pi},resize:function(){return t.resize(),t.pi},getSizes:function(){return{width:t.width,height:t.height,realZoom:t.getZoom(),viewBox:t.viewport.getViewBox()}},destroy:function(){return t.destroy(),t.pi}}),this.publicInstance};var f=[];t.exports=function(t,e){var n=o.getSvg(t);if(null===n)return null;for(var i=f.length-1;i>=0;i--)if(f[i].svg===n)return f[i].instance.getPublicInstance();return f.push({svg:n,instance:new u(n,e)}),f[f.length-1].instance.getPublicInstance()}},function(t,e){t.exports=function(){var t,e,n,i="",r=[],o={passive:!0};function a(e,a,s,u){var c;c="wheel"===n?s:function(t,e){var i=function(t){!t&&(t=window.event);var i={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1}};return"mousewheel"==n?(i.deltaY=-1/40*t.wheelDelta,t.wheelDeltaX&&(i.deltaX=-1/40*t.wheelDeltaX)):i.deltaY=t.detail,e(i)};return r.push({element:t,fn:i}),i}(e,s),e[t](i+a,c,!!u&&o)}function s(t,a,s,u){var c;c="wheel"===n?s:function(t){for(var e=0;e<r.length;e++)if(r[e].element===t)return r[e].fn;return function(){}}(t),t[e](i+a,c,!!u&&o),function(t){for(var e=0;e<r.length;e++)if(r[e].element===t)return r.splice(e,1)}(t)}return window.addEventListener?(t="addEventListener",e="removeEventListener"):(t="attachEvent",e="detachEvent",i="on"),n="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",{on:function(t,e,i){a(t,n,e,i),"DOMMouseScroll"==n&&a(t,"MozMousePixelScroll",e,i)},off:function(t,e,i){s(t,n,e,i),"DOMMouseScroll"==n&&s(t,"MozMousePixelScroll",e,i)}}}()},function(t,e,n){var i=n(3);t.exports={enable:function(t){var e=t.svg.querySelector("defs");if(e||(e=document.createElementNS(i.svgNS,"defs"),t.svg.appendChild(e)),!e.querySelector("style#svg-pan-zoom-controls-styles")){var n=document.createElementNS(i.svgNS,"style");n.setAttribute("id","svg-pan-zoom-controls-styles"),n.setAttribute("type","text/css"),n.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",e.appendChild(n)}var r=document.createElementNS(i.svgNS,"g");r.setAttribute("id","svg-pan-zoom-controls"),r.setAttribute("transform","translate("+(t.width-70)+" "+(t.height-76)+") scale(0.75)"),r.setAttribute("class","svg-pan-zoom-control"),r.appendChild(this._createZoomIn(t)),r.appendChild(this._createZoomReset(t)),r.appendChild(this._createZoomOut(t)),t.svg.appendChild(r),t.controlIcons=r},_createZoomIn:function(t){var e=document.createElementNS(i.svgNS,"g");e.setAttribute("id","svg-pan-zoom-zoom-in"),e.setAttribute("transform","translate(30.5 5) scale(0.015)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",(function(){t.getPublicInstance().zoomIn()}),!1),e.addEventListener("touchstart",(function(){t.getPublicInstance().zoomIn()}),!1);var n=document.createElementNS(i.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(n);var r=document.createElementNS(i.svgNS,"path");return r.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),r.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(r),e},_createZoomReset:function(t){var e=document.createElementNS(i.svgNS,"g");e.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),e.setAttribute("transform","translate(5 35) scale(0.4)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",(function(){t.getPublicInstance().reset()}),!1),e.addEventListener("touchstart",(function(){t.getPublicInstance().reset()}),!1);var n=document.createElementNS(i.svgNS,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","182"),n.setAttribute("height","58"),n.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(n);var r=document.createElementNS(i.svgNS,"path");r.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),r.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(r);var o=document.createElementNS(i.svgNS,"path");return o.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),o.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(o),e},_createZoomOut:function(t){var e=document.createElementNS(i.svgNS,"g");e.setAttribute("id","svg-pan-zoom-zoom-out"),e.setAttribute("transform","translate(30.5 70) scale(0.015)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",(function(){t.getPublicInstance().zoomOut()}),!1),e.addEventListener("touchstart",(function(){t.getPublicInstance().zoomOut()}),!1);var n=document.createElementNS(i.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(n);var r=document.createElementNS(i.svgNS,"path");return r.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),r.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(r),e},disable:function(t){t.controlIcons&&(t.controlIcons.parentNode.removeChild(t.controlIcons),t.controlIcons=null)}}},function(t,e,n){var i=n(3),r=n(4),o=function(t,e){this.init(t,e)};o.prototype.init=function(t,e){this.viewport=t,this.options=e,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=r.proxy(this.updateCTM,this),this.requestAnimationFrame=r.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var n=this.processCTM();this.setCTM(n),this.updateCTM()},o.prototype.cacheViewBox=function(){var t=this.options.svg.getAttribute("viewBox");if(t){var e=t.split(/[\s\,]/).filter((function(t){return t})).map(parseFloat);this.viewBox.x=e[0],this.viewBox.y=e[1],this.viewBox.width=e[2],this.viewBox.height=e[3];var n=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=n,this.activeState.x=(this.options.width-this.viewBox.width*n)/2,this.activeState.y=(this.options.height-this.viewBox.height*n)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()},o.prototype.simpleViewBoxCache=function(){var t=this.viewport.getBBox();this.viewBox.x=t.x,this.viewBox.y=t.y,this.viewBox.width=t.width,this.viewBox.height=t.height},o.prototype.getViewBox=function(){return r.extend({},this.viewBox)},o.prototype.processCTM=function(){var t,e=this.getCTM();(this.options.fit||this.options.contain)&&(t=this.options.fit?Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),e.a=t,e.d=t,e.e=-this.viewBox.x*t,e.f=-this.viewBox.y*t);if(this.options.center){var n=.5*(this.options.width-(this.viewBox.width+2*this.viewBox.x)*e.a),i=.5*(this.options.height-(this.viewBox.height+2*this.viewBox.y)*e.a);e.e=n,e.f=i}return this.originalState.zoom=e.a,this.originalState.x=e.e,this.originalState.y=e.f,e},o.prototype.getOriginalState=function(){return r.extend({},this.originalState)},o.prototype.getState=function(){return r.extend({},this.activeState)},o.prototype.getZoom=function(){return this.activeState.zoom},o.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom},o.prototype.computeRelativeZoom=function(t){return t/this.originalState.zoom},o.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}},o.prototype.getCTM=function(){var t=this.options.svg.createSVGMatrix();return t.a=this.activeState.zoom,t.b=0,t.c=0,t.d=this.activeState.zoom,t.e=this.activeState.x,t.f=this.activeState.y,t},o.prototype.setCTM=function(t){var e=this.isZoomDifferent(t),n=this.isPanDifferent(t);if(e||n){if(e&&(!1===this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(t.a))?(t.a=t.d=this.activeState.zoom,e=!1):(this.updateCache(t),this.options.onZoom(this.getRelativeZoom()))),n){var i=this.options.beforePan(this.getPan(),{x:t.e,y:t.f}),o=!1,a=!1;!1===i?(t.e=this.getPan().x,t.f=this.getPan().y,o=a=!0):r.isObject(i)&&(!1===i.x?(t.e=this.getPan().x,o=!0):r.isNumber(i.x)&&(t.e=i.x),!1===i.y?(t.f=this.getPan().y,a=!0):r.isNumber(i.y)&&(t.f=i.y)),o&&a||!this.isPanDifferent(t)?n=!1:(this.updateCache(t),this.options.onPan(this.getPan()))}(e||n)&&this.updateCTMOnNextFrame()}},o.prototype.isZoomDifferent=function(t){return this.activeState.zoom!==t.a},o.prototype.isPanDifferent=function(t){return this.activeState.x!==t.e||this.activeState.y!==t.f},o.prototype.updateCache=function(t){this.activeState.zoom=t.a,this.activeState.x=t.e,this.activeState.y=t.f},o.prototype.pendingUpdate=!1,o.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))},o.prototype.updateCTM=function(){var t=this.getCTM();i.setCTM(this.viewport,t,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(t)},t.exports=function(t,e){return new o(t,e)}}]);